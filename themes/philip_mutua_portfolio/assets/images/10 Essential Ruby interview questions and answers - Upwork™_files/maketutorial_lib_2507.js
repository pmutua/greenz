/*!
 * WalkMe
 * http://www.walkme.com/
 *
 * Copyright 2012, WalkMe LTD
 */
window._walkmeInternals=window._walkmeInternals||{},_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeStart"),window.wmjQuery=mtjQuery,mtjQuery&&(mtjQuery.expr&&mtjQuery.expr.filters&&(mtjQuery.expr.filters.mt_hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!mtjQuery.support.reliableHiddenOffsets&&"none"===(e.style.display||mtjQuery.css(e,"display"))||"hidden"===mtjQuery.css(e,"visibility")},mtjQuery.expr.filters.mt_visible=function(e){return!mtjQuery.expr.filters.mt_hidden(e)},mtjQuery.expr.filters.wm_can_embed=function(e){var t=wmjQuery(e);return!t.hasClass("walkme-not-embed")&&"static"!=t.css("position")}),mtjQuery.trim=function(e){var t=/^\s+/,n=/\s+$/;return null==e?"":e.toString().replace(t,"").replace(n,"")}),function(e){function t(e){if(window._walkmeInternals.jQueryCompatability=window._walkmeInternals.jQueryCompatability||{},e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return void(_walkmeInternals.jQueryCompatability.wmIECorsSupport=!1);var t=/^(https?:)?\/\//i,n=/^get|post$/i,r=new RegExp("^(//|"+location.protocol+")","i");_walkmeInternals.jQueryCompatability.wmIECorsSupport=!0,e.ajaxTransport("* text html xml json",function(i,o,a){if(!(i.crossDomain&&i.async&&n.test(i.type)&&t.test(i.url)&&r.test(i.url)))return;var s=null;return{send:function(t,n){var r="",a=(o.dataType||"").toLowerCase();s=new XDomainRequest,/^\d+$/.test(o.timeout)&&(s.timeout=o.timeout),s.ontimeout=function(){n(500,"timeout")},s.onload=function(){var t="Content-Length: "+s.responseText.length+"\r\nContent-Type: "+s.contentType,r={code:200,message:"success"},i={text:s.responseText};try{if("html"===a||/text\/html/i.test(s.contentType))i.html=s.responseText;else if("json"===a||"text"!==a&&/\/json/i.test(s.contentType))try{i.json=e.parseJSON(s.responseText)}catch(o){r.code=500,r.message="parseerror"}else if("xml"===a||"text"!==a&&/\/xml/i.test(s.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(s.responseText)}catch(o){u=void 0}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+s.responseText;i.xml=u}}catch(l){throw l}finally{n(r.code,r.message,i,t)}},s.onprogress=function(){},s.onerror=function(){n(500,"error",{text:s.responseText})},o.data&&(r="string"===e.type(o.data)?o.data:e.param(o.data)),s.open(i.type,i.url),s.send(r)},abort:function(){s&&s.abort()}}})}e.extend({safeEach:function(t,n){return e.each(t,function(e,r){t.hasOwnProperty(e)&&n(e,r)})}}),e.fn.safeEach=function(t){return e.safeEach(this,t)},e.fn.important=function(t,n){var r=this;if("object"==typeof t)return e.safeEach(t,function(e,t){r.important(e,t)}),r;return r.safeEach(function(r,i){e(i).css(t,"").attr("style",function(e,r){var i=new RegExp("(^|;)\\s*"+t+"\\s*:[^;]*(;|$)","gi");return(r||"").replace(i,"$1").replace(/;$/gi,"")+";"+(void 0!=n?t+": "+n+" !important;":"")})})},e.fn.cssReset=function(t,r){if(!t)return;var i=this;if("object"==typeof t)return e.safeEach(t,function(e,t){i.cssReset(e,t)}),i;var o;return"string"==typeof r&&(o=r.indexOf("!important")>-1,r=e.trim(r.replace("!important",""))),i.safeEach(function(i,a){a.style[t]||a.style[n(t)]||(o?e(a).important(t,r):e(a).css(t,r))})};function n(e){return e.replace(/^-+$/g,"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})}e.fn.exist=function(){return!!this.length},e.fn.or=function(t,n){return this.length?this:e(t,n)},e.fn.allCss=function(){if(1!=this.length)return;var t={},n=this.attr("style");if(!n)return t;for(var r=n.split(";"),i=r.length-1;i>=0;i--){var o=r[i].split(":"),a=e.trim(o[0]);a&&(t[a]=e.trim(o[1]))}return t},e.extend(e.expr[":"],{textEquals:function(t,n,r){return e(t).text()==r[3]}}),e.fn.reduce=function(e,t){return this.each(function(n,r){t=e.apply(r,[t,r])}),t};function r(e){var t={},n=0,r=e.camelCase;e.camelCase=function(e){return void 0===t[e]&&(t[e]=r(e),++n>1e3&&(n=0,t={})),t[e]}}t(e),r(e)}(wmjQuery),function(e,t,n){n(e.wmjQuery,e,t)}(this,document,function(e,t,n,r){!function(e,t,n,r){var i,o,a="virtualMouseBindings",s="virtualTouchID",u="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),l="clientX clientY pageX pageY screenX screenY".split(" "),c=e.event.mouseHooks?e.event.mouseHooks.props:[],d=e.event.props.concat(c),p={},g=0,f=0,h=0,m=!1,v=[],S=!1,y=!1,E="addEventListener"in n,T=e(n),C=1,b=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function I(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function w(t,n){var i,o,a,s,u,c,p,g,f,h=t.type;if(t=e.Event(t),t.type=n,i=t.originalEvent,o=e.event.props,h.search(/^(mouse|click)/)>-1&&(o=d),i)for(p=o.length,s;p;)s=o[--p],t[s]=i[s];if(h.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),h.search(/^touch/)!==-1&&(a=I(i),h=a.touches,u=a.changedTouches,c=h&&h.length?h[0]:u&&u.length?u[0]:r))for(g=0,f=l.length;g<f;g++)s=l[g],t[s]=c[s];return t}function _(t){for(var n,r,i={};t;){n=e.data(t,a);for(r in n)n[r]&&(i[r]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function P(t,n){for(var r;t;){if(r=e.data(t,a),r&&(!n||r[n]))return t;t=t.parentNode}return null}function A(){y=!1}function k(){y=!0}function O(){b=0,v.length=0,S=!1,k()}function D(){A()}function N(){x(),g=setTimeout(function(){g=0,O()},e.vmouse.resetTimerDuration)}function x(){g&&(clearTimeout(g),g=0)}function L(t,n,r){var i;return(r&&r[t]||!r&&P(n.target,t))&&(i=w(n,t),e(n.target).trigger(i)),i}function M(t){var n,r=e.data(t.target,s);S||b&&b===r||(n=L("v"+t.type,t),n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation()))}function F(t){var n,r,i,o=I(t).touches;o&&1===o.length&&(n=t.target,r=_(n),r.hasVirtualBinding&&(b=C++,e.data(n,s,b),x(),D(),m=!1,i=I(t).touches[0],f=i.pageX,h=i.pageY,L("vmouseover",t,r),L("vmousedown",t,r)))}function R(e){if(y)return;m||L("vmousecancel",e,_(e.target)),m=!0,N()}function B(t){if(y)return;var n=I(t).touches[0],r=m,i=e.vmouse.moveDistanceThreshold,o=_(t.target);m=m||Math.abs(n.pageX-f)>i||Math.abs(n.pageY-h)>i,m&&!r&&L("vmousecancel",t,o),L("vmousemove",t,o),N()}function U(e){if(y)return;k();var t,n,r=_(e.target);L("vmouseup",e,r),m||(t=L("vclick",e,r),t&&t.isDefaultPrevented()&&(n=I(e).changedTouches[0],v.push({touchID:b,x:n.clientX,y:n.clientY}),S=!0)),L("vmouseout",e,r),m=!1,N()}function W(t){var n,r=e.data(t,a);if(r)for(n in r)if(r[n])return!0;return!1}function V(){}function G(t){var n=t.substr(1);return{setup:function(){W(this)||e.data(this,a,{});var r=e.data(this,a);r[t]=!0,p[t]=(p[t]||0)+1,1===p[t]&&T.bind(n,M),e(this).bind(n,V),E&&(p.touchstart=(p.touchstart||0)+1,1===p.touchstart&&T.bind("touchstart",F).bind("touchend",U).bind("touchmove",B).bind("scroll",R))},teardown:function(){--p[t],p[t]||T.unbind(n,M),E&&(--p.touchstart,p.touchstart||T.unbind("touchstart",F).unbind("touchmove",B).unbind("touchend",U).unbind("scroll",R));var r=e(this),i=e.data(this,a);i&&(i[t]=!1),r.unbind(n,V),W(this)||r.removeData(a)}}}for(o=0;o<u.length;o++)e.event.special[u[o]]=G(u[o]);if(E){var H=function(t){var n,r,o,a,u,l,c=v.length,d=t.target;if(c)for(n=t.clientX,r=t.clientY,i=e.vmouse.clickDistanceThreshold,o=d;o;){for(a=0;a<c;a++)if(u=v[a],l=0,o===d&&Math.abs(u.x-n)<i&&Math.abs(u.y-r)<i||e.data(o,s)===u.touchID)return t.preventDefault(),void t.stopPropagation();o=o.parentNode}};n.addEventListener("click",H,!0),wmjQuery(t._walkmeInternals).bind("removeWalkMe",function(){n.removeEventListener("click",H,!0)})}}(e,t,n),function(e){e.mobile={}}(e),function(e,t){var r={touch:"ontouchend"in n};e.mobile.support=e.mobile.support||{},e.extend(e.support,r),e.extend(e.mobile.support,r)}(e),function(e,t,r){var i=e(n),o=e.mobile.support.touch,a="touchmove scroll",s=o?"touchstart":"mousedown",u=o?"touchend":"mouseup",l=o?"touchmove":"mousemove";e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,n){e.fn[n]=function(e){return e?this.bind(n,e):this.trigger(n)},e.attrFn&&(e.attrFn[n]=!0)});function c(t,n,i,o){var a=i.type;i.type=n,o?e.event.trigger(i,r,t):e.event.dispatch.call(t,i),i.type=a}e.event.special.scrollstart={enabled:!0,setup:function(){var t,n,r=this,i=e(r);function o(e,n){t=n,c(r,t?"scrollstart":"scrollstop",e)}i.bind(a,function(r){if(!e.event.special.scrollstart.enabled)return;t||o(r,!0),clearTimeout(n),n=setTimeout(function(){o(r,!1)},50)})},teardown:function(){e(this).unbind(a)}},e.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var t=this,n=e(t),r=!1;n.bind("vmousedown",function(o){if(r=!1,o.which&&1!==o.which)return!1;var a,s=o.target;function u(){clearTimeout(a)}function l(){u(),n.unbind("vclick",d).unbind("vmouseup",u),i.unbind("vmousecancel",l)}function d(e){l(),r||s!==e.target?r&&e.preventDefault():c(t,"tap",e)}n.bind("vmouseup",u).bind("vclick",d),i.bind("vmousecancel",l),a=setTimeout(function(){e.event.special.tap.emitTapOnTaphold||(r=!0),c(t,"taphold",e.Event("taphold",{target:s}))},e.event.special.tap.tapholdThreshold)})},teardown:function(){e(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),i.unbind("vmousecancel")}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var n=t.pageXOffset,r=t.pageYOffset,i=e.clientX,o=e.clientY;return 0===e.pageY&&Math.floor(o)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(i)>Math.floor(e.pageX)?(i-=n,o-=r):(o<e.pageY-r||i<e.pageX-n)&&(i=e.pageX-n,o=e.pageY-r),{x:i,y:o}},start:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y],origin:e(t.target)}},stop:function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,r=e.event.special.swipe.getLocation(n);return{time:(new Date).getTime(),coords:[r.x,r.y]}},handleSwipe:function(t,n,r,i){if(n.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-n.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-n.coords[1])<e.event.special.swipe.verticalDistanceThreshold){var o=t.coords[0]>n.coords[0]?"swipeleft":"swiperight";return c(r,"swipe",e.Event("swipe",{target:i,swipestart:t,swipestop:n}),!0),c(r,o,e.Event(o,{target:i,swipestart:t,swipestop:n}),!0),!0}return!1},eventInProgress:!1,setup:function(){var t,n=this,r=e(n),o={};t=e.data(this,"mobile-events"),t||(t={length:0},e.data(this,"mobile-events",t)),t.length++,t.swipe=o,o.start=function(t){if(e.event.special.swipe.eventInProgress)return;e.event.special.swipe.eventInProgress=!0;var r,a=e.event.special.swipe.start(t),s=t.target,c=!1;o.move=function(t){if(!a||t.isDefaultPrevented())return;r=e.event.special.swipe.stop(t),c||(c=e.event.special.swipe.handleSwipe(a,r,n,s),c&&(e.event.special.swipe.eventInProgress=!1)),Math.abs(a.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()},o.stop=function(){c=!0,e.event.special.swipe.eventInProgress=!1,i.off(l,o.move),o.move=null},i.on(l,o.move).one(u,o.stop)},r.on(s,o.start)},teardown:function(){var t,n;t=e.data(this,"mobile-events"),t&&(n=t.swipe,delete t.swipe,t.length--,0===t.length&&e.removeData(this,"mobile-events")),n&&(n.start&&e(this).off(s,n.start),n.move&&i.off(l,n.move),n.stop&&i.off(u,n.stop))}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe.left",swiperight:"swipe.right"},function(t,n){e.event.special[t]={setup:function(){e(this).bind(n,e.noop)},teardown:function(){e(this).unbind(n)}}})}(e,this)}),function(e){"use strict";function t(t,n){e.extend(this,n),this.$select=t,e.extend(this,this.markup(t)),this.bindEvents()}t.prototype={getValue:function(e){if("function"==typeof this[e])return this[e]();return this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},updateTitle:function(){var e=this.$select.find(":selected"),t=this.formatter(e.text(),this.$select.val(),e,this.$select);this.allowHtmlInTitle?this.$title.html(t):this.$title.text(t)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,e.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,e.proxy(this.updateTitle,this)),this.$select.on("keyup."+this.baseName,e.proxy(this.updateTitle,this)),this.updateTitle()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}};function n(r){return"string"!=typeof r&&(r=e.extend({},n.options,r)),this.filter("select").each(function(){var n=e(this),i=n.data(r.baseName);"string"==typeof r?i[r].apply(n,[].slice.call(arguments,1)):i||n.data(r.baseName,new t(n,r))}),this}n.klass=t,n.formatter=function(e,t,n,r){return e},n.markup=function(t){var n=t.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return e('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(n),{$el:n,$title:e('<span class="'+this.generateClassName("title")+'"/>').prependTo(n)}},n.generateClassName=function(e,t){return this.getValue("baseName")+(e?"-"+e:"")},n.options={baseName:"brute-select",generateClassName:n.generateClassName,markup:n.markup,formatter:n.formatter,allowHtmlInTitle:!1},e.fn.bruteSelect=n}(mtjQuery),function(e){e.fn.fixedPosition=function(e){}}(mtjQuery),function(e){e.extend({highlight:function(t,n,r,i){if(3===t.nodeType){var o=t.data.match(n);if(o){var a=document.createElement(r||"span");a.className=i||"walkme-highlight";var s=t.splitText(o.index);s.splitText(o[0].length);var u=s.cloneNode(!0);return a.appendChild(u),s.parentNode.replaceChild(a,s),1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName)&&(t.tagName!==r.toUpperCase()||t.className!==i))for(var l=0;l<t.childNodes.length;l++)l+=e.highlight(t.childNodes[l],n,r,i);return 0}}),e.fn.unhighlight=function(t){var n={className:"walkme-highlight",element:"span"};return e.extend(n,t),this.find(n.element+"."+n.className).each(function(){var t=this.parentNode;t&&(t.replaceChild(this.firstChild,this),e(t).text(e(t).text()))}).end()},e.fn.highlight=function(t,n){var r={className:"walkme-highlight",element:"span",caseSensitive:!1,wordsOnly:!1};if(e.extend(r,n),t.constructor===String&&(t=[t]),t=e.grep(t,function(e,t){return""!=e}),t=e.map(t,function(e,t){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}),0==t.length)return this;var i=r.caseSensitive?"":"i",o="("+t.join("|")+")";r.wordsOnly&&(o="\\b"+o+"\\b");var a=new RegExp(o,i);return this.each(function(){e.highlight(this,a,r.element,r.className)})}}(mtjQuery),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){var o,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b,I,w,_,P,A,k,O,D,N,x,L,M,F,R,B,U=this,W=!0,V=!0,G=!1,H=!1,j=r.clone(!1,!1).empty(),Y=Y,z=e.fn.mwheelIntent?"mwheelIntent.walkme-jsp":"mousewheel.walkme-jsp";"border-box"===r.css("box-sizing")?(F=0,R=0):(F=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),R=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0));function Q(t){var i,m,v,y,E,C,b=!1,I=!1;if(o=t,a===n)E=r.scrollTop(),C=r.scrollLeft(),r.important({overflow:"hidden",padding:0}),s=r.innerWidth()+R,u=r.innerHeight(),r.width(s),a=e('<div class="walkme-jspPane" />').css("padding",F).append(r.children()),l=e('<div class="walkme-jspContainer" />').css({width:s+"px",height:u+"px"}).append(a).appendTo(r),K(r);else{if(r.css("width",""),b=o.stickToBottom&&ve(),I=o.stickToRight&&Se(),y=r.innerWidth()+R!=s||r.outerHeight()!=u,y&&(s=r.innerWidth()+R,u=r.innerHeight(),l.css({width:s+"px",height:u+"px"})),!y&&B==c&&a.outerHeight()==d)return void r.width(s);B=c,a.css("width",""),r.width(s),l.find(">.walkme-jspVerticalBar,>.walkme-jspHorizontalBar").remove().end()}a.css("overflow","auto"),c=t.contentWidth?t.contentWidth:a[0].scrollWidth,d=a[0].scrollHeight,a.css("overflow",""),p=c<s?1:c/s,g=d<u?1:d/u,f=g>1||o.alwaysScrollVertical,h=p>1||o.alwaysScrollHorizontal,h||f?(r.addClass("walkme-jspScrollable"),i=o.maintainPosition&&(S||T),i&&(m=he(),v=me()),q(),J(),Z(),i&&(ge(I?c-s:m,!1),pe(b?d-u:v,!1)),Ce(),ye(),Ae(),o.enableKeyboardNavigation&&Ie(),o.clickOnTrack&&re(),_e(),o.hijackInternalLinks&&Pe()):(r.removeClass("walkme-jspScrollable"),a.css({top:0,left:0,right:0,width:l.width()-R}),Ee(),be(),we(),ie()),o.autoReinitialise&&!M?M=setInterval(function(){Q(o)},o.autoReinitialiseDelay):!o.autoReinitialise&&M&&clearInterval(M),E&&r.scrollTop(0)&&pe(E,!1),C&&r.scrollLeft(0)&&ge(C,!1),r.trigger("walkme-jsp-initialised",[h||f])}function K(t){var n=e(t).find('div[class*="walkme-jsp"]').add(t);n.each(function(t,n){var r="class",i=e(n),o=i.attr(r);i.attr(r,"").attr(r,o)})}function q(){if(f){C=e('<div class="walkme-jspVerticalBar" />'),b=e('<div class="walkme-jspTrack" />'),m=e('<div class="walkme-jspDrag" />');var t=e('<div class="walkme-jspCap walkme-jspCapTop" />'),n=e('<div class="walkme-jspCap walkme-jspCapBottom" />');l.append(C.append(t,b.append(m.append(e('<div class="walkme-jspDragTop" />'),e('<div class="walkme-jspDragBottom" />'))),n)),K(l),w=u,o.showArrows&&(P=e('<a class="walkme-jspArrow walkme-jspArrowUp" />').bind("mousedown.walkme-jsp",te(0,-1)).bind("click.walkme-jsp",Te),A=e('<a class="walkme-jspArrow walkme-jspArrowDown" />').bind("mousedown.walkme-jsp",te(0,1)).bind("click.walkme-jsp",Te),w-=P.outerHeight()+A.outerHeight(),o.arrowScrollOnHover&&(P.bind("mouseover.walkme-jsp",te(0,-1,P)),A.bind("mouseover.walkme-jsp",te(0,1,A))),ee(b,o.verticalArrowPositions,P,A)),t.add(n).each(function(){var t=e(this);"none"!=t.css("display")&&(w-=t.outerHeight())}),m.hover(function(){m.addClass("walkme-jspHover")},function(){m.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){var n=e(o.containerDoc).find("html");n.bind("dragstart.walkme-jsp selectstart.walkme-jsp",Te),m.addClass("walkme-jspActive");var r=t.pageY-m.position().top;return n.bind("mousemove.walkme-jsp",function(e){ae(e.pageY-r,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),X()}}function X(){b.height(w+"px"),S=0,I=o.verticalGutter+b.outerWidth(),a.width(s-I-R);try{0===C.position().left&&a.css("margin-left",I+"px")}catch(e){}}function J(){h&&(l.append(e('<div class="walkme-jspHorizontalBar" />').append(e('<div class="walkme-jspCap walkme-jspCapLeft" />'),e('<div class="walkme-jspTrack" />').append(e('<div class="walkme-jspDrag" />').append(e('<div class="walkme-jspDragLeft" />'),e('<div class="walkme-jspDragRight" />'))),e('<div class="walkme-jspCap walkme-jspCapRight" />'))),K(l),k=l.find(">.walkme-jspHorizontalBar"),O=k.find(">.walkme-jspTrack"),y=O.find(">.walkme-jspDrag"),o.showArrows&&(x=e('<a class="walkme-jspArrow walkme-jspArrowLeft" />').bind("mousedown.walkme-jsp",te(-1,0)).bind("click.walkme-jsp",Te),L=e('<a class="walkme-jspArrow walkme-jspArrowRight" />').bind("mousedown.walkme-jsp",te(1,0)).bind("click.walkme-jsp",Te),o.arrowScrollOnHover&&(x.bind("mouseover.walkme-jsp",te(-1,0,x)),L.bind("mouseover.walkme-jsp",te(1,0,L))),ee(O,o.horizontalArrowPositions,x,L)),y.hover(function(){y.addClass("walkme-jspHover")},function(){y.removeClass("walkme-jspHover")}).bind("mousedown.walkme-jsp",function(t){e(o.containerDoc).find("html").bind("dragstart.walkme-jsp selectstart.walkme-jsp",Te),y.addClass("walkme-jspActive");var n=t.pageX-y.position().left;return e(o.containerDoc).find("html").bind("mousemove.walkme-jsp",function(e){ue(e.pageX-n,!1)}).bind("mouseup.walkme-jsp mouseleave.walkme-jsp",oe),!1}),D=l.innerWidth(),$())}function $(){l.find(">.walkme-jspHorizontalBar>.walkme-jspCap:visible,>.walkme-jspHorizontalBar>.walkme-jspArrow").each(function(){D-=e(this).outerWidth()}),O.width(D+"px"),T=0}function Z(){if(h&&f){var t=O.outerHeight(),n=b.outerWidth();w-=t,e(k).find(">.walkme-jspCap:visible,>.walkme-jspArrow").each(function(){D+=e(this).outerWidth()}),D-=n,u-=n,s-=t,O.parent().append(e('<div class="walkme-jspCorner" />').css("width",t+"px")),K(O.parent()),X(),$()}h&&a.width(l.outerWidth()-R+"px"),d=a.outerHeight(),g=d<u?1:d/u,h&&(N=Math.ceil(1/p*D),N>o.horizontalDragMaxWidth?N=o.horizontalDragMaxWidth:N<o.horizontalDragMinWidth&&(N=o.horizontalDragMinWidth),y.width(N+"px"),E=D-N,le(T)),f&&(_=Math.ceil(1/g*w),_>o.verticalDragMaxHeight?_=o.verticalDragMaxHeight:_<o.verticalDragMinHeight&&(_=o.verticalDragMinHeight),m.height(_+"px"),v=w-_+o.dragMaxYOffset,se(S))}function ee(e,t,n,r){var i,o="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==o?a=t:t==a&&(o=t,i=n,n=r,r=i),e[o](n)[a](r)}function te(e,t,n){return function(){return ne(e,t,this,n),this.blur(),!1}}function ne(t,n,r,i){r=e(r).addClass("walkme-jspActive");var a,s,u=!0,l=function(){0!==t&&U.scrollByX(t*o.arrowButtonSpeed),0!==n&&U.scrollByY(n*o.arrowButtonSpeed),s=setTimeout(l,u?o.initialDelay:o.arrowRepeatFreq),u=!1};l(),a=i?"mouseout.walkme-jsp":"mouseup.walkme-jsp",i=i||e(o.containerDoc).find("html"),i.bind(a,function(){r.removeClass("walkme-jspActive"),s&&clearTimeout(s),s=null,i.unbind(a)})}function re(){ie(),f&&b.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),s=t.pageY-a.top-S,l=!0,c=function(){var e=i.offset(),n=t.pageY-e.top-_/2,a=u*o.scrollPagePercent,g=v*a/(d-u);if(s<0)S-g>n?U.scrollByY(-a):ae(n);else{if(!(s>0))return void p();S+g<n?U.scrollByY(a):ae(n)}r=setTimeout(c,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},p=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",p)};return c(),e(o.containerDoc).bind("mouseup.walkme-jsp",p),!1}}),h&&O.bind("mousedown.walkme-jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r,i=e(this),a=i.offset(),u=t.pageX-a.left-T,l=!0,d=function(){var e=i.offset(),n=t.pageX-e.left-N/2,a=s*o.scrollPagePercent,g=E*a/(c-s);if(u<0)T-g>n?U.scrollByX(-a):ue(n);else{if(!(u>0))return void p();T+g<n?U.scrollByX(a):ue(n)}r=setTimeout(d,l?o.initialDelay:o.trackClickRepeatFreq),l=!1},p=function(){r&&clearTimeout(r),r=null,e(o.containerDoc).unbind("mouseup.walkme-jsp",p)};return d(),e(o.containerDoc).bind("mouseup.walkme-jsp",p),!1}})}function ie(){O&&O.unbind("mousedown.walkme-jsp"),b&&b.unbind("mousedown.walkme-jsp")}function oe(){e(o.containerDoc).find("html").unbind("dragstart.walkme-jsp selectstart.walkme-jsp mousemove.walkme-jsp mouseup.walkme-jsp mouseleave.walkme-jsp"),m&&m.removeClass("walkme-jspActive"),y&&y.removeClass("walkme-jspActive")}function ae(e,t){if(!f)return;e<0?e=0:e>v&&(e=v),t===n&&(t=o.animateScroll),t?U.animate(m,"top",e,se):(m.css("top",e),se(e))}function se(e){e===n&&(e=m.position().top),l.scrollTop(0),S=e;var t=0===S,i=S==v,o=e/v,s=-o*(d-u);W==t&&G==i||(W=t,G=i,r.trigger("walkme-jsp-arrow-change",[W,G,V,H])),ce(t,i),a.css("top",s);try{r.trigger("walkme-jsp-scroll-y",[-s,t,i]).trigger("scroll")}catch(c){}}function ue(e,t){if(!h)return;e<0?e=0:e>E&&(e=E),t===n&&(t=o.animateScroll),t?U.animate(y,"left",e,le):(y.css("left",e),le(e))}function le(e){e===n&&(e=y.position().left),l.scrollTop(0),T=e;var t=0===T,i=T==E,o=e/E,u=-o*(c-s);V==t&&H==i||(V=t,H=i,r.trigger("walkme-jsp-arrow-change",[W,G,V,H])),de(t,i),a.css("left",u);try{r.trigger("walkme-jsp-scroll-x",[-u,t,i]).trigger("scroll")}catch(d){}}function ce(e,t){o.showArrows&&(P[e?"addClass":"removeClass"]("walkme-jspDisabled"),A[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function de(e,t){o.showArrows&&(x[e?"addClass":"removeClass"]("walkme-jspDisabled"),L[t?"addClass":"removeClass"]("walkme-jspDisabled"))}function pe(e,t){var n=e/(d-u);ae(n*v,t)}function ge(e,t){var n=e/(c-s);ue(n*E,t)}function fe(t,n,r){var i,a,c,d,p,g,f,h,m,v=0,S=0;try{i=e(t)}catch(y){return}for(a=i.outerHeight(),c=i.outerWidth(),l.scrollTop(0),l.scrollLeft(0);!i.is(".walkme-jspPane");)if(v+=i.position().top,S+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;d=me(),g=d+u,v<d||n?h=v-o.verticalGutter:v+a>g&&(h=v-u+a+o.verticalGutter),isNaN(h)||pe(h,r),p=he(),f=p+s,S<p||n?m=S-o.horizontalGutter:S+c>f&&(m=S-s+c+o.horizontalGutter),isNaN(m)||ge(m,r)}function he(){return-a.position().left}function me(){return-a.position().top}function ve(){var e=d-u;return e>20&&e-me()<10}function Se(){var e=c-s;return e>20&&e-he()<10}function ye(){l.unbind(z).bind(z,function(e,t,n,r){var i=T,a=S;return U.scrollBy(n*o.mouseWheelSpeed,-r*o.mouseWheelSpeed,!1),i==T&&a==S})}function Ee(){l.unbind(z)}function Te(){return!1}function Ce(){a.find(":input,a").unbind("focus.walkme-jsp").bind("focus.walkme-jsp",function(e){fe(e.target,!1)})}function be(){a.find(":input,a").unbind("focus.walkme-jsp")}function Ie(){var t,n,i=[];h&&i.push(k[0]),f&&i.push(C[0]),a.focus(function(){r.focus()}),o.setTabIndex&&r.attr("tabindex",0),r.unbind("keydown.walkme-jsp keypress.walkme-jsp").bind("keydown.walkme-jsp",function(r){if(!(r.target===this||i.length&&e(r.target).closest(i).length))return;var o=T,a=S;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,s();break;case 35:pe(d-u),t=null;break;case 36:pe(0),t=null}return n=r.keyCode==t&&o!=T||a!=S,!n}).bind("keypress.walkme-jsp",function(e){return e.keyCode==t&&s(),!n}),o.hideFocus?(r.css("outline","none"),"hideFocus"in l[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in l[0]&&r.attr("hideFocus",!1));function s(){var e=T,r=S;switch(t){case 40:U.scrollByY(o.keyboardSpeed,!1);break;case 38:U.scrollByY(-o.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(u*o.scrollPagePercent,!1);break;case 33:U.scrollByY(-u*o.scrollPagePercent,!1);break;case 39:U.scrollByX(o.keyboardSpeed,!1);break;case 37:U.scrollByX(-o.keyboardSpeed,!1)}return n=e!=T||r!=S}}function we(){o.setTabIndex&&r.attr("tabindex","-1").removeAttr("tabindex"),r.unbind("keydown.walkme-jsp keypress.walkme-jsp")}function _e(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&a.find(r)&&(0===l.scrollTop()?n=setInterval(function(){l.scrollTop()>0&&(fe(t,!0),e(o.containerDoc).scrollTop(l.position().top),clearInterval(n))},50):(fe(t,!0),e(o.containerDoc).scrollTop(l.position().top)))}}function Pe(){if(e(Y(o.containerDoc)).data("walkme-jspHijack"))return;e(Y(o.containerDoc)).data("walkme-jspHijack",!0),e(Y(o.containerDoc)).delegate("a[href*=#]","click",function(n){var r,i,o,a,s,u,l=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(location.href.indexOf("#")!==-1&&(c=location.href.substr(0,location.href.indexOf("#"))),l!==c)return;r=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+r+', a[name="'+r+'"]')}catch(d){return}if(!i.length)return;o=i.closest(".walkme-jspScrollable"),a=o.data("walkme-jsp"),a.scrollToElement(i,!0),o[0].scrollIntoView&&(s=e(t).scrollTop(),u=i.offset().top,(u<s||u>s+e(t).height())&&o[0].scrollIntoView()),n.preventDefault()})}function Ae(){var e,t,n,r,i,o=!1;l.unbind("touchstart.walkme-jsp touchmove.walkme-jsp touchend.walkme-jsp click.walkme-jsp-touchclick").bind("touchstart.walkme-jsp",function(a){var s=a.originalEvent.touches[0];e=he(),t=me(),n=s.pageX,r=s.pageY,i=!1,o=!0}).bind("touchmove.walkme-jsp",function(a){if(!o)return;var s=a.originalEvent.touches[0],u=T,l=S;return U.scrollTo(e+n-s.pageX,t+r-s.pageY),i=i||Math.abs(n-s.pageX)>5||Math.abs(r-s.pageY)>5,u==T&&l==S}).bind("touchend.walkme-jsp",function(e){o=!1}).bind("click.walkme-jsp-touchclick",function(e){if(i)return i=!1,!1})}function ke(){var e=me(),t=he();r.removeClass("walkme-jspScrollable").unbind(".walkme-jsp"),r.replaceWith(j.append(a.children())),j.scrollTop(e),j.scrollLeft(t),M&&clearInterval(M)}e.extend(U,{reinitialise:function(t){t=e.extend({},o,t),Q(t)},scrollToElement:function(e,t,n){fe(e,t,n)},scrollTo:function(e,t,n){ge(e,n),pe(t,n)},scrollToX:function(e,t){ge(e,t)},scrollToY:function(e,t){pe(e,t)},scrollToPercentX:function(e,t){ge(e*(c-s),t)},scrollToPercentY:function(e,t){pe(e*(d-u),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=he()+Math[e<0?"floor":"ceil"](e),r=n/(c-s);ue(r*E,t)},scrollByY:function(e,t){var n=me()+Math[e<0?"floor":"ceil"](e),r=n/(d-u);ae(r*v,t)},positionDragX:function(e,t){ue(e,t)},positionDragY:function(e,t){ae(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:o.animateDuration,easing:o.animateEase,queue:!1,step:r})},getContentPositionX:function(){return he()},getContentPositionY:function(){return me()},getContentWidth:function(){return c},getContentHeight:function(){return d},getPercentScrolledX:function(){return he()/(c-s)},getPercentScrolledY:function(){return me()/(d-u)},getIsScrollableH:function(){return h},getIsScrollableV:function(){return f},getContentPane:function(){return a},scrollToBottom:function(e){ae(v,e)},hijackInternalLinks:e.noop,destroy:function(){ke()}}),Q(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("walkme-jsp");n?n.reinitialise(r):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,r),t.data("walkme-jsp",n))})},e.fn.jScrollPane.defaults={containerDoc:document,setTabIndex:!0,alwaysScrollVertical:!1,alwaysScrollHorizontal:!1,dragMaxYOffset:0,showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(wmjQuery,this),function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var o=r.length;o;)e.event.fixHooks[r[--o]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],a,!1);else this.onmousewheel=a},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],a,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});function a(r){var i,o=r||window.event,a=[].slice.call(arguments,1),s=0,u=0,l=0,c=0,d=0;return r=e.event.fix(o),r.type="mousewheel",o.wheelDelta&&(s=o.wheelDelta),o.detail&&(s=o.detail*-1),o.deltaY&&(l=o.deltaY*-1,s=l),o.deltaX&&(u=o.deltaX,s=u*-1),void 0!==o.wheelDeltaY&&(l=o.wheelDeltaY),void 0!==o.wheelDeltaX&&(u=o.wheelDeltaX*-1),c=Math.abs(s),(!t||c<t)&&(t=c),d=Math.max(Math.abs(l),Math.abs(u)),(!n||d<n)&&(n=d),i=s>0?"floor":"ceil",s=Math[i](s/t),u=Math[i](u/n),l=Math[i](l/n),a.unshift(r,s,u,l),(e.event.dispatch||e.event.handle).apply(this,a)}}(wmjQuery),function(e){var t={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},n={duration:"fast",direction:"both"},r=/^(?:html)$/i,i=function(t,n){n=n||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),i={top:parseFloat(r?n.borderTopWidth:e.css(t,"borderTopWidth"))||0,left:parseFloat(r?n.borderLeftWidth:e.css(t,"borderLeftWidth"))||0,bottom:parseFloat(r?n.borderBottomWidth:e.css(t,"borderBottomWidth"))||0,
right:parseFloat(r?n.borderRightWidth:e.css(t,"borderRightWidth"))||0};return{top:i.top,left:i.left,bottom:i.bottom,right:i.right,vertical:i.top+i.bottom,horizontal:i.left+i.right}},o=function(t){var n=e(window),o=r.test(t[0].nodeName);return{border:o?{top:0,left:0,bottom:0,right:0}:i(t[0]),scroll:{top:(o?n:t).scrollTop(),left:(o?n:t).scrollLeft()},scrollbar:{right:o?0:t.innerWidth()-t[0].clientWidth,bottom:o?0:t.innerHeight()-t[0].clientHeight},rect:function(){var e=t[0].getBoundingClientRect();return{top:o?0:e.top,left:o?0:e.left,bottom:o?t[0].clientHeight:e.bottom,right:o?t[0].clientWidth:e.right}}()}};e.fn.extend({scrollintoview:function(i){i=e.extend({},n,i),i.direction=t["string"==typeof i.direction&&i.direction.toLowerCase()]||t.both;var a="";i.direction.x===!0&&(a="horizontal"),i.direction.y===!0&&(a=a?"both":"vertical"),r="html"==i.rootElement?/^(?:html)$/i:/^(?:body)$/i;var s="";i.customScrollElement&&(s=","+i.customScrollElement);var u=this.eq(0),l=i.elementToFindScrollableFor.parent().closest(":scrollable("+a+")"+s);if(!(l.length>0))return!1;"html"==i.rootElement&&l[0].tagName&&l[0].tagName.toUpperCase&&"BODY"==l[0].tagName.toUpperCase()&&(l=l.parent()),l=l.eq(0);var c={e:o(u),s:o(l)};if(i.heightLimit&&l.height()<200)return!1;var d={top:c.e.rect.top-(c.s.rect.top+c.s.border.top),bottom:c.s.rect.bottom-c.s.border.bottom-c.s.scrollbar.bottom-c.e.rect.bottom,left:c.e.rect.left-(c.s.rect.left+c.s.border.left),right:c.s.rect.right-c.s.border.right-c.s.scrollbar.right-c.e.rect.right},p=0,g={top:d.top,bottom:d.bottom};if(i.endScroll){var f=i.endScroll.scrollOptions;p="px"==f.unit?f.distance:(c.s.rect.bottom-i.endScroll.balloonHeight)*parseFloat(f.distance)/100,d.top>0&&d.bottom<0&&(p+=i.endScroll.totalDrawnHeight-c.s.rect.bottom),f.force&&(g.top-=p)}else d.top-=50,d.bottom-=50;var h={};if(i.direction.y===!0&&(g.top<0?h.scrollTop=c.s.scroll.top+d.top-p:g.top>0&&g.bottom<0&&(h.scrollTop=c.s.scroll.top+Math.min(d.top,-d.bottom)-p)),i.direction.x===!0&&(d.left<0?h.scrollLeft=c.s.scroll.left+d.left:d.left>0&&d.right<0&&(h.scrollLeft=c.s.scroll.left+Math.min(d.left,-d.right))),!h.scrollTop&&!h.scrollLeft)return!1;return r.test(l[0].nodeName)&&(l=e("html,body")),l.animate(h,i.duration).eq(0).queue(function(t){e.isFunction(i.complete)&&i.complete.call(l[0]),t()}),!0}});var a={auto:!0,scroll:!0,visible:!1,hidden:!1};e.extend(e.expr[":"],{scrollable:function(e,n,i,o){var s=t["string"==typeof i[3]&&i[3].toLowerCase()]||t.both,u=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle,l={x:a[u.overflowX.toLowerCase()]||!1,y:a[u.overflowY.toLowerCase()]||!1,isRoot:r.test(e.nodeName)};if(!l.x&&!l.y&&!l.isRoot||"hidden"==u.overflowY.toLowerCase())return!1;var c={height:{scroll:e.scrollHeight,client:e.clientHeight},width:{scroll:e.scrollWidth,client:e.clientWidth},scrollableX:function(){return(l.x||l.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(l.y||l.isRoot)&&this.height.scroll>this.height.client}};return s.y&&c.scrollableY()||s.x&&c.scrollableX()}})}(mtjQuery);function ClassMakeTutorial(e,t){var n=this;this.MTVersion="1.0",this.SVNRevision="$MasterRev: 40f16abcf94ce48a0007ee8bfb9dad0c9fdd4566 $",this.LibVersion="2507",this.SpecialRevision="no";var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function Yf(e,t,n){function r(o,a){if(!t[o]){if(!e[o]){var s="function"==typeof require&&require;if(!a&&s)return s(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return r(n?n:t)},l,l.exports,Yf,e,t,n)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t,n){!function(){var e="undefined"!=typeof n?n:self,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var n,i,o=String(e),a=0,s=t,u="";o.charAt(0|a)||(s="=",a%1);u+=s.charAt(63&n>>8-a%1*8)){if(i=o.charCodeAt(a+=.75),i>255)throw new r("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return u}),e.atob||(e.atob=function(e){var n=String(e).replace(/=+$/,"");if(n.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,s=0,u="";o=n.charAt(s++);~o&&(i=a%4?64*i+o:o,a++%4)?u+=String.fromCharCode(255&i>>(-2*a&6)):0)o=t.indexOf(o);return u})}()},{}],2:[function(e,t,n){t.exports=r;function r(e,t){var n=this;n.runDfs=r;function r(n,r,i){return t.wrapHandlers(r),e.runDfs(n,r,i)}}},{}],3:[function(e,t,n){t.exports=r;function r(e,t){var n=this;n.traverse=r;function r(n,r){var i=n.node;if(e.isActionNode(i))r(n);else for(var o=0;o<i.UIElements.length;o++){var a=i.UIElements[o],s=t.createUiElementData(a,n);r(s)}}}},{}],4:[function(e,t,n){t.exports=r;function r(e,t){var n=this;n.runDfs=i;var r=["visitNode","visitPoint","afterPointDescendantsVisited","afterNodeDescendantsVisited"];function i(n,i,o){for(var a=!0,s={},u={},l=0;l<r.length;l++)g(r[l]);o=o||n.RootFlowNodeId,c(o);function c(r,i,o,s){if(!r||!a)return;var l=n.Nodes[r],c=e.createNodeData(l,i,o,s);u.visitNode(c),t.traverse(c,d),u.afterNodeDescendantsVisited(c)}function d(e){if(u.visitPoint(e),!s[e.point.Id]){s[e.point.Id]=!0;for(var t=e.connectors,n=0;n<t.length;n++){var r=t[n];c(r.TargetFlowNodeId,r,n,e)}}u.afterPointDescendantsVisited(e)}function p(){}function g(e){var t=i[e]||p;u[e]=function(){if(!a||!t)return;a=t.apply(null,arguments)!==!1}}}}},{}],5:[function(e,t,n){t.exports=r;function r(){var e=this;e.FLOW_NODE_TYPE={UI:"UI",Action:"Action"},e.FLOW_NODE_ACTION_TYPE={Split:"Split",Redirect:"Redirect",WaitForCondition:"WaitForCondition",Stop:"Stop",Refresh:"Refresh",SetData:"SetData",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Branch:"Branch",Survey:"Survey",Popup:"Popup",ErrorHandling:"ErrorHandling",OnPageAction:"OnPageAction"}}},{}],6:[function(e,t,n){t.exports=r;function r(e){var t=this;t.isUiNode=n,t.getNodeConnectors=i,t.isActionNode=r,t.isSplitNode=s;function n(t){return t.Type==e.FLOW_NODE_TYPE.UI}function r(e){return!n(e)}function i(e){if(n(e))return a(e);return o(e)}function o(e){return e.Links}function a(e){for(var t=[],n=0;n<e.UIElements.length;n++){var r=e.UIElements[n];t.push.apply(t,r.Triggers)}return t}function s(t){return r(t)&&t.ActionType==e.FLOW_NODE_ACTION_TYPE.Split}}},{}],7:[function(e,t,n){t.exports=r;function r(){var e=this;e.createNodeData=t,e.createUiElementData=n;function t(e,t,n,i){var o=r(e,e,e.Links,t,n,i);return o}function n(e,t){var n=r(t.node,e,e.Triggers,t.parentConnector,t.parentConnectorIndex,t.parentPoint);return n.uiElement=e,n}function r(e,t,n,r,i,o){return{node:e,point:t,connectors:n,parentConnector:r,parentConnectorIndex:i,parentPoint:o}}}},{}],8:[function(e,t,n){var r=new(e("../src/bizFlowConsts.js")),i=new(e("../src/flowNodeExtensions.js"))(r),o=new(e("../src/graphDfsDataCreator.js")),a=new(e("../src/baseGraphDfsServicePointTraverser.js"))(i,o),s=new(e("../src/baseGraphDfsServiceWithRevisiting.js"))(o,a),u=new(e("../src/removeRevisit.js")),l=new(e("../src/baseGraphDfsService.js"))(s,u);t.exports={bizFlowConsts:r,bizFlowExtensions:i,baseGraphDfsService:l,baseGraphDfsServiceWithRevisiting:s}},{"../src/baseGraphDfsService.js":2,"../src/baseGraphDfsServicePointTraverser.js":3,"../src/baseGraphDfsServiceWithRevisiting.js":4,"../src/bizFlowConsts.js":5,"../src/flowNodeExtensions.js":6,"../src/graphDfsDataCreator.js":7,"../src/removeRevisit.js":9}],9:[function(e,t,n){t.exports=r;function r(){var e=this;e.wrapHandlers=i;var t,n,r=["visitPoint","afterPointDescendantsVisited"];function i(e){n={};for(var i=function(){},o=e.visitNode||i,a=e.afterNodeDescendantsVisited||i,s=0;s<r.length;s++){var u=r[s];e[u]=l(e[u])}e.visitNode=function(e){if(t)return;var r=c(e);if(n[r])return void(t=e);return n[r]=!0,o(e)},e.afterNodeDescendantsVisited=function(e){if(t)return void(e==t&&(t=void 0));return a(e)};function l(e){if(!e)return;return function(){if(t)return;return e.apply(null,arguments)}}function c(e){return e.node&&e.node.Id}}}},{}],10:[function(e,t,n){var r={NEW_CONDITION_NODE_TYPE:{Condition:0,And:1,Or:2,Group:3}};t.exports=r},{}],11:[function(e,t,n){var r=e("./oldToNewConditionConverter.js"),i=e("./newToOldConditionConverter.js");t.exports={oldToNewConditionConverter:r,newToOldConditionConverter:i}},{"./newToOldConditionConverter.js":12,"./oldToNewConditionConverter.js":13}],12:[function(e,t,n){var r=e("./consts.js");function i(){var e=this;e.convert=n;function t(){}function n(e){if(!e)return;var t=0;return i(e,t)}function i(e,t){switch(e.Type){case r.NEW_CONDITION_NODE_TYPE.Condition:return o(e,t);case r.NEW_CONDITION_NODE_TYPE.Group:return a(e,t);default:return s(e,t)}}function o(e,t){return{nodeType:"Func",nodeDepth:t,ConditionId:e.Id,funcName:e.Settings.funcName,funcArgs:e.Settings.funcArgs}}function a(e,t){return i(e.Nodes[0],t+1)}function s(e,t){var n=e.Type==r.NEW_CONDITION_NODE_TYPE.And?"And":"Or";return{nodeType:n,nodeDepth:t,ConditionId:e.Id,leftSon:i(e.Nodes[0],t),rightSon:i(e.Nodes[1],t)}}t()}t.exports=new i},{"./consts.js":10}],13:[function(e,t,n){var r=e("./consts.js");function i(){var e=this;e.convert=t;function t(e){if(!e)return;return{Root:n(e,!0)}}function n(e){return e?"Func"==e.nodeType?i(e):e.rightSon?a(e):o(e):void 0}function i(e){return{Type:r.NEW_CONDITION_NODE_TYPE.Condition,Id:e.ConditionId,Settings:{funcName:e.funcName,funcArgs:e.funcArgs}}}function o(e){return n(e.leftSon)}function a(e){var t={Type:r.NEW_CONDITION_NODE_TYPE[e.nodeType],Nodes:[]};return t.Nodes.push(n(e.leftSon)),t.Nodes.push(n(e.rightSon)),t}}t.exports=new i},{"./consts.js":10}],14:[function(e,t,r){!function(e){function n(e){var t=this;t.addElementClass=i;var n;function r(){n=e}function i(e,t){for(var n=!0,r=e[0].ownerDocument,i=r.styleSheets,a=0;a<i.length;a++){var s=i[a];try{for(var u=s.cssRules||s.rules,l=0;l<u.length;l++){var c=u[l];if(c&&c.selectorText&&c.selectorText.indexOf(t)>-1){var d=o(e,c,t);n&&!d&&(n=!1)}}}catch(p){n=!1}}return n}function o(e,t,r){var i=!0,o=a(t,r);if(!o)return i;var s=t.selectorText.split(","),u=new RegExp("([^:]*)"+r+"(.*)");try{n.each(s,function(t,i){var a=u.exec(i);if(!a||i.indexOf(" > "+r)>-1)return!0;var s=a[1],l=e.parents().andSelf().filter(s),c=a[2];""!=c&&(l=l.find(c).andSelf()),n.each(l,function(e,t){var r=t.ownerDocument,i=r.createElement("style");i.type="text/css",i.title="walkme-hover-css-style",i.innerHTML=o,r.getElementsByTagName("head")[0].appendChild(i),n(t).addClass("walkme-hover-css")})})}catch(l){i=!1}return i}function a(e,t){var n=void 0;try{var r=new RegExp(t,"g");return n=e.cssText.replace(r,".walkme-hover-css")}catch(i){return}return n}r.apply(null,arguments)}"object"==typeof e&&void 0===e.CssInjector?e.CssInjector=n:this.CssInjector=n,"object"==typeof t&&"object"==typeof t.exports&&(t.exports=n)}("object"==typeof n?n:void 0)},{}],15:[function(e,t,n){!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=n:e.deployableConsts=n}(this,function(){return{DEPLOYABLE_TYPE:{Walkthru:0,Task:1,Launcher:2,LabelGroup:3,Survey:4,AbExperiment:5,Category:6,Content:7,Collection:8,Shuttle:9,Tag:10,TestCase:11,PreTestSet:12,Template:13,ShoutOut:14,TestSuite:16,ConditionBlock:17,BusinessSolution:19,Lesson:20,Course:21,TrackedPage:22,Spotlight:23,Tooltip:24,TrackedElement:25,SearchProviderUrl:26}}})},{}],16:[function(e,t,n){!function(){var e=function(e){e=e||{},e.version="0.3.3";e.logger=function(e,t){},e.log=function(t,n,r){n&&(t="[class="+n.name()+"] "+t),e.logger("DI - "+t,r||4)},e.error=function(t,n,r){e.log(t,n,r)},e.createContext=function(){var t={map:{},decorators:{}};t.decorate=function(e,n){t.decorators[e]||(t.decorators[e]=[]),t.decorators[e].push(n)},t.entry=function(e){return t.map[e]},t.register=function(n,r,i){var o=e.entry(n,t).type(r).args(i);return t.map[n]=o,o},t.has=function(e){return null!=t.entry(e)},t.get=function(n,r){return t.has(n)||e.error("Object["+n+"] is not registered"),t.entry(n).getObject(r)},t.create=function(n,r){if(t.entry(n).strategy()==e.strategy.singleton&&e.error("Attempt to create singleton object ["+n+"]"),t.has(n))return t.entry(n).create(r);e.error("Object["+n+"] is not registered")},t.initialize=function(){function n(n){var r=t.entry(n);r?r.initialize()&&r.strategy().initialize()&&t.get(n):e.error("Object["+n+"] is not registered")}return function(e){if(e)n(e);else for(var e in t.map)n(e)}}(),t.clear=function(){this.map={},this.decorators={}};function n(e){for(;e.indexOf(" ")>=0;)e=e.replace(" ","");return e}return t.resolve=function(n){var r=n.load(),i={};return t.eachDependency(n.dependencies(),function(o,a){var s=t.get(o,r);t.ready(s,t.entry(o)),null==s&&e.error("Dependency ["+n.name()+"."+a+"]->["+o+"] can not be satisfied",n),i[a]=s}),i},t.eachDependency=function(t,r){if(t)for(var i=n(t).split(","),o=0;o<i.length;o++){var a=i[o];if(a){var s=e.dependencyExpression(a);try{r(s.name,s.property,o)}catch(u){e.error("An exception was thrown while the DI tried to resolve class '"+s.name+"'. Check the class name, or if it was registred correctly. \r\n inner exception: \r\n"+u.message)}}}},t.ready=function(e,n){var r=n.wasReady();if(n.wasReady(!0),!r){var i=t.createCallback();i&&i(n.name(),e),e&&"function"==typeof e.ready&&e!=window&&e!=window.document&&e!=window.document.body&&(n.wasReady(!0),e.ready.apply(e,n.injector().ready(e,n)||[]))}return e},t.createCallback=function(){var e;return function(n){if(0==arguments.length)return e;return e=n,t}}(),t},e.dependencyExpression=function(e){var t={},n=e,r=e;if(e.indexOf("=")>0){var i=e.split("=");n=i[0],r=i[1]}return t.name=r,t.property=n,t},e.entry=function(t,n){var r,i={};i.name=function(){return t};for(var o=["load","wasReady","strategy","injector","type","dependencies","args","factory","initialize"],a={},s=0;s<o.length;s++){var u=o[s];l(u)}function l(e){i[e]=function(t){if(!arguments.length)return a[e];return a[e]=t,i}}i.depsDictionary=function(e){if(!arguments.length)return a.depsDictionary||i.depsDictionary(n.resolve(i)),a.depsDictionary;return a.depsDictionary=e,i},a.strategy=e.defaults.strategy,a.factory=e.defaults.factory,a.injector=e.defaults.injector,a.load=e.defaults.load,a.wasReady=!1,a.initialize=!0,i.create=function(t,o,s){s=s||e.load.recursive;var u=a.strategy.test(r,s);if(o)return u;u&&(t=a.injector.create(t?t:a.args,i,n,s));var l=a.strategy.create(r,a.factory,a.type,t,n,i,s);return n.ready(l,i)},i.getObject=function(e){return i.create(void 0,void 0,e)},i.object=function(e){return arguments.length?(r=e,i):i.create()};function c(e,t){return void 0!=t&&i.type(t),i.factory(e),i}i.asFunction=function(t){return c(e.factory.func,t)},i.asInstance=function(t){return c(e.factory.instance,t)},i.asCtor=function(t){return c(e.factory.constructor,t)},i.asSingleton=function(){return i.strategy(e.strategy.singleton)},i.asProto=function(){return i.strategy(e.strategy.proto)},i.injectToCtor=function(){return i.injector(e.injector.ctor)},i.injectToReady=function(){return i.injector(e.injector.ready)},i.injectToProperty=function(){return i.injector(e.injector.property)};function d(e,t){return void 0!=t&&i.dependencies(t),i.load(e),i}return i.flatDependencies=function(t){return d(e.load.flat,t)},i.recursiveDependencies=function(t){return d(e.load.recursive,t)},i},e.strategy={proto:{test:function(e,t){return!t||t()},initialize:function(){return!1},create:function(e,n,r,i,o,a,s){return e=t(n,r,i,a),s()&&a.injector().ready(e,a),a.depsDictionary(void 0),a.wasReady(!1),e}},singleton:{test:function(e,t){return!e&&(!t||t())},initialize:function(){return!0},create:function(e,n,r,i,o,a,s){return e||(e=t(n,r,i,a),a.object(e),a.wasReady(!0),s()&&a.injector().ready(e,a),a.wasReady(!1)),e}}};function t(e,t,r,i){var o=e(t,r,i),a=n.decorators[i.name()];if(a)for(var s=0;s<a.length;s++)o=a[s](o);return o}return e.factory={constructor:function(t,n,r){if(!(n instanceof Array))return new t(n);if(n.length<=10)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);if(n.length<=30)return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28],n[29]);e.error("trying to create a class with too many args!",r)},func:function(e,t,n){return t instanceof Array?e.apply(e,t):e(t)},instance:function(e,t,n){return e}},e.injector={property:{create:function(e,t,n){return e},ready:function(e,t){var n=t.depsDictionary();for(var r in n)e[r]=n[r];var i=t.args();void 0==i||n.hasOwnProperty("args")||(e.args=i)}},ready:{create:function(e,t,n){return e},ready:function(e,t){var r=t.args(),i=[],o=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){i[n]=o[t]}),r){r=r instanceof Array?r:[r];for(var a=0;a<r.length;a++)i.push(r[a])}return i}},ctor:{create:function(e,t,n){var r=[],i=t.depsDictionary();if(n.eachDependency(t.dependencies(),function(e,t,n){r[n]=i[t]}),e){e=e instanceof Array?e:[e];for(var o=0;o<e.length;o++)r.push(e[o])}return r},ready:function(e,t){}}},e.load={flat:function(e,t,n){return!1},recursive:function(e,t,n){return!0}},e.defaults={strategy:e.strategy.singleton,factory:e.factory.constructor,injector:e.injector.ctor,load:e.load.recursive},e}(),n=e.createContext();t.exports=function(t){t.di=e,t.ctx=n}}()},{}],17:[function(e,t,n){(function(r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ES6Promise=r()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}var i=void 0;i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var o=i,a=0,s=void 0,u=void 0,l=function(e,t){C[a]=e,C[a+1]=t,a+=2,2===a&&(u?u(b):w())};function c(e){u=e}function d(e){l=e}var p="undefined"!=typeof window?window:void 0,g=p||{},f=g.MutationObserver||g.WebKitMutationObserver,h=!1,m="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function v(){return function(){}}function S(){if("undefined"!=typeof s)return function(){s(b)};return T()}function y(){var e=0,t=new f(b),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function E(){var e=new MessageChannel;return e.port1.onmessage=b,function(){return e.port2.postMessage(0)}}function T(){var e=setTimeout;return function(){return e(b,1)}}var C=new Array(1e3);function b(){for(var e=0;e<a;e+=2){var t=C[e],n=C[e+1];t(n),C[e]=void 0,C[e+1]=void 0}a=0}function I(){try{var t=e,n=t("vertx");return s=n.runOnLoop||n.runOnContext,S()}catch(r){return T()}}var w=void 0;w=h?v():f?y():m?E():void 0===p&&"function"==typeof e?I():T();function _(e,t){var n=arguments,r=this,i=new this.constructor(k);void 0===i[A]&&ee(i);var o=r._state;return o?!function(){var e=n[o-1];l(function(){return X(o,i,e,r._result)})}():Y(r,i,e,t),i}function P(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(k);return V(n,e),n}var A=Math.random().toString(36).substring(16);function k(){}var O=void 0,D=1,N=2,x=new Q;function L(){return new TypeError("You cannot resolve a promise with itself")}function M(){return new TypeError("A promises callback cannot return that same promise.")}function F(e){try{return e.then}catch(t){return x.error=t,x}}function R(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function B(e,t,n){l(function(e){var r=!1,i=R(n,t,function(n){if(r)return;r=!0,t!==n?V(e,n):H(e,n)},function(t){if(r)return;r=!0,j(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,j(e,i))},e)}function U(e,t){t._state===D?H(e,t._result):t._state===N?j(e,t._result):Y(t,void 0,function(t){return V(e,t)},function(t){return j(e,t)})}function W(e,t,r){t.constructor===e.constructor&&r===_&&t.constructor.resolve===P?U(e,t):r===x?(j(e,x.error),x.error=null):void 0===r?H(e,t):n(r)?B(e,t,r):H(e,t)}function V(e,n){e===n?j(e,L()):t(n)?W(e,n,F(n)):H(e,n)}function G(e){e._onerror&&e._onerror(e._result),z(e)}function H(e,t){if(e._state!==O)return;e._result=t,e._state=D,0!==e._subscribers.length&&l(z,e)}function j(e,t){if(e._state!==O)return;e._state=N,e._result=t,l(G,e)}function Y(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+D]=n,i[o+N]=r,0===o&&e._state&&l(z,e)}function z(e){var t=e._subscribers,n=e._state;if(0===t.length)return;for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?X(n,r,i,o):i(o);e._subscribers.length=0}function Q(){this.error=null}var K=new Q;function q(e,t){try{return e(t)}catch(n){return K.error=n,K}}function X(e,t,r,i){var o=n(r),a=void 0,s=void 0,u=void 0,l=void 0;if(o){if(a=q(r,i),a===K?(l=!0,s=a.error,a.error=null):u=!0,t===a)return void j(t,M())}else a=i,u=!0;t._state!==O||(o&&u?V(t,a):l?j(t,s):e===D?H(t,a):e===N&&j(t,a))}function J(e,t){try{t(function(t){V(e,t)},function(t){j(e,t)})}catch(n){j(e,n)}}var $=0;function Z(){return $++}function ee(e){e[A]=$++,e._state=void 0,e._result=void 0,e._subscribers=[]}function te(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[A]||ee(this.promise),o(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?H(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&H(this.promise,this._result))):j(this.promise,ne())}function ne(){return new Error("Array Methods must be provided an Array")}te.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===O&&n<e;n++)this._eachEntry(t[n],n)},te.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===P){var i=F(e);if(i===_&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ue){var o=new n(k);W(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},te.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===O&&(this._remaining--,e===N?j(r,n):this._result[t]=n),0===this._remaining&&H(r,this._result)},te.prototype._willSettleAt=function(e,t){var n=this;Y(e,void 0,function(e){return n._settledAt(D,t,e)},function(e){return n._settledAt(N,t,e)})};function re(e){return new te(this,e).promise}function ie(e){var t=this;return new t(o(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function oe(e){var t=this,n=new t(k);return j(n,e),n}function ae(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function se(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ue(e){this[A]=Z(),this._result=this._state=void 0,this._subscribers=[],k!==e&&("function"!=typeof e&&ae(),this instanceof ue?J(this,e):se())}ue.all=re,ue.race=ie,ue.resolve=P,ue.reject=oe,ue._setScheduler=c,ue._setAsap=d,ue._asap=l,ue.prototype={constructor:ue,then:_,"catch":function(e){return this.then(null,e)}};function le(){var e=void 0;if("undefined"!=typeof r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var i=null;try{i=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===i&&!n.cast)return}e.Promise=ue}return ue.polyfill=le,ue.Promise=ue,ue})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=n:e.mapper=n}(this,function(){var t=new(e("../src/objectJpath.js")),n=new(e("../src/objectMapper.js"))(t);return{objectJpath:t,objectMapper:n}})},{"../src/objectJpath.js":19,"../src/objectMapper.js":20}],19:[function(e,t,n){t.exports=r;function r(){var e=this;e.getValue=t,e.setValue=n;function t(e,t){t=r(t);for(var n=t.split("."),i=e,o=0;o<n.length;o++){var a=n[o];if(void 0==i)return;i=i[a]}return i}function n(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++){var o=r[i];e[o]||(e[o]={}),e=e[r[i]]}var a=r.length-1,s=r[a];e[s]=n}function r(e){return e.replace(/[\'\"\]]|&quot;|&#39;/g,"").replace(/\[/g,".")}}},{}],20:[function(e,t,n){t.exports=r;function r(e){var t=this;t.merge=n;function n(t,n,r){for(var i in r){var o=r[i],a=u(i);if(o.transform&&(a=o.transform(a)),o.where&&!o.where(a,u))continue;var s="string"==typeof o?o:o.destination;e.setValue(n,s,a)}function u(n){return e.getValue(t,n)}}}},{}],21:[function(e,t,n){t.exports=r;function r(){var e={TYPES:{BAD_INPUT:-2,NO_INPUT:-1,TRUE:0,FALSE:1,CANNOT_ASSERT:2,CONTEXT_ERROR:3,CANT_INTERACT:4},TOOLTIPS:{"true-indicator":"The statement is true for the current user and page settings","false-indicator":"The statement is not true for the current user and page settings","not-defined-indicator":"Waiting. Complete the condition to evaluate the status","cannot-assert-indicator":"The validity of this statement can only be assessed when played","cannot-assert-context-error-indicator":"The validity of this statement cannot be determined because the related Switch Step cannot be played in current page","cannot-interact-error-indicator":"The validity of this statement cannot be determined because we can't interact with this page"},INDICATOR_CLASSES:{}},t=e.INDICATOR_CLASSES;return t[e.TYPES.NO_INPUT]="no-input",t[e.TYPES.BAD_INPUT]="bad-input",t[e.TYPES.TRUE]="true",t[e.TYPES.FALSE]="false",t[e.TYPES.CANNOT_ASSERT]="cannot-assert",t[e.TYPES.CONTEXT_ERROR]="cannot-assert-context-error",t[e.TYPES.CANT_INTERACT]="cannot-interact-error",e}},{}],22:[function(e,t,n){function r(){return{Article:0,Video:1}}t.exports=r},{}],23:[function(e,t,n){function r(){return{Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}}t.exports=r},{}],24:[function(e,t,n){function r(){return{step:0,launcher:1,conditionBuilder:2,smartTip:3,balloon:4,balloonTrigger:5,flowNode:6,flowLink:7,smartTipUiComponent:8,conditionNode:9,trackedElementsSet:10,businessSolution:11,trackedElement:12,onScreenElement:13,shoutout:17}}t.exports=r},{}],25:[function(e,t,n){function r(){return{New:1,Published:2,ReadyToDelete:3,Deleted:4,Unpublished:5}}t.exports=r},{}],26:[function(e,t,n){var r=new(e("./conditionBuilderPreview.js")),i=new(e("./drawablePosition.js")),o=new(e("./stepTrigger.js")),a=new(e("./stepType.js")),s=new(e("./entityType.js")),u=new(e("./surveyQuestionType.js")),l=new(e("./contentType.js")),c=new(e("./publishStatus.js"));t.exports={conditionBuilderPreview:r,drawablePosition:i,stepTrigger:o,stepType:a,ENTITY_TYPE:s,surveyQuestionType:u,contentType:l,publishStatus:c,POPUP_BUTTON_ACTIONS:{NextDone:0,Start:1,Back:2,Cancel:3},designTemplateCssClassPrefix:"wm-design-template-"}},{"./conditionBuilderPreview.js":21,"./contentType.js":22,"./drawablePosition.js":23,"./entityType.js":24,"./publishStatus.js":25,"./stepTrigger.js":27,"./stepType.js":28,"./surveyQuestionType.js":29}],27:[function(e,t,n){function r(){return{Nothing:0,Button:1,Click:2,Hover:3,PageChanged:4,Text:5,Delay:6,SelectAny:7,SelectValue:8,Swipe:9,PeerStep:10,Custom:11,BbCode:12}}t.exports=r},{}],28:[function(e,t,n){function r(){return{Simple:0,Popup:1,Action:2}}t.exports=r},{}],29:[function(e,t,n){function r(){return{FreeText:0,RadioButtons:1,CheckBoxes:2,PersonalDetails:3}}t.exports=r},{}],30:[function(e,t,n){/*! wm-simple-nlp - v1.0.8 - 2016-09-13
* Copyright (c) 2016 WalkMe; Licensed ISC */
var r;!function(e){var t,n;!function(e){e[e.Digit=0]="Digit",e[e.Alphabet=1]="Alphabet",e[e.Other=2]="Other"}(n||(n={}));function r(e){t=e}e.setJQuery=r;function i(e){var t=new l,n=new a(e),r=t.isHuman(n);return r}e.isPhraseHuman=i;function o(e){if(0===e.search("[a-zA-Z]"))return n.Alphabet;if(0===e.search("[0-9]"))return n.Digit;return n.Other}var a=function(){function e(e){this.words=[],this.raw=e,this.buildWords()}return e.prototype.buildWords=function(){this.splitCategories()},e.prototype.addWord=function(e){var r=this;if(e=t.trim(e),!e)return;if(o(e[0])!==n.Alphabet)this.words.push(e);else{var i=this.splitCamelCase(e);t.each(i,function(e,t){return r.words.push(t.toLowerCase())})}},e.prototype.splitCamelCase=function(e){var t=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),n=t.split(" ");return n},e.prototype.splitCategories=function(){for(var e,t=o(this.raw[0]),n=0,r=0;r<this.raw.length;r++){var i=this.raw[r],a=o(i);a!=t&&(e=this.raw.substring(r,n),this.addWord(e),n=r,t=a)}e=this.raw.substring(n,r+1),this.addWord(e)},e}();e.Sentence=a;var s=5,u=function(){function e(){var e=this;this.WHITE_LIST=["html","css","btn","js","http","a"],this.VOWELS="aeiou",this.pointers={},this.pointers[n.Alphabet]=function(t){return e.alphabetPred(t)},this.pointers[n.Digit]=function(t){return e.numberPred(t)},this.pointers[n.Other]=function(t){return e.otherPred(t)}}return e.prototype.numberPred=function(e){return!1},e.prototype.otherPred=function(e){return!0},e.prototype.alphabetPred=function(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];if(this.VOWELS.indexOf(r)==-1?t++:t=0,t>=s)return!1}return!0},e.prototype.isHuman=function(e){if(this.contains(this.WHITE_LIST,e))return!0;var t=o(e[0]),n=this.pointers[t],r=n(e);return r},e.prototype.contains=function(e,n){return t.inArray(n,e)!==-1},e}();e.WordClassifier=u;var l=function(){function e(){}return e.prototype.isHuman=function(e){if(e.raw.length<=2)return!1;if(this.isUrl(e))return!1;var n=new u,r=t.map(e.words,function(e,t){return n.isHuman(e)}),i=this.all(r);return i},e.prototype.all=function(e){for(var t=e.length-1;t>=0;t--)if(!e[t])return!1;return!0},e.prototype.isUrl=function(e){var t=0==e.raw.indexOf("/")||0==e.raw.indexOf("http");return t},e}();e.SentanceClassifier=l}(r||(r={})),t.exports=r},{}],31:[function(e,t,n){!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=n:e.typescriptHelper=n}(this,function(){var e=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r};return e})},{}],32:[function(e,t,n){},{}],33:[function(e,t,n){!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=n:e.uiComponents=n}(this,function(t){var n=e("./uiComponents/eventBasedObject.js")(),r=e("./displayers/idisplayer.js"),i=e("./uiComponents/uiComponent.js")(t,n),o=e("./uiComponents/popupBase.js")(i),a=e("./uiComponents/shoutOutBase.js")(o);return{eventBasedObject:n,idisplayer:r,uiComponentBase:i,popupBase:o,shoutOutBase:a}})},{"./displayers/idisplayer.js":32,"./uiComponents/eventBasedObject.js":34,"./uiComponents/popupBase.js":35,"./uiComponents/shoutOutBase.js":36,"./uiComponents/uiComponent.js":37}],34:[function(t,n,r){n.exports=function(){return i};var i=function(){function t(){this.eventBase=e({})}return t.prototype.once=function(e,t){this.eventBase.one(e,t)},t.prototype.bind=function(e,t){this.eventBase.bind(e,t)},t.prototype.unbind=function(e,t){this.eventBase.unbind(e,t)},t.prototype.trigger=function(e,t){this.eventBase.trigger(e,t)},t}()},{}],35:[function(t,n,r){var i=t("wm-typescript-helper")();n.exports=function(t){var n=function(t){i(n,t);function n(e,n){t.call(this,e),this.LocalSVNRevision="$Rev: 4206 $",this.CLASS_X_BUTTON="walkme-x-button",this._consts=n}return n.prototype.registerEvents=function(){t.prototype.registerEvents.call(this),this.registerXButton()},n.prototype.registerXButton=function(){var t=e.proxy(function(){this.trigger("x-clicked"),this.destroy()},this);this._uiCreator.registerEvents("."+this.CLASS_X_BUTTON,"click",this._consts.MOBILE_COMMANDS.ACTION.libAction,{libAction:t},"Close")},n.prototype.createConfig=function(){var e=t.prototype.createConfig.call(this);return e.Id=this._uiComponent.Id,e.Name=this._uiComponent.Name,e.XButtonClass=this.CLASS_X_BUTTON,e.Settings=this._uiComponent.Settings,e},n}(t);return n}},{"wm-typescript-helper":31}],36:[function(t,n,r){var i=t("wm-typescript-helper")();n.exports=function(t){var n=function(t){i(n,t);function n(e,n,r,i,o){t.call(this,o,i),this.LocalSVNRevision="$Rev: 4206 $",this.CLOSE_ACTIONS_TYPE="destroy",this.CLASS_ACTION_PREFIX="walkme-action-",this._actionsFactory=e,this._bbCodeParser=r,this._commonUtils=n,this._actions=this.getActions(o),this._position=0==o.Settings.position?"top":"bottom"}return n.prototype.getActions=function(e){var t=[];if(!e.Actions)return t;for(var n=0,r=e.Actions.length;n<r;n++){var i=e.Actions[n];i.IsActive&&(this.isCloseAction(i)?i[this.CLOSE_ACTIONS_TYPE]=!0:i[i.Type]=!0,i.CssClass=this.generateActionClass(t.length,e.Actions[n]),t.push(e.Actions[n]))}return t},n.prototype.registerEvents=function(){t.prototype.registerEvents.call(this),this.registerActions()},n.prototype.registerActions=function(){for(var t=0,n=this._actions.length;t<n;t++){var r=this._actions[t];r.Args=r.Args||{},r.Args.uiComponent=this;var i,o=this._actionsFactory.get(r.Type,r.Args,this.getInitiatorType(),this._uiComponent),a=this.generateActionClass(t,this._actions[t]),s=a.replace(/-/gi,"_"),u=o.args||{};i=o.mobileAction?e.proxy(function(e){this.trigger("action-start",e),this.destroy()},this,o.Type):e.proxy(function(e){this.trigger("action-start",e.Type),e.doAction(),e.Type!=L.DEPLOYABLE_ACTION_TYPES.Close&&this.destroy()},this,o),u.libAction=i,this._uiCreator.registerEvents("."+a,"click",o.mobileAction||L.MOBILE_COMMANDS.ACTION.libAction,u,s||"")}},n.prototype.getInitiatorType=function(){},n.prototype.isCloseAction=function(e){var t=this._actionsFactory.get(e.Type).Type;return t===L.DEPLOYABLE_ACTION_TYPES.Close||t===L.DEPLOYABLE_ACTION_TYPES.RemindMeLater},n.prototype.generateActionClass=function(e,t){return this.CLASS_ACTION_PREFIX+t.Type+"-"+e},n.prototype.createConfig=function(){var e=t.prototype.createConfig.call(this);return e.Title=this.handleText(this._uiComponent.Title),e.Description=this.handleText(this._uiComponent.Description),e.Actions=this._actions,e.Position=this._position,e},n.prototype.handleText=function(e){return this._bbCodeParser.parse(this._commonUtils.nl2br(e))},n}(t);return n}},{"wm-typescript-helper":31}],37:[function(t,n,r){var i,o=t("wm-typescript-helper")();n.exports=function(t,n){i=t;var r=function(t){o(n,t);function n(e){t.call(this),this.LocalSVNRevision="$Rev: 4206 $",this._uiComponent=e,this._settings=e.Settings||{},this._variations=this.createVariations(),this._uiCreator=i.get("UICreator")}return n.prototype.getComponent=function(){return this._uiComponent},n.prototype.getUI=function(){return this._uiCreator.getUI()},n.prototype.createUi=function(){this._displayer=i.get("DisplayersFactory").get(this._uiComponent.DisplayerId,[this._uiComponent.Settings]);var e=this._displayer.getContainer(),t=e?e[0].document:document;this._uiCreator.setUI(this._uiComponent,this._variations,this.createConfig(),t),this.registerEvents(),this._displayer.setUiObject(this._uiCreator.getUI())},n.prototype.registerEvents=function(){},n.prototype.createVariations=function(){for(var e=i.get("UIVariations"),t=[],n=this._uiComponent.UIVariationsIds||[],r=0;r<n.length;r++)t.push(e.get(n[r]));return this._settings.variation&&t.push(this._settings.variation),t},n.prototype.createConfig=function(){return{}},n.prototype.append=function(){var t=this;this.trigger("append-begin"),i.get("TemplatesFactory").addResources(this._uiComponent.UITemplateId,this._uiComponent.UITemplateVersion,this._variations,e.proxy(function(){t._displayer.append(e.proxy(function(){return t.trigger("append-end")},t))},this))},n.prototype.destroy=function(){var t=this;if(this._isDead)return;this.trigger("destroy-begin"),this._displayer.remove(e.proxy(function(){t._isDead=!0,t.trigger("destroy-end")},this))},n.prototype.show=function(){this.trigger("show-begin"),this._displayer.show(e.proxy(function(){this.trigger("show-end")},this))},n.prototype.hide=function(){this.trigger("hide-begin"),this._displayer.hide(e.proxy(function(){this.trigger("hide-end")},this))},n.prototype.toggle=function(){this._displayer.isVisible()?this.hide():this.show()},n}(n);return r}},{"wm-typescript-helper":31}],38:[function(e,t,n){window._walkmeInternals.ctx||e("wm-di")(window._walkmeInternals),e("wm-css-injection"),function(t){var n=e("wm-simple-nlp");t.register("SimpleNLP").asInstance(n);var r=e("wm-mapper")();t.register("ObjectMapper").asInstance(r.objectMapper),t.register("ObjectJpath").asInstance(r.objectJpath);var i=e("wm-biz-flow");t.register("FlowNodeExtensions").asInstance(i.bizFlowExtensions),t.register("BaseGraphDfsService").asInstance(i.baseGraphDfsService);var o=e("wm-deployable-consts")();t.register("DeployableConsts").asInstance(o);var a=e("wm-ui-components")(t);t.register("UIComponentsClasses").asInstance(a);var s=e("wm-conditions-converter");t.register("NewToOldConditionConverter").asInstance(s.newToOldConditionConverter),t.register("OldToNewConditionConverter").asInstance(s.oldToNewConditionConverter);var u=e("Base64");if(t.register("Base64").asInstance(u),!t.has("PromiseManager")){var l=e("wm-es6-promise").Promise;t.register("PromiseManager").asInstance(l)}var c=e("wm-shared-consts");t.register("SharedConsts").asInstance(c)}(window._walkmeInternals.ctx)},{Base64:1,"wm-biz-flow":8,"wm-conditions-converter":11,"wm-css-injection":14,"wm-deployable-consts":15,"wm-di":16,"wm-es6-promise":17,"wm-mapper":18,"wm-shared-consts":26,"wm-simple-nlp":30,"wm-ui-components":33}]},{},[38]);var i=t.di,o=t.ctx,a=o.get("PromiseManager").Promise,s="uiProperties",u="auditSteps",l="goals",c="balloon",d="resources",p="FramesetsUtils",g="showLaunchers",f="tasks",h="content",m="searchResult",v="hl",S="autostart",y="superstep",E="loadTestMe",T="changeTracker",C="documentsManager",b="wm-ltm",I=900,w={Cookies:"cookies",LocalStorage:"localStorage",IndexedDB:"indexedDB"},_={FreeText:0,RadioButton:1,CheckBox:2},P={Deactive:0,Active:1,ActiveAndReset:2},A=86400,k=31536e3,O=31536e4,D={display:"block",paddingTop:0,paddingLeft:0,paddingBottom:0,paddingRight:0,marginTop:0,marginLeft:0,marginBottom:0,marginRight:0,verticalAlign:"baseline",borderCollapse:"inherit",backgroundImage:"none",backgroundColor:"transparent",orderSpacing:"1px 1px",lineHeight:"normal",height:"auto",textIndent:"inherit",letterSpacing:"normal",textTransform:"none",outline:"invert none medium",width:"auto",boxShadow:"none",textShadow:"none",borderTopStyle:"none",borderTopWidth:"medium",borderRightStyle:"none",borderRightWidth:"medium",borderBottomStyle:"none",borderBottomWidth:"medium",borderLeftStyle:"none",borderLeftWidth:"medium",position:"static",top:"auto",left:"auto",transition:"none",boxSizing:"content-box",color:"#EB15E2"},N={Cookie:0,Var:1};o.register("DeployableTypes").dependencies("Consts").asFunction(function(e){return e.DEPLOYABLE_TYPE}),o.register("Consts").asCtor(x).dependencies("DeployableConsts");function x(e){var t=this;t.FREE_TEXT_MAX_LENGTH=1e3,t.COOKIE_LIFE_10_YEARS=31536e4,t.DEBUGGER_STATE_NAME="wm-ftr",t.DOMAIN_IN_COOKIE="wm-dmn",t.DEFAULT_COOKIE_SECONDS=600,t.IS_DISPLAY_POWERED_BY={Show:"txt",Hide:"no"},t.ANALYTICS_CUSTOM_VARS={MaxVarLength:100,MaxCustomFields:5},t.AJAX_PROVIDERS={wmjQueryAjaxProvider:1,ajaxProxyProvider:2},t.STEP_STATUS={SupposedToShow:0,Shown:1,Performed:2,SkippedNotFound:3,SkippedByCondition:4,MovedBack:5,Exited:6,FakeFound:7,SkippedByTutorialCondition:8,SkippedStartedFromBiggerStep:9,NonValidActionStep:10,SkippedByActionStep:11},t.STEP_ACTION={Redirect:"redirect",PlayStep:"playStep",WaitForCondition:"waitForCond",Branch:"branchWt",StopWt:"stopWt",Delay:"delay",Refresh:"refresh",OpenPlayerMenu:"openPlayerMenu",SetWalkMeData:"setWalkMeData",PassOwnership:"passOwnership"},t.STEP_TYPE={Normal:0,Popup:1,Action:2},t.SOURCES={production:0,preview:1,play:2,test:3,success:32},t.TIME_PERIODS={OneHourSeconds:3600,DaySeconds:86400},t.STORAGE_KEYS={lastGetDataTime:"wm-lgt",remindMeLater:"wm-RML",customAuditVarDictionary:"wm-cavd",WALKTHRU_PERSISTENCE_DATA:"wm-prsst"},t.STORAGE_TYPE={Cookie:"cookie",CrossDomain:"crossdomain",JStorage:"jstorage",CrossDomainLocalStorage:"crossdomain_ls",CrossDomainCookies:"crossdomain_ck",Extension:"extension",ProxyIframe:"proxy"},t.PLATFORM={Web:1,iOS:2,MobileWeb:3,Android:4},t.STEP_PLAY_INITIATOR_ENUM={NONE:0,WIDGET:1,API:2,LAUNCHER:3,TASK:4,BRANCHING:5,AUTOSTART:6,PERMALINK:7,BBCODE:8,CHAT_AGENT:9,SHOUTOUT:10,WALKTHRU:11,STEP:12,ATTENTION_GRABBER:13,FLOW_STEP:14,COURSE:15,CUSTOMIZATION:16},t.AUDIT_TYPE={OPEN_TICKET:100},t.PLAY_MODE={Widget:0,LightBox:1,NewTab:2,SameTab:3},t.MOBILE_COMMANDS={VIEW:{show:1e3,append:1001,hide:1002,remove:1003,externalClose:1004},ACTION:{rateApp:2e3,playVideo:2001,browseToPage:2001,openSettings:2002,libAction:2003,sendEmail:2004,openApp:2005,openAppStore:2006},GET_DATA:{storageVar:3e3,systemInfo:3001,permissions:3002,elementFinder:3003}},t.ELEMENT_INTERACTION_TYPES={Visible:0,NotVisible:1},t.SHOUTOUT_TYPES={snackbar:10,popup:20,fullScreen:30,customView:40},t.SPOTLIGHT_TYPES={arrow:1,django:2},t.MOBILE_COMMAND_NAME="message",t.EVENT_SENDER_EVENT_TYPES={Close:"close",Open:"open",Play:"play",PlayFailed:"playFailed",Click:"click",Search:"search",Complete:"complete",GoalReached:"goalReach",Submitted:"submitted",Loaded:"loaded",Visible:"visible",Draw:"draw",MouseEnter:"mouseenter",Focus:"focus",Blur:"blur",Passed:"passed",Failed:"failed",TeachMeStepCompletion:"teachMeStepCompletion",TeachMeCourseCompletion:"teachMeCourseCompletion",TeachMeCompletionUpdate:"teachMeCompletionUpdate",TeachMeStepStarted:"teachMeStepStarted",SessionPing:"sessionPing",SessionStart:"session"},t.TeachMe={QUIZ_RESULT_STORAGE_KEY_PREFIX:"wm-lms-quiz-res-",QUIZ_STATUS_CLASS:{PASSED:"passed",FAILED:"failed",NOT_TESTED:"not-tested"},QUIZ_STATUS_TEXT:{PASSED:"Quiz Passed",FAILED:"Quiz Failed",NOT_TESTED:"Not Tested"},QUIZ_STATUS:{PASSED:1,FAILED:0,NOT_TESTED:void 0}},t.EVENT_SENDER_STEP_ACTION_NAMES={Redirect:0,PlayStep:1,WaitForCondition:2,Branch:3,StopWt:4,Delay:5,Refresh:6,OpenPlayerMenu:7,SetWalkMeData:8,PassOwnership:9,ErrorHandling:10,Split:11,OnPageActionClick:12,OnPageActionHover:13,OnPageActionFocus:14,OnPageActionFillText:15,OnPageActionSelectListValue:16,Style:17},t.EVENT_SENDER_ACTIONS={None:"none",OpenMenu:"menu",PlayWalkthru:"wt",PlayShuttle:"shuttle",PlaySurvey:"survey",PlayShoutOut:"shoutout",PlayResource:"resource",PlayContent:"resource",SurveyQuestionAnswered:"answer",PlayBizFlow:"bizFlow"},t.EVENT_SENDER_MOBILE_ACTION_TYPES={None:"none",RateApp:"rateApp",OpenSettings:"openSettings",BrowseToPage:"browseToPage",PlayVideo:"playVideo",SendEmail:"sendEmail",OpenApp:"openApp",OpenAppStore:"openAppStore"},t.EVENT_SENDER_EVENT_APPS={None:"none",Player:"player",Walkthru:"wt",Step:"step",ShoutOut:"shoutout",Shuttle:"shuttle",Survey:"survey",Question:"question",SurveyQuestionAnswer:"answer",Content:"resource",Launcher:"launcher",Task:"task",Course:"course",WidgetSearch:"widgetSearch",Ticket:"openTicket",Walkme:"walkme",TeachMe:"teachMe",AbTesting:"abTesting",TrackedElement:"trackedElement",TrackedPage:"trackedElementsSet",SmartTip:"smartTip",SmartTipSet:"smartTipSet",SmartTipUiComponent:"smartTipUiComponent",BizFlow:"bizFlow",BizFlowStep:"bizFlowStep",LiveChat:"liveChat",Quiz:"quiz",QuizQuestion:"quizQuestion",QuizAnswer:"quizAnswer"},t.EVENT_SENDER_AB_TESTING_DRAW_REASONS={Draw:0,ActivationRule:1},t.EVENT_SENDER_CANCEL_REASONS={Xclick:"X Clicked"},t.DEPLOYABLE_TYPE=e.DEPLOYABLE_TYPE,delete t.DEPLOYABLE_TYPE.Walkthru,t.DEPLOYABLE_TYPE.Tutorial=0,t.DEPLOYABLE_ACTION_TYPES={Action:0,Close:1,RemindMeLater:2},t.SAFESTART_ACTION={ErrorShown:0,PopupShown:1,AutoRedirect:2,StayClicked:3,RedirectClicked:4,FailOnUrl:5},t.FEATURES={DisableWidgetOpenFullUrl:"disableWidgetOpenFullUrl",EventSenderDontSendPageUrl:"dontSendPageUrl",EventSenderDontSendPageTitle:"dontSendPageTitle",StickyCustomVars:"stickyCustomVars",StrongStickyCustomVars:"strongStickyCustomVars",DisableEventCollection:"disableEventCollection",JSP:"jsp",ForceEmbedInOwnerDocument:"embedInOwnerDocument",OldIsInIframeIndication:"oldIsInIframeIndication",DontMaskEndUserAddress:"dmeua",CalculateElementBoundsBeforeRedraw:"calculateElementBoundsBeforeRedraw"},t.EVENTS={DICreated:"DICreated",WalkMeTotalLoadingTime:"WalkMeTotalLoadingTime",MainStart:"mainCreationStart",WalkmeApiStarted:"walkMeApiCreationStart",WalkmePlayerApiStarted:"walkMePlayerApiCreationStart",WalkmeRemoved:"removeWalkMe",WalkmeLoaded:"wm_walkmeLibLoaded",BeforeWalkmeReady:"BeforeWalkmeReady",WalkmeReady:"WalkMeReady",ElementsTrackingReady:"ElementsTrackingReady",ReleaseAllElementsCalled:"releaseAllElementsCalled",CallReleaseElementsFromBalloons:"callReleaseElementsFromBalloons",LanguageChanged:"languageChanged",PlayerClicked:"wmPlayerClicked",ApiWasCalled:"wmApiCalled",PermalinkClicked:"wmPermalinkClicked",WidgetLoad:"WidgetLoad",WidgetOpening:"wmWidgetOpening",EndUserSettingsSet:"endUserSettingsSet",AbExperimentLinkedGoalReached:"wmLinkedGoalReached",AbTasksBlocked:"AbTasksBlocked",SalesForceVarsExposed:"SfVarsExposed",TimerManagerCreationStarted:"timerManagerCreationStart",DeployableCreated:"DeployableCreated",DeployableDestroyed:"DeployableDestroyed",DeployableNotShowing:"DeployableNotShowing",DeployableHandleStarting:"DeployableHandleStarting",UIComponentDestroyed:"UIComponentDestroyed",UIObjectsTreeCreated:"UIObjectsTreeCreated",BeforeDataFileLoaded:"BeforeDataFileLoaded",SmartTips:{SmartTipElementShown:"SmartTipElementShown",SmartTipElementRemoved:"SmartTipElementRemoved",ValidationFailed:"SmartTipValidationFailed",ValidationPassed:"SmartTipValidationPassed",TooltipShown:"SmartTipTooltipShown",SmartTipSegmented:"SmartTipSegmented",SetTurnedOn:"SmartTipSetTurnedOn",SmartTipIconShown:"SmartTipIconShown",SmartTipIconHovered:"SmartTipIconHovered"},TaskCompleted:"TaskCompleted",TasksLoaded:"TasksLoaded",Flows:{AfterCompletingFlowStage:"AfterCompletingFlowStage",BranchFlow:"SwitchToFlow",BeforeExecutingFlowStage:"BeforeExecutingFlowStage",UIFlowStageShown:"UIFlowStageShown",FailedToStart:"FlowFailedToStart",FlowStarted:"FlowStarted",FlowBranched:"FlowBranched",FlowStopped:"FlowStopped",RestoringFlow:"RestoringFlow",FlowCompleted:"FlowCompleted",FlowBranchReturned:"FlowBranchReturned",LookingForElement:"LookingForElement",ElementFound:"ElementFound",WaitForConditionEvaluated:"WaitForConditionEvaluated",SafeStartStatusChanged:"SafeStartStatusChanged"},Walkthrus:{WalkthruGuidGenerated:"WalkthruGuid",WalkthruStarted:"StartNewWt",WalkthruStopped:"TutorialStopped",WalkthruLoaded:"LoadWt",WalkthruCompleted:"WalkthruCompleted",StepSkipped:"StepWasSkipped",StepElementFound:"ElementFound",StepElementNotFound:"ElementNotFound",LookingForStepElement:"LookingForElement",WaitingForStickyStep:"StickyStepWaiting",StepStarted:"NewStepStarted",StepExecuting:"StepPlayNum",StepPerforming:"StepPerforming",StepAdditionalTriggerSet:"StepAdditionalTriggerCBSet",StepAdditionalTriggersInitialized:"StepAdditionalTriggered",FakeStep:"StepIsFaked",StepShown:"NewStepShown",StepHasPlayCondition:"PlayStepCondition",StepCompleted:"StepCompleted",StepTriggered:"StepWasTriggered",InputGeneratedClick:"InputGeneratedClick",ShowStepBalloon:"showStepBalloon",DestroyStepBalloon:"destroyStepBalloon"},Launchers:{LauncherIsInsecure:"LauncherInsecure",LauncherClicked:"wmLauncherClicked",LauncherIsShown:"LauncherIsShown",LauncherIsHovered:"LauncherIsHovered"},Surveys:{StartSurvey:"StartSurvey",SurveyPlayed:"SurveyPlayed",SurveyCompleted:"SurveyCompleted",SurveyExited:"SurveyExited",SurveyFailedShowing:"SurveyFailedShowing",SurveyBalloonActionsSet:"SurveyBalloonActionsSet",SurveyBackQuestion:"SurveyBackQuestion",SurveyNextQuestion:"SurveyNextQuestion",SurveyFreeTextAnswerValidated:"SurveyFreeTextAnswerValidated",SuveyBeforeRadioButtonAppended:"SuveyBeforeRadioButtonAppended",SurveyBalloonDisplayed:"SurveyBalloonDisplayed"},PassOwnership:{PriorityInitialized:"priorityInitialized",PORegisterPriority:"PORegisterPriority"},Widget:{WidgetAPICreated:"WidgetAPICreated",TeachMeWidgetAPICreated:"TeachMeWidgetAPICreated",WidgetDisplayerClass:"WidgetDisplayerClass",WidgetInitInstances:"WidgetInitInstances",WidgetPlayerClass:"WidgetPlayerClass",WidgetMenuClass:"WidgetMenuClass",WidgetLanguageChanged:"WidgetLanguageChanged",WidgetDestroyAll:"WidgetDestroyAll",WidgetRefreshUI:"WidgetRefreshUI",SearchResultsReady:"SearchResultsReady",CreateSearchEngines:"CreateSearchEngines",SearchTermChanged:"SearchTermChanged",SearchCanceled:"SearchCanceled",SearchResultsAppended:"SearchResultsAppended",SearchEnded:"SearchEnded"},WidgetMenu:{MenuHtml:"MenuHtml",MenuBuilt:"MenuBuilt",MenuShow:"MenuShow",MenuHide:"MenuHide",MenuLanguageChanged:"MenuLanguageChanged",CreateActivatable:"createActivatable",AccessibilityMenuBuilt:"AccessibilityMenuBuilt"},WidgetPlayer:{PlayerShow:"PlayerShow",PlayerBuilt:"PlayerBuilt",PlayerHtml:"PlayerHtml",PlayerHide:"PlayerHide",PlayerLanguageChanged:"PlayerLanguageChanged"},SearchResultParse:"SearchResultParse",AppendingServerSearchResults:"AppendingServerSearchResults",SearchResultConverted:"SearchResultConverted",TrackedElementBeforeSendEvent:"trackedElementBeforeSendEvent",ContentRemoved:"ContentRemoved",AttentionGrabberInsecure:"AGDataInsecure",TasksConditionEvaluated:"TasksConditionEvaluated",LightBoxCreated:"lightBoxCreated",LightBoxClosed:"LightBoxClosed",ShouldChangeBalloonPosition:"ShouldChangeBalloonPosition",ShoutOutClosed:"ShoutOutClosed",AutoStart:{Activated:"wmAutoStartActivated",ConditionEvaluated:"WtAutoStartConditionEvaluated"},LoadingContent:"LoadingContent",LoadingContentFromTeachMe:"LoadingContentFromTeachMe",LoadingContentInNewTab:"LoadingContentInNewTab",StorageLoaded:"StorageLoaded",BeforeStorageLoadedCallback:"BeforeStorageLoadedCallback",CustomAuditVar:"CustomAuditVar",Goals:{ConditionEvaluated:"GoalConditionEvaluated",GoalReached:"GoalCompleted"},ActionConditionEvaluated:"ActionConditionEvaluated",Scrolls:{ScrollFired:"scrollFired"},Quizzes:{QuizSubmitted:"QuizSubmitted",QuizPlay:"QuizPlay",QuizFail:"QuizFail",QuizPass:"QuizPass",QuizAnswerSubmitted:"QuizAnswerSubmitted",QuizSummarySuccessButtonClicked:"QuizSummarySuccessButtonClicked",QuizSummaryFailureButtonClicked:"QuizSummaryFailureButtonClicked",QuizXButtonClicked:"QuizXButtonClicked",QuizResultsActionButtonClicked:"QuizResultsActionButtonClicked"},NewSession:"NewSession",WalkmeReadyNewSession:"WalkmeReadyNewSession",ConditionTreeResult:"ConditionTreeResult",BeforeSettingCustomCss:"BeforeSettingCustomCss",SettingsFileNewPublish:"SettingsFileNewPublish",BBCodeStartActionClicked:{Walkthru:"bbcodeWtClicked",Bizflow:"bbcodeBfClicked",Resource:"bbcodeResourceClicked",Survey:"bbcodeSurveyClicked"},AddFocusTraits:"AddFocusTraits",RegisterBBCodeDeployableClick:"RegisterBBCodeDeployableClick",ElementLocationChanged:"ElementLocationChanged",AnalyticsEventSent:"AnalyticsEventSent",BalloonLogs:{BalloonPopLocationCalculated:"BalloonPopLocationCalculated",BalloonIsFullyVisibleCalculated:"BalloonIsFullyVisibleCalculated",ClosestCanEmbedReturnsTop:"ClosestCanEmbedReturnsTop",ClosestCanEmbedSkipsElement:"ClosestCanEmbedSkipsElement"}},t.EVENTS_PARAMS={WalkmeRemovedErrorCodes:{missingUserIdentifyer:1,cannotHaveBothUniqueUserAndServerStorage:2}},t.SMART_TIP_INNER_EVENTS={CheckValidations:"wmCheckValidations",EventPropogationPrefix:"wmSmartTipInternalEvent",SmartTipElementRepositioned:"SmartTipElementRepositioned"},t.WINDOW_EVENTS={Resize:"resize"},t.PASS_OWNERSHIP={EvaluateOwnership:{CantBeDetermined:"CANT_BE_DETERMINED",Owner:"OWNER",NotOwner:"NOT_OWNER"},PassOwnershipEntity:{BizFlow:0,Walkthru:1},NEW_WINDOW_TIME_KEY:"wm-cond-win",LOG_FEATURE:"passOwnership",PASS_OWNERSHIP_COOKIE:"wm-cdplay"},t.FLOW_BEFORE_PLAY_KEY="wm-flw-preplay",t.WINDOW_CUSTOM_DATA_TYPE={Cookie:0,Var:1},t.VALUE_CALCULATOR_TYPE={Cookie:"cookie",Variable:"var",JQuery:"jquery",LocalStorage:"localstorage"},t.DEFAULT_REACTION_TIME=500,t.FLOW_TRIGGER_WORKSPACE=".flow",t.FLOW_STEP_TYPE={UI:"UI",Action:"Action"},t.FLOW_UIELEMENT_TYPE={Element:"Element",Popup:"Popup"},t.FLOW_ACTION_RUN_STATE={Waiting:"Waiting",Done:"Done"},t.FLOW_ACTION_TYPE={ConnectToBizflow:"ConnectToBizflow",Delay:"Delay",OpenMenu:"OpenMenu",PassOwnership:"PassOwnership",Redirect:"Redirect",Refresh:"Refresh",Style:"Style",SetData:"SetData",Split:"Split",Stop:"Stop",WaitForCondition:"WaitForCondition",OnPageAction:"OnPageAction",ErrorHandling:"ErrorHandling"},t.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"},t.FLOW_INNER_EVENTS={EventPropogationPrefix:"wmFlowInternalEvent",FlowIsPlaying:"FlowIsPlaying"},t.STICKY_TYPE={ONCE:0,SOFT:1,STRONG:2},t.VISIBILITY_STATE={VISIBLE:0,HIDDEN:1},t.ICON_CONTENT_KIND={Text:0,Image:1},t.POSITION_PERIMETER_TYPE={Outside:0,Inside:1},t.POSITION_TYPE={Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8},t.OPPOSITE_POSITION_TYPE={},function(e,t){e[t.Top]=t.Bottom,e[t.Right]=t.Left,e[t.Bottom]=t.Top,e[t.Left]=t.Right,e[t.TopLeft]=t.BottomRight,e[t.TopRight]=t.BottomLeft,e[t.BottomRight]=t.TopLeft,e[t.BottomLeft]=t.TopRight,e[t.Center]=t.Center}(t.OPPOSITE_POSITION_TYPE,t.POSITION_TYPE),t.DEFAULT_POSITIONS={top:0,left:0,bottom:0,right:0},t.POPUP_BALLOON_Z_INDEX=2147483631,t.NORMAL_BALLOON_Z_INDEX=2147483630,t.POSITION_OFFSET_TYPE={VerticallyCentered:1,HorizontalCentered:2,Above:3,Below:4,ToRight:5,ToLeft:6,SnapToViewportRight:9},t.POSITION_OFFSET={Center:0,Start:1,End:2},t.EMBEDMENT_TYPE={EmbedInElement:0,EmbedInElementParent:1,EmbedInOwnerDocument:2,EmbedInTopDocument:3},t.ICON_CONTENT_STATE={Regular:0,Hover:1,Click:2},t.SMART_TIP={MODE:{OnlyInfo:0,OnlyValidations:1,InfoAndValidations:2},COMPONENT_TYPE:{Info:0,Validation:1,PositiveFeedback:2}},t.TOOLTIPS_ACTIVATION_MODES={Mouse:1,Focus:2},t.OLD_STICKIES={STICKINESS_TYPES:{soft:0,strong:1}},t.CONDITION_CHECKER={FEATURE_NAMES:{SmartTipSegmentation:"evaluate smart tip segmentation"}},t.IS_STICKY_SETTING_KEY="isSticky",t.STICKINESS_TYPE_SETTING_KEY="stickinessType",t.ANIMATION_TYPES={None:1},t.FLOW_TRIGGER_TYPE={Click:"Click",Hover:"Hover",Button:"Button",Text:"Text",Delay:"Delay",PageChanged:"PageChanged",SelectAny:"SelectAny",SelectValue:"SelectValue",BbCode:"BbCode",PeerStep:"PeerStep",Custom:"Custom"},t.SHOUTOUT_CLICK_TYPE={Action:0,Close:1,XButton:2,RemindMeLater:3},t.BALLOON_BUTTON_TYPE={Submit:"Submit",Back:"Back",Next:"Next",Done:"Done",Start:"Start",Cancel:"Cancel"},t.FEATURES_LOGS={ElementFinder:"elementFinder",WalkMeSession:"session",Flows:"flows",AnalyticsTracking:"analyticsTracking"},t.SEARCH_DEPLOYABLES_PROVIDER_ID=0,t.APPLET_INTERACTION_TYPES={Element:1,Overlay:2},t.WALKTHRU_PERSISTANCE_DATA_FIELDS={STEP_COMPLETED_HISTORY_COOKIE_NAME:"sch",CURRENT_TUTORIAL_COOKIE_NAME:"tId",CURRENT_STATE_COOKIE_NAME:"stt",CURRENT_STEP_COOKIE_NAME:"step",CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME:"spn",CURRENT_PLAY_GUID_COOKIE_NAME:"plgd",CURRENT_PLAY_INITIATOR_COOKIE_NAME:"pint",SPLIT_POINT_COOKIE_NAME:"splt",TUTORIAL_FINISHED_COOKIE_NAME:"fnsh",STEP_PLAY_HISTORY_COOKIE_NAME:"sph",SPLIT_TUTORIAL_IDS_COOKIE_NAME:"sti",SPLIT_START_FROM_STEP_COOKIE_NAME:"ssi",INTERACTION_GUID_COOKIE_NAME:"igd"},t.SURVEY_START_EVENTS={WalkThruCompleted:0,WalkThruExited:1,Both:2,WalkThruInterrupted:3,BbCodeClicked:4},t.CHECK_STEP_MODE={Normal:1,Sandbox:2},t.playConditionModes={PLAY_CONDITION:0,STICKY_CONDITION:1,BOTH:2},t.UI_PROPERTIES={Visible:"visible",Invisible:"invisible",Completed:"completed",Uncompleted:"uncompleted",StrikedOut:"strike-out",Active:"active",Inactive:"inactive",ProgressBar:"progress-bar",Default:"default",Search:"search",SearchProviders:"search-providers",Video:"video",Article:"article",Accessible:"accessible",Phantom:"phantom",LmsCourse:"lmsCourse"},t.DISPLAY_WIDGET_CONDITION="displayWidgetCondition",t.WALKTHRU_STATE={NOT_RUNNING:0,RUNNING:1,WAITING_FOR_ELEMENT:2,WAITING_FOR_ELEMENT_EVENT:3,PAUSED:4,WAITING_FOR_SPLIT:5,WAITING_FOR_NEXT_BUTTON_CLICK:6,WAITING_FOR_PAGE_CHANGE:7,WAITING_FOR_STICKY_ELEMENT:8,WAITING_FOR_CONDITION:9,PASSING_OWNERSHIP:10,WAITING_FOR_REDIRECT:11,WAITING_FOR_OWNERSHIP:12},t.WALKTHRU_STEP_TRIGGER={NOTHING:0,NEXT_BUTTON:1,CLICK:2,HOVER:3,PAGE_CHANGED:4,KEY_PRESSED:5,DURATION:6,SELECT_ANY:7,SELECT_VALUE:8,SWIPE:9},t.SUBTEXT_CURRENT_START="##START_OF_CURRENT##",t.SUBTEXT_CURRENT_END="##END_OF_CURRENT##",t.SUBTEXT_TOTAL_START="##START_OF_TOTAL##",t.SUBTEXT_TOTAL_END="##END_OF_TOTAL##",t.DEPLOYABLE_DISPLAY_NAME={19:"BizFlow",0:"Walk-Thru"},t.SURVEY_FREQUENCY={0:"always",1:"visit",2:"once"},t.UI_CHANGE_NOTIFIERS={HASH:"hash",HISTORY:"history",IFRAME_LOAD_SELECTOR:"iframeLoadSelector",CLICK_SELECTOR:"clickSelector",AJAX_CALLS:"ajaxCalls",USER_INPUT:"userInput"},t.FLOW_TRANSITION_HANDLER_IDS={DELAYER:0,ON_BEFORE_UNLOAD:1}}var L=o.get("Consts");o.register("ExternalWalkMeConfig").asCtor(M).dependencies("Consts");function M(e){var t=this,n={platform:e.PLATFORM.Web};t.get=function(e){return window._walkmeConfig&&window._walkmeConfig[e]?window._walkmeConfig[e]:n[e]}}o.register("PlatformDI").asCtor(F).dependencies("Consts, ExternalWalkMeConfig");function F(t,n){var r,i=this;function o(){r=n.get("platform")}i.register=function(t,n){if("number"==typeof t)return void(t==r&&n());e.inArray(r,t)!=-1&&n()},o.apply(null,arguments)}var R=o.get("PlatformDI");o.register("Logger").asCtor(B).dependencies("CookiesManager, HostData, Lib, IsInEditor, Consts, FeaturesManager");function B(t,n,r,a,s,u){var l=this,c=!1;window.walkme_lib_in_dev&&(c=!0);var d,p="walkmeCustomerLogs",g={debug:4,info:3,warn:2,error:1},f=86400,h=0,m=!0;function v(){d=new k(t)}l.ready=function(){var e="DI";i.logger=l.wrapCustomerLog(e)},l.wrapCustomerLog=function(e){return function(t,n,r){l.customerLog(t,n,r||e)}},l.customerLog=function(e,t,r){if(n.isQuirksMode()&&(e instanceof mtjQuery||e&&e.nodeType))return;t=o.get("CommonUtils").defaultValue(t,1);var i=d.get();if(i){var a=parseInt(i.l),s=i.f,u=i.u;if(a>=t&&b(s,u,r))try{w(i.m?C()+wf(e):e)}catch(l){}}};function S(e){return e.debug=function(t,n,r){return e("debug",t,n,r)},e.info=function(t,n,r){return e("info",t,n,r)},e.warn=function(t,n,r){return e("warn",t,n,r)},e.error=function(t,n,r){return e("error",t,n,r)},e}l.sendServerLog=S(function(e,t,n,r){o.get("EventCollectorLoggerPixel").log(e,t,n),l.customerLog(t,g[e],r)}),l.wrapServerLog=function(e){return S(function(t,n,r,i){l.sendServerLog(t,n,r,i||e)})};var y=0,E=[];l.timer=function(e){y++;var n=(new Date).getTime();return{stop:function(){var r=_f(t.getCookie(p));if(!r||!r.m)return;var i=(new Date).getTime(),o=i-n,a=Array(y).join("->\t"),s=C()+a+e+": "+o+"ms";1==y?(w(s),T()):E.push(s),y--}}};function T(){for(var e=E.length-1;e>=0;e--)w(E[e]);E.length=0}function C(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "}function b(e,t,n){var r=!0;return e?r=mtjQuery.inArray(n,e)!=-1:t&&(r=mtjQuery.inArray(n,t)==-1),r}l.enableCustomerLogs=function(e){return d.enable(e)},l.error=function(e,t,n){try{var r,i=arguments.callee.caller,o=i?i.name:"N/A";if(e&&e.message){var a=t?t+"\n":"";r=a+"File : "+e.fileName+"\n - Function : "+o+"\n - Line : "+e.lineNumber+"\n - Msg : "+e.message}else r="Function : "+o+"\n - "+t;e&&e.stack&&(r+="\n - Stack: "+e.stack),m&&I(r,1,n),c&&!window.wmNoAlert&&alert("Dev mode alert: "+r),customerLog("Error: "+r)}catch(s){}};function I(e,t,n){try{if(!o.get("AuditingEnabledIndicator").isEnabled())return!0;if(u.isFeatureEnabled("disableAuditErrorLog"))return!0;if(h++,h>5)return;var i={code:t,isInEditor:a.get(),SVNRevision:r.SVNRevision,LibVersion:r.LibVersion};n&&(mtjQuery.extend(n,i),i=n),l.sendServerLog.error(e,i)}catch(s){}}function w(e){if(window.console)console.log(e);else try{var t=A(),n=new Date,r=_(e);t.find("#walkme-console-messages").prepend('<li style="padding: 2px 5px; border-bottom: 1px solid #afafaf"><span style="float: left; color: #afafaf; margin-right: 5px;">'+P(n.getHours())+":"+P(n.getMinutes())+":"+P(n.getSeconds())+" </span>"+r.substring(1,r.length-1)+"</li>");
}catch(i){}}function _(t){return t instanceof e?"-jQuery object: selector - "+t.selector+", value - "+t.val()+", domElement - "+wf(t[0]):wf(t)}function P(e){return e<10?"0"+e:e}function A(){var e=mtjQuery("#walkme-console-box");if(0===e.length){var t=o.get("TopContainerProvider").getTopContainer();e=mtjQuery('<div id="walkme-console-box"></div>');var n=mtjQuery('<div style="display: none;">Walkme Console: [ </div>'),r=mtjQuery('<button type="button" title="Toggle the walkme debug console">Walkme Console</button>'),i=mtjQuery('<ul id="walkme-console-messages"></ul>'),a=mtjQuery('<a href="#">clear</a>');n.append(a),n.append(" ]"),n.append(i),e.append(n),e.append(r),t.append(e),r.click(function(){n.slideToggle("fast",function(){var e=mtjQuery(this).is(":visible")?"Close Console":"Walkme Console";r.text(e)})}),a.click(function(){i.empty()}),n.css({margin:"15px 60px 5px 15px",padding:"5px",border:"1px solid red","background-color":"#FFC",color:"#000"}),r.css({border:"1px solid red","background-color":"#FFFFCC","margin-left":"15px",width:"120px"}),e.css({position:"fixed","z-index":s.POPUP_BALLOON_Z_INDEX,"font-family":"Arial",bottom:"10px",left:"10px",width:"100%","text-align":"left"}),i.css({"background-color":"white",border:"1px solid black",height:"260px","list-style-type":"none",padding:"0","overflow-y":"auto",margin:"5px 0 0"})}return e}l.getAPI=function(){return d};function k(){var e,t,n=this,r=1;function i(n){t=n,e=_f(t.getCookie(p))}n.get=function(){return e},n.enable=function(t){return a(),e.l=t||r,l(),n},n.disable=function(){return e&&(e.l=0,l()),n},n.reset=function(){return e={l:r},l(),n},n.level=function c(c){if(void 0===c)return s("l",null);return a(),e.l=c,l(),n},n.track=function(t){if(void 0===t)return s("f",[]);a();var r=u(t);return delete e.u,e.f=e.f?Rf(r,e.f):r,l(),n},n.untrack=function(t){if(void 0===t)return s("u",[]);a();var r=u(t);return delete e.f,e.u=e.u?Rf(r,e.u):r,l(),n},n.timer=function(t){return a(),t?e.m=1:e.m&&delete e.m,l(),n};function a(){e||(e={})}function s(t,n){return e?e[t]:n}function u(e){if(!o.get("CommonUtils").isDefined(e))return[];if("string"==typeof e)return e=e.replace(/\s/g,""),e.split(",");if(e.length>0)return e}function l(){t.setCookie(p,wf(e),f)}i.apply(null,arguments)}v.apply(null,arguments)}o.register("FeaturedLogger").asCtor(U).asProto().dependencies("FeaturedLoggerConsts, CommonUtils, Logger");function U(e,t,n,r){var i=this;i.customerLog=u;var o,a;function s(){o=r&&r.feature||e.DEFAULT_FEATURE,a=r&&r.logLevel||e.DEFAULT_LOG_LEVEL}function u(){var e=t.formatString.apply(null,arguments);n.customerLog(e,a,o)}s()}o.register("FeaturedLoggerConsts").asInstance({DEFAULT_FEATURE:"No name",DEFAULT_LOG_LEVEL:3}),o.register("CssInjector").asCtor(n.CssInjector).args({jQ:e}),o.register("CssUtils").asCtor(W);function W(){var e=this,t=["@import","expression","javascript","-moz-binding","-o-link","behavior"];e.clearComments=n,e.getSelectors=r,e.isSecure=i;function n(e){return e.replace(/\/\*[\s\S]*?\*\//gm,"")}function r(e){var t=n(e).split(/\s*{[^}]*}\s*/);return t.pop(),t}function i(e){var t=n(e);return!o(t.toLowerCase())}function o(e){for(var n=0;n<t.length;n++){var r=t[n];if(e.indexOf(r)>-1)return!0}return!1}}var V=function(){function t(e,t,n,r){if(this.feSessionManager=t,this._measures=[],this._mutations=[],n)n.bind?(this._syncFunc=n.bind(e),this._cleanFunc=r.bind(e)):(this._syncFunc=function(){return n.apply(e,arguments)},this._cleanFunc=function(){r.apply(e,arguments)});else{var i=o.get("TimerManager");this._syncFunc=function(e){return i.setWalkmeTimeout(e,16)}}}return t.prototype.measure=function(e){return this.addTask(this._measures,e)},t.prototype.mutate=function(e){return this.addTask(this._mutations,e)},t.prototype.remove=function(t){this._measures.splice(e.inArray(t,this._measures),1),this._mutations.splice(e.inArray(t,this._mutations),1)},t.prototype.cleanResources=function(){this._cleanFunc&&this._flushHandler&&this._cleanFunc(this._flushHandler),this._measures=[],this._mutations=[],this._flushHandler=null,this._scheduled=!1},t.prototype.addTask=function(e,t){var n=new a(function(n,r){e.push(function(){n(t())})});return this.scheduleFlush(),n},t.prototype.scheduleFlush=function(){var e=this;this._scheduled||(this._scheduled=!0,this._flushHandler=this._syncFunc(function(){e.flush()}))},t.prototype.flush=function(){for(var e=this;this._measures.length>0||this._mutations.length>0;)this.feSessionManager.wrapSession(function(){e.runTasks(e._measures)}),this.runTasks(this._mutations);this._scheduled=!1},t.prototype.runTasks=function(e){for(var t;t=e.shift();)t()},t}();o.register("DOMSessionManager").asCtor(V).dependencies("win, FESessionManager, requestAnimationFrame, cancelAnimationFrame"),o.register("WalkMeInfo").asCtor(G).dependencies("EndUsersManager,AbCurrentPermutationProvider,LanguageManager,AuditSourceManager,UserGuidContainer,Lib,SettingsFile");function G(e,t,n,r,i,o,a){var s=this;s.getUserGuid=c,s.getEndUserGuid=c,s.getEndUserGuidSource=c,s.getPermutationId=c,s.getLanguage=c,s.getSource=c,s.getCustomVars=c,s.getLibVersion=c,s.setAnalyticsCustomFields=d,s.getAnalyticsCustomFields=p;var u=Array();s.init=function(){s.getUserGuid=i.getUserGuid,s.getEndUserGuid=l,s.getEndUserGuidSource=e.getEndUserGuidSource,s.getPermutationId=t.getCurrentPermutation,s.getLanguage=n.getCurrentLanguage,s.getEnvironmentId=r.get,s.getCustomVars=p,s.getLibVersion=function(){return o.LibVersion},s.getPublishDate=a.getPublishDate};function l(){if(e.getEndUserGuidSource())return e.getEndUserGuid()}function c(){throw new Error("WalkMeInfo not initialized properly")}function d(e,t){return u[e]=t,!0}function p(){return u}}o.register("WalkmeLoader").asCtor(H).dependencies("Lib, WalkmeConfigManager, Consts, TimerManager, CommonEvents, LibDestroyer, DevModeAlertRaiser, UserGuidContainer, WindowBeforeUnloadHandler");function H(e,t,n,r,i,a,s,u,l){var c,d,p=this;function g(){window._walkmeInternals.walkmeLoadLog=[],c={start:{run:function(t){f("st"),Ir=o.get("CommonUtils"),e.profilerAPI=o.get("ProfilerAPI");var n=o.get("SettingsFile").getSettingsFile();o.get("AuditSourceManager").set(n.Environment),u.setUserGuid(n.UserGuids&&n.UserGuids[0]),o.get("RecorderServerManager").set(n.PlayerServer),o.get("EventServerBaseUrl").set(n.EventServer),o.get("FramesetsUtils").waitForFramesHeadsAndBodies(t)},next:"pageReady"},pageReady:{run:function(e){f("pr"),p.libCtorTimer=o.get("Logger").timer("lib constructor"),e()},next:"loadStorage"},loadStorage:{run:function(t){f("ls");var n=o.get("ClientStorageManager");if(!n)return;if(n.init(t,e)===!1)return m("storageManagerInitFailed"),!1;try{window.walkme_lib_in_dev&&s.devModeAlert()}catch(r){}p.libCtorTimer.stop()},next:"loadWalkmeConfig"},loadWalkmeConfig:{run:function(e){f("lwc"),t.init(function(){if(null!=t.Data){var n=t.Data.EndUserSettings,r=o.get("EndUsersManager");r.setEndUserSettings(n),r.createEndUserGuid()}e()})},next:"loadServerStorage"},loadServerStorage:{run:function(e){f("lss");var t=o.get("StorageManagerFactory").bySettingsFile(!0);o.register("ClientOrServerStorageManager").asInstance(t),t===o.get("ClientStorageManager")&&t.removeData(n.STORAGE_KEYS.lastGetDataTime,u.getUserGuid()),t.init(e,e)},next:"afterStorageLoaded"},afterStorageLoaded:{run:function(e){f("asl"),h();var t=o.get("ClientOrServerStorageManager"),n="wm-lang",i="wm-ABPer";t.convertOldCookieStorage(n),t.convertOldCookieStorage(i),document.cookie.indexOf("walkmeDontInitLib")==-1&&r.setWalkmeTimeout(function(){y()},0)}}},d="start"}function f(e){window._walkmeInternals.walkmeLoadLog.push(e)}o.register("loadClasses").asInstance({}).dependencies("CookiesManager,Logger,FramesetsUtils,SettingsFile,JQueryElementFinder,ConditionFunctions,ConditionTreeEvaluator,BBCodeParser,ResourceManager,ClientOrServerStorageManager,EndUsersManager,DataSender,EventSender,AbPermutationManager,LibInitializer,WmAjax,SiteConfigManager,EndUserLoggerManager,AnalyticsManager,ClickAuditManager,RecorderServerManager,EventServerBaseUrl,ServerDataSenderManager,AuditStepsManager,GoalsManager,WalkMeGoalsManager"),o.register("loadClasses2").asInstance({}).dependencies("DebuggerManager,WmInternals,PlayManager,FeaturesManager,TimerManager,CommonEvents,AuditWtsManager,PopupNotificationsService,LoggerManager,TriggersManager,ShoutOutActionDataProvider,LauncherActionDataProvider,AuditTasksManager,LegacyWidgetApiModule,LegacyExternalApiModule,FlowSurveyActivator");function h(){o.get("loadClasses"),o.get("loadClasses2")}p.start=function(e){v(c[d],e)},p.get=function(e){return o.get(e)};function m(t){a.removeWalkMe(t,{sendLog:!0}),e.initFailed=!0}function v(e,t){e&&(e.run?e.run(function(){S(e,t)}):S(e,t))}function S(e,t){if(e){var n=c[e.next];d=e.next,n?v(n,t):t&&t()}}function y(){o.get("WalkmeLoadTimeManager").init(),l.init(),E(),o.get("HostData").isIE(7)||o.get("AuditSourceProvider").isInPlayMode()||o.get("EventSenderInitializer").init(),o.get("LibInitializer").startInitializer()}function E(){var e=o.get("SessionPersister");e.loadOrCreate()}g.apply(null,arguments)}o.register("LibCtorService").asCtor(j).dependencies("Consts, Lib, WmInternals");function j(t,n,r){var i=this;i.init=a;function a(){e(["bind","unbind","on","off","one"]).each(function(t,n){r[n]=function(t,i){e(r)[n](t,i)}}),o.get("DataEncoderFactory").registerEncoders(),o.get("CommonEvents").raiseEvent(t.EVENTS.DICreated,o),o.get("AjaxManager").init(),o.get("CommonEvents").raiseEvent(t.EVENTS.MainStart,{object:n}),o.initialize("Logger"),o.initialize("HostData"),o.get("PerformanceTracker").init(),o.initialize("ElementFinder"),o.get("WalkmeLoader").start()}}o.register("TasksContainer").asCtor(Y),o.register("ContentsContainer").asCtor(Y),o.register("ShuttlesContainer").asCtor(Y),o.register("SurveysContainer").asCtor(Y),o.register("ShoutOutsContainer").asCtor(Y),o.register("SpotlightsContainer").asCtor(Y),o.register("TooltipsContainer").asCtor(Y),o.register("CategoriesContainer").asCtor(Y),o.register("CollectionsContainer").asCtor(Y),o.register("ConditionBlocksContainer").asCtor(Y),o.register("BusinessSolutionsContainer").asCtor(Y),o.register("CoursesContainer").asCtor(Y),o.register("LabelsContainer").asCtor(Y),o.register("LessonsContainer").asCtor(Y),o.register("TagsContainer").asCtor(Y),o.register("TrackedPagesContainer").asCtor(Y),o.register("TrackedElementsContainer").asCtor(Y),o.register("AbExperimentsContainer").asCtor(Y),o.register("SearchProviderUrlsContainer").asCtor(Y);function Y(){var e=this;e.set=r,e.get=i,e.addRange=o;var t;function n(){t=[]}function r(e){t=e}function i(){return t}function o(e){t=t.concat(e)}n()}var z=o.get("UIComponentsClasses"),Q=z.eventBasedObject,K=(z.uiComponentBase,z.idisplayer,z.popupBase,z.shoutOutBase);o.register("SettingsFile").asCtor(q);function q(){var e,t=this;function n(){e=r()||window.wmPreviewSnippet||window.wmSnippet}function r(){if(window.wmPlaySnippetData){var e=_f(window.wmPlaySnippetData);return window.wmPlaySnippet={getSettingsFile:function(){return e}},window.wmPlaySnippet}return null}t.getSettingsFile=function(){return e?e.getSettingsFile()||{}:{}},t.getPublishVersion=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url,r=n.match(/data_([a-z0-9]+)/)[1];return r},t.getPublishDirectory=function(){var e=t.getSettingsFile(),n=e.DataFiles[0].url;return n.substring(0,n.lastIndexOf("/")+1)},t.getCdnServerName=function(){return t.getSettingsFile().CdnServerName||window.mt_cdn_server_name},t.getStorageType=function(){return t.getSettingsFile().Storage},t.getAllUserGuids=function(){return t.getSettingsFile().UserGuids},t.getPublishDate=function(){return t.getSettingsFile().PublishDate},t.getUrl=function(){return window._walkmeInternals&&window._walkmeInternals.settingsUrl},t.getPlayerRelatedPath=function(){var e=t.getSettingsFile().LibFile,n=/http.+\/player\//.exec(e);return n[0]},n()}o.register("CdnServer").asCtor(X).dependencies("SettingsFile");function X(e){var t=this;t.get=i,t.override=r;var n;function r(e){n=e}function i(){return n||e.getCdnServerName()||""}}o.register("CookiesManager").dependencies("logger=Logger").injectToProperty().asCtor(J);function J(){var e,t,n,r=this;function i(r){e=o.get("DataValueEncoder"),t=o.get("DataNameEncoder"),n=o.get("Consts")}this.setCookie=function(n,r,i,o){try{"string"!=typeof r&&(r=r.toString()),r=e.encode(r);var a="";o&&o.length>0&&(a="; domain="+o);var s=new Date;s.setTime(s.getTime()+1e3*i);var u="; expires="+s.toUTCString(),l=r+u+"; path=/"+a;document.cookie=t.encode(n)+"="+l}catch(c){this.logger.error(c)}},this.getCookie=function(n){var r,i,o,a=t.encode(n),s=!1,u=document.cookie.split(";");for(r=0;r<u.length;r++){if(i=u[r].substr(0,u[r].indexOf("=")),o=u[r].substr(u[r].indexOf("=")+1),i=i.replace(/^\s+|\s+$/g,""),i==a)return e.decode(o);i==n&&(s=e.decode(o))}return s},this.getCurrentDomain=function(){var e=r.getCookie(n.DOMAIN_IN_COOKIE);if(e)return e;var t=window.location.hostname,i="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$";if(new RegExp(i).test(t))return r.setCookie(n.DOMAIN_IN_COOKIE,t,n.DEFAULT_COOKIE_SECONDS,t),t;if(t.indexOf(".")==-1)return null;for(var o=t.split("."),a="",s=o.length-1;s>=0;s--)if(""!=a&&(a="."+a),a=o[s]+a,r.setCookie(n.DOMAIN_IN_COOKIE,a,n.DEFAULT_COOKIE_SECONDS,a),r.getCookie(n.DOMAIN_IN_COOKIE)==a)return a;r.setCookie("wm-test","wm-test",n.DEFAULT_COOKIE_SECONDS);var u=r.getCookie("wm-test");if("wm-test"!=u)try{console.log("WalkMe requires the browser to accept cookies - please enable cookies in your browser.")}catch(l){}else this.logger.error(new Error("Cannot get domain from: "+t));return},i.apply(null,arguments)}o.register("FindElementCornerMargin").asInstance(1),o.register("FindElementCornerFunctions").asFunction(function(e){return[function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()/2,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()/2}},function(t){return{x:t.offset().left+e,y:t.offset().top+e}},function(t){return{x:t.offset().left+e,y:t.offset().top+t.outerHeight()-e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+e}},function(t){return{x:t.offset().left+t.outerWidth()-e,y:t.offset().top+t.outerHeight()-e}}]}).dependencies("FindElementCornerMargin"),o.register("ElementPositionCalculator").asCtor($).dependencies("Consts, PositionHelper");function $(e,t){var n=this;n.getElementPosition=i;function r(){}function i(n,r){try{var i,o;if(n==e.EMBEDMENT_TYPE.EmbedInOwnerDocument){var a=r.offset();i=Math.floor(a.top),o=Math.floor(a.left)}else if(n==e.EMBEDMENT_TYPE.EmbedInTopDocument){var s=t.getPosRelativeToWindow(r[0],window,!0);i=s.top,o=s.left}var u=r.height(),l=r.width();return{top:i,left:o,height:u,width:l}}catch(c){return{}}}r()}o.register("StorageResourceManager").asCtor(Z).dependencies("SettingsFile, CommonUtils, win");function Z(e,t,n){var r=this,i="hi",o="sc",a="wm-cdhi-o",s=31;r.getOrigin=function(){if(t.isLocalStorageEnabled()){var e=n.localStorage.getItem(a);if(e)return e}var r=u(i);if(r)return r;return t.getOrigin()},r.getHiddenIframePath=function(e){var t=e?".compress":"";return r.getOrigin()+Nf("/player/resources/CD/CDhiddenIframe{1}_v{0}.html",s,t)},r.getSaveCookiePath=function(){var e=u(o);return e||r.getOrigin()+"/player/resources/CD/saveCookie.html"};function u(t){var n=e.getStorageType();if(n)return n[t]}}function ee(){var e="walkme-hidden-iframe";this.init=o,this.postMessage=s,this.isInitialized=d,this.getTargetWindow=u,this.terminate=a;var t,n,r;function i(e,t,i){n=t,r=i.getHiddenIframePath(e)}function o(e,n,r){t=l(r),t?n&&n():t=c(e,n,r)}function a(){t&&t.parentNode&&t.parentNode.removeChild(t)}function s(e,t){u().postMessage(e,t)}function u(){return t&&(t.contentWindow||t.window)}function l(t){var n=t?t.ownerDocument:document;return n.getElementById(e)}function c(t,i,o){return n.createIframe(r,e,!1,i,t,o,!0)}function d(){try{return!!u()}catch(e){return!1}}i.apply(null,arguments)}function te(){var t,n,r,i,o,a,s,u="walkme-proxy-iframe";this.init=c,this.isInitialized=m,this.postMessage=h,this.terminate=d;function l(e,t,r,i){o=t,a=i,n=new ee(e,t,r)}function c(a,u){t=a,p(function(){var t=e(r).contents();i=r.contentWindow||r.window,g(t,i),n.init(null,function(){s=o.registerEventHandler("message",f,!1,i),i.targetWindow=n.getTargetWindow(),u&&u()},t.find("body")[0])})}function d(){n&&n.terminate(),s&&s(),r&&r.parentNode&&r.parentNode.removeChild(r)}function p(e){r=document.getElementById(u),r?e():r=o.createIframe("about:blank",u,!1,e,null,null,!0)}function g(e,t){var n=t.document.createElement("script");n.type="text/javascript",n.async=!1,n.text="window.send = function(msg, audience) { targetWindow.postMessage(msg, audience); }",e.find("head")[0].appendChild(n)}function f(e){var n=o.getWalkmeInternals().walkmeWrap;n?n(t,e):t(e)}function h(e,t){i.send.apply(i,[e,t])}function m(){return n.isInitialized()}l.apply(null,arguments)}o.register("CookiesStorageManager").asCtor(ne).asProto().dependencies("CookiesManager,TimerManager,Consts");function ne(t,n,r){var i,o=this,a="#!@DeL@!#";function s(){i=new Sa}o.saveData=function(e,n,r,a){void 0==o.currentDomain&&(o.currentDomain=t.getCurrentDomain()),t.setCookie(e,n,r,o.currentDomain),i.saveData(e,n,r,a)},o.getData=function(e,n){var r=i.getData(e,n);if(void 0===r&&(r=t.getCookie(e),r===a||r===!1))return;return r},o.removeData=function(e,t){i.removeData(e,t);var n=o.getData(e);void 0!==n&&o.saveData(e,a,-1)},o.removeAllData=function(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++)if(0===e.trim(t[n]).toLowerCase().indexOf("wm-")){var r=e.trim(t[n].split("=")[0]);document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}},o.getInternalKeys=function(t,n){for(var i=document.cookie.split(";"),o={},a=0;a<i.length;a++)if(0===e.trim(i[a]).toLowerCase().indexOf(n)){var s=e.trim(i[a].split("=")[0]);s!==r.DOMAIN_IN_COOKIE&&(o[s]=this.getData(s))}return o},o.refreshGetData=function(e,t){for(var n=0;n<e.length;n++)i.clear(e[n]);t&&t()},s.apply(null,arguments)}o.register("ExtensionStorageManager").asCtor(re).asProto().dependencies("TimerManager, Logger");function re(e,t){var n=this,r=5,i=300;function o(){}n.init=function(o){if(window.walkmeExt)return void o();if(0==r)return void t.customerLog("Extension storage is not available, walkme can not load",3);r--,e.libSetTimeout(function(){n.init(o)},i)},n.saveData=function(e,t,n,r){var i={val:t,exp:a(1e3*n)};walkmeExt.SaveData(e,wf(i),r)},n.getData=function(e,t){var n=walkmeExt.GetData(e,t);if(n){var r=_f(n);return r.val}},n.removeData=function(e,t){walkmeExt.removeData(e,t)},n.removeAllData=function(e){walkmeExt.RemoveAllData(e)},n.getAll=function(e){return walkmeExt.GetAll(e)};function a(e){return s()+e}function s(){return(new Date).getTime()}o.apply(null,arguments)}o.register("ExtensionConfigManager").asCtor(ie);function ie(){var e=this;e.get=function(e){return window._walkmeExtension&&"undefined"!=typeof window._walkmeExtension[e]?window._walkmeExtension[e]:void 0}}o.register("WalkMejStorageManager").asCtor(oe).asProto().dependencies("CommonUtils");function oe(e){var t,n,r=this,i="walkMe_";function o(){try{n=e.isLocalStorageEnabled(),a()}catch(t){}}function a(){if(!r.isEnabled())return;t=window.localStorage;var e=_f(t.getItem("wm-storage"));if(!e)return;var n=e.__jstorage_meta||{},i=n.TTL||{};for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],s=i[o],l=u();s>l&&r.saveData(o,a,(s-l)/1e3)}t.removeItem("wm-storage")}this.init=function(e){if(!r.isEnabled())return!1;e()},this.saveData=function(n,o,a){a=e.defaultValue(a,0),r.removeData(n);var u={val:o,exp:s(1e3*a)};t.setItem(i+n,wf(u))},this.getData=function(e){var n=t.getItem(i+e);if(n){var o=_f(n);if(!(o.exp<u()))return o.val;r.removeData(e)}},this.removeData=function(e){t.removeItem(i+e)},this.removeAllData=function(){Object.keys(localStorage).forEach(function(e){0===e.indexOf(i)&&localStorage.removeItem(e)})},this.getInternalKeys=function(e,n){function o(e,t,i){e=e.substr(i),e.toLowerCase().indexOf(n)>-1&&(t[e]=r.getData(e))}for(var a={},s=i.length,u=0;u<t.length;u++){var l=t.key(u);o(l,a,s)}return a},this.isEnabled=function(){return n};function s(e){return u()+e}function u(){return(new Date).getTime()}o.apply(null,arguments)}o.register("ServerStorageSettingsService").asCtor(ae).dependencies("SettingsFile");function ae(e){var t=this;t.isServerStorageOn=r;var n="ss";function r(){var t=e.getStorageType();return!!t&&1==t[n]}}o.register("StorageManagerFactory").asCtor(se).dependencies("UserGuidContainer, SettingsFile, FeaturesManager, Logger, HostData, CommonUtils, Consts, ServerStorageSettingsService");function se(e,t,n,r,i,a,s,u){var l,c,d,p,g,f,h=!0,m=this,v="st",S="cm",y="sm";function E(){l=e.getAllUserGuids,c=n.isFeatureEnabled}m.bySettingsFile=function(e){var n=Ir.getWindowCookie("wm-stt"),r=n?m.byType(n):m.byType(t.getStorageType());return e&&u.isServerStorageOn()&&!o.get("EndUsersManager").isWalkMeGeneratedEndUserType()&&(r=o.get("ServerStorageManager")),r},m.byType=function(e){var t,n=T(e),r=!1,i=!1,o=!1,a=C(y);switch(n){case s.STORAGE_TYPE.JStorage:r=!0;break;case s.STORAGE_TYPE.CrossDomainCookies:a=w.Cookies,i=!0;break;case s.STORAGE_TYPE.CrossDomainLocalStorage:a=w.LocalStorage;case s.STORAGE_TYPE.CrossDomain:i=!0;break;case s.STORAGE_TYPE.Extension:o=!0;break;case s.STORAGE_TYPE.ProxyIframe:i=!0,t=!0;break;case s.STORAGE_TYPE.Cookie:}return I(r,i,o,a,t)};function T(e){if(!e)return e;if("string"==typeof e)return e;var t=e[v];return t[i.browser.string]||t[i.browser.name]||t["*"]}m.byFeature=function(){var e=c("jstorage"),t=c("crossdomain");return I(e,t)};function C(e,n){var r=t.getStorageType();if(!r||void 0===r[e])return n;return r[e]}function b(){return!!C(S,h)}function I(e,t,n,r,i){var o,a=l(),s=a[0];return o=t?_(a,t,s,r,b(),i):e?k(s):n?A(s):P(s)}function _(e,t,n,i,o,u){if(!d){var l=new va(a,e,t,i,o,u);d=new ya(s.STORAGE_TYPE.CrossDomain,l,n,r,a)}return d}function P(e){if(!g){var t=o.get("CookiesStorageManager");g=new ya(s.STORAGE_TYPE.Cookie,t,e,r,a)}return g}function A(e){if(!f){var t=o.get("ExtensionStorageManager");f=new ya(s.STORAGE_TYPE.Extension,t,e,r,a)}return f}function k(e){if(!p){var t=o.get("WalkMejStorageManager");p=new ya(s.STORAGE_TYPE.JStorage,t,e,r,a)}return p}E.apply(null,arguments)}function ue(){var e,t,n,r,i,a=2600,s="wm-dt",u="wm-ne",l=this;function c(a,s,u,l){t=a,e=s,n=u,r=o.get("DataMinifier"),i=l}l.saveData=function(n){var i=r.minifyData(n);if(l.removeData(),void 0===i)return;for(var o=d(i,a),c=0;c<o.length;c++){var p=o[c];t.saveToStorage(s+c,p,e)}t.saveToStorage(u,o.length,e)};function d(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++){var o=t>e.length?e.length:t,a=e.slice(0,o);e=e.substring(o),n.push(a)}return n}l.getData=function(){var e,n=g();if(void 0!=n){e="";for(var i=0;i<n;i++){var o=t.getFromStorage(s+i);e+=o}}var a,u;if(e)try{a=r.deminifyData(e),a=a?a:void 0}catch(l){u=l}return(u||n>0&&!a)&&p(u),a};function p(e){n(e,"Storage data is malformed, discarding it."),l.removeData()}l.removeData=function(){var n=g();if(t.saveToStorage(u,0,e),void 0!=n)for(var r=0;r<n;r++)t.saveToStorage(s+r,null,e)};function g(){return t.getFromStorage(u)}c.apply(null,arguments)}o.register("StringCache").asCtor(le).asProto();function le(){var e=5,t=[],n=[];this.set=function(r,i){t.push(r),n.push(i),t.length>e&&(t.shift(),n.shift())},this.getValue=function(e){for(var r=0;r<t.length;r++)if(t[r]==e)return n[r]},this.getKey=function(e){for(var r=0;r<n.length;r++)if(n[r]==e)return t[r]}}o.register("ButtonSiteConfigKeyGenerator").asCtor(ce);function ce(){var e=this;e.generateKey=t;function t(e){return e+"ButtonText"}}o.register("WelcomeButtonSiteConfigKeyGenerator").asCtor(de);function de(){var e=this;e.generateKey=t;function t(e){return"WelcomeStepButton"+e+"Text"}}o.register("BalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, ButtonSiteConfigKeyGenerator"),o.register("WelcomeBalloonButtonDataGenerator").asCtor(pe).dependencies("SiteConfigManager, WelcomeButtonSiteConfigKeyGenerator");function pe(e,t){var n=this;n.generateWithoutBackground=o,n.generate=i;function r(){}function i(e){return a(e,!1)}function o(e){return a(e,!0)}function a(n,r){var i=e.get(),o=t.generateKey(n);return{name:i[o],type:n.toLowerCase(),weak:r}}r()}o.register("AjaxProxyIframeManager").asCtor(ge).dependencies("CommonUtils");function ge(t){var n,r,i,o={},a=1,s="walkme-ap-iframe",u=1,l=this;l.init=c,l.postMessage=g,l.abort=f;function c(){i=e.Deferred(),n=t.getOrigin()+Nf("/player/resources/AP/ajaxProxyIframe_v{0}.html",u),r=t.createIframe(n,s,!1,d,p)}function d(){i.resolve()}function p(e){if(n.toLowerCase().indexOf(e.origin)<0)return;var t=_f(e.data);if(!t.wmAP)return;if(!o[t.requestIndex])return;t.data=_f(t.data),o[t.requestIndex].requestDefer.resolve(t)}function g(e,t){h(a,t),m(e,a),a++}function f(e){delete o[e]}function h(t,n){o[t]={requestDefer:e.Deferred(),result:""},o[t].requestDefer.promise().then(function(e){delete o[t],n(e)})}function m(e,o){var a={origin:t.getWinOrigin(),requestIndex:o,message:e,wmAP:!0};i.promise().then(function(){r.contentWindow.postMessage(wf(a),n)})}}o.register("ClassWalkMeAPI").asCtor(fe).dependencies("CommonEvents, Consts, AnalyticsPropertiesManager, DebuggerManager, SiteConfigManager, UIChangeTracker, Logger, WalkMeVisibilityChecker, HtmlDecoder, WalkthrusContainer, SettingsValuesRetriever, LabelsContainer, PageChangeTracker").asSingleton();function fe(e,n,r,i,a,s,u,l,c,d,p,g,f){var h=this;h.getPlayInitiatorEnum=S,h.getWalkthrus=y,h.getFlows=E,h.getWalkthrusLabels=T,h.startContentById=P,h.startSurveyById=A,h.startWalkthruById=k,h.startWalkthruByIndex=O,h.canStartWalkthru=D,h.setWalkthruVisibility=N,h.stopWalkthru=x,h.startFlowById=L,h.stopFlow=M,h.setAnalyticsCustomField=F,h.setAnalyticsProperty=R,h.enableLogs=B,h.loadTasks=U,h.getTasks=W,h.getWidgetMode=V,h.setWidgetMode=G,h.getWidgetInitialState=H,h.changeLanguage=j,h.getSupportedLanguages=Y,h.getCurrentLanguage=z,h.getTree=Q,h.triggerUIChange=K,h.triggerPageChange=q,h.launchTracker=X,h.startTestMe=J,h.log=u.getAPI(),h.getObjectsTree=$;var m=u.wrapCustomerLog("walkmeAPI");function v(){e.raiseEvent(n.EVENTS.WalkmeApiStarted,{object:h})}function S(){return n.STEP_PLAY_INITIATOR_ENUM}function y(e){try{for(var t=d.getWalkthrus(),n=new Array,r=0;r<t.length;r++){var i=t[r].CustomField1;i&&(i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"));var o={Index:r,Name:t[r].Name,Id:t[r].TutorialId,Visible:t[r].IsVisible,CustomField1:i,Description:t[r].Description,Keywords:t[r].Keywords};e&&(o.ConditionsPassed=_walkMe.canShowTutorial(t[r]),o.isPackageHidden=_walkMe.isTutorialPackageHidden(t[r]),void 0==t[r].Keywords?o.Keywords=[]:o.Keywords=t[r].Keywords),n.push(o)}return n}catch(a){m("walkMeAPI - error running getWalkthrus.",3)}}function E(){try{for(var e=window._walkmeInternals.ctx,t=e.get("BusinessSolutionsManager").getAll(),n=e.get("CommonUtils").clone(t),r=0;r<n.length;r++){var i=n[r].Settings.CustomField1;i&&(n[r].Settings.CustomField1=c.decodeHtml(i,['"',"'","&"]))}return n}catch(o){m("walkMeAPI - error running getFlows.",3)}}function T(e){try{var t=C();if(null==t)return null;for(var n=this.getWalkthrus(e),r=b(t,n),i=a.get(),o=[],s=0;s<t.length;s++){var u={Name:t[s].Name,Id:t[s].Id,Walkthrus:I(n,t[s].LinkedTutorials,t[s].Id)};o.push(u)}return{unlabeledWalkthrus:r,labels:o,unlabeledFirst:i.Settings.labels&&1==i.Settings.labels.unlabeldOnTop}}catch(l){m("walkMeAPI - error running getWalkthrusLabels.",3)}}function C(){var e=p.getSettingsValue(a.get().Settings,"labels",null);if(e&&1==e.useLabels)return g.get();return null}function b(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=e[r].LinkedTutorials,o=0;o<i.length;o++)n.push(i[o]);for(var a=[],r=0;r<t.length;r++)w(t[r].Id,n)||a.push(t[r]);return a}function I(e,t,n){for(var r=[],i=0;i<e.length;i++)if(w(e[i].Id,t)){var o=mtjQuery.extend(!0,{},e[i]);o.labelId=n,r.push(o)}return r}function w(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function _(e){for(var t=d.getWalkthrus(),n=0;n<t.length;n++)if(t[n].TutorialId==e)return n;return-1}function P(e,t,r){try{if(e<0)return!1;t=void 0!==t?t:n.STEP_PLAY_INITIATOR_ENUM.API;var i={type:t};return Z(i),r&&(i.objectId=r),o.get("ContentsManager").activateById(e,i),!0}catch(a){m("walkMeAPI - error running startContentById.",3)}}function A(e,t){try{if(e<0)return!1;return t=t||{type:n.STEP_PLAY_INITIATOR_ENUM.API},Z(t),o.get("SurveysManager").activateById(e,t)}catch(r){m("walkMeAPI - error running startSurveyById.",3)}}function k(e,t){try{"object"!=typeof e&&(e={id:e,fromStep:t});var r=e.id,i=e.fromStep,o=e.playInitiator;if(r<0||"number"!=typeof r)return!1;var a=_(r);if(a<0)return!1;return o||(o={type:n.STEP_PLAY_INITIATOR_ENUM.API}),h.startWalkthruByIndex({index:a,fromStep:i,playInitiator:o})}catch(s){m("walkMeAPI - error running startWalkthruById.",3)}}function O(e,t){try{if(!l.isWalkMeVisible())return!1;"object"!=typeof e&&(e={index:e,fromStep:t});var r=e.index,i=e.fromStep,o=e.playInitiator;if(r<0||"number"!=typeof r)return!1;return o||(o={type:n.STEP_PLAY_INITIATOR_ENUM.API}),Z(o),_walkMe.startNewTutorial(r,i,!1,o)}catch(a){m("walkMeAPI - error running startWalkthruByIndex.",3)}}function D(e,t){try{if(!l.isWalkMeVisible())return!1;if(e<0||"number"!=typeof e)return!1;var n=_(e);if(n<0)return!1;return _walkMe.startNewTutorial(n,t,!0)}catch(r){m("walkMeAPI - error running canStartWalkthru.",3)}}function N(e,t){try{var n=d.getWalkthrus(),r=_(e);if(r<0)return!1;return n[r].IsVisible=t,!0}catch(i){m("walkMeAPI - error running setWalkthruVisibility.",3)}}function x(){try{_walkMe.stopTutorial()}catch(e){m("walkMeAPI - error running stopWalkthru.",3)}}function L(e,t){try{if(!l.isWalkMeVisible())return!1;var r={type:n.STEP_PLAY_INITIATOR_ENUM.API};return window._walkmeInternals.ctx.get("BusinessSolutionsManager").activateById(e,r,t)}catch(i){m("walkMeAPI - error running startFlowById.",3)}}function M(){try{if(!l.isWalkMeVisible())return!1;return window._walkmeInternals.ctx.get("BizflowApi").stop()}catch(e){m("walkMeAPI - error running stopFlow.",3)}}function F(e,t){try{if(e>n.ANALYTICS_CUSTOM_VARS.MaxCustomFields||e<1||t.length>n.ANALYTICS_CUSTOM_VARS.MaxVarLength)return!1;return o.get("WalkMeInfo").setAnalyticsCustomFields(e-1,t)}catch(r){m("walkMeAPI - error running setAnalyticsCustomField.",3)}}function R(e,t){try{r.setPredefinedPropertyValue(e,t)}catch(n){m("walkMeAPI - error running setAnalyticsProperty.",3)}}function B(e){try{return void 0==e&&(e=!0),this.log.enable(e)}catch(t){m("walkMeAPI - error running enableLogs.",3)}}function U(e,t){try{return window._walkmeInternals.ctx.get("TodoListManager").loadTasks(e,t)}catch(n){m("walkMeAPI - error running loadTasks.",3)}}function W(e){try{return window._walkmeInternals.ctx.get("TodoListManager").getApiTasks(e)}catch(t){m("walkMeAPI - error running getTasks.",3)}}function V(){return"Walkthrus"}function G(e){return"Deprecated"}function H(){return"Closed"}function j(e,t){try{return o.get("LibInitializer").changeLanguage(e,t)}catch(n){}}function Y(){try{return t.ctx.get("LanguageManager").getMenuLanguages()}catch(e){m("walkMeAPI - error running getSupportedLanguages.",3)}}function z(){try{return t.ctx.get("LanguageManager").getCurrentLanguage()}catch(e){m("walkMeAPI - error running getCurrentLanguage.",3)}}function Q(){try{return _walkMe.getUiDataProvider().uiObjectsTree()}catch(e){m("walkMeAPI - error running getTree.",3)}}function K(){try{return s.triggerUIChange()}catch(e){m("walkMeAPI - error running triggerUIChange.",3)}}function q(){try{return f.triggerPageChange()}catch(e){m("walkMeAPI - error running triggerPageChange.",3)}}function X(e,t){try{return i.launchDebuggerIfEnabled(e,t)}catch(n){m("walkMeAPI - error running launchTracker.",3)}}function J(e){try{var t=o.get("TestmeApi");t.rememberTestMeIsOn(),window.walkMeTestMeClearStorage=!0,window.walkmeTestMeFilter=e,window._testMe?(_testMe.exit(),
_testMe.start()):t.loadTestMe()}catch(n){m("walkMeAPI - error running startTestMe.",3)}}function $(){try{return window._walkmeInternals.ctx.get("WidgetUiApi").getObjectsTree()}catch(e){m("walkMeAPI - error running getObjectsTree.",3)}}function Z(t){e.raiseEvent(n.EVENTS.ApiWasCalled,{initiator:t})}v()}o.register("WalkMeVisibilityChecker").asCtor(he).dependencies("SiteConfigManager, AbTestingManager");function he(e,t){var n=this;n.isWalkMeVisible=r;function r(){var n=0!==e.get().ShowWalkMe,r=t.shouldShowWidget();return n&&r}}var me=function(){function t(e,t,n){this.logger=t,this._handlers=[],this._teardownHandlers=[]}return t.prototype.listen=function(t){this._handlers.push(t),this._messageHandler||(this._messageHandler=e.proxy(function(){this.handleMessage.apply(this,arguments)},this),window.addEventListener?window.addEventListener("message",this._messageHandler,!1):window.attachEvent("onmessage",this._messageHandler))},t.prototype.addTeardownCallback=function(e){this._teardownHandlers.push(e)},t.prototype.cleanResources=function(){for(var e=this,t=[],n=0;n<this._teardownHandlers.length;n++)t.push(this._teardownHandlers[n]());a.all(t).then(function(){return e.releaseEventHandlers()})},t.prototype.releaseEventHandlers=function(){if(!this._messageHandler)return;window.addEventListener?window.removeEventListener("message",this._messageHandler,!1):window.detachEvent("onmessage",this._messageHandler),this._messageHandler=null,this._handlers=[]},t.prototype.handleMessage=function(e){for(var t=0;t<this._handlers.length;++t)try{this._handlers[t].apply(null,arguments)}catch(n){this.logger.error(n)}},t}();o.register("PostMessageListener").asCtor(me).dependencies("Consts,Logger,WmInternals"),o.register("SiteConfigManager").asCtor(ve);function ve(){var e=this;e.get=n,e.set=r;var t=[];function n(){return t}function r(e){if(t=e,t!=[]){if(o.get("CustomCssSetter").setCustomCssIfNeeded(null)===!1&&!o.get("FeaturesManager").isFeatureEnabled("loadNoStyle"))return void o.get("LibDestroyer").removeWalkMe("set custom css failed",{sendLog:!0});o.get("PositionHelper").extendVisibilityFilters()}}}o.register("LibDestroyer").asCtor(Se).dependencies("WalkthruBalloonContainer, UiUtils, TimerManager, CommonEvents, Consts, PositionHelper, TopContainerProvider, CommonUtils");function Se(n,r,i,a,s,u,l,d){var p=this,g=!1,f=[];p.releaseAllElements=y,p.releaseBalloons=T,p.releaseShoutOuts=I,p.releaseFlow=P,p.removeWalkMe=k,p.destroyAll=h,p.releaseTeachMeElements=w;function h(e){if(e&&f.push(e),g)return void o.get("Logger").customerLog("destroyAll - already destroying",1);g=!0,o.get("Logger").customerLog("destroyAll - begin",1),o.get("WalkthrusModule").setMember("tutorialRunSettingsMap",{}),o.get("ClientStorageManager").releaseCallbacks(),o.get("WalkthrusModule").setMember("executeTutorialNextStepNotFinished",!1),o.get("ConditionCheckerType").cleanResources(),o.get("UIVisibilityManagerType").cleanResources(),o.get("DOMSessionManager").cleanResources(),o.get("BizFlowOnBeforeUnloadChecker").destroy(),o.get("FlowTransitionDelayer").destroy(),o.get("jQueryCacheCleaner").destroy(),v(),o.get("GoalsManager").cleanResources(),y().pipe(function(){o.get("Logger").customerLog("destroyAll - releaseAllElements finished",1)}).pipe(m).pipe(P).pipe(i.releaseAllTimeouts).pipe(function(){o.get("Logger").customerLog("destroyAll - calling user callbacks",1);for(var e=0;e<f.length;e++)f[e]();f=[],g=!1})}function m(){var e=o.get("CdnServer").get().replace("http://","").replace("https://","");if(mtjQuery("script[src*='"+e+"']").not("script[src*='maketutorial_lib']").not("[src*='jquery']").not("[src*='wmjQuery']").remove(),mtjQuery(".mt-to-destroy, .walkme-to-destroy").remove(),S(".mt-to-destroy, .walkme-to-destroy"),window._walkmePlayer&&window._walkmePlayer.destroyWalkMePlayer&&window._walkmePlayer.destroyWalkMePlayer(),window.walkmeWidget&&window.walkmeWidget.destroyWalkMePlayer&&window.walkmeWidget.destroyWalkMePlayer(),o.get("SmartTipSetActivationInitiator").stop(),o.get("AppletActivationListener").cleanResources(),o.entry("UIChangeTracker").wasReady()){var t=o.get("UIChangeTracker");t&&(t.stop(),t=null)}if(o.entry("PageChangeTracker").wasReady()){var n=o.get("PageChangeTracker");n&&(n.stop(),n=null)}A()}function v(){window._testMe&&(_testMe.exit(),e("script[src*='waklme_testme']").remove(),window._testMe=void 0,window.walkMeTestMeLoad=void 0,o.get("ClientStorageManager").removeData(b),window.walkMeTestMeClearStorage=void 0,window.testMeData&&(window.testMeData=void 0,o.get("Logger").customerLog(E,"Test me data cleared",1)),o.get("Logger").customerLog(E,"_testMe cleared",1))}function S(t){if(!o.get("FramesetsUtils").isFramesetsPage())return;for(var n=o.get("FramesetsUtils").getAllFramesDocuments(),r=0;r<n.length;r++)e(t,n[r]).remove()}function y(t){var n=e.Deferred();return n.promise().then(t),a.raiseEvent(s.EVENTS.ReleaseAllElementsCalled),d.executeParallel({functionsToExecute:[T,o.get("LaunchersModule").releaseLaunchers,I,_,w],successCallback:n.resolve,failCallback:n.reject}),n.promise()}function T(e){o.get("Logger").customerLog("Releasing balloons",5,c),o.get("TriggersManager").releaseAllEventBindings(),o.get("WalkthrusModule").cleanCurrentStepResources(),d.executeParallel({functionsToExecute:[C,o.get("OldBalloonNotifier").closePopup,function(e){r.removeOverlay(),e&&e()}],successCallback:e})}function C(e){a.raiseEvent(s.EVENTS.CallReleaseElementsFromBalloons);var t=n.getAll();n.removeAll(),d.executeParallel({objectsArray:t,functionsToExecute:[function(e,t){e.destroy(!1,t)}],successCallback:e})}function I(e){o.get("ShoutOutsManager").releaseAll(e)}function w(e){o.get("CoursesManager").releaseAll(e)}function _(e){o.get("AttentionGrabberManager").remove(e)}function P(){return o.get("BusinessSolutionsManager").releaseAll()}function A(e){o.get("TrackedPagesManager").releaseAll(),o.get("TrackedElementsManager").releaseAll(),o.entry("PageVisitGuidProvider").wasReady()&&o.get("PageVisitGuidProvider").releaseResources()}function k(n,r){if(r=r||{},r.sendLog){var c=o.get("EventSenderErrorLogger");c.logError("WalkMe was removed",{subType:"RemoveWalkMe",removeWalkMeReason:n,errorCode:r.errorCode})}p.removingWalkMe=!0,o.get("Logger").customerLog(Nf("removeWalkMe called with reason {0}",n)),t.removeWalkMeReason=n;try{o.get("EventSenderDisabler").disable()}catch(g){}a.raiseEvent(s.EVENTS.WalkmeRemoved,{reason:n,errorCode:r.errorCode});try{window.walkme_remove_walkme_callback&&walkme_remove_walkme_callback(n)}catch(g){}h(function(){i.clearGlobalTimeouts(),o.get("CrossDomainManager").get().stop(),o.get("ResourceManager").emptyStyleSheets(),o.get("IFramesManager").releaseEvents(),o.get("AutoStartRunningState").cleanResources(),o.get("SessionPersister").cleanResources(),o.get("WindowBeforeUnloadHandler").cleanResources(),o.get("PostMessageListener").cleanResources();var n=o.get("CdnServer").get().replace("http://","").replace("https://","");e("script[src*='"+n+"']").remove(),e("script[src*='maketutorial']").remove(),e("script[src*='wmjQuery']").remove(),e("script[id='mt_script']").remove(),e("link[id^='mt-css']").remove();l.getTopContainer();e(".walkme-to-remove").remove(),u.removeScrollAndResizeEvents(),d.unregisterEventHandler("load",e.ready,!1,window),e(window).unbind(),e(t).unbind(),O(),D()})}function O(){if(!window._walkmeInternals)return;for(var e=o.get("WalkmeInternalsPersistWhitelist"),n={},r=0;r<e.length;r++)n[e[r]]=t[e[r]];window._walkmeInternals=n}function D(){for(var e=["wmjQuery","mtjQuery","_walkmeConfig","_walkMe","_makeTutorial","MakeTutorialAPI","WalkMeAPI","WalkMePlayerAPI","WalkMeDataClass","WalkmeWidget","_makeTutorialEv","wmContext","WalkmeSnippet","wmPreviewSnippet","wmSnippet","walkme_lib_in_dev","walkme_lib_notify_ServerName","walkme_lib_upload_date","walkme_lib_uploader","walkme_lib_version","ClassMakeTutorial","loadWidgetWrap","loadWidget","walkme_event","walkme_post_lib_loaded","walkme_pre_lib_loaded","mt_cdn_server_name","mt_get_user_settings_url"],t=0;t<e.length;t++)window[e[t]]=void 0}}o.register("endUserGuidValidator").asCtor(ye).dependencies("Consts, ServerStorageSettingsService, EndUsersManager, AuditSourceProvider, Lib,EventSenderErrorLogger, IsInEditor");function ye(e,t,n,r,i,o,a){var s=this;s.validate=l;var u=[c,d];function l(){if(!r.isInPreviewMode()&&a.get())return;for(var e=0;e<u.length;e++){var t=u[e]();if(t)return o.logError(t.message),t}}function c(){if(!t.isServerStorageOn()||!n.isWalkMeGeneratedEndUserType())return;return{message:"Unique User Settings are not supported by server storage",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.cannotHaveBothUniqueUserAndServerStorage}}function d(){if(n.isEndUserGuidValid())return;return{message:"Could not retrieve end user identifier",code:e.EVENTS_PARAMS.WalkmeRemovedErrorCodes.missingUserIdentifyer}}}function Ee(){this.encode=function(e){return encodeURIComponent(e)},this.decode=function(e){return decodeURIComponent(e)}}function Te(){var e={},t=[{from:33,to:33},{from:35,to:36},{from:38,to:43},{from:45,to:58},{from:60,to:91},{from:93,to:126}];this.encode=function(t){for(var r,i="",o=0,a=0;a<t.length;a++){var s=t.charCodeAt(a);if(!n(s)){r=t.charAt(a);var u=t.substring(o,a);e[r]||(e[r]=encodeURIComponent(r)),i+=u+e[r],o=a+1}}return i+=t.substring(o)},this.decode=function(e){try{return decodeURIComponent(e)}catch(t){return e}};function n(e){for(var n in t)if(t.hasOwnProperty(n)&&e>=t[n].from&&e<=t[n].to)return!0;return!1}}function Ce(){this.encode=function(e){return e.replace(/,/g,"%2C").replace(/"/g,"%00").replace(/'/g,"%01").replace(/;/g,"%3B")},this.decode=function(e){return e.replace(/%2C/g,",").replace(/%00/g,'"').replace(/%01/g,"'").replace(/%3B/g,";")}}o.register("DataEncoderFactory").asCtor(be).dependencies("SettingsFile");function be(e){var t="et",n=0,r={0:Te,1:Ee,3:Ce},i="logger=Logger";this.registerEncoders=function(){o.has("DataValueEncoder")||o.register("DataValueEncoder").asCtor(a()).dependencies(i).injectToProperty(),o.has("DataNameEncoder")||o.register("DataNameEncoder").asCtor(Ee).dependencies(i).injectToProperty()};function a(){var i=e.getStorageType();if(i&&void 0!==i[t])return r[i[t]];return r[n]}}o.register("CommonEvents").asCtor(Ie).dependencies("Logger,ApiEventRouter,CurrentWalkthruData,EventsTriggerSyncer,WmInternals").asSingleton();function Ie(t,n,r,i,o){var a=this;a.raiseEvent=u,a.deprecatedRaiseEvent=l,a.sendInternalEvent=l,a.sendAutomationEvent=c;var s=window.wmjQuery&&e(o);function u(e,t){l(e,t)}function l(e,r,a){try{if(!window.wmjQuery)return;s.trigger(e,[r,a]),o.dbgr&&s.trigger("AllEvents",[e,r,a]),n.route(e,r,a),i.sync(e,r)}catch(u){t.error(u)}}function c(n,r){try{var i=d(n);if(r){if(!window.wmjQuery)return;e.extend(i,r)}window.walkme_automation_event&&walkme_automation_event(i)}catch(o){t.error(o)}}function d(e){var t={Type:e},n=r.getCurrentWalkthru();return n&&(t.WalkthruId=n.TutorialId,t.StepIndex=r.currentStep),t}}o.register("MessageSender").asCtor(we).dependencies("CommonEvents");function we(e){var t=this;t.send=n;function n(t,n){return e.raiseEvent(t,n),n.returnValue}}o.register("ApiEventForwarder").asCtor(_e).asProto().dependencies();function _e(e){var t=this;t.forward=o;var n,r;function i(){n=e.apiEventsConfigProvider.get(),r=e.apiEventRaiser}function o(e,t,i){var o=n[e];if(o.transform){var a=o.transform(t,i);r.raise(a.name,a.data)}else r.raise(e,t)}i()}o.register("ApiEventRaiser").asCtor(Pe).asProto().dependencies("Logger, CurrentWalkthruData, win");function Pe(e,t,n,r){var i=this;i.raise=s;var o=r.windowFuncName;function a(){}function s(t,r){try{var i=u(t);r&&(i.ExtraData=r),n[o]&&n[o](i)}catch(a){e.error(a)}}function u(e){var n={Type:e},r=t.getCurrentWalkthru();if(r){n.WalkthruId=r.TutorialId;var i=t.getCurrentStep();i&&(n.StepIndex=i.StepIndex)}return n}a()}o.register("ApiEventRouter").asCtor(Ae).dependencies("NewApiEventsConfigProvider, NewApiEventForwarder, OldApiEventsConfigProvider, OldApiEventForwarder, EditorApiEventForwarder");function Ae(e,t,n,r,i){var o=this;o.route=s;function a(){}function s(o,a,s){var u=!!e.get()[o];u&&(t.forward(o,a,s),i.forward(o,a,s));var l=!!n.get()[o];l&&r.forward(o,a,s)}a()}var ke=function(){function e(){}return e.prototype.sync=function(e,t,n){return n},e}();o.register("EventsTriggerSyncer").asCtor(Oe).dependencies("EventsTrigger");function Oe(t){var n=this;n.sync=i;function r(){}function i(n,r){var i=r?r.defaultValue:void 0,o=t.sync(n,r,i);r&&void 0!==o&&(r.returnValue=o),r&&r.asyncCallback&&(o&&o.then?o.then(r.asyncCallback,r.asyncFailback):e.when(o).then(r.asyncCallback,r.asyncFailback))}r()}o.has("EventsTrigger")||o.register("EventsTrigger").asInstance(new ke),o.register("NewApiEventForwarder").dependencies("NewApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:o.create("ApiEventRaiser",{windowFuncName:"walkme_event"})};return o.create("ApiEventForwarder",t)}),o.register("NewApiEventsConfigProvider").asCtor(De).dependencies("Consts");function De(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t[e.EVENTS.Launchers.LauncherIsShown]={transform:i},t[e.EVENTS.TaskCompleted]={},t[e.EVENTS.TasksLoaded]={},t[e.EVENTS.Launchers.LauncherClicked]={},t[e.EVENTS.Goals.GoalReached]={},t.ABTestingGoalsFetched={},t[e.EVENTS.UIComponentDestroyed]={},t[e.EVENTS.DeployableCreated]={},t.SurveyPlayed={},t.SurveyCompleted={},t.BalloonCreated={},t.WalkthruAborted={},t.WalkthruStopped={},t.UserStoppedWalkthru={},t.UserStoppedWalkthruAfterStop={},t.WalkthruFailedToStart={},t.WalkthruCompleted={},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t.SfVarsExposed={},t.BBCodeLinkClicked={},t.FailureMessageOkButtonPressed={},t.StorageManagerInitialized={},t[e.EVENTS.WalkmeLoaded]={},t[e.EVENTS.Flows.UIFlowStageShown]={},t[e.EVENTS.Flows.FlowCompleted]={},t[e.EVENTS.Flows.FailedToStart]={},t[e.EVENTS.Flows.FlowStopped]={},t[e.EVENTS.Flows.FlowStarted]={},t[e.EVENTS.Flows.BeforeExecutingFlowStage]={},t[e.EVENTS.Flows.AfterCompletingFlowStage]={},t[e.EVENTS.SmartTips.TooltipShown]={},t[e.EVENTS.SmartTips.SmartTipIconShown]={},t[e.EVENTS.WalkmeRemoved]={},t}function i(t,n){return{name:e.EVENTS.Launchers.LauncherIsShown,data:n}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}o.register("OldApiEventForwarder").dependencies("OldApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:o.create("ApiEventRaiser",{windowFuncName:"mt_event"})};return o.create("ApiEventForwarder",t)}),o.register("OldApiEventsConfigProvider").asCtor(Ne).dependencies("Consts");function Ne(e){var t=this;t.get=r;function n(){}function r(){var t={};return t[e.EVENTS.Walkthrus.StepShown]={transform:o},t.WalkthruStopped={transform:i("TutorialStopped")},t.UserStoppedWalkthru={transform:i("UserStoppedTutorial")},t.UserStoppedWalkthruAfterStop={transform:i("UserStoppedTutorialAfterStop")},t.WalkthruCompleted={transform:i("TutorialCompleted")},t.BeforeNewStepShown={},t.BackButtonClicked={},t.NextButtonClicked={},t.DoneButtonClicked={},t}function i(e){return function(t,n){return{name:e,data:t}}}function o(t,n){return{name:e.EVENTS.Walkthrus.StepShown,data:n}}n()}o.register("EditorApiEventForwarder").dependencies("NewApiEventsConfigProvider").asFunction(function(e){var t={apiEventsConfigProvider:e,apiEventRaiser:o.create("ApiEventRaiser",{windowFuncName:"walkme_editor_event"})};return o.create("ApiEventForwarder",t)}),o.register("PostMessage").asInstance(window.postMessage),o.register("NativeTimerFunctionsProvider").asCtor(xe).asSingleton();function xe(){var e=this;e.get=function(){return{clearTimeout:window.clearTimeout,clearInterval:window.clearInterval,setTimeout:window.setTimeout,setInterval:window.setInterval}}}o.register("TimerManager").asCtor(Le).asSingleton().dependencies("CommonEvents,Consts,NativeTimerFunctionsProvider,Logger");function Le(e,n,r,i){var a=this;a.setWalkmeTimeout=A,a.setWalkmeInterval=k,a.playSetTimeout=v,a.playSetInterval=y,a.libSetTimeout=S,a.releaseAllTimeouts=T,a.clearGlobalTimeouts=_,a.releaseTimeoutsArray=I,a.stopTimeoutsArray=I,a.pauseAllTimeouts=C,a.pauseTimeoutsArray=w,a.resumeTimeoutsArray=E,a.resumeAllTimeouts=b,a.overrideTimeouts=P;var s=r.get(),u={libTimeouts:{},playTimeouts:{}},l=[],c="wm-",d={};e.raiseEvent(n.EVENTS.TimerManagerCreationStarted,{object:a});var p=s.setTimeout,g=s.setInterval,f=s.clearTimeout,h=s.clearInterval;function m(e,t){var n=void 0!==d[c+e];if(n)return;t(e)}function v(e,t){return new L(e,t,u.playTimeouts)}function S(e,t){return new L(e,t,u.libTimeouts)}function y(e,t){return new M(e,t,u.playTimeouts)}function E(e){var t=u[e];if(t){for(var n=0;n<l.length;n++)l[n].resume();l.length=0}}function T(){a.releaseTimeoutsArray("libTimeouts"),a.pauseTimeoutsArray("playTimeouts")}function C(){for(var e in u)a.pauseTimeoutsArray(e)}function b(){for(var e in u)a.resumeTimeoutsArray(e)}function I(e){var t=u[e];t&&F(t,function(e){e.clear()})}function w(e){var t=u[e];t&&F(t,function(e){l.push(e),e.pause()})}function _(){for(var e in d)e&&e.indexOf&&0===e.indexOf(c)&&D(d[e])}function P(){var e=o.get("FeaturesManager");e.isFeatureEnabled("overridetimeouts")&&(window.clearTimeout=function(e){m(e,D)},window.clearInterval=function(e){m(e,N)})}function A(e,t){return new L(e,t)}function k(e,t){return g(O(e),t)}function O(e){return t.walkmeWrap?function(){t.walkmeWrap.apply(this,[e])}:e}function D(e){f(e)}function N(e){h(e)}function x(e,t){var n=t&&/function ([\w\d\_]+)\(/.exec(t.toString());o.has("EventSenderErrorLogger")&&o.get("EventSenderErrorLogger").logError(e.message,{functionName:n&&n[1]}),i.customerLog("TimerManager error: "+(e&&e.message))}function L(e,t,n){this.fn=e,this.interval=t,this.timeoutsDict=n||{};var r=this;this.id=p(function(){r.run()},t),this.timeoutsDict[this.id]=this,d[c+this.id]=this.id}L.prototype.timeoutWrap=function(){this.clear();try{this.fn.apply(window)}catch(e){x(e,this.fn)}},L.prototype.run=function(){if(t.walkmeWrap){var e=this;t.walkmeWrap(function(){e.timeoutWrap()})}else this.timeoutWrap()},L.prototype.resume=function(){if(this.cleared)return;var e=this;this.id=p(function(){e.run()},10),this.timeoutsDict[this.id]=this},L.prototype.id=null,L.prototype.cleared=!1,L.prototype.clear=function(){if(this.cleared)return;D.call(window,this.id),this.cleared=!0,delete this.timeoutsDict[this.id],delete d[c+this.id]},L.prototype.pause=function(){if(this.cleared)return;delete this.timeoutsDict[this.id],D.call(window,this.id)};function M(e,n,r,i,o){this.timeoutsDict=r,i=i||window;var a=function(){e.apply(i,o||arguments)},s=function(){t.walkmeWrap?t.walkmeWrap(a):a()};this.id=g(s,n),r[this.id]=this,d[c+this.id]=this.id}M.prototype.id=null,M.prototype.cleared=!1,M.prototype.clear=function(){D(this.id),this.cleared=!0,delete d[c+this.id],delete this.timeoutsDict[this.id]};function F(e,t){for(var n in e)if(e.hasOwnProperty(n))try{t(e[n])}catch(r){}}}o.register("MutationObserverWrapper").asCtor(Me);function Me(){var e=this;e.isEnabled=n,e.watchElement=r;var t={childList:!0,attributes:!0,subtree:!0};function n(){return!1}function r(e,n){var r=new MutationObserver(n);return r.observe(e[0],t),{unbind:function(){r.disconnect()}}}}!function(){var e="mt",t=0,n={0:Fe,2:Re};o.has("DataMinifier")||o.register("DataMinifier").asFunction(function(r,i,o){var a=s();return new a(r,o);function s(){var r=i.getStorageType(),o=r&&r[e];return n[o||t]}}).dependencies("CommonUtils,SettingsFile,Logger")}();function Fe(){var e,t=this;function n(t,n){e=o.get("CJson")}t.minifyData=function(t){if(!t||0==t.length)return;return e.stringify(t)},t.deminifyData=function(t){if(!t)return;return e.parse(t)},n.apply(null,arguments)}function Re(){var e,t=this;function n(t,n){e=t}t.minifyData=function(t){if(!t||0==t.length)return;return e.toJSON(t)},t.deminifyData=function(t){if(!t)return;return e.secureEvalJSON(t)},n.apply(null,arguments)}o.register("TypedDataSender").asCtor(Be).asProto();function Be(){var e,t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,y=this,E=[],T="wm-nx",C=10;function b(c){e=c.serverDataSenderManager,r=c.actionUrl,n=c.beforeSendingManipulationFunc,i=c.technicalSuccessHandler,o=c.sendingThreshold,a=c.dataType,s=c.dateSenderLogFeature,l=c.requestParamsFunc,d=c.logError,u=c.logger.wrapCustomerLog(s),p=c.dataIdFieldName||"iN",h=c.successCallback,m=c.failCallback,S=c.shouldTruncateData,v=c.storageEnabled!==!1,v&&(f=c.defaultDataStorageLifeSeconds,g=new Ea(c.stateManager,c.twoLettersDataType),t=new ue(g,f,d,c.recursiveMinification),E=y.data())}function I(){var e=0;return v&&(e=g.getFromStorage(T,0),g.saveToStorage(T,e+1,f)),e}y.isStorageEnabled=function(){return v},y.sendData=function(t){if("object"!=typeof t){var r=Nf("TypedDataSender - got object with value {0} of type {1} instead of object ({2}).",t,typeof t,a);return void u(r,1)}function i(){if(c)return void u("Not accepting anymore data",3);if(E=y.data(),e.isServerSick()){if(S===!1&&E.length<C)o();else{var t=Nf("TypedDataSender - Server is sick, ignoring new data of type {0} for now",a);u(t,3)}return}o(),e.sendData()}function o(){v||(E.length=0),n&&n(E,t),t[p]=I(),E.push(t),v&&w()}v?g.refreshGetData(null,i):i()},y.persistData=function(){v&&(w(),E&&0!=E.length||g.removeFromStorage(T))};function w(){t.saveData(E)}y.data=function(){return v&&_(),E=E?E:[]};function _(){E=t.getData()}y.actionUrl=function(){return r},y.sendingThreshold=function(){return o},y.dataType=function(){return a},y.truncateData=function(){v&&(E=y.data(),E.splice(1,E.length-1),y.persistData())},y.clearAndStopSavingData=function(){c=!0,E.length=0,v&&t.removeData()},y.technicalSuccessHandler=function(){return i},y.successCallback=function(){return h},y.failCallback=function(){return m},y.requestParamsFunc=function(){return l},y.getDataIdFieldName=function(){return p},y.shouldTruncateData=function(){return S},b.apply(null,arguments)}o.register("ServerDataSenderManagerParams").asInstance({defaultDataStorageLifeSeconds:900,dateSenderLogFeature:"serverDataSender"}),o.register("ServerDataSenderManager").asCtor(Ue).dependencies("Lib,Logger,RecorderServerManager,ServerDataSenderManagerParams,ClientStorageManager,WmAjax,FeaturesManager,TimerManager,Consts");function Ue(e,t,n,r,i,o,a,s,u){var l,c,d,p,g,f,h,m,v,S,y,E=1e3,T=60*E,C="wm-sk",b="wm-sat",I="wm-sst",w=2,_=3*E,P=60*E,A={1:T,2:4*T},k={Success:0,LogicalError:1,TechnicalError:2},O=this,D={};function N(){p=r.defaultDataStorageLifeSeconds,g=r.dateSenderLogFeature,h=r.maxSickAttemps||w,v=r.sendDataAjaxTimeout||P,m=r.checkDataToSendInterval||_,y=r.attemptsWaitTime||A,f=t.wrapCustomerLog(g)}O.register=function(e,n){if(D[e])return D[e];var r=new Be({beforeSendingManipulationFunc:n.beforeSendingManipulationFunc,actionUrl:n.actionUrl,technicalSuccessHandler:n.technicalSuccessHandler,successCallback:n.successCallback,failCallback:n.failCallback,dataType:n.dataType,twoLettersDataType:e,serverDataSenderManager:O,sendingThreshold:n.sendingThreshold,stateManager:i,storageEnabled:n.storageEnabled!==!1,dateSenderLogFeature:g,requestParamsFunc:n.requestParamsFunc,dataIdFieldName:n.dataIdFieldName,defaultDataStorageLifeSeconds:void 0!=n.dataStorageLifetimeSeconds?n.dataStorageLifetimeSeconds:p,logError:t.error,logger:t,recursiveMinification:n.recursiveMinification,shouldTruncateData:n.shouldTruncateData!==!1});return D[e]=r,r},O.start=function(e){O.sendData()},O.stop=function(e){R(),O.removeAllData(),null!=d&&(d.clear(),d=null),null!=S&&(S.clear(),d=null)},O.sendData=function(){var e=x();if(!e||B())return;var t=e.dataSender,n=e.data;if(O.isServerSick())return f("Waiting for server's health in sendData",3),void W();if(n.length>=t.sendingThreshold())f(Nf("sendData - Got {0} {1}s to send, starting now",n.length,t.dataType()),3),null!=d&&(d.clear(),d=null),Y(n,t);else if(null==d||d.cleared){var r=Nf("Got {0} {1}s to send, waiting {2}",n.length,t.dataType(),m);f(r,3),d=s.libSetTimeout(function(){d=null,i.refreshGetData(null,function(){var e=x();if(!e||B())return;var t=e.dataSender,n=e.data;Y(n,t)})},m)}else f("sendData - timeout already exists",5)},O.isServerSick=function(){return F(),i.getData(C)||!1};function x(){var e=L();if(!e)return f("serverDataSenderManager - no data to send. marking it healthy",3),void j();return e}function L(){for(var e=M(),t=e.length-1;t>=0;t--){var n=e[t],r=n.data();if(r.length>0)return{dataSender:n,data:r}}}function M(){return Mf(D)}function F(){var e=L(),t=e&&e.data;t||j()}function R(){i.removeData(C),i.removeData(b),i.removeData(I)}function B(){if(l)return f("There's already a pending request to server",3),!0;return!1}function U(){var e=x();if(!e||B())return;var t=e.dataSender,n=e.data;f(Nf("Got {0} {1}s to send, starting now",n.length,t.dataType()),3),Y(n,t)}function W(){if(c)return void f("Already waiting for server's health",5);null!=d&&(d.clear(),d=null),c=!0;var e=i.getData(b);if(e=e?++e:1,e>h){var t=Nf("Server wasn't healthy for more than {0} attempts, restarting sick mode",e);f(t,0),i.removeData(I),i.removeData(b),c=!1,W()}else{var n=V(e),r=Nf("Sick attempts: {0}, time before next retry: {1} second(s)",e,n/1e3);f(r,3),S=s.libSetTimeout(function(){i.refreshGetData(null,function(){i.removeData(I),i.saveData(b,e,p),c=!1,U()})},n)}}function V(e){var t=i.getData(I);if(!t){var n=G(e);t=(new Date).getTime()+n,i.saveData(I,t,p)}var r=t-(new Date).getTime();return r}function G(e){return y[e]}function H(){i.getData(C);j(),l=!1,U()}function j(){i.removeData(C),i.removeData(b),i.removeData(I),c=!1}function Y(e,t){if(0==n.get().length)return void f(Nf("RecorderServerName is {0}, can't send data of type {1}",n.get(),t.dataType()),2);if(0==e.length)return void f("dataArray's length is 0, no data to send",3);null!=d&&(d.clear(),d=null),l=!0;var r=t.sendingThreshold(),i=Df(e);i.length>r&&(i=i.splice(0,r));var s=t.requestParamsFunc()(i);a.isFeatureEnabled(u.FEATURES.DontMaskEndUserAddress)&&(s.dmeua=1);var c=o.execute({url:n.get()+t.actionUrl(),dataType:"jsonp",data:s,timeout:v});a.isFeatureEnabled("bypassAuditServer")?Q(i,c,t):K(i,c,t);var p=Nf("Sent {0} data of type {1} to server at {2}",i.length,t.dataType(),(new Date).toString());f(p,3)}function z(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r],o=i[t];o&&o>n&&(n=o)}return n}function Q(e,t,n){t.error(function(t,r,i){if(200==t.status&&"parsererror"==r)X(e,n);else{var o=Nf("Server technical (AJAX) error (2) jqXHR:{0}, textStatus:{1}, errorThrown:{2}",wf(t),r,i);f(o,3),ee(i,n)}}),t.success(function(e){var t="Got success while in bypass player server mode";f(t,3),_makeTutorial.Logger.error(null,t)})}function K(e,t,n){t.success(function(t){f("Sending data ajax success",3),q(t,e,n)}),t.error(function(t,r,i){200==t.status&&"parsererror"==r?Z(e,n,i):ee(i,n)})}function q(e,t,n){if(n.technicalSuccessHandler&&n.technicalSuccessHandler())n.technicalSuccessHandler()(e,function(){var r=e.Data||e;Z(t,n,r)},function(){ee(e.Data||e,n)},function(){var r=e.Data||e;X(t,n,r)},t);else switch(e.WMResultCode){case k.Success:X(t,n,e.Data);break;case k.LogicalError:f(n.dataType()+" : Logical error sending data. "+e.Data,3),Z(t,n,e.Data);break;case k.TechnicalError:f(n.dataType()+" : Technical error sending data",3),ee(e.Data||e,n);break;default:f(n.dataType()+" : No error code received - treated as technical error",3),ee(e.Data||e,n)}}function X(e,t,n){if(f("The technical success was also logical success",3),J(e,t),H(),t.successCallback){var r=t.successCallback();r&&r(n)}}function J(e,t){$(e,t)}function $(e,t){for(var n=t.getDataIdFieldName(),r=z(e,n),i=t.data(),o=i.length-1;o>=0;o--){var a=i[o];a[n]<=r&&i.splice(o,1)}t.persistData()}O.removeAllData=function(){for(var e=M(),t=e.length-1;t>=0;t--)e[t].clearAndStopSavingData()};function Z(e,t,n){if(f(Nf("Logical error happened, discarding {0} {1}",e.length,t.dataType()),3),$(e,t),H(),l=!1,U(),t&&t.failCallback){var r=t.failCallback();r&&r(n)}}function ee(e,t){if(i.saveData(C,1,p),f("Truncating data due to sick server",3),te(),l=!1,t&&t.failCallback){var n=t.failCallback();n&&n(e)}W()}function te(){for(var e=M(),t=e.length-1;t>=0;t--){var n=e[t];n.shouldTruncateData()&&n.truncateData()}}N.apply(null,arguments)}o.register("AjaxManager").asCtor(We).dependencies("FeaturesManager, WmjQueryAjaxProvider, AjaxProxyProvider, Consts, win");function We(e,t,n,r,i){var o=this,a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider;function s(){}o.init=function(){a=r.AJAX_PROVIDERS.wmjQueryAjaxProvider,i._walkmeInternals&&i._walkmeInternals.bind&&i._walkmeInternals.bind("dataFilesLoaded",function(){e.isFeatureEnabled("ajaxProxy")&&(n.init(),a=r.AJAX_PROVIDERS.ajaxProxyProvider)})},o.getProvider=function(){var e;switch(a){case r.AJAX_PROVIDERS.ajaxProxyProvider:e=n;break;default:e=t}return e},s.apply(null,arguments)}o.register("AjaxProxyProvider").asCtor(Ve).dependencies("AjaxProxyIframeManager");function Ve(t){var n=this;n.init=r,n.callAjax=i;function r(){t.init()}function i(n){var r=e.Deferred(),i=o(r);return t.postMessage(n,r.resolve),n.success&&i.success(n.success),n.error&&i.error(n.error),i}function o(e){return{success:function(t){e.promise().then(function(e){e.success&&t(e.data)})},error:function(t){e.promise().then(function(e){e.success||t(e.data.jqXHR,e.data.textStatus,e.data.errorThrown)})},abort:function(){e.promise().then(function(e){t.abort(e.requestIndex)})}}}}o.register("WmjQueryAjaxProvider").asCtor(Ge);function Ge(){var t=this;t.callAjax=n;function n(t){return e.ajax(t)}}o.register("WmAjax").asCtor(He).dependencies("CommonEvents, FeaturesManager, AjaxManager, CorsSupportIndicator");function He(e,t,n,r){var i,o,a=this,s=e;function u(){}a.setFeatures=function(e,t){i=e,o=t},a.execute=function(e){return e.dataType=e.dataType?e.dataType:"jsonp","jsonp"===e.dataType&&(i||o&&r.hasCorsSupport())&&l(e),s.sendAutomationEvent("ajaxSent",e),n.getProvider().callAjax(e)},a.loadTextFile=function(e,t,n,r,i){r=r||function(e,t,n){},mtjQuery.ajax(e,{cache:!!i,dataType:"jsonp",jsonpCallback:t,success:n,error:r})};function l(e){e.dataType="json"}u.apply(null,arguments)}var je;!function(e){var t=function(){function e(e,t){this.callback=t,this.timeoutMs=e}return e.prototype.start=function(){var e=this;this.enabled||(this.enabled=!0,this.timerHandle=o.get("TimerManager").setWalkmeTimeout(function(){e.onTick()},this.timeoutMs))},e.prototype.onTick=function(){this.enabled=!1,this.callback()},e.prototype.stop=function(){this.timerHandle&&(this.timerHandle.clear(),this.timerHandle=null),this.enabled=!1},e.prototype.restart=function(){this.stop(),this.start()},e.prototype.isEnabled=function(){return this.enabled},e}();e.SimpleTimer=t,function(e){e[e.Chrome=6]="Chrome"}(e.BrowserConnectionLimit||(e.BrowserConnectionLimit={}));e.BrowserConnectionLimit}(je||(je={}));var je;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.allocateImages()}return n.prototype.getChannelType=function(){return"ImageChannel"},n.prototype.getChannelMethod=function(){return"GET"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n){var r=this,i=encodeURIComponent(e),o=this.assertFree();o.attr(this.getBusyFlag(),"true");var a=this.getPostEventUrl()+"?"+this.getURLQueryParamKey()+"="+i;o.load(function(){o.unbind("load"),o.attr(r.getBusyFlag(),"false"),r.whenFreeCallback&&r.whenFreeCallback(),t&&t(),r.successCallback&&r.successCallback()}).error(function(){n&&n(null,null,null),r.failCallback&&r.failCallback(null,null,null)}),o.attr("src",a)},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){
var e=this.getFreeImg();return null!==e},n.prototype.isIdle=function(){for(var e=0;e<this.images.length;e++)if(!this.isImageFree(this.images[e]))return!1;return!0},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return encodeURIComponent(e).length},n.prototype.maxPacketSize=function(){var e="?"+this.getURLQueryParamKey()+"=";return this.getMaxUrlSize()-this.getPostEventUrl().length-e.length},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.getFreeImg=function(){for(var e=0;e<this.images.length;e++)if(this.isImageFree(this.images[e]))return this.images[e];return null},n.prototype.isImageFree=function(e){return"false"===e.attr(this.getBusyFlag())},n.prototype.allocateImages=function(){this.images=[];for(var e=0;e<this.maxConnections;e++){var t=this.createImage();this.images.push(t)}},n.prototype.createImage=function(){var t=e("<img/>");return t.css("width","1px"),t.css("height","1px"),t.attr(this.getBusyFlag(),"false"),t},n.prototype.getMaxUrlSize=function(){return 2048},n.prototype.getBusyFlag=function(){return"_WM_BUSY_"},n.prototype.getURLQueryParamKey=function(){return"ed"},n.prototype.assertFree=function(){var e=this.getFreeImg();if(!e)throw"Channel is at max capacity. Can't send anymore data.";return e},n.prototype.getCurrentImages=function(){return this.images.slice(0)},n.prototype.dispose=function(){for(var e=0;e<this.images.length;e++)this.images[e].remove()},n}();n.ImageChannel=r}(n=t.Channels||(t.Channels={}))}(je||(je={}));var je;!function(t){var n;!function(n){var r=function(){function n(e){this.maxConnections=t.BrowserConnectionLimit.Chrome,this.currentOpenConnections=0,this.postEventAction=e.postEventAction,this.healthCheckAction=e.healthCheckAction,this.requestTimeoutMs=e.requestTimeoutMs}return n.prototype.getChannelType=function(){return"AjaxChannel"},n.prototype.getChannelMethod=function(){return"POST"},n.prototype.setBaseUrl=function(e){this.baseUrl=e},n.prototype.getBaseUrl=function(){return this.baseUrl},n.prototype.getPostEventUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for post event");return this.baseUrl+this.postEventAction},n.prototype.getHealthCheckUrl=function(){if(!this.baseUrl)throw new Error("No base url provided for health check");return this.baseUrl+this.healthCheckAction},n.prototype.getLineBreak=function(){return"\n"},n.prototype.checkHealth=function(){e.get(this.getHealthCheckUrl())},n.prototype.send=function(e,t,n){if(!this.isAvailable())throw new Error("Channel is at max capacity. Can't send anymore data.");var r=this;this.currentOpenConnections++;var i=o.get("WmAjax").execute({url:this.getPostEventUrl(),data:e,contentType:"text/plain",type:"POST",dataType:"html",timeout:this.requestTimeoutMs||2e3});i.success(function(e){t&&t(),r.successCallback&&r.successCallback(),r.singleLinkFree()}),i.error(function(e,t,i){n&&n(e,t,i),r.failCallback&&r.failCallback(e,t,i),r.singleLinkFree()})},n.prototype.isInitialized=function(){return!!this.baseUrl},n.prototype.isAvailable=function(){var e=this.currentOpenConnections<this.maxConnections;return e},n.prototype.isIdle=function(){return 0===this.currentOpenConnections},n.prototype.withinSizeLimit=function(e){return e<=this.maxPacketSize()},n.prototype.estimateDataSize=function(e){return e.length},n.prototype.maxPacketSize=function(){return 9e3},n.prototype.channelBandwidth=function(){return t.BrowserConnectionLimit.Chrome*this.maxPacketSize()},n.prototype.whenFree=function(e){this.whenFreeCallback=e},n.prototype.fail=function(e){this.failCallback=e},n.prototype.success=function(e){this.successCallback=e},n.prototype.singleLinkFree=function(){this.currentOpenConnections--,this.whenFreeCallback&&this.whenFreeCallback()},n}();n.AjaxChannel=r}(n=t.Channels||(t.Channels={}))}(je||(je={}));var je;!function(t){var n;!function(t){!function(e){e[e.PostNativeCors=0]="PostNativeCors",e[e.GetImage=1]="GetImage",e[e.PostIECorsPlugin=2]="PostIECorsPlugin"}(t.CompatibilityChannelMode||(t.CompatibilityChannelMode={}));var n=t.CompatibilityChannelMode,r=function(){function r(e){var n=this;this.config=e,this.sendFn=function(i,o,a){var s=!1,u=function(u,l,c){if(!s){s=!0;var d=new t.ImageChannel(e);d.setBaseUrl(n.underlyingChannel.getBaseUrl()),n.underlyingChannel=d,r(i,o,a)}};try{r(i,o,function(e,t,n){u(e,t,n)})}catch(l){u(null,null,null)}n.sendFn=r};var r=function(e,t,r){n.underlyingChannel.send(e,t,r)}}return r.prototype.getChannelType=function(){return"CompatibilityChannel."+this.underlyingChannel.getChannelType()},r.prototype.getChannelMethod=function(){return n[this.mode]},r.prototype.getBaseUrl=function(){return this.underlyingChannel.getBaseUrl()},r.prototype.setBaseUrl=function(e){var t=this.checkCompatibility(),n=new RegExp("^(//|"+location.protocol+")","i"),r=n.test(e),i=this.pickChannel(t,this.config,r);i.setBaseUrl(e),this.underlyingChannel=i},r.prototype.getPostEventUrl=function(){return this.underlyingChannel.getPostEventUrl()},r.prototype.getHealthCheckUrl=function(){return this.underlyingChannel.getHealthCheckUrl()},r.prototype.getLineBreak=function(){return this.underlyingChannel.getLineBreak()},r.prototype.checkHealth=function(){e.get(this.underlyingChannel.checkHealth())},r.prototype.send=function(e,t,n){this.sendFn(e,t,n)},r.prototype.isInitialized=function(){return!!this.underlyingChannel&&this.underlyingChannel.isInitialized()},r.prototype.isAvailable=function(){return this.underlyingChannel.isAvailable()},r.prototype.isIdle=function(){return this.underlyingChannel.isIdle()},r.prototype.withinSizeLimit=function(e){return this.underlyingChannel.withinSizeLimit(e)},r.prototype.estimateDataSize=function(e){return this.underlyingChannel.estimateDataSize(e)},r.prototype.maxPacketSize=function(){return this.underlyingChannel.maxPacketSize()},r.prototype.channelBandwidth=function(){return this.underlyingChannel.channelBandwidth()},r.prototype.whenFree=function(e){this.underlyingChannel.whenFree(e)},r.prototype.fail=function(e){this.underlyingChannel.fail(e)},r.prototype.success=function(e){this.underlyingChannel.success(e)},r.prototype.pickChannel=function(e,r,i){switch(this.mode=e,e){case n.PostIECorsPlugin:return i?new t.AjaxChannel(r):new t.ImageChannel(r);case n.PostNativeCors:return new t.AjaxChannel(r);case n.GetImage:return new t.ImageChannel(r)}},r.prototype.checkCompatibility=function(){return void 0!==(new XMLHttpRequest).withCredentials?n.PostNativeCors:"undefined"!=typeof window.XDomainRequest?n.PostIECorsPlugin:n.GetImage},r}();t.CompatibilityChannel=r}(n=t.Channels||(t.Channels={}))}(je||(je={}));var je;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer=[],this.reduceFn=e.reduce}return t.prototype.getStorageType=function(){return"ArrayBuffer"},t.prototype.push=function(e){this.buffer.push(e)},t.prototype.pull=function(){var e=this.buffer.shift();return e},t.prototype.peek=function(){var e=this.buffer[0];return e},t.prototype.count=function(){return this.buffer.length},t.prototype.clear=function(){this.buffer=[]},t.prototype.dataSize=function(){var e=this.reduceFn(this.buffer,function(e,t){return e+t.length},0);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){return this.buffer},t.prototype.set=function(e){this.pushAll(e)},t.prototype.pushAll=function(t){if(e.isArray(t))for(var n=0,r=t.length;n<r;n++)this.push(t[n])},t.prototype.pullAll=function(){var e=this.buffer;return this.clear(),e},t}();t.ArrayBuffer=n}(n=t.Storage||(t.Storage={}))}(je||(je={}));var je;!function(t){var n;!function(t){var n=function(){function t(e){this.buffer={},this.runningId=0,this.getDictionaryKeys=e.getDictionaryKeys}return t.prototype.getStorageType=function(){return"DictionaryBuffer"},t.prototype.generateId=function(){return""+ ++this.runningId},t.prototype.push=function(e){var t=this.generateId();return this.buffer[t]=e,t},t.prototype.pull=function(e){var t=this.buffer[e];return delete this.buffer[e],t},t.prototype.peek=function(e){return this.buffer[e]},t.prototype.count=function(){return this.getAllIds().length},t.prototype.clear=function(){this.buffer={}},t.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=this.buffer[t].length);return e},t.prototype.isEmpty=function(){return 0===this.count()},t.prototype.getRawData=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&e.push(this.peek(t));return e},t.prototype.set=function(e){return this.pushAll(e)},t.prototype.pushAll=function(t){var n=[];if(e.isArray(t))for(var r=0,i=t.length;r<i;r++)n.push(this.push(t[r]));return n},t.prototype.pullAll=function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++)t.push(this.pull(e[n]));else for(var i in this.buffer)this.buffer.hasOwnProperty(i)&&t.push(this.pull(i));return t},t.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},t}();t.DictionaryBuffer=n}(n=t.Storage||(t.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.buffer={},this.inputMapper=t,this.outputMapper=n,this.getDictionaryKeys=e.getDictionaryKeys,this.mapFn=e.map,this.reduceFn=e.reduce}return e.prototype.getStorageType=function(){return"ReduceBuffer"},e.prototype.count=function(){return this.getAllIds().length},e.prototype.clear=function(){this.buffer={}},e.prototype.dataSize=function(){var e=0;for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e+=t.length+(""+this.buffer[t]).length);return e},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.getRawData=function(){return this.buffer},e.prototype.set=function(e){this.buffer=e},e.prototype.pushAll=function(e){var t=this,n=this.mapFn(e,function(e){return t.inputMapper.convert(e)}),r=this.reduceFn(n,function(e,t){return e[t]=(e[t]||0)+1,e},this.buffer);this.set(r)},e.prototype.getAllIds=function(){return this.getDictionaryKeys(this.buffer)},e.prototype.pullAll=function(){var e=[];for(var t in this.buffer)this.buffer.hasOwnProperty(t)&&(e.push(this.format(t)),delete this.buffer[t]);return e},e.prototype.format=function(e){return this.outputMapper.convert({type:e,count:this.buffer[e]})},e}();e.ReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r){this.autoSave=e.autoSave||!1,this.keyName=e.keyName||"wm-ds-b",this.expiresSeconds=e.expiresSeconds||600,this.storageTypesEnum=n.STORAGE_TYPE,this.clientStorageManager=t,this.buffer=r}return e.prototype.save=function(){var e=wf(this.getRawData());this.clientStorageManager.saveData(this.keyName,e,this.expiresSeconds)},e.prototype.load=function(){this.buffer.clear();var e=this.clientStorageManager.getData(this.keyName);if(e)try{this.set(_f(e))}catch(t){this.buffer.clear()}},e.prototype.count=function(){return this.buffer.count()},e.prototype.clear=function(){this.buffer.clear(),this.updateStorageIfNeeded()},e.prototype.dataSize=function(){return this.buffer.dataSize()},e.prototype.maxSize=function(){var e,t=.5;switch(this.clientStorageManager.getStorageType().type){case this.storageTypesEnum.JStorage:case this.storageTypesEnum.CrossDomainLocalStorage:case this.storageTypesEnum.CrossDomain:e=2621440;break;case this.storageTypesEnum.Extension:case this.storageTypesEnum.ProxyIframe:e=524288;break;case this.storageTypesEnum.CrossDomainCookies:case this.storageTypesEnum.Cookie:e=2048;break;default:e=2048}return e*t},e.prototype.withinSizeLimit=function(e){return e<=this.maxSize()},e.prototype.isEmpty=function(){return 0===this.count()},e.prototype.updateStorageIfNeeded=function(){this.autoSave&&this.save()},e.prototype.getRawData=function(){return this.buffer.getRawData()},e}();e.BaseClientStorageBuffer=t}(t=e.Storage||(e.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(e){r(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageArrayBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){this.getBuffer().push(e),this.updateStorageIfNeeded()},t.prototype.pull=function(){var e=this.getBuffer().pull();return this.updateStorageIfNeeded(),e},t.prototype.peek=function(){var e=this.getBuffer().peek();return e},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageArrayBuffer=t}(t=e.Storage||(e.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(e){r(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageDictionaryBuffer::"+this.buffer.getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.push=function(e){var t=this.getBuffer().push(e);return this.updateStorageIfNeeded(),t},t.prototype.pull=function(e){var t=this.getBuffer().pull(e);return this.updateStorageIfNeeded(),t},t.prototype.peek=function(e){var t=this.getBuffer().peek(e);return t},t.prototype.set=function(e){return this.getBuffer().set(e)},t.prototype.pushAll=function(e){return this.getBuffer().pushAll(e)},t.prototype.pullAll=function(e){return this.getBuffer().pullAll(e)},t}(e.BaseClientStorageBuffer);e.ClientStorageDictionaryBuffer=t}(t=e.Storage||(e.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(e){r(t,e);function t(t,n,r,i){e.call(this,t,n,r,i)}return t.prototype.getStorageType=function(){return"ClientStorageReduceBuffer::"+this.getBuffer().getStorageType()},t.prototype.getBuffer=function(){return this.buffer},t.prototype.set=function(e){this.getBuffer().set(e)},t.prototype.pushAll=function(e){this.getBuffer().pushAll(e)},t.prototype.pullAll=function(){return this.getBuffer().pullAll()},t}(e.BaseClientStorageBuffer);e.ClientStorageReduceBuffer=t}(t=e.Storage||(e.Storage={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(){function e(e,t,n,r,i){this.buffer=t,this._isEnabled=!1,this.dataChannel=e,this._eventsErrorLogger=i,r?this._logger=r.wrapCustomerLog("newSender"):this._logger=function(){}}return e.prototype.checkHealth=function(){return this.dataChannel.checkHealth()},e.prototype.getBaseUrl=function(){return this.dataChannel.getBaseUrl()},e.prototype.setBaseUrl=function(e){this.dataChannel.setBaseUrl(e)},e.prototype.getPostEventUrl=function(){return this.dataChannel.getPostEventUrl()},e.prototype.getHealthCheckUrl=function(){return this.dataChannel.getHealthCheckUrl()},e.prototype.enable=function(){var e=this;if(!this._isEnabled)try{this._logger(this.getSenderType()+"::enable. Enabling new data sender. \r\n [channel : "+this.dataChannel.getChannelType()+" , method : "+this.dataChannel.getChannelMethod()+" ,max packet size: "+this.dataChannel.maxPacketSize()+" ] \r\n [storage : "+this.buffer.getStorageType()+" , max storage size: "+this.buffer.maxSize()+"] \r\n",3),this._isEnabled=!0,this.dataChannel.whenFree(function(){e.linkIsFree()}),this.registerToUnload(function(){return e.sleep()}),this.wakeUp()}catch(t){this.logError(t,"Enable")}},e.prototype.logError=function(e,t){if(this._eventsErrorLogger){var n=this.dataChannel&&this.buffer?{storage:this.buffer.getStorageType(),channel:this.dataChannel.getChannelType()}:{};n.sender=this.getSenderType()+(t?"::"+t:""),this._eventsErrorLogger.logError(wf(e.message),n)}},e.prototype.disable=function(){this._isEnabled&&(this._isEnabled=!1)},e.prototype.isEnabled=function(){return this._isEnabled},e.prototype.isIdle=function(){return this._isEnabled&&this.dataChannel.isIdle()&&this.buffer.isEmpty()},e.prototype.clearStorage=function(){this.buffer.clear()},e.prototype.registerToUnload=function(e){o.get("WindowBeforeUnloadHandler").register(e)},e}();e.SuperSender=t}(t=e.Managers||(e.Managers={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(e){r(t,e);function t(t,n,r,i,o){e.call(this,t,n,r,i,o)}return t.prototype.getBuffer=function(){return this.buffer},t.prototype.getSenderType=function(){return"ImmediateSender"},t.prototype.send=function(e){if(!this.isEnabled())return!1;return this.dataChannel.isAvailable()?this.dataChannel.send(e):this.getBuffer().push(e),!0},t.prototype.wakeUp=function(){if(!this.isEnabled())return!1;this.loadFromStorage()},t.prototype.sleep=function(){if(!this.isEnabled())return!1;this.getBuffer().save()},t.prototype.linkIsFree=function(){if(!this.isEnabled())return!1;this.sendFromBuffer()},t.prototype.loadFromStorage=function(){if(!this.isEnabled())return!1;for(this.getBuffer().load();this.dataChannel.isAvailable()&&this.getBuffer().count();)this.sendFromBuffer()},t.prototype.sendFromBuffer=function(){if(!this.isEnabled())return!1;var e=this.getBuffer().pull();e&&this.dataChannel.send(e)},t}(e.SuperSender);e.ImmediateSender=t}(t=e.Managers||(e.Managers={}))}(je||(je={}));var je;!function(e){var t;!function(t){var n=function(t){r(n,t);function n(n,r,i,o,a,s,u,l){var c=this;t.call(this,n,r,o,u,l),this.estimatedPacketSize=0,this.cycleTimer=new e.SimpleTimer(o.sendingIntervalMs,function(){return c.doCycle()}),this.retryTimer=new e.SimpleTimer(o.retryIntervalMs,function(){return c.doCycle()}),this.maxRetries=o.maxRetries,this.currentRetries=0,this.isHealthy=!0,this.needMoreLink=!1,this.isLogFailed=o.isLogFailed,this.stagingBuffer=i,this.failureBuffer=a,this.dataSenderLogFailure=s}return n.prototype.getSenderType=function(){return"AccumulationSender"},n.prototype.getBuffer=function(){return this.buffer},n.prototype.send=function(e){try{if(this._logger(this.getSenderType()+"::Send. called for: "+wf(e),5),!this.isEnabled())return!1;var t=this.dataChannel.estimateDataSize(e);if(!this.dataChannel.withinSizeLimit(t))throw new Error("Data exceeds channel packet size");if(this.getBuffer().withinSizeLimit(e.length))return this.getBuffer().isEmpty()||(this.estimatedPacketSize+=this.dataChannel.estimateDataSize(this.dataChannel.getLineBreak())),this.estimatedPacketSize+=t,this.getBuffer().dataSize()+e.length>this.getBuffer().maxSize()&&this.sendBuffer(),this.getBuffer().push(e),this.estimatedPacketSize>=this.dataChannel.channelBandwidth()?(this.sendBuffer(),this.getTimer().restart()):this.getTimer().start(),!0;this.stageAndSend([e])}catch(n){throw this.logError(n,"Send"),n}},n.prototype.wakeUp=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::WakeUp. buffer size before load. "+this.getBuffer().dataSize(),3),this.loadFromStorage(),this._logger(this.getSenderType()+"::WakeUp. buffer size after load. "+this.getBuffer().dataSize(),3)}catch(e){throw this.logError(e,"WakeUp"),e}},n.prototype.sleep=function(){if(!this.isEnabled())return;try{this._logger(this.getSenderType()+"::Sleep. buffer size before flush: "+this.getBuffer().dataSize(),3),this.sendBuffer(),this._logger(this.getSenderType()+"::Sleep. buffer size after flush: "+this.getBuffer().dataSize(),3),this.getBuffer().save(),this.stagingBuffer.save(),this.failureBuffer.save()}catch(e){throw this.logError(e,"Sleep"),e}},n.prototype.isIdle=function(){return t.prototype.isIdle.call(this)},n.prototype.linkIsFree=function(){if(!this.isEnabled())return;this.needMoreLink&&this.sendBuffer()},n.prototype.doCycle=function(){if(!this.isEnabled())return;this._logger(this.getSenderType()+"::doCycle. buffer size before flush. "+this.getBuffer().dataSize(),4),this.sendBuffer(),this._logger(this.getSenderType()+"::doCycle. buffer size after flush. "+this.getBuffer().dataSize(),4)},n.prototype.getSeperator=function(){return this.dataChannel.getLineBreak()},n.prototype.getTimer=function(){return this.isHealthy?this.cycleTimer:this.retryTimer},n.prototype.sendBuffer=function(){if(!this.isEnabled())return;try{for(;!this.getBuffer().isEmpty()&&this.dataChannel.isAvailable();){var e=[],t=0;do{var n=this.getBuffer().pull(),r=this.dataChannel.estimateDataSize(n);e.push(n);var i=0;0!==t&&(i=this.dataChannel.estimateDataSize(this.getSeperator())),i+=r,t+=i,this.estimatedPacketSize-=i}while(!this.getBuffer().isEmpty()&&t<this.dataChannel.maxPacketSize());this.stageAndSend(e)}this.needMoreLink=!this.getBuffer().isEmpty()}catch(o){throw this.logError(o,"SendBuffer"),o}},n.prototype.stageAndSend=function(e){var t=this,n=e.join(this.getSeperator());this._logger(this.getSenderType()+"::sendBuffer. packet size "+n.length,3),this._logger(this.getSenderType()+"::sendBuffer. sending packet :"+wf(n),4);var r=this.stagingBuffer.pushAll(e);this.dataChannel.send(n,function(){try{t.isHealthy=!0,t.currentRetries=0,t.stagingBuffer.pullAll(r),t.isLogFailedEnabled()&&t.logFailedEvents()}catch(e){}},function(){try{if(t.isHealthy=!1,t.getBuffer().pushAll(t.stagingBuffer.pullAll(r)),t.currentRetries++,t.currentRetries>t.maxRetries){if(t.isLogFailedEnabled()){var e=t.getBuffer().pullAll();t.failureBuffer.pushAll(e)}t.currentRetries=0,t.getBuffer().clear()}else t.getTimer().start()}catch(n){}})},n.prototype.loadFromStorage=function(){if(!this.isEnabled())return;this.getBuffer().load(),this.stagingBuffer.load(),this.failureBuffer.load(),this.getBuffer().pushAll(this.stagingBuffer.pullAll()),this.stagingBuffer.save(),this._logger(this.getSenderType()+"::loadFromStorage. buffer size after load : "+this.getBuffer().dataSize(),4),this.sendBuffer()},n.prototype.isLogFailedEnabled=function(){return this.isLogFailed},n.prototype.logFailedEvents=function(){if(this.failureBuffer.count()<=0)return;for(var e=this.failureBuffer.pullAll(),t=0;t<e.length;t++){var n=e[t];this.dataSenderLogFailure.log.warn(n.message,n.extraData)}},n}(t.SuperSender);t.AccumulationSender=n}(t=e.Managers||(e.Managers={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){var t=_f(e);return t.data.type+":"+t.type},e}();e.EventTypeMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(je||(je={}));var je;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.convert=function(e){return{message:"Event failed to send [type "+e.type+", count "+e.count+"]",extraData:{evType:e.type,count:e.count}}},e}();e.EventLogMapper=t}(t=e.Manipulation||(e.Manipulation={}))}(je||(je={})),o.register("DataChannelConfig").asInstance({postEventAction:"/event/postEvent",healthCheckAction:"/general/status",requestTimeoutMs:2e3}),o.register("DataChannelConfigLog").asInstance({postEventAction:"/event/log",healthCheckAction:"/general/status",requestTimeoutMs:2e3}),o.register("DataSenderConfig").asInstance({sendingIntervalMs:250,retryIntervalMs:3e3,maxRetries:3,isLogFailed:!0}),o.register("DataSenderConfigLog").asInstance({sendingIntervalMs:5e3,retryIntervalMs:5e3,maxRetries:3,isLogFailed:!1}),o.register("EventTypeMapper").asCtor(je.Manipulation.EventTypeMapper),o.register("EventLogMapper").asCtor(je.Manipulation.EventLogMapper),o.register("ArrayBuffer").asCtor(je.Storage.ArrayBuffer).asProto().dependencies("GeneralUtils"),o.register("DictionaryBuffer").asCtor(je.Storage.DictionaryBuffer).asProto().dependencies("GeneralUtils"),o.register("ReduceBuffer").asCtor(je.Storage.ReduceBuffer).asProto().dependencies("GeneralUtils,EventTypeMapper,EventLogMapper"),o.register("DataSenderMethod").asCtor(je.Channels.CompatibilityChannel).dependencies("DataChannelConfig"),o.register("DataSenderStorageConfig").asInstance({keyName:"wm-ds-b",autoSave:!1,expiresSeconds:600}),o.register("DataSenderStorageStagingConfig").asInstance({keyName:"wm-ds-s",autoSave:!1,expiresSeconds:600}),o.register("DataSenderStorage").asCtor(je.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfig,ClientStorageManager,Consts,ArrayBuffer"),o.register("DataSenderStagingStorage").asCtor(je.Storage.ClientStorageDictionaryBuffer).dependencies("DataSenderStorageStagingConfig,ClientStorageManager,Consts,DictionaryBuffer"),o.register("DataSender").asCtor(je.Managers.AccumulationSender).dependencies("DataSenderMethod,DataSenderStorage,DataSenderStagingStorage,DataSenderConfig,DataSenderStorageLogFailure,EventCollectorLoggerPixel,Logger,EventSenderErrorLogger"),o.register("DataSenderMethodLog").asCtor(je.Channels.CompatibilityChannel).dependencies("DataChannelConfigLog"),o.register("DataSenderStorageConfigLog").asInstance({keyName:"wm-ds-lb",autoSave:!1,expiresSeconds:600}),o.register("DataSenderStorageLog").asCtor(je.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLog,ClientStorageManager,Consts,ArrayBuffer"),o.register("DataSenderLog").asCtor(je.Managers.ImmediateSender).dependencies("DataSenderMethodLog,DataSenderStorageLog,DataSenderConfigLog,Logger,EventSenderErrorLogger"),o.register("DataSenderStorageConfigLogPixel").asInstance({keyName:"wm-ds-lbp",autoSave:!1,expiresSeconds:600}),o.register("DataSenderStorageLogPixel").asCtor(je.Storage.ClientStorageArrayBuffer).dependencies("DataSenderStorageConfigLogPixel,ClientStorageManager,Consts,ArrayBuffer"),o.register("DataSenderMethodLogPixel").asCtor(je.Channels.ImageChannel).dependencies("DataChannelConfigLog"),o.register("DataSenderLogPixel").asCtor(je.Managers.ImmediateSender).dependencies("DataSenderMethodLogPixel,DataSenderStorageLogPixel,DataSenderConfigLog,Logger,EventSenderErrorLogger"),o.register("DataSenderStorageConfigLogFailure").asInstance({keyName:"wm-ds-lfb",autoSave:!0,expiresSeconds:86400}),o.register("DataSenderStorageLogFailure").asCtor(je.Storage.ClientStorageReduceBuffer).dependencies("DataSenderStorageConfigLogFailure,ClientStorageManager,Consts,ReduceBuffer"),o.register("InitiatorManager").asCtor(Ye);function Ye(){var e=this;e.get=r,e.setForScope=i;var t;function n(){t=[]}function r(){var e=t[t.length-1];return e}function i(e,n){t.push(e),n(),t.pop()}n()}o.register("UserTimeMonitor").asCtor(ze).dependencies("ClientStorageManager, EndUsersManager");function ze(e,t){var n=this;n.wasActionPerformed=r,n.logActionPerformed=i,n.ACTION_NAMES={walkmeVisibleReported:"wm-wmv"};function r(n){return e.getData(n)==t.getEndUserGuid()}function i(n,r){e.saveData(n,t.getEndUserGuid(),r)}}o.register("EventSender").asCtor(Qe).dependencies("Consts, DeployableTypeToEventSenderAppTypeMapper, EventsCollectorAuditingEnabledIndicator, EventCollectorEventSender, Logger");function Qe(e,t,n,r,i){var o=this;o.isEnabled=u,o.postEvent=s,o.getEventAppByDeployable=t.map,o.isReportingEnabled=u,o.EVENT_TYPES=e.EVENT_SENDER_EVENT_TYPES,o.EVENT_APPS=e.EVENT_SENDER_EVENT_APPS,o.CANCEL_REASONS=e.EVENT_SENDER_CANCEL_REASONS;function a(){}function s(e,t){if(!u())return;try{r.postEvent(e,t)}catch(n){i.error(n)}}function u(){return n.isEnabled()}a.apply(this,arguments)}o.register("EventSenderEnvironmentDataProvider").asCtor(Ke).dependencies("HostData, FeaturesManager, Consts, CommonUtils");function Ke(e,t,n,r){var i=this;i.getEnvironmentData=s;function a(){}function s(){var i={browser:e.browser,os:e.os,mobile:e.isMobile()};return r.isMobileNative()&&(i.browser.version=o.get("MobileUtils").getSdkVersion()),!t.isReady()||t.isFeatureEnabled(n.FEATURES.DisableWidgetOpenFullUrl)||t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageUrl)?(i.url="",i.urlWithoutQueryString=""):(i.url=e.getUrl(),i.urlWithoutQueryString=e.getUrlWithoutQueryString()),t.isReady()&&!t.isFeatureEnabled(n.FEATURES.EventSenderDontSendPageTitle)?i.pageTitle=e.getPageTitle():i.pageTitle="",i}a.apply(this,arguments)}o.register("WalkmeVisibleReporter").asCtor(qe).dependencies("EventSender, UserTimeMonitor, Consts, Logger, EndUserLoggerManager, AuditSourceProvider, IsInEditor");function qe(e,t,n,r,i,o,a){var s=this;s.report=c;var u=t.ACTION_NAMES.walkmeVisibleReported;function l(){}function c(){try{if(o.isInPreviewMode()||o.isInPlayMode()||a.get())return;if(i.reportEndUser(void 0,!0),t.wasActionPerformed(u))return;e.postEvent(e.EVENT_TYPES.Visible,{type:e.EVENT_APPS.Walkme}),t.logActionPerformed(u,n.TIME_PERIODS.DaySeconds)}catch(s){r.error(s)}}l.apply(null,arguments)}o.register("ErrorLogFilter").asCtor(Xe).dependencies();function Xe(){var t=this,n=5;t.filter=r;function r(t){var r=e.Deferred();return n<=0?r.reject():(r.resolve(t),n--),r.promise()}}o.register("EventSenderErrorLogger").asCtor(Je).dependencies("DataChannelConfigLog,HostData,WalkMeInfo,ErrorLogFilter");function Je(t,n,r,i){var o,a,s=this;function u(e){a=e.postEventAction}s.setBaseUrl=function(e){o=e},s.isReady=function(){return!(!o||!a)},s.logError=function(t,n){if(!s.isReady())return;var r;try{r=d()}catch(o){}var a=e.extend({time:(new Date).getTime(),level:"error",app:"player",message:t},c(),r,n||{});i.filter(a).then(l)};function l(t){e.ajax({url:o+a,data:wf(t),contentType:"text/plain",dataType:"json",type:"POST"})}function c(){return{url:n.getUrl(),browser:n.browser,os:n.os,screen:n.getWinSize(),mobile:n.isMobile()}}function d(){return{uId:r.getUserGuid(),euId:r.getEndUserGuid(),euIdSource:r.getEndUserGuidSource(),permId:r.getPermutationId(),language:r.getLanguage(),cVars:r.getCustomVars(),env:r.getEnvironmentId()}}u.apply(s,arguments)}o.register("EventSenderInitializer").asCtor($e).dependencies("EventServerBaseUrl, EventSenderErrorLogger, DataSender, DataSenderLog, DataSenderLogPixel, EventSenderEventListener, win");function $e(e,t,n,r,i,o,a){var s=this;s.init=u;function u(){var a=l(e.get());t&&t.setBaseUrl(a),n.setBaseUrl(a),n.enable(),r.setBaseUrl(a),r.enable(),i.setBaseUrl(a),i.enable(),o.init()}function l(e){var t=c(),n=a.location.protocol,r=/^http[^s]/i,i=r.test(n),o=new RegExp("^(//|"+n+")","i"),s=o.test(e);if(i&&!s&&t)return e.replace(/^https:/,"http:");return e}function c(){return void 0===(new XMLHttpRequest).withCredentials&&"undefined"!=typeof window.XDomainRequest}}o.register("EventSenderDisabler").asCtor(Ze).dependencies("DataSender");function Ze(e){var t=this;t.disable=n;function n(){e.sleep(),e.disable()}}o.register("EventSenderEventListener").asCtor(et).dependencies("Consts, WmInternals, GoalReachedEventSender, SmartTipEventSender, LauncherEventSender, BizFlowEventSender, QuizEventSender, SessionEventSender");function et(e,t,n,r,i,o,a,s){var u=this;u.init=c;function l(){}function c(){d(),p(),g(),f(),h(),m()}function d(){v(e.EVENTS.Goals.GoalReached,n.postEvent),v(e.EVENTS.AbExperimentLinkedGoalReached,n.postEvent)}function p(){v(e.EVENTS.SmartTips.ValidationFailed,r.postValidationFailedEvent),v(e.EVENTS.SmartTips.ValidationPassed,r.postValidationPassedEvent),v(e.EVENTS.SmartTips.TooltipShown,r.postTooltipShownEvent),v(e.EVENTS.SmartTips.SetTurnedOn,r.postSetActivatedEvent),v(e.EVENTS.SmartTips.SmartTipSegmented,r.postSmartTipSegmentedEvent),v(e.EVENT_SENDER_EVENT_TYPES.Focus,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Blur,r.postElementEvent),v(e.EVENT_SENDER_EVENT_TYPES.Click,r.postElementEvent)}function g(){v(e.EVENTS.Launchers.LauncherIsShown,i.postLauncherIsShownEventIfWasntSent)}function f(){v(e.EVENTS.Flows.FlowStarted,o.postFlowStartedEvent),v(e.EVENTS.Flows.FlowBranched,o.postFlowBranchedEvent),v(e.EVENTS.Flows.BeforeExecutingFlowStage,o.postBeforeExecutionStageEvent),v(e.EVENTS.Flows.UIFlowStageShown,o.postUIFlowStageShownEvent),v(e.EVENTS.Flows.AfterCompletingFlowStage,o.postAfterCompletionStageEvent),v(e.EVENTS.Flows.FlowStopped,o.postFlowStoppedEvent),v(e.EVENTS.Flows.SafeStartStatusChanged,o.postFlowSafeStartStatusChangedEvent)}function h(){v(e.EVENTS.Quizzes.QuizPlay,a.postQuizPlayEvent),v(e.EVENTS.Quizzes.QuizSubmitted,a.postQuizSubmittedEvent),v(e.EVENTS.Quizzes.QuizAnswerSubmitted,a.postAnswerSubmittedEvent),v(e.EVENTS.Quizzes.QuizPass,a.postQuizPassEvent),v(e.EVENTS.Quizzes.QuizFail,a.postQuizFailEvent)}function m(){v(e.EVENTS.WalkmeReadyNewSession,s.postNewSessionEvent)}function v(e,n){t.bind(e,function(e,t){n(t)})}l.apply(this,arguments)}o.register("GoalReachedEventSender").asCtor(tt).dependencies("EventSender, Logger, Consts, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, WalkMeGoalsManager");
function tt(e,t,n,r,i,o){var a=this;a.postEvent=u;function s(){}function u(a){try{var s=a.goal,u=i.get(s.GoalType),l=u.getById(s.RelatedObjectId),c=o.getGoalsFromDeployable(l),d=r.map(s.GoalType);return e.postEvent(n.EVENT_SENDER_EVENT_TYPES.GoalReached,{type:d,oId:s.Id,oName:s.Name,pId:a.identifier?a.identifier:-1,total:c.length,owId:l.Id,owName:l.Name,owType:d,main:s.IsMainGoal,interactionGuid:a.interactionGuid})}catch(p){return t.error(p),!0}}s.apply(null,arguments)}o.register("SmartTipEventSender").asCtor(nt).dependencies("EventSender, Logger, Consts, InteractionManager, BusinessSolutionsManager, WalkmeVisibleReporter, InitiatorManager, ReportInitiatorMapper");function nt(t,n,r,i,o,a,s,u){var l=this;l.postSetActivatedEvent=d,l.postSmartTipSegmentedEvent=p,l.postValidationFailedEvent=g,l.postValidationPassedEvent=f,l.postTooltipShownEvent=h,l.postElementEvent=v;function c(){}function d(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,oId:e.setId,oName:T(e.setId)};return t=y(t,e),S(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function p(e){a.report();var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owId:e.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:T(e.setId)};return t=y(t,e),S(r.EVENT_SENDER_EVENT_TYPES.Play,t)}function g(e){return m(r.EVENT_SENDER_EVENT_TYPES.Failed,e)}function f(e){return m(r.EVENT_SENDER_EVENT_TYPES.Passed,e)}function h(e){return m(r.EVENT_SENDER_EVENT_TYPES.Visible,e)}function m(e,t){var n={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:t.smartTipModel.Id,oName:t.smartTipModel.Name,owId:t.setId,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owName:T(t.setId),aoId:t.uiComponent&&t.uiComponent.Id,aType:t.uiComponent&&t.uiComponent.Type,aAppType:r.EVENT_SENDER_EVENT_APPS.SmartTipUiComponent};return n=y(n,t),S(e,n)}function v(e){var t={type:r.EVENT_SENDER_EVENT_APPS.SmartTip,oId:e.smartTipModel.Id,oName:e.smartTipModel.Name,owType:r.EVENT_SENDER_EVENT_APPS.SmartTipSet,owId:e.setId,owName:T(e.setId)};return t=y(t,e),S(e.eventType,t)}function S(e,r){try{return t.postEvent(e,r)}catch(i){return n.error(i),!0}}function y(t,n){var r=E(n);return e.extend(r,t)}function E(e){return{interactionGuid:i.getCurrentInteractionGuid(),pId:e.playGuid,pInit:u.map(s.get())}}function T(e){var t=o.getById(e);return t.Name}c()}o.register("LauncherEventSender").asCtor(rt).dependencies("EventSender, Consts, Logger");function rt(t,n,r){var i=this;i.postLauncherIsShownEventIfWasntSent=s;var o=[];function a(){}function s(n){var i=n.getId(),a=e.inArray(i,o)!=-1;if(a)return;var s={type:t.EVENT_APPS.Launcher,oId:i,oName:n.getName()};try{var u=t.postEvent(t.EVENT_TYPES.Play,s);return o.push(i),u}catch(l){return r.error(l),!0}}a.apply(null,arguments)}o.register("BizFlowEventSender").asCtor(it).dependencies("EventSender, Consts, ReportInitiatorMapper, PlayGuidGenerator, FlowsContainer, BizFlowStepEventParamsCalculator, BizFlowStepEventStatusProvider, FlowDataPersister");function it(e,t,n,r,i,o,a,s){var u=this;u.postFlowStartedEvent=l,u.postFlowBranchedEvent=c,u.postBeforeExecutionStageEvent=d,u.postUIFlowStageShownEvent=p,u.postAfterCompletionStageEvent=g,u.postFlowStoppedEvent=f,u.postFlowSafeStartStatusChangedEvent=m;function l(i){var o=s.getPlayInitiator(),a=r.generateNewPlayGuid(i.businessSolutionId);s.savePlayGuid(a);var u={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:i.businessSolutionId,oName:i.businessSolutionName,pId:a,pInit:n.map(o),oRequestedSubObject:i.requestedStageId,oActualSubObject:i.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,u)}function c(r){var i={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map({type:r.isBbCodeTrigger?t.STEP_PLAY_INITIATOR_ENUM.BBCODE:t.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:r.branchOriginStageId,appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep}),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,i)}function d(e){var t=i.getNodeById(e.flowId,e.stageId),n=a.getBeforeExecutionEventStatus(t);h(e,n)}function p(e){var t=a.getUIFlowStageShownEventStatus();h(e,t)}function g(e){var t=a.getAfterCompletionEventStatus(e.isFlowGoingBack);h(e,t,!0)}function f(e){if(!e.flowId||!e.wasClosedByUser)return;var t=a.getFlowStoppedEventStatus(e.wasClosedByUser);h(e,t)}function h(n,r,a){var u=i.getNodeById(n.flowId,n.stageId),l=a&&o.getValue(u,n.value),c=a&&o.getBbCodeData(l,n.firedTrigger),d={type:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,oId:n.uiElementId?n.uiElementId:u.Id,aoId:u.Id,oName:o.getName(u,n.uiElementId),aType:o.getNodeActionName(u),aAppType:o.getNodeActionAppType(u),oType:o.getNodeType(u),owId:n.businessSolutionId,owName:n.businessSolutionName,owType:t.EVENT_SENDER_EVENT_APPS.BizFlow,total:o.getTotalNodes(n.flowId),pId:s.getPlayGuid(),status:r,value:l,pInit:c};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,d)}function m(r){var i=s.getPlayInitiator(),o={type:t.EVENT_SENDER_EVENT_APPS.BizFlow,oId:r.businessSolutionId,oName:r.businessSolutionName,pId:s.getPlayGuid(),pInit:n.map(i),oRequestedSubObject:r.requestedStageId,oActualSubObject:r.startingStageId,status:r.status};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.PlayFailed,o)}}o.register("BizFlowStepEventParamsCalculator").asCtor(ot).dependencies("Consts, BizFlowStepActionToEventSenderActionAppTypeMapper, BizFlowStepActionToEventSenderStepActionNameMapper, FlowsContainer, FlowPlayerMetadata, BizFlowOnPageActionTypeToEventSenderStepActionNameMapper, ReportInitiatorMapper");function ot(t,n,r,i,o,a,s){var u=this;u.getNodeActionName=l,u.getNodeActionAppType=c,u.getTotalNodes=d,u.getName=p,u.getNodeType=g,u.getValue=f,u.getBbCodeData=h;function l(e){return e.ActionType!=t.FLOW_ACTION_TYPE.OnPageAction?e.ActionType?r.map(e.ActionType):"":a.map(e.Settings.actionArgs.onElementAction)}function c(e){return e.ActionType?n.map(e.ActionType):""}function d(e){var t=i.getFlowById(e),n=0;for(var r in t.Nodes)n++;return n}function p(n,r){if(n.Type!=t.FLOW_STEP_TYPE.UI)return n.Name;if(r){var i=e.grep(n.UIElements,function(e){return e.Id==r});return i[0].Title}return e.map(n.UIElements,function(e){return e.Title}).join(", ")}function g(e){return e.Type==t.FLOW_STEP_TYPE.Action?t.STEP_TYPE.Action:e.UIElements[0].Type==t.FLOW_UIELEMENT_TYPE.Popup?t.STEP_TYPE.Popup:t.STEP_TYPE.Normal}function f(e,n){if(e.Type==t.FLOW_STEP_TYPE.Action)return n;return o.lastTriggerFired&&o.lastTriggerFired.Type}function h(e,n){if(e&&e==t.FLOW_TRIGGER_TYPE.BbCode)return s.map({objectId:n.Id,type:n.Name})}}o.register("BizFlowStepEventStatusProvider").asCtor(at).dependencies("Consts");function at(e){var t=this;t.getBeforeExecutionEventStatus=n,t.getUIFlowStageShownEventStatus=r,t.getAfterCompletionEventStatus=i,t.getFlowStoppedEventStatus=o;function n(t){return"UI"==t.Type?e.STEP_STATUS.SupposedToShow:e.STEP_STATUS.Shown}function r(){return e.STEP_STATUS.Shown}function i(t){return t?e.STEP_STATUS.MovedBack:e.STEP_STATUS.Performed}function o(t){if(t)return e.STEP_STATUS.Exited}}o.register("QuizEventSender").asCtor(st).dependencies("EventSender, Consts, InitiatorManager, ReportInitiatorMapper, QuizStatusManager, QuizEventParamCalculator");function st(t,n,r,i,o,a){var s=this;s.postQuizPlayEvent=u,s.postQuizSubmittedEvent=l,s.postAnswerSubmittedEvent=c,s.postQuizPassEvent=d,s.postQuizFailEvent=p;function u(s){var u=r.get(),l=e.extend({},f(s),h(s.quiz),{pInit:i.map(u),globalRatio:a.getCourseCompletionPrecentage(s.quiz),status:o.getQuizStatus(s.quiz)});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Play,l)}function l(r){var i=e.extend({},f(r),h(r.quiz));t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function c(r){var i=e.extend({},f(r),h(r.quiz,!0),{type:n.EVENT_SENDER_EVENT_APPS.QuizQuestion,oId:r.questionId,aAppType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,aoId:r.answerId,aType:n.EVENT_SENDER_EVENT_APPS.QuizAnswer,value:r.answer,oName:r.question});t.postEvent(n.EVENT_SENDER_EVENT_TYPES.Submitted,i)}function d(e){g(e,!0)}function p(e){g(e,!1)}function g(r,i){var o=i?n.EVENT_SENDER_EVENT_TYPES.Passed:n.EVENT_SENDER_EVENT_TYPES.Failed,a=e.extend({},f(r),h(r.quiz),{passmark:r.quiz.Passmark,score:r.score});t.postEvent(o,a)}function f(e){return{pId:e.currentPlayGuid}}function h(e,t){var r,i={};return t?(i.owType=n.EVENT_SENDER_EVENT_APPS.Quiz,r="ow"):(i.type=n.EVENT_SENDER_EVENT_APPS.Quiz,r="o"),i[r+"Id"]=e.Id,i[r+"Name"]=a.getQuizName(e),i}}o.register("QuizEventParamCalculator").asCtor(ut).dependencies("CoursesManager");function ut(e){var t=this;t.getQuizName=n,t.getCourseCompletionPrecentage=i,t.getQuizCourseId=r;function n(e){var t=a(e);return t.Name+" Quiz"}function r(e){var t=a(e);return t.Id}function i(t){var n=o.get("LmsProgressProvider"),r=o.get("ObjectsTreeGenerator"),i=e.getCourseByQuizId(t.Id),a=r.generate([i]);return n.getCourseProgress(a[0])}function a(t){return e.getCourseByQuizId(t.Id)}}o.register("EventsCollectorAuditingEnabledIndicator").asCtor(lt).dependencies("EventsCollectorFeatureEnabledIndicator, AuditingEnabledIndicator, Consts, WalkMeInfo, IsInEditor");function lt(e,t,n,r,i){var o=this;o.isEnabled=a;function a(){return e.isFeatureEnabled()&&r.getEnvironmentId&&r.getEnvironmentId()!=n.SOURCES.preview&&!i.get()&&t.isEnabled()}}o.register("EventCollectorLogger").asCtor(ct).dependencies("DataSenderLog,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile"),o.register("EventCollectorLoggerPixel").asCtor(ct).dependencies("DataSenderLogPixel,EventSenderErrorLogger,EventsCollectorFeatureEnabledIndicator,EventSenderEnvironmentDataProvider,EventCollectorWalkMeDataProvider,WalkMeInfo,SettingsFile");function ct(t,n,r,i,o,a,s){var u=this;u.log=f,u.log.debug=c,u.log.info=d,u.log.warn=p,u.log.error=g,u.isLoggingEnabled=m;function l(){}function c(e,t){return f("debug",e,t)}function d(e,t){return f("info",e,t)}function p(e,t){return f("warn",e,t)}function g(e,t){return f("error",e,t)}function f(e,r,i){if(!m())return;try{var o=wf(h(e,r,i));t.send(o)}catch(a){throw n&&n.logError(wf(a.message)),a}}function h(t,n,r){var u=i.getEnvironmentData(),l=o.getWalkMeData();r&&"object"!=typeof r&&(r=null);var c=window.walkme_lib_in_dev===!0?{local:!0}:{};return e.extend({time:(new Date).getTime(),app:"player",level:t,message:n,libVersion:a.getLibVersion(),publishDate:a.getPublishDate(),publishEnv:s.getSettingsFile().Environment},u,l,c,r||{})}function m(){return r.isFeatureEnabled()}l.apply(this,arguments)}o.register("EventCollectorEventSender").asCtor(dt).dependencies("DataSender, EventSenderErrorLogger, EventSenderEnvironmentDataProvider, EventCollectorWalkMeDataProvider, SessionManager, CommonUtils, CommonEvents, Consts");function dt(e,t,n,r,i,o,a,s){var u=this;u.postEvent=l;function l(n,r){try{var i=d(n,r);e.send(o.toJSON(i)),c(i)}catch(a){throw t&&t.logError(o.toJSON(a.message)),a}}function c(e){var t={eventData:e};a.raiseEvent(s.EVENTS.AnalyticsEventSent,t)}function d(e,t){var i=p(e);return"[object Function]"===Object.prototype.toString.call(t)?i.data=t():i.data=t,i.env=n.getEnvironmentData(),i.wm=r.getWalkMeData(),i}function p(e){return{time:(new Date).getTime(),sId:g(),pgId:f(),type:e}}function g(){return i.getCurrentSession()}function f(){return"-1"}}o.register("EventBinder").asCtor(pt);function pt(){var e=this;e.bind=t,e.unbind=n;function t(e,t,n){return e.on(t,n)}function n(e,t,n){return e.off(t,n)}}o.register("EventCollectorWalkMeDataProvider").asCtor(gt).dependencies("WalkMeInfo, InteractionManager, ExternalWalkMeConfig, EventCollectorUserDataProvider, ExtensionConfigManager");function gt(e,t,n,r,i){var o=this;o.getWalkMeData=a;function a(){var o={uId:e.getUserGuid(),euId:e.getEndUserGuid(),euIdSource:e.getEndUserGuidSource(),permId:e.getPermutationId(),language:e.getLanguage(),cVars:e.getCustomVars(),env:e.getEnvironmentId(),interactionGuid:t.getCurrentInteractionGuid(),platform:n.get("platform"),userVars:r.getUserVars()},a=i.get("globalGuid");return a&&(o.extensionInstallationGuid=a),o}}o.register("EventCollectorUserDataProvider").asCtor(ft).dependencies("AnalyticsPropertiesManager");function ft(e){var t=this;t.getUserVars=n;function n(){var t={name:e.getPropertyValue("name"),role:e.getPropertyValue("role"),type:e.getPropertyValue("type"),status:e.getPropertyValue("status"),info:e.getPropertyValue("info")};return t}}o.register("EventsCollectorFeatureEnabledIndicator").asCtor(ht).dependencies("Consts, HostData, FeaturesManager");function ht(e,t,n){var r=this;r.isFeatureEnabled=i;function i(){return n.isReady()&&!n.isFeatureEnabled(e.FEATURES.DisableEventCollection)&&!t.isIE(7)}}o.register("DeployableTypeToEventSenderAppTypeMapper").asCtor(mt).dependencies("Consts");function mt(e){var t=this;t.map=i;var n;function r(){n={},n[e.DEPLOYABLE_TYPE.Task]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.DEPLOYABLE_TYPE.Tutorial]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.DEPLOYABLE_TYPE.Shuttle]=e.EVENT_SENDER_EVENT_APPS.Shuttle,n[e.DEPLOYABLE_TYPE.Launcher]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.DEPLOYABLE_TYPE.Content]=e.EVENT_SENDER_EVENT_APPS.Content,n[e.DEPLOYABLE_TYPE.ShoutOut]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.DEPLOYABLE_TYPE.Survey]=e.EVENT_SENDER_EVENT_APPS.Survey,n[e.DEPLOYABLE_TYPE.AbExperiment]=e.EVENT_SENDER_EVENT_APPS.AbTesting,n[e.AUDIT_TYPE.OPEN_TICKET]=e.EVENT_SENDER_EVENT_APPS.Ticket,n[e.DEPLOYABLE_TYPE.BusinessSolution]=e.EVENT_SENDER_EVENT_APPS.BizFlow}function i(t){return t in n?n[t]:e.EVENT_SENDER_EVENT_APPS.None}r.apply(null,arguments)}o.register("ReportInitiatorMapper").asCtor(vt).dependencies("Mapper, InitiatorTypeToAppTypeMapper");function vt(e,t){var n=this;n.map=r,n.mapForExtend=o;function r(t){if(!t)return;var n={};e.setIfDefined(n,t.objectId,"id"),e.setIfDefined(n,t.type,"type");var r=i(t);return e.setIfDefined(n,r,"appType"),n}function i(e){if(e.appType)return e.appType;return e.type?t.map(e.type):null}function o(e){return{pInit:r(e)}}}o.register("InitiatorTypeToAppTypeMapper").asCtor(St).dependencies("Consts");function St(e){var t=this;t.map=i,t.mapBbcodeInitiator=o;var n;function r(){n={},n[e.STEP_PLAY_INITIATOR_ENUM.LAUNCHER]=e.EVENT_SENDER_EVENT_APPS.Launcher,n[e.STEP_PLAY_INITIATOR_ENUM.TASK]=e.EVENT_SENDER_EVENT_APPS.Task,n[e.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT]=e.EVENT_SENDER_EVENT_APPS.ShoutOut,n[e.STEP_PLAY_INITIATOR_ENUM.WALKTHRU]=e.EVENT_SENDER_EVENT_APPS.Walkthru,n[e.STEP_PLAY_INITIATOR_ENUM.STEP]=e.EVENT_SENDER_EVENT_APPS.Step}function i(e){return n[e]}function o(t){if(!t)return;var n=i(t.type);return{objectId:t.objectId,type:e.STEP_PLAY_INITIATOR_ENUM.BBCODE,appType:n}}r.apply(null,arguments)}o.register("InitiatorTypeToDeployableTypeMapper").asCtor(yt).dependencies("Consts");function yt(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_PLAY_INITIATOR_ENUM,r=e.DEPLOYABLE_TYPE;n={},n[t.LAUNCHER]=r.Launcher,n[t.TASK]=r.Task,n[t.SHOUTOUT]=r.ShoutOut,n[t.WALKTHRU]=r.Tutorial,n[t.STEP]=r.Step}function i(e){return n[e]}r.apply(null,arguments)}o.register("StepActionToEventSenderActionAppTypeMapper").asCtor(Et).dependencies("Consts");function Et(e){var t=this;t.map=i;var n;function r(){var t=e.STEP_ACTION,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.PlayStep]=r.Step,n[t.Branch]=r.Walkthru}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}o.register("StepActionToEventSenderStepActionNameMapper").asCtor(Tt).dependencies("Consts, Logger");function Tt(e,t){var n=this;n.map=o;var r;function i(){var t=e.STEP_ACTION,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.PlayStep]=n.PlayStep,r[t.WaitForCondition]=n.WaitForCondition,r[t.Branch]=n.Branch,r[t.StopWt]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenPlayerMenu]=n.OpenPlayerMenu,r[t.SetWalkMeData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}o.register("BizFlowStepActionToEventSenderActionAppTypeMapper").asCtor(Ct).dependencies("Consts");function Ct(e){var t=this;t.map=i;var n;function r(){var t=e.FLOW_ACTION_TYPE,r=e.EVENT_SENDER_EVENT_APPS;n={},n[t.ConnectToBizflow]=r.BizFlow}function i(e){if(e in n)return n[e];return""}r.apply(null,arguments)}o.register("BizFlowStepActionToEventSenderStepActionNameMapper").asCtor(bt).dependencies("Consts, Logger");function bt(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ACTION_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Redirect]=n.Redirect,r[t.WaitForCondition]=n.WaitForCondition,r[t.ConnectToBizflow]=n.Branch,r[t.Stop]=n.StopWt,r[t.Delay]=n.Delay,r[t.Refresh]=n.Refresh,r[t.OpenMenu]=n.OpenPlayerMenu,r[t.Style]=n.Style,r[t.SetData]=n.SetWalkMeData,r[t.PassOwnership]=n.PassOwnership,r[t.ErrorHandling]=n.ErrorHandling,r[t.Split]=n.Split}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for step action: "+e),"")}i.apply(null,arguments)}o.register("BizFlowOnPageActionTypeToEventSenderStepActionNameMapper").asCtor(It).dependencies("Consts, Logger");function It(e,t){var n=this;n.map=o;var r;function i(){var t=e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE,n=e.EVENT_SENDER_STEP_ACTION_NAMES;r={},r[t.Click]=n.OnPageActionClick,r[t.Hover]=n.OnPageActionHover,r[t.Focus]=n.OnPageActionFocus,r[t.FillText]=n.OnPageActionFillText,r[t.SelectListValue]=n.OnPageActionSelectListValue}function o(e){return e in r?r[e]:(t.error(null,"There is no mapping from 'bizFlow step action' to 'event sender action name' for On-Page-Action: "+e),"")}i.apply(null,arguments)}o.register("SessionManager").asCtor(wt).asSingleton().dependencies("GuidGenerator, CommonEvents, Consts, Logger, WmInternals");function wt(e,t,n,r,i){var o=this;o.getCurrentSession=l,o.setCurrentSession=c,o.beginNewSession=d;var a,s;function u(){s=r.wrapCustomerLog(n.FEATURES_LOGS.WalkMeSession)}function l(){if(!a)return null;return a}function c(e){a=e}function d(){a=e.generateGuid(),t.raiseEvent(n.EVENTS.NewSession,a),i.bind(n.EVENTS.WalkmeReady,function(){t.raiseEvent(n.EVENTS.WalkmeReadyNewSession,a)});var r="New session guid was created : "+a;s(r,2)}u.apply(this,arguments)}o.register("SessionPersister").asCtor(_t).asSingleton().dependencies("ClientStorageManager, SessionManager, TimerManager, SiteConfigManager, Consts, Logger");function _t(e,t,n,r,i,o){var a=this;a.loadOrCreate=f,a.startPersisting=m,a.cleanResources=y,a.isNewSession=h;var s,u,l,c=6e4,d=1800,p="wm-ssn";function g(){s=o.wrapCustomerLog(i.FEATURES_LOGS.WalkMeSession)}function f(){var n=e.getData(p);n?(l=!1,s("WalkMe Session restored from storage: "+n,1),t.setCurrentSession(n)):(s("WalkMe Session doesnt exist in storage. Starting new one",1),t.beginNewSession(),l=!0,S())}function h(){return l}function m(){var e=r.get(),t=e.Custom&&e.Custom.sessionLengthOverride;t&&(d=t),v()}function v(){S(),u=n.setWalkmeTimeout(v,c)}function S(){var n=t.getCurrentSession();e.saveData(p,n,d),s("WalkMe Session ("+n+") was saved for "+d+" seconds.",3)}function y(){u&&(u.clear(),u=null)}g.apply(this,arguments)}o.register("SessionEventSender").asCtor(Pt).dependencies("EventSender, Consts");function Pt(e,t){var n=this;n.postNewSessionEvent=r;function r(n){var r={type:"walkme"};e.postEvent(t.EVENT_SENDER_EVENT_TYPES.SessionStart,r)}}o.register("InteractionEventsInitiatorsProvider").asCtor(At).dependencies("Consts, InteractionEventInitiatorFactory, ApiWasCalledNewInteractionIndicator, WidgetOpenedNewInteractionIndicator");function At(e,t,n,r){var i=this;i.get=s;var o;function a(){o=[],u(e.EVENTS.PlayerClicked),u(e.EVENTS.Launchers.LauncherClicked),u(e.EVENTS.AutoStart.Activated),u(e.EVENTS.PermalinkClicked),u(e.EVENTS.ApiWasCalled,n),u(e.EVENTS.WidgetOpening,r)}function s(){return o}function u(e,n){var r=t.get(n);o.push({eventName:e,callback:r.initiateInteraction})}a.apply(this,arguments)}o.register("InteractionManager").asCtor(kt).asSingleton().dependencies("GuidGenerator, Logger");function kt(e,t){var n=this;n.getCurrentInteractionGuid=s,n.setCurrentInteractionGuid=u,n.beginNewInteraction=l;var r,i,o="interaction";function a(){i=t.wrapCustomerLog(o)}function s(){if(!r)return null;return r}function u(e){r=e}function l(){r=e.generateGuid();var t="New interaction guid was created : "+r;i(t,3)}a.apply(this,arguments)}o.register("InteractionInitiationEventListener").asCtor(Ot).dependencies("WmInternals, InteractionEventsInitiatorsProvider");function Ot(e,t){var n=this;n.init=i;function r(){}function i(){for(var e=t.get(),n=0;n<e.length;n++){var r=e[n];o(r)}}function o(t){e.bind(t.eventName,function(e,n){t.callback(n)})}r.apply(this,arguments)}o.register("InteractionEventInitiatorFactory").asCtor(Dt).dependencies("InteractionManager");function Dt(e){var t=this;t.get=n;function n(e){return new r(e)}function r(t){var n=this;n.initiateInteraction=r;function r(n){n=i(n),t&&!t.shouldInitiateNewInteraction(n)||e.beginNewInteraction()}function i(e){var t=o(e);return t&&(e.actualInitiatorType=t),e}function o(e){if(e&&e.initiator&&void 0!=e.initiator.type)return e.initiator.type;return}}}o.register("ApiWasCalledNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.CHAT_AGENT]};return o.create("NewInteractionIndicator",n)}),o.register("WidgetOpenedNewInteractionIndicator").dependencies("Consts").asFunction(function(e){var t=e.STEP_PLAY_INITIATOR_ENUM,n={initiatorsThatBeginNewInteraction:[t.API,t.ATTENTION_GRABBER]};return o.create("NewInteractionIndicator",n)}),o.register("NewInteractionIndicator").asCtor(Nt).asProto().dependencies("inArrayFunc");function Nt(e,t){var n=this;n.shouldInitiateNewInteraction=o;var r;function i(e){r=e.initiatorsThatBeginNewInteraction}function o(t){var n=void 0==t.actualInitiatorType||e(t.actualInitiatorType,r)!=-1;return n}i.apply(this,[t])}o.register("EmbedmentTypeProvider").asCtor(xt).dependencies("Consts, EmbedInElementCompatibilityChecker, EmbedInOwnerDocumentCompatibilityChecker, EmbedInElementJspChecker");function xt(e,t,n,r){var i=this;i.get=o;function o(i,o){var a=i||r.shouldUseEmbedInElementBecauseInJspPane(o);if(a){var s=t.canEmbedInElement(o);return s?e.EMBEDMENT_TYPE.EmbedInElement:e.EMBEDMENT_TYPE.EmbedInElementParent}var u=n.canEmbedInOwnerDocument(o);return u?e.EMBEDMENT_TYPE.EmbedInOwnerDocument:e.EMBEDMENT_TYPE.EmbedInTopDocument}}o.register("EmbedInOwnerDocumentCompatibilityChecker").asCtor(Lt).dependencies("Consts, FeaturesManager, FramesetsUtils, ElementInIframeIndicator");function Lt(e,t,n,r){var i=this;i.canEmbedInOwnerDocument=o;function o(i){var o=r.isInIframe(i),a=!o;return a||t.isFeatureEnabled(e.FEATURES.ForceEmbedInOwnerDocument)||n.shouldHandlePageAsFramesets()}}o.register("EmbedInElementCompatibilityChecker").asCtor(Mt).dependencies("HostData, EmbedInElementCompatibilityConfigProvider, CommonUtils");function Mt(e,t,n){var r=this;r.canEmbedInElement=i;function i(r){var i=e.browser.version,a=t.get(),s=n.doAllMeetCondition(a,function(e){return!r.is(e.elementType)||e.isSupported&&o(i,e)});return s}function o(e,t){return e>=t.minimalSupportedVersion}}o.register("EmbedInElementJspChecker").asCtor(Ft).dependencies("Consts, FeaturesManager, CommonUtils");function Ft(e,t,n){var r=this;r.shouldUseEmbedInElementBecauseInJspPane=i;function i(r){return t.isFeatureEnabled(e.FEATURES.JSP)&&!!n.findJspContainer(r)}}o.register("EmbedInElementCompatibilityConfigProvider").asCtor(Rt).dependencies("HostData");function Rt(e){var t=this;t.get=a;var n=[{elementType:"select",isSupported:!1}],r=[{elementType:"button",isSupported:!1},{elementType:"input",isSupported:!0,minimalSupportedVersion:9},{elementType:"img",isSupported:!0,minimalSupportedVersion:9},{elementType:"iframe",isSupported:!0,minimalSupportedVersion:9},{elementType:"textarea",isSupported:!1}],i=[{elementType:"textarea",isSupported:!1}];function o(){e.isIE()?n=n.concat(r):e.isEdge()&&(n=n.concat(i))}function a(){return n}o()}o.register("EmbedderElement").asCtor(Bt).asProto();function Bt(t){var n=this;n.getOriginElement=a,n.getTopMostElement=s,n.getElementSize=u;var r,i;function o(){i=e(t.topMostElement),r=e(t.originElement)}function a(){return r}function s(){return i}function u(){var e={width:r.outerWidth(),height:r.outerHeight()};return e}o.apply(null,arguments)}o.register("ElementEmbedderFactory").asCtor(Ut).dependencies("EmbedmentTypeProvider, Consts, EmbedInOwnerDocumentElementEmbedderCreator, EmbedInTopDocumentElementEmbedderCreator, EmbedInElementElementEmbedderCreator, EmbedInElementElementParentEmbedderCreator");function Ut(e,t,n,r,i,a){var s=this;s.get=l;function u(){}function l(i,o){var s=e.get(o,i);switch(s){case t.EMBEDMENT_TYPE.EmbedInElement:return c(i);case t.EMBEDMENT_TYPE.EmbedInElementParent:return a.create(i);case t.EMBEDMENT_TYPE.EmbedInOwnerDocument:return n.create(i);case t.EMBEDMENT_TYPE.EmbedInTopDocument:return r.create(i);default:throw new Error("unknown embedment type "+s)}}function c(e){var t=i.create(e),n=a.create(e),r=[t,n],s={elementEmbedders:r};return o.create("FallbackElementEmbedder",s)}u.apply(null,arguments)}o.register("ElementEmbedder").asCtor(Wt).asProto().dependencies("DOMSessionManager");function Wt(e,t){var n=this;n.embed=c,n.reposition=p,n.getElement=l,n.destroy=h;var r,i,s;function u(){r=t.elementEmbedderApi}function l(){return i}function c(t,n,r,i){return f(),s=function(){return s=null,d(t,n,r,i)},e.mutate(s)}function d(e,t,n,o){try{var s=r.embed(e)}catch(u){return a.reject(u)}return i=g(s),p(t,n,o)}function p(e,t,n){return r.reposition(i,e,t,n)}function g(e){var t={topMostElement:e,originElement:e},n=o.create("EmbedderElement",t);return n}function f(){s&&(e.remove(s),s=null)}function h(){f(),r.destroy()}u.apply(null,arguments)}var Vt=function(){function e(e,t,n,r){this.elementAttacher=e,this.elementPositioner=t,this.domSessionManager=n,this._elementToEmbedInto=r.elementToEmbedInto,this._elementContainerProvider=r.elementContainerProvider,this._positionProvider=r.positionProvider}return e.prototype.embed=function(e){var t=this._elementContainerProvider.get(this._elementToEmbedInto),n=this.elementAttacher.attachCopy(t,e);return n},e.prototype.reposition=function(e,t,n,r){var i=this;return this.cancelReposition(),this._repositionCallback=function(){try{return i.doReposition(e,t,n,r)}catch(o){return a.reject(o)}},this.domSessionManager.measure(this._repositionCallback)},e.prototype.destroy=function(){this.cancelReposition()},e.prototype.cancelReposition=function(){if(!this._repositionCallback)return;this.domSessionManager.remove(this._repositionCallback),this._repositionCallback=null},e.prototype.doReposition=function(e,t,n,r){var i=this;this._repositionCallback=null;var o=this.getPosition(e,t,n);return r&&(o=r.refine(o)),this.domSessionManager.mutate(function(){i.setPosition(e,o)})},e.prototype.getPosition=function(e,t,n){var r=this._elementContainerProvider.get(this._elementToEmbedInto),i=this._positionProvider.getPosition(this._elementToEmbedInto,e,t,n,r);return i},e.prototype.setPosition=function(e,t){var n=e.getOriginElement();this.elementPositioner.setPosition(n,t)},e}();o.register("ElementEmbedderApi").asCtor(Vt).asProto().dependencies("ElementAttacher, ElementPositioner, DOMSessionManager"),o.register("EmbedInElementElementEmbedder").asCtor(Gt).asProto().dependencies("EmbedInElementWrapperCreator, ElementAttacher, DOMSessionManager");function Gt(e,t,n,r){var i=this;i.embed=p,i.reposition=f,i.getElement=d,i.destroy=v;var s,u,l;function c(){s=r.elementEmbedderApi}function d(){return u}function p(e,t,r,i){return m(),l=function(){return l=null,g(e,t,r,i)},n.mutate(l)}function g(n,r,i,o){var l=e.create(i);t.attach(l,n);try{var c=s.embed(l)}catch(d){return a.reject(d)}return u=h(c),f(r,i,o)}function f(e,t,n){return s.reposition(u,e,t,n)}function h(e){var t=e.children()[0],n={topMostElement:e,originElement:t},r=o.create("EmbedderElement",n);return r}function m(){l&&(n.remove(l),l=null)}function v(){m(),s.destroy()}c.apply(null,arguments)}o.register("FallbackElementEmbedder").asCtor(Ht).asProto().dependencies("FallbackElementEmbedderVisibilityChecker");function Ht(e,t){var n=this;n.embed=u,n.reposition=f,n.getElement=s,n.destroy=h;var r,i;function o(){r=t.elementEmbedders}function s(){return i.getElement()}function u(e,t,n,r){return d(e,t,n,r).then(l,function(){return c(e,t,n,r)})}function l(e){i=e}function c(e,t,n,o){return i=r[r.length-1],i.embed(e,t,n,o)}function d(e,t,n,i){for(var o=a.reject(),s=0;s<r.length-1;s++)o=o.then(null,function(r){return function(){return p(r,e,t,n,i)}}(r[s]));return o}function p(e,t,n,r,i){return e.embed(t,n,r,i).then(function(){return new a(function(t,n){g(e)?t(e):n()})})}function g(t){var n=t.getElement();if(e.isVisible(n))return!0;var r=n.getTopMostElement();return r.remove(),!1}function f(e,t,n,r){return i.reposition(e,t,n,r)}function h(){i.destroy()}o.apply(null,arguments)}o.register("FallbackElementEmbedderVisibilityChecker").asCtor(jt).dependencies("HostData");function jt(e){var t=this;t.isVisible=n;function n(e){var t=e.getOriginElement();return t.is(":mt_visible")}}o.register("DocumentHeadProviderFactory").asCtor(Yt).dependencies("Consts, OwnerDocumentHeadProvider, TopDocumentHeadProvider");function Yt(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r==e.EMBEDMENT_TYPE.EmbedInTopDocument)return n;return t}i()}o.register("OwnerDocumentHeadProvider").asCtor(zt);function zt(){var t=this;t.get=n;function n(t){return e("head",t[0].ownerDocument)}}o.register("TopDocumentHeadProvider").asCtor(Qt);function Qt(){var t=this;t.get=n;function n(){return e("head")}}o.register("EmbedInElementPositionProvider").asCtor(Kt).dependencies("RelativeToElementElementPositionAndSizeProvider, PositionProvider");function Kt(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,a,s){var u=r.getElementSize(),l=e.get(n),c=t.getPosition(l,u,i,a),d=o(c,s,r.getTopMostElement());return d}function o(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}r.apply(null,arguments)}o.register("EmbedInElementParentPositionProvider").asCtor(qt).dependencies("EmbedInElementPositionProvider");function qt(e){var t=this;t.getPosition=r;function n(){}function r(t,n,r,o,a){var s=e.getPosition(t,n,r,o,a),u=i(s,t,a);return u}function i(e,t,n){var r=t.offset(),i=n.offset(),o={top:e.top+(r.top-i.top),left:e.left+(r.left-i.left)};return o}n.apply(null,arguments)}o.register("EmbedInOwnerDocumentPositionProvider").asCtor(Xt).dependencies("EmbedInOwnerDocumentElementPositionAndSizeProvider, PositionProvider");function Xt(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}o.register("EmbedInTopDocumentPositionProvider").asCtor(Jt).dependencies("EmbedInTopDocumentElementPositionAndSizeProvider, PositionProvider");function Jt(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o,a){var s=e.get(n),u=r.getElementSize(),l=t.getPosition(s,u,i,o);return l}r.apply(null,arguments)}o.register("RelativeToElementElementPositionAndSizeProvider").asCtor($t).dependencies("PositionHelper");function $t(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getEmbedInElementPosition(t,n);return r}n.apply(null,arguments)}o.register("EmbedInOwnerDocumentElementPositionAndSizeProvider").asCtor(Zt).dependencies("PositionHelper");function Zt(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!0,window,n);return r}n.apply(null,arguments)}o.register("EmbedInTopDocumentElementPositionAndSizeProvider").asCtor(en).dependencies("PositionHelper");function en(e){var t=this;t.get=r;function n(){}function r(t){var n={leftOffset:0,topOffset:0},r=e.getElementBounds(t,!1,window,n);return r}n.apply(null,arguments)}o.register("InsidePositionCalculator").asCtor(tn).dependencies("Consts");function tn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;
switch(t){case e.POSITION_TYPE.Top:o=n.top,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right-i.width;break;case e.POSITION_TYPE.Bottom:o=n.bottom-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left;break;case e.POSITION_TYPE.TopLeft:o=n.top,a=n.left;break;case e.POSITION_TYPE.TopRight:o=n.top,a=n.right-i.width;break;case e.POSITION_TYPE.BottomRight:o=n.bottom-i.height,a=n.right-i.width;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom-i.height,a=n.left;break;case e.POSITION_TYPE.Center:o=r.top-i.height/2,a=r.left-i.width/2}return{top:o,left:a}}n.apply(null,arguments)}o.register("OutsidePositionCalculator").asCtor(nn).dependencies("Consts");function nn(e){var t=this;t.calculate=r;function n(){}function r(t,n,r,i){var o,a;switch(t){case e.POSITION_TYPE.Top:o=n.top-i.height,a=r.left-i.width/2;break;case e.POSITION_TYPE.Right:o=r.top-i.height/2,a=n.right;break;case e.POSITION_TYPE.Bottom:o=n.bottom,a=r.left-i.width/2;break;case e.POSITION_TYPE.Left:o=r.top-i.height/2,a=n.left-i.width;break;case e.POSITION_TYPE.TopLeft:o=n.top-i.height,a=n.left-i.width;break;case e.POSITION_TYPE.TopRight:o=n.top-i.height,a=n.right;break;case e.POSITION_TYPE.BottomRight:o=n.bottom,a=n.right;break;case e.POSITION_TYPE.BottomLeft:o=n.bottom,a=n.left-i.width}return{top:o,left:a}}n.apply(null,arguments)}o.register("PositionCalculatorFactory").asCtor(rn).dependencies("Consts, InsidePositionCalculator, OutsidePositionCalculator");function rn(e,t,n){var r=this;r.get=o;function i(){}function o(r){switch(r){case e.POSITION_PERIMETER_TYPE.Outside:return n;case e.POSITION_PERIMETER_TYPE.Inside:return t}}i.apply(null,arguments)}o.register("ElementPositioner").asCtor(on);function on(){var e=this;e.setPosition=n;function t(){}function n(e,t){e.css("top",t.top+"px"),e.css("left",t.left+"px")}t.apply(null,arguments)}o.register("PositionProvider").asCtor(an).dependencies("PositionCalculatorFactory, PositionHelper");function an(e,t){var n=this;n.getPosition=i;function r(){}function i(n,r,i,o){var a=t.getCenterPositionByBounds(n),s=e.get(i),u=s.calculate(o,n,a,r);return u}r.apply(null,arguments)}o.register("EmbedInElementContainerProvider").asCtor(sn);function sn(){var e=this;e.get=n;function t(){}function n(e){return e}t.apply(null,arguments)}o.register("EmbedInElementParentContainerProvider").asCtor(un);function un(){var e=this;e.get=n;function t(){}function n(e){return e.parent()}t.apply(null,arguments)}o.register("EmbedInOwnerDocumentContainerProvider").asCtor(ln).dependencies("TopContainerProvider");function ln(e){var t=this;t.get=r;function n(){}function r(t){return e.getTopContainer(t)}n.apply(null,arguments)}o.register("EmbedInTopDocumentContainerProvider").asCtor(cn).dependencies("TopContainerProvider");function cn(e){var t=this;t.get=r;function n(){}function r(){return e.getTopContainer(null,!0)}n.apply(null,arguments)}o.register("ElementAttacher").asCtor(dn);function dn(){var e=this;e.attach=t,e.attachCopy=n,e.detach=r,e.detachByElement=i;function t(e,t){var n=t.appendTo(e);return n}function n(e,t){e.append(t[0].outerHTML);var n=e.children().filter(":last-child");return n}function r(e,t){var n=e.find(t);n&&n.remove()}function i(e){try{e&&e.remove()}catch(t){}}}o.register("EmbedInElementElementEmbedderCreator").asCtor(pn).dependencies("EmbedInElementContainerProvider, EmbedInElementPositionProvider");function pn(e,t){var n=this;n.create=i;function r(){}function i(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},i=o.create("ElementEmbedderApi",r),a={elementEmbedderApi:i};return o.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}o.register("EmbedInElementElementParentEmbedderCreator").asCtor(gn).dependencies("EmbedInElementParentContainerProvider, EmbedInElementParentPositionProvider");function gn(e,t){var n=this;n.create=i;function r(){}function i(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},i=o.create("ElementEmbedderApi",r),a={elementEmbedderApi:i};return o.create("EmbedInElementElementEmbedder",a)}r.apply(null,arguments)}o.register("EmbedInOwnerDocumentElementEmbedderCreator").asCtor(fn).dependencies("EmbedInOwnerDocumentContainerProvider, EmbedInOwnerDocumentPositionProvider");function fn(e,t){var n=this;n.create=i;function r(){}function i(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},i=o.create("ElementEmbedderApi",r),a={elementEmbedderApi:i};return o.create("ElementEmbedder",a)}r.apply(null,arguments)}o.register("EmbedInTopDocumentElementEmbedderCreator").asCtor(hn).dependencies("EmbedInTopDocumentContainerProvider, EmbedInTopDocumentPositionProvider");function hn(e,t){var n=this;n.create=i;function r(){}function i(n){var r={elementToEmbedInto:n,elementContainerProvider:e,positionProvider:t},i=o.create("ElementEmbedderApi",r),a={elementEmbedderApi:i};return o.create("ElementEmbedder",a)}r.apply(null,arguments)}o.register("EmbedInElementWrapperCreator").asCtor(mn).dependencies("Consts");function mn(e){var t=this;t.create=r;function n(){}function r(e){var t=mtjQuery(document.createElement("div"));return a(t),i(t,e),s(t),t}function i(e,t){e.css("position","relative"),e.css("display","inline-block"),e.css("float",o(t))}function o(t){var n="left";switch(t){case e.POSITION_TYPE.Right:case e.POSITION_TYPE.TopRight:case e.POSITION_TYPE.BottomRight:n="right"}return n}function a(e){e.css("display","-moz-inline-stack")}function s(e){e.css("zoom","1"),e.css("*display","inline")}n.apply(null,arguments)}o.register("ClickIconExecutionBehavior").asCtor(vn).asProto().dependencies("CommonUtils");function vn(t,n){var r=this;r.applyBehavior=u;var i,o,a=2e3;function s(e){i=e.clickAction}function u(e){var t=e.getTopMostElement();l(t)}function l(t){t.click(function(t){c()&&(e(this).blur(),i())})}function c(){var e=(new Date).getTime(),t=e-o;if(null!=o&&t<=a)return!1;return o=e,!0}s.apply(null,[n])}o.register("DefaultIconExecutionBehavior").asCtor(Sn);function Sn(){var e=this;e.applyBehavior=n;function t(){}function n(e){var t=e.getTopMostElement();r(t)}function r(e){e.click(function(e){e.preventDefault(),e.stopPropagation()}),e.hover(function(e){e.stopPropagation()})}t.apply(null,arguments)}o.register("DefaultIconUiBehavior").asCtor(yn).dependencies("CommonUtils");function yn(e){var t=this;t.applyBehavior=r;function n(){}function r(e){var t=e.getTopMostElement();i(t),o(t)}function i(t){e.addTabIndex(t)}function o(e){e.css("cursor","pointer")}n.apply(null,arguments)}o.register("TolltipIconUiBehavior").asCtor(En).asProto().dependencies("HtmlDecoder");function En(e,t){var n=this;n.applyBehavior=o;var r;function i(e){r=e.tooltipText}function o(e){a(e)}function a(e){var t=e.getTopMostElement(),n=s();t.attr("title",n)}function s(){var t=e.decodeHtml(r,["&",'"',"'",">","<"]);return t}i.apply(null,[t])}o.register("ContentIconCreator").asCtor(Tn).dependencies("Consts, DocumentHeadProviderFactory, EmbedmentTypeProvider, ElementEmbedderFactory");function Tn(e,t,n,r){var i=this;i.create=s;function a(){}function s(t){var n=c(t);if(t.contentData.kind==e.ICON_CONTENT_KIND.Image)return u(n,t);return l(n,t)}function u(e,t){var n={contentData:t.contentData,cssClasses:t.cssClasses,zindex:t.zindex,iconEmbedder:e,isAnimated:t.isAnimated};return o.create("ImageIcon",n)}function l(e,r){var i=n.get(r.isEmbedInElement,r.element),a=t.get(i),s={headToEmbedFontsIn:a.get(r.element),text:r.contentData.text,cssClasses:r.cssClasses,zindex:r.zindex,iconEmbedder:e};return r.contentData.cssClassName&&r.cssClasses.positionElementCssClassNames.push(r.contentData.cssClassName),o.create("TextIcon",s)}function c(e){var t=r.get(e.element,e.isEmbedInElement),n={embedder:t,perimeterType:e.perimeterType,attachmentSide:e.attachmentSide,positionCustomOffset:e.positionCustomOffset,growingDirection:e.growingDirection,element:e.element};return o.create("IconEmbedder",n)}a()}o.register("CustomTemplateIconParamsProvider").asCtor(Cn).dependencies("LauncherCustomImagesProvider, Consts");function Cn(e,t){var n=this;n.getFromCustomTemplate=r;function r(n){var r=e.getById(n);if(!r)return null;var i={mainImageUrl:r.Url,hoverImageUrl:r.Hover,clickImageUrl:r.Click,text:r.CustomText,cssClassName:"custom-launcher-"+n,kind:r.Url?t.ICON_CONTENT_KIND.Image:t.ICON_CONTENT_KIND.Text};return i}}o.register("Icon").asCtor(bn).asProto().dependencies("ElementAttacher, IconBehaviorsApplier");function bn(e,t,n){var r=this;r.show=l,r.destroy=p,r.reposition=g;var i,o,a,s;function u(){i=n.concreteIcon,o=n.iconElementUniqueIdentifier,a=n.behaviors}function l(){return i.show().then(function(e){return s=e,c(),d(),s})}function c(){var e=s.getTopMostElement();e.addClass(o),e.addClass("walkme-not-embed")}function d(){t.applyBehaviors(s,a)}function p(){s&&(e.detachByElement(s.getTopMostElement()),s=void 0),i.destroy()}function g(){i.reposition()}u()}o.register("IconBehaviorsApplier").asCtor(In);function In(){var e=this;e.applyBehaviors=n;function t(){}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.applyBehavior(e)}}t()}o.register("IconCreator").asCtor(wn).dependencies("ContentIconCreator, DefaultIconUiBehavior, DefaultIconExecutionBehavior");function wn(e,t,n){var r=this;r.create=a;function i(){}function a(r){var i=[t,n],a=e.create(r),s={concreteIcon:a,behaviors:i,iconElementUniqueIdentifier:"walkme-icon-root-"+r.uniqueIdentifierType+"-"+r.uniqueIdentifierId};return o.create("Icon",s)}i()}o.register("IconCreatorParamsProvider").asCtor(_n).dependencies("Consts, CommonUtils");function _n(e,t){var n=this;n.get=r;function r(n,r){var i=(t.defaultValue(r.isAnimated,!1),{element:n,uniqueIdentifierType:r.uniqueIdentifierType,uniqueIdentifierId:r.uniqueIdentifierId,isEmbedInElement:t.defaultValue(r.isEmbedInElement,!1),contentData:r.contentData,isAnimated:r.isAnimated,attachmentSide:r.attachmentSide,zindex:t.defaultValue(r.zindex,"2147483627"),perimeterType:parseInt(t.defaultValue(r.perimeterType,e.POSITION_PERIMETER_TYPE.Outside)),positionCustomOffset:{top:parseInt(t.defaultValue(r.positionTopCustomOffset,0)),left:parseInt(t.defaultValue(r.positionLeftCustomOffset,0))},cssClasses:{contentElementCssClassNames:r.contentElementCssClassNames,positionElementCssClassNames:r.positionElementCssClassNames}});return i}}o.register("IconEmbedder").asCtor(Pn).asProto().dependencies("IconPositionRefiner, ElementPositioner, CustomCssSetter");function Pn(e,t,n,r){var i=this;i.embed=p,i.reposition=g,i.destroy=f;var o,a,s,u,l,c;function d(){o=r.embedder,a=r.perimeterType,s=r.attachmentSide,u=r.positionCustomOffset,l=r.growingDirection,c=r.element}function p(e){return n.setCustomCssIfNeeded(c),o.embed(e,a,s,{refine:h}).then(function(){return o.getElement()})}function g(){return o.reposition(a,s,{refine:h})}function f(){o.destroy()}function h(t){var n=e.refine(t,u);return n}d()}o.register("IconHtmlElementCreator").asCtor(An).dependencies("CssClassesAppender, IconPositionElementCreator");function An(e,t){var n=this;n.createElement=i;function r(){}function i(e,n,r){o(e,n.contentElementCssClassNames);var i=t.create(r);return a(i,n.positionElementCssClassNames),i.html(e),i}function o(t,n){e.appendClasses(t,["walkme-icon-image-div"]),e.appendClasses(t,n)}function a(t,n){e.appendClasses(t,["walkme-custom-icon-outer-div"]),e.appendClasses(t,n)}r()}o.register("IconContentProvider").asCtor(kn).dependencies("PredefinedShapeImageIconParamsProvider, CustomTemplateIconParamsProvider, PredefinedHtmlShapeIconParamsProvider");function kn(e,t,n){var r=this;r.get=o;function i(){}function o(r){if(r.TemplateId)return"htmlShape"==r.Type?n.getFromCustomTemplate(r.TemplateId):t.getFromCustomTemplate(r.TemplateId);if("htmlShape"==r.Type)return n.getFromSettingsImageObject(r.Predefined);return e.getFromSettingsImageObject(r.Predefined)}i.apply(null,arguments)}o.register("IconsFilterer").asCtor(On).asProto();function On(t){var n=this;n.getById=o;var r;function i(){r=t.getImages}function o(t){var n=e(r()).filter(function(e,n){return n.Id==t});if(n)return n[0];return null}i()}o.register("LauncherCustomImagesProvider").dependencies("IconTemplates").asFunction(function(e){return o.create("IconsFilterer",{getImages:function(){return e.customImages}})}),o.register("LauncherHtmlShapesProvider").dependencies("IconTemplates").asFunction(function(e){return o.create("IconsFilterer",{getImages:function(){return e.htmlImages}})}),o.register("IconImageUrlsToAbsoluteUrlsConverter").asCtor(Dn).dependencies("PredefinedIconsFolderProvider");function Dn(e){var t=this;t.convert=n;function n(e){e.mainImageUrl=r(e.mainImageUrl),e.hoverImageUrl=r(e.hoverImageUrl),e.clickImageUrl=r(e.clickImageUrl)}function r(t){if(!t||i(t))return t;var n=e.get();return n+t}function i(e){return 0==e.indexOf("http")}}o.register("ImageIconAnimatedContentState").asCtor(Nn).asProto();function Nn(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){e.stop(),a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.animate({width:n.width+"px",height:n.height+"px"})}i.apply(null,[e])}o.register("ImageIconNotAnimatedContentState").asCtor(xn).asProto();function xn(e){var t=this;t.applyState=o;var n,r;function i(e){n=e.imageSize,r=e.imageUrl}function o(e){a(e),s(e)}function a(e){e.css("background-image",'url("'+r+'")')}function s(e){e.css("height",n.height+"px"),e.css("width",n.width+"px")}i.apply(null,[e])}o.register("ImageIconContentStateFactory").asCtor(Ln);function Ln(){var e=this;e.get=n;function t(){}function n(e,t,n){var r={imageUrl:t,imageSize:n};return e?o.create("ImageIconAnimatedContentState",r):o.create("ImageIconNotAnimatedContentState",r)}t.apply(null,arguments)}o.register("ImageIconStatesProvider").asCtor(Mn).dependencies("Consts, ImageIconContentStateFactory");function Mn(e,t){var n=this;n.getStates=i;function r(){}function i(n,r){var i={},o=t.get(r,n.mainImageUrl,n.mainImageSize);if(i[e.ICON_CONTENT_STATE.Regular]=o,n.clickImageSize){var a=t.get(r,n.clickImageUrl,n.clickImageSize);i[e.ICON_CONTENT_STATE.Click]=a}if(n.hoverImageSize){var s=t.get(r,n.hoverImageUrl,n.hoverImageSize);i[e.ICON_CONTENT_STATE.Hover]=s}return i}r()}o.register("ImageIcon").asCtor(Fn).asProto().dependencies("IconHtmlElementCreator, ImageIconElementCreator, ImageIconResourcesLoader, ImageIconEventsBinder, Consts, ImageIconStatesProvider");function Fn(e,t,n,r,i,o,a){var s=this;s.show=h,s.reposition=E,s.destroy=T;var u,l,c,d,p,g;function f(){u=a.contentData,l=a.cssClasses,c=a.zindex,d=a.iconEmbedder,p=a.isAnimated}function h(){return n.load(u).then(m).then(v)}function m(e){g=o.getStates(e,p)}function v(){var n=t.create();y(n,i.ICON_CONTENT_STATE.Regular);var o=e.createElement(n,l,c);return d.embed(o).then(function(e){return n=e.getOriginElement().children().first(),r.bind(n,g,S),e})}function S(e,t){y(e,t),E()}function y(e,t){g[t].applyState(e)}function E(){return d.reposition()}function T(){d.destroy()}f()}o.register("ImageIconElementCreator").asCtor(Rn);function Rn(){var e=this;e.create=n;function t(){}function n(){var e=mtjQuery(document.createElement("div"));return e.css("background-repeat","no-repeat"),e}t.apply(this,arguments)}o.register("ImageIconEventsBinder").asCtor(Bn).dependencies("Consts");function Bn(e){var t=this;t.bind=n;function n(t,n,o){n[e.ICON_CONTENT_STATE.Hover]&&r(t,o),n[e.ICON_CONTENT_STATE.Click]&&i(t,n,o)}function r(t,n){var r=function(){n(t,e.ICON_CONTENT_STATE.Hover)},i=function(){n(t,e.ICON_CONTENT_STATE.Regular)};t.hover(r,i)}function i(t,n,r){var i=o(n),a=function(){r(t,e.ICON_CONTENT_STATE.Click)},s=function(){r(t,i)};t.on("touchend mouseup",s).on("touchstart mousedown",a)}function o(t){return t[e.ICON_CONTENT_STATE.Hover]?e.ICON_CONTENT_STATE.Hover:e.ICON_CONTENT_STATE.Regular}}o.register("ImageIconResourcesLoader").asCtor(Un).dependencies("ImageLoader, CommonUtils, IconImageUrlsToAbsoluteUrlsConverter");function Un(e,t,n){var r=this;r.load=o;function i(){}function o(e){n.convert(e);var r={},i=[];return s(r,i,"mainImageUrl","mainImageSize",e),e.hoverImageUrl&&s(r,i,"hoverImageUrl","hoverImageSize",e),e.clickImageUrl&&s(r,i,"clickImageUrl","clickImageSize",e),new a(function(e,n){var o={functionsToExecute:i,successCallback:function(){e(r)},failCallback:n};t.executeParallel(o)})}function s(t,n,r,i,o){function a(e){t[i]=e,t[r]=o[r]}n.push(function(t){e.getImageSize(o[r],function(e){a(e),t()})})}i()}o.register("PredefinedIconsFolderProvider").asCtor(Wn).dependencies("ResourceManager");function Wn(e){var t=this;t.get=n;function n(){var t="/player/resources/launchers/",n=e.getResourcePath(t);return n}}o.register("IconPositionElementCreator").asCtor(Vn).dependencies("UiUtils, TopMostCssStyleSettter");function Vn(e,t){var n=this;n.create=i;function r(){}function i(n){var r=mtjQuery(document.createElement("div"));return e.addBrowserSpecificClasses(r),e.setLangAttribute(r),r.css("position","absolute"),r.css("display","inline"),r.css("left",0),r.css("top",0),t.setTopMostCssStyle(r,n),r}r.apply(null,arguments)}o.register("IconPositionRefiner").asCtor(Gn);function Gn(){var e=this;e.refine=t;function t(e,t){var r={top:e.top,left:e.left};return n(r,t),r}function n(e,t){e.top+=t.top,e.left+=t.left}}o.register("PredefinedShapeImageIconParamsProvider").asCtor(Hn).dependencies("CommonUtils, Consts");function Hn(e,t){var n=this;n.getFromSettingsImageObject=r;function r(n){var r=n.data.shape+"-"+n.data.color,i={mainImageUrl:r+".png",kind:t.ICON_CONTENT_KIND.Image,hoverImageUrl:e.isValueTrue(n.data.hover)?r+"-hover.png":null,clickImageUrl:e.isValueTrue(n.data.click)?r+"-click.png":null};return i}}o.register("PredefinedHtmlShapeIconParamsProvider").asCtor(jn).dependencies("LauncherHtmlShapesProvider, Consts");function jn(e,t){var n=this;n.getFromSettingsImageObject=r,n.getFromCustomTemplate=i;function r(e){var n={text:e.data.customText,cssClassName:e.data.customClass,kind:t.ICON_CONTENT_KIND.Text};return n}function i(n){var r=e.getById(n),i={text:r.Text,kind:t.ICON_CONTENT_KIND.Text,cssClassName:"html-launcher-"+r.Shape+"-"+r.Color};return i}}o.register("SmartTipIconCreator").asCtor(Yn).dependencies("IconCreator, IconCreatorParamsProvider, IconContentProvider, SmartTipIconStylingProvider");function Yn(e,t,n,r){var i=this;i.create=a;function o(){}function a(n,r,i,o){var a=s(n,r,o),u=t.get(i,a);return e.create(u,i)}function s(e,t,i){var o=r.get(t,i),a=n.get(o),s={uniqueIdentifierType:"SmartTip",uniqueIdentifierId:e.Id,isEmbedInElement:e.Settings.embedInParent,attachmentSide:e.Settings.Position,zindex:e.Settings["z-index"],perimeterType:e.Settings.context,isAnimated:e.Settings.animated,growingDirection:e.Settings.direction,positionTopCustomOffset:e.Settings.topOffset,positionLeftCustomOffset:e.Settings.leftOffset,contentElementCssClassNames:[],positionElementCssClassNames:u(e,a),contentData:a};return s}function u(e,t){var n=[];return n.push("walkme-icon-position-smartTip-id-"+e.Id),t.customClass&&n.push(t.customClass),n}o.apply(null,arguments)}o.register("SmartTipIconStylingProvider").asCtor(zn);function zn(){var e=this;e.get=n;function t(){}function n(e,t){if(e.TemplateId)return{TemplateId:e.TemplateId};if(e.Settings.imageObject){if("htmlShape"==e.Settings.imageObject.type)return{TemplateId:e.Settings.imageObject.data.id,Predefined:e.Settings.imageObject,Type:e.Settings.imageObject.type};return{Predefined:e.Settings.imageObject}}if(t.Icon.TemplateId)return{TemplateId:t.Icon.TemplateId};if("htmlShape"==t.Icon.Predefined.type)return{Predefined:t.Icon.Predefined,Type:t.Icon.Predefined.type};return{Predefined:t.Icon.Predefined}}t.apply(null,arguments)}o.register("TextIcon").asCtor(Qn).asProto().dependencies("TextIconResourcesLoader, IconHtmlElementCreator, TextIconElementCreator");function Qn(e,t,n,r){var i=this;i.show=d,i.reposition=g,i.destroy=f;var o,a,s,u,l;function c(){o=r.headToEmbedFontsIn,a=r.text,s=r.cssClasses,u=r.zindex,l=r.iconEmbedder}function d(){return e.load(o).then(p)}function p(){var e=n.create(a),r=t.createElement(e,s,u);return l.embed(r)}function g(){return l.reposition()}function f(){l.destroy()}c()}o.register("TextIconElementCreator").asCtor(Kn);function Kn(){var e=this;e.create=n;function t(){}function n(e){var t=mtjQuery(document.createElement("div"));return t.html(e),t}t.apply(null,arguments)}R.register(L.PLATFORM.Web,function(){o.register("TextIconResourcesLoader").asCtor(qn).dependencies("ResourceManager, FontsData")}),R.register(L.PLATFORM.Android,function(){o.register("TextIconResourcesLoader").asCtor(qn).dependencies("ResourceManager, FontsData")}),R.register(L.PLATFORM.iOS,function(){o.register("TextIconResourcesLoader").asCtor(qn).dependencies("ResourceManager, FontsData")});function qn(e,t){var n=this;n.load=r;function r(n){return new a(function(r,i){e.fonts([t.get("walkme-opensans")],n,r,i)})}}R.register(L.PLATFORM.MobileWeb,function(){o.register("TextIconResourcesLoader").asCtor(Xn).dependencies("ResourceManager, FontsData")});function Xn(e,t){var n=this;n.load=r;function r(n){return new a(function(r,i){e.fonts([t.get("walkme-opensans"),t.get("lib-font")],n,r,i)})}}o.register("AuditingEnabledIndicator").asCtor(Jn).dependencies("CommonUtils, FeaturesManager, SiteConfigManager, RecorderServerManager, CorsSupportIndicator");function Jn(e,t,n,r,i){var a=this;a.isEnabled=s;function s(){return!u()}function u(){var a=!1,s=!!window.wm_no_audit,u=!!e.getWindowCookie("wm-no-audit"),l=!t.isFeatureEnabled("blockJsonp")||i.hasCorsSupport(),c=n.get(),d=!!c.Settings&&!!c.Settings.noAuditCond&&o.get("ConditionTreeEvaluator").evaluate(c.Settings.noAuditCond);return!l||!r.get()||t.isFeatureEnabled("noAudit")||a||s||u||d}}o.register("GoalsManagerParams").asInstance({checkInterval:2e3}),o.register("GoalsManager").asCtor($n).dependencies("GoalsManagerParams, Logger, HostData, ClientStorageManager, Consts, CommonEvents, ConditionCheckerFactory, UserGuidContainer");function $n(e,t,n,r,i,o,a,s){var u,c,d=500,p=5e3,g="Conditions",f=this,h=null,m={},v=0,S={},y=0,E=!1,T="wm-gb",C=86400;function b(){h=void 0==e.checkInterval?p:e.checkInterval,u=t.wrapCustomerLog(l)}function I(e,t,n){S[e.Id]={relatedObjectId:e.RelatedObjectId,goalType:e.GoalType,evaluator:n,goalCompletedFunc:t.goalCompletedFunc,identifier:t.identifier,interactionGuid:t.interactionGuid}}function w(e,t){var p=m[e.Id];if(p){if(e.IsLinkedGoal){var g=Nf("Skipping goal watch - Goal is already watched : {0}, type: {1}",e.Name,e.GoalType);return u(g,3),null}f.removeGoalWatch(e.Id)}var S={trackUIChange:!0,evaluationPollingIntervalMs:h,featureName:l,elementName:"Goal: "+e.Name},b=a.createOld(S);m[e.Id]=e,v++,I(e,t,b);var w=t.identifier,_=w?Nf(", PlayGuid of : {0}",w):"",g=Nf("Start watching Goal : {0}, type: {1} {2}",e.Name,e.GoalType,_);return u(g,3),b.onValueChanged(function(t){t&&P(e)}),b.onPreEvaluation(function(t,n){n||(E?E=!1:0===y&&(c=0,u("============================ CHECKING GOALS ==============================================================",2)),e.goalStart=(new Date).getTime()),o.sendAutomationEvent("CheckingGoal",{GoalId:e.Id,GoalName:e.Name});var r=n?" (async)":"",i=Nf("Goal: {0} - Checking Goal , id : {1}, type: {2}, RelatedObjectId: {3}{4}",e.Name,e.Id,e.GoalType,e.RelatedObjectId,r);u(i,3)}),b.onEvaluated(function(t,a){var l=(new Date).getTime(),p=l-e.goalStart,h=a?" (async)":"";g=Nf("Goal: {0} - checking finished, id : {1}, took {2} ms{3}",e.Name,e.Id,p,h),u(g,4),o.deprecatedRaiseEvent(i.EVENTS.Goals.ConditionEvaluated,{goal:e},{playGUID:w}),a||(y++,c+=p,y>=v&&(u("Done checking "+y+" Goals. took: "+c+" ms",2),u("============================ DONE CHECKING GOALS =========================================================",2),y=0),c>d&&(u("Goals tracking time until now is "+c+" ms. It broke the time limit of "+d+" ms. Stopped tracking current goals."),r.getData(T)||(g=Nf("Goals tracking broke limit and was stopped - user id: {0}, end user id: {1}, time: {2}, browser: {3}, url: {4}",s.getUserGuid(),_makeTutorial.getEndUserId(),c,n.browser.string,window.location.href),_makeTutorial.Logger.error({},g),r.saveData(T,!0,C)),f.removeAllGoalsWatch()))}),e}this.addGoalsWatch=function(e,t){for(var n=e.length-1;n>=0;n--)for(var r=e[n],i=e.length-1;i>n;i--){var o=e[i];r.Id==o.Id&&e.splice(i,1)}for(var a=[],n=0;n<e.length;n++){var s=w(e[n],t);s&&a.push(s)}for(var n=0;n<a.length;n++){var u=a[n],l=_(u.Id);l.evaluateAsync(u.Settings[g])}},this.cleanResources=function(){for(var e in m){var t=_(e);t&&t.cleanResources()}},this.removeGoalWatch=function(e){if(u(e,5,"goalProblem"),u(m[e],5,"goalProblem"),!m[e])return;var t=_(e);--y,--v,0==y&&v>0&&(E=!0),t&&t.cleanResources(),delete m[e],delete S[e]},this.removeAllGoalsWatch=function(){f.cleanResources(),m={},S={},v=0,y=0},this.completeGoalById=function(e){var t=m[e];if(!t)return void u("Could not complete goal with id "+e+" - it was already completed or does not exist.",3);P(t)};function _(e){return S[e].evaluator}function P(e){u('Goal "'+e.Name+'" Reached! ',1);var n=e.Id,r=S[n],a=f.createGoalCompletedParams(e,r);try{r.goalCompletedFunc&&r.goalCompletedFunc(a)}catch(s){t.error(s,"completing goal callback threw an exception.")}f.removeGoalWatch(e.Id),o.raiseEvent(i.EVENTS.Goals.GoalReached,A(r,e)),o.sendAutomationEvent(i.EVENTS.Goals.GoalReached,{GoalId:e.Id,GoalName:e.Name})}function A(e,t){return{goal:t,identifier:e.identifier,interactionGuid:e.interactionGuid,GoalId:t.Id,GoalName:t.Name}}f.createGoalCompletedParams=function(e,t){var n={Id:e.Id,GoalType:t.goalType,RelatedObjectId:t.relatedObjectId,Name:e.Name,identifier:t.identifier,interactionGuid:t.interactionGuid};return n},f.getGoalsCountFromDictionary=function(){var e=f.getCheckedGoals(),t=0;for(var n in e)void 0!=m[n]&&void 0!=m[n].Id&&void 0!=m[n].Settings&&t++;return t},b.apply(null,arguments),f.getCheckedGoals=function(){return m},f.getGoalsCompletionParams=function(){return S}}o.register("WalkMeGoalsManager").asCtor(Zn).dependencies("ClientStorageManager,GoalsManager,DeployablesManagerFactory,WalkMeInfo,ServerDataSenderManager,Logger,TimerManager,CommonEvents, InteractionManager, Consts, AuditingEnabledIndicator, SafeFullUrlProvider, DeployableTypeNameProvider");function Zn(e,t,n,r,i,o,a,s,u,c,d,p,g){var f=this;f.onGoalCompleted=A,f.enableMultiUserStorage=k,f.startWatchingDeployable=O,f.stopWatchingDeployables=N,f.init=x,f.getCompletedGoals=B,f.getDeployableGoalsByIdAndType=Y,f.getWatchedDeployablesOfType=J,f.getGoalsFromDeployable=U,f.getGoalById=z;var h,m,v=3600,S="wm-wtchd",y="tID",E="plgd",T="fnsh",C="igd",b=!1,I=[],w={},_=2e3;function P(){h=o.wrapCustomerLog(l),m=i.register("go",{actionUrl:"/Statistics/AddCompletedGoal",technicalSuccessHandler:R,defaultDataStorageLifeSeconds:v,prefixForStorage:"go",sendingThreshold:1,dataType:"deployable goal",requestParamsFunc:function(e){var t=e[0],n=t.GoalType==c.DEPLOYABLE_TYPE.AbExperiment;return{goalId:t.Id,playGuid:t.identifier,permutationId:r.getPermutationId(),endUserGuid:r.getEndUserGuid(),source:r.getEnvironmentId(),localTime:Lf(),url:p.get(),isAbTesting:n}}})}function A(e){I.push(e)}function k(){b=!0}function O(e,n){var r=U(e);if(r.length>0){var i=r[0].GoalType,o=j(e,n);W(e,i,n,o);var a=D(o);t.addGoalsWatch(r,a);var s=g.getDeployableTypeNameByTypeNumber(i),u=Nf("Started watching {0} : {1}",s,e.Name);h(u,2)}}function D(e){var t=e[E],n=(e[T],e[C]),r={identifier:t,interactionGuid:n,goalCompletedFunc:K};return r}function N(e){Z(e)}function x(e){var t=M(!0);h("Restoring watched Goals... "+t+" Walk-Thrus are watched.",2),e&&a.libSetTimeout(L,_)}function L(){var e=M(!1);e&&h("New watched deploybles... "+e+" more items are now watched.",2),a.libSetTimeout(L,_)}function M(e){var t=0;return mtjQuery.each(c.DEPLOYABLE_TYPE,function(n,r){var i=J(r);for(var o in i)if(void 0!=i[o]&&void 0!=i[o][y]){var a=i[o];(e||F(r,a))&&(Q(a,r),t++)}}),t}function F(e,t){if(!w[e])return!0;var n=t[y];if(w[e][n]!=t[E])return!0;return!1}function R(e,t,n,r){"true"==e?r(parseInt(e)):"error"==e?(h("Completed goal - Internal Error",3),n()):(h("Completed goal - Unknown Error",3),t())}function B(e,t){if(void 0==e||!t)return;var n=J(e);if(!n)return;var r=n[t];if(!r)return;var i=r[E],o=r[T];return{playGuid:i,finishedGoals:o}}function U(e){var t=e.Goals;return t||(t=[]),t.slice()}function W(e,t,n,r){var i=H(e);G(t,H(e),r),V(t,i,n)}function V(e,t,n){w[e]=w[e]||{},w[e][t]=n}function G(t,n,r){var i=ee(t);e.addToDictionary(i,n,r,v)}function H(e){return e.Id?e.Id:e.TutorialId}function j(e,t){var n={};return n[y]=H(e),n[E]=t,n[T]=[],n[C]=u.getCurrentInteractionGuid(),n}function Y(e,t){var r=n.get(t),i=r.getById(e);if(i)return U(i);return[]}function z(e,t){for(var n,r=0;r<e.length;r++)if(e[r].Id==t){n=e[r];break}return n}function Q(e,n){var r=e[y],i=Y(r,n);if(i.length>0){var o=e[E],a=e[T];te(i,a),V(n,r,o);var s=D(e);t.addGoalsWatch(i,s)}}var K=function(e){var t=r.getEnvironmentId();t!=c.SOURCES.preview&&q(e),X(e)};function q(e){if(!d.isEnabled())return!0;return h("Sending completed Goal info to server ("+e.Name+", "+e.identifier+")",3),m.sendData({Id:e.Id,GoalType:e.GoalType,identifier:e.identifier}),!0}function X(e){var t=J(e.GoalType),n=t[e.RelatedObjectId];if(n&&e.identifier==n[E]){n[T].push(e.Id);var r=n[T].length,i=Y(e.RelatedObjectId,e.GoalType).length;i==r?$(e.GoalType,e.RelatedObjectId):G(e.GoalType,e.RelatedObjectId,n)}for(var o=0;o<I.length;o++)I[o](e)}function J(t){var n=ee(t),r=e.getData(n,{});return r}function $(t,n){var r=ee(t);e.removeFromDictionary(r,n,v)}function Z(t){var n=ee(t);e.removeData(n)}function ee(e){var t=Nf("{0}-{1}",S,e);if(b){var n=r.getEndUserGuid();n&&(t+="-"+n)}return t}function te(e,t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){var o=e[i].Id;if(o==r){e.splice(i,1);break}}}P.apply(null,arguments)}var er=function(){function e(e,t,n){this.balloonSettingsKey="stepHlObj",this.MULTI_STEP_CLASS="walkme-mltstep",this._element=null,this.settings=null,this.highlighterDivs=[],this.balloonSettings={},this._logger=e,this._commonUtils=t,this._lib=n.lib,this._drawableType=n.drawableType,this._drawableId=n.drawableId,this._useDefaultSettings=n.defaultSettings,this._cssKeysValues=n.cssKeysValues,this._useExistingHighlighter="undefined"!=typeof n.useExistingHighlighter&&n.useExistingHighlighter,this._useExisitingHighlighterArray=n.useExisitingHighlighterArray,this._highlighterService=o.get("HighlighterService"),this._element=n.element,this.balloonSettings=n.settings,this.customerLog=e.wrapCustomerLog(v)}return e.prototype.shouldShow=function(){},e.prototype.getSettings=function(e,t){return this._highlighterService.getDefaultSettings()},e.prototype.init=function(e){this.settings=this.initSettings(e,this._useDefaultSettings),this._cssClasses=this._highlighterService.generateCssClasses(this.getInstanceName(),this._cssKeysValues)},e.prototype.initSettings=function(e,t){var n=this.getSettings(e,t),r=this._commonUtils.getSettingsValue(e,this.balloonSettingsKey);return!t&&r&&(this._highlighterService.copyFloatProperties(n,r),n.color=r.color||n.color),n},e.prototype.highlight=function(e){try{this.unhighlightElement(),this.createHighlighterDivs(),this.applyStyle(this.highlighterDivs)}catch(t){this._logger.error(t)}},e.prototype.createHighlighterDivs=function(){for(var e=0;e<4;e++)this.highlighterDivs.push(this.createHighlighterDiv(e))},e.prototype.removeHighlighterDiv=function(e){if(e)try{e.remove()}catch(t){this.customerLog("[highlighter] error removing div",3)}},e.prototype.createHighlighterDiv=function(e){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,e,this._drawableId),n=this.createDiv(t);return n.addClass(this._cssClasses),n.addClass("walkme-custom-"+this.getInstanceName()+"-position-"+e),n},e.prototype.unhighlightElement=function(){for(var e=0;e<this.highlighterDivs.length;e++)this.removeHighlighterDiv(this.highlighterDivs[e]);this.highlighterDivs.length=0},e}(),tr=function(t){r(n,t);function n(r,i,o,a,s,u,l,c,d){t.call(this,u,i,d),this.timerManager=c,this._embeddedElements=[],this._consts=o,this._commonUtils=i,this._siteConfigManager=r,this._highlighterService=a,this._positionHelper=s,this._customerLog=u.wrapCustomerLog(v),this._element=d.element,
this._drawableId=d.drawableId,this._drawableType=d.drawableType,this._cssKeysValues=d.cssKeysValues,this._embedInElement=d.embedInElement,this._balloonSettings=d.settings,this._useDefaultSettings=d.defaultSettings,this._shouldDrawInSetTimeout=l.isIEOlderThan(8);var p=this._commonUtils.getSettingsValue(this._balloonSettings,n.STEP_HL_OBJ);this._settings=this.getSettings(p,d.defaultSettings),this._monitor=d.monitor&&!this._settings.doNotHideOnHover,this._handlerEnterWrapper=e.proxy(this.handlerEnter,this),this._handlerLeaveWrapper=e.proxy(this.handlerLeave,this)}return n.prototype.shouldShow=function(){return this._highlighterService.shouldShow(this._balloonSettings)},n.prototype.applyStyle=function(){var e=this;return this._customerLog("Highlighter applyStyle start creating highlighter",3),a.all([this.embedHighliterDiv(this._consts.POSITION_TYPE.Top),this.embedHighliterDiv(this._consts.POSITION_TYPE.Right),this.embedHighliterDiv(this._consts.POSITION_TYPE.Bottom),this.embedHighliterDiv(this._consts.POSITION_TYPE.Left)]).then(function(){e._customerLog("Highlighter applyStyle finished creating highlighter",3)})},n.prototype.embedHighliterDiv=function(t){var n=this,r=this._element,i=this._settings.thickness,a=this._settings.color,s=this._settings.zIndex;this._customerLog("embed Highlighter to div"+this._element,3);var u=this._consts.POSITION_PERIMETER_TYPE.Outside,l=this.createDiv(t),c=this._positionHelper.getMultipleElementsRect(r),d=c.right-c.left,p=c.bottom-c.top;switch(t){case this._consts.POSITION_TYPE.Top:case this._consts.POSITION_TYPE.Bottom:l.css({height:i+"px",width:d+2*i+this._settings.width+"px","background-color":a,"z-index":s});break;case this._consts.POSITION_TYPE.Right:case this._consts.POSITION_TYPE.Left:l.css({height:p+2*i+this._settings.height+"px",width:i+"px","background-color":a,"z-index":s});break;default:return}var g=o.get("ElementEmbedderFactory"),f=g.get(e(this._element),this._embedInElement);return f.embed(l,u,t).then(function(){var e=f.getElement();n.applyDivSettings(e.getOriginElement(),t),n._embeddedElements.push(e.getTopMostElement())})},n.prototype.createDiv=function(t){var r=this._highlighterService.generateId(n.CLASS_NAME,this._drawableType,t,this._drawableId),i=this._highlighterService.generateCssClasses(n.INSTANCE_NAME,this._cssKeysValues);i+=" walkme-custom-highlighter-position-"+t;var o=e("<div/>",{id:r,"class":i,style:"position:absolute; left: 0px; top: 0px;"});return this._customerLog("Highlighter createDiv id="+r+" classes="+i,3),o},n.prototype.applyDivSettings=function(e,t){var n=parseFloat(e.css("top").replace("px","")),r=parseFloat(e.css("left").replace("px",""));switch(this._customerLog("Highlighter applyDivSettings before top="+n+" left="+r,3),t){case this._consts.POSITION_TYPE.Top:n=n+this._settings.top-this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Bottom:n=n+this._settings.top+this._settings.height/2+"px",r=r+this._settings.left+"px";break;case this._consts.POSITION_TYPE.Right:n=n+this._settings.top+"px",r=r+this._settings.left+this._settings.width/2+"px";break;case this._consts.POSITION_TYPE.Left:n=n+this._settings.top+"px",r=r+this._settings.left-this._settings.width/2+"px"}this._customerLog("Highlighter applyDivSettings after top="+n+" left="+r,3),e.css({top:n,left:r})},n.prototype.getSettings=function(e,t){var r=this._highlighterService.getDefaultSettings();return t?(r.color=n.DEFAULT_COLOR,r.thickness=n.DEFAULT_THINKNESS):(this._highlighterService.copyFloatProperties(r,e),r.color=r.color||this._siteConfigManager.get().BalloonSettings.HighlighterColor||n.DEFAULT_COLOR,r.thickness=r.thickness||this._siteConfigManager.get().BalloonSettings.HighlighterThickness||n.DEFAULT_THINKNESS),r.zIndex=this.getZIndex(),this._customerLog("Highlighter getSettings highlight settings",3),this._customerLog(r,3),r},n.prototype.getZIndex=function(){var e=this.getDefaultZIndex(),t=this._commonUtils.getSettingsValue(this._balloonSettings,"z-index",e);return t},n.prototype.getDefaultZIndex=function(){return this._shouldDrawInSetTimeout?n.DEFAULT_ZINDEX-1:n.DEFAULT_ZINDEX},n.prototype.highlight=function(e){return this.unhighlightElement(),this.drawAndHandleEvents()},n.prototype.drawAndHandleEvents=function(){var e=this;return this.applyStyle().then(function(){e._monitor&&(e.unregisterMonitorEvents(),e._commonUtils.registerEventHandler(n.ENTER_ELEMENT_EVENT,e._handlerEnterWrapper,!0,e._element[0]),e._commonUtils.registerEventHandler(n.EXIT_ELEMENT_EVENT,e._handlerLeaveWrapper,!0,e._element[0]))})},n.prototype.handlerEnter=function(t){e.each(this._embeddedElements,function(e,t){t.hide()})},n.prototype.handlerLeave=function(t){e.each(this._embeddedElements,function(e,t){t.show()})},n.prototype.unregisterMonitorEvents=function(){try{this._commonUtils.unregisterEventHandler(n.EXIT_ELEMENT_EVENT,this._handlerLeaveWrapper,!0,this._element[0]),this._commonUtils.unregisterEventHandler(n.ENTER_ELEMENT_EVENT,this._handlerEnterWrapper,!0,this._element[0])}catch(e){}},n.prototype.unhighlightElement=function(){this.unregisterMonitorEvents(),e.each(this._embeddedElements,function(e,t){t.remove()}),this._embeddedElements=[]},n.prototype.getClassName=function(){return n.CLASS_NAME},n.prototype.getInstanceName=function(){return n.INSTANCE_NAME},n.STEP_HL_OBJ="stepHlObj",n.DEFAULT_COLOR="#55aaff",n.DEFAULT_ZINDEX=2147483630,n.DEFAULT_THINKNESS=1,n.INSTANCE_NAME="highlighter",n.CLASS_NAME="highlightDiv",n.ENTER_ELEMENT_EVENT="mouseover",n.EXIT_ELEMENT_EVENT="mouseout",n}(er);o.register("Highlighter").asCtor(tr).asProto().dependencies("SiteConfigManager, CommonUtils, Consts, HighlighterService, PositionHelper, Logger, HostData, TimerManager"),o.register("HighlighterService").asCtor(nr).asProto().dependencies("SiteConfigManager, CommonUtils, Logger");function nr(e,t,n){var r;function i(){r=n.wrapCustomerLog(v)}this.shouldShow=function(n){var r=t.getSettingsValue(e.get().Settings,"hlType","none"),i=t.getSettingsValue(n,"hlType",r);return"rect"===i},this.generateId=function(e,t,n,r){var i=e+"-"+t+"-"+n+"-"+r;return i},this.generateCssClasses=function(e,t){var n="walkme-custom-"+e+" walkme-to-remove ";if(t)for(var r=0;r<t.length;r++)n+=" walkme-custom-"+e+"-"+t[r].name+"-"+t[r].id;return n},this.copyFloatProperties=function(e,n){for(var r in n)n.hasOwnProperty(r)&&(t.isNumber(n[r])?e[r]=parseFloat(n[r]):e[r]=n[r])},this.getDefaultSettings=function(){return{left:0,top:0,width:0,height:0}},i.apply(null,arguments)}o.register("HighlighterSettingsProvider").asCtor(rr).dependencies("CommonUtils");function rr(e,t){function n(){}this.getHighlighterSettings=function(t,n,r){var i={element:n,settings:t,embedInElement:e.getSettingsValue(t,"embed",!1),drawableType:"balloon",drawableId:r.balloonEntityId,monitor:!r.isViewStep&&!r.isCapture,defaultSettings:!!r.isCapture,cssKeysValues:[{id:r.balloonEntityId,name:"step"},{id:r.containerEntityId,name:"walkthru"}]};return i},n.apply(null,arguments)}var ir=function(t){r(n,t);function n(e,n,r,i,o,a,s,u){var l=t.call(this,e,i,u)||this;return l.topMostCssStyleSettter=s,l.STEP_IO_OBJ="stepIoObj",l.DEFAULT_ZINDEX="2147483629",l.DEFAULT_COLOR="#000000",l.containerDiv=null,l._hostData=n,l._positionHelper=r,l._siteConfigManager=o,l._elementInIframeIndicator=a,l.balloonSettingsKey=l.STEP_IO_OBJ,t.prototype.init.call(l,u.settings),l}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin(),s=[0,o.height],u=s[0],l=s[1];this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],u,e+n,Math.floor(o.width-n-e),l),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],u,0,e-.5,l)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("position","absolute").css("background-color",this.settings.color)},n.prototype.createContainerDiv=function(){var t=this._highlighterService.generateId(this.getClassName(),this._drawableType,"main",this._drawableId),n=e('<div id="'+t+'" class="wm-insideouter-container" />').addClass(this._cssClasses).appendTo(this.getContainer());return this.setCssStyle(n,this.settings.zindex),n.css("opacity",this.settings.opacity).css("background-color","").css("display","block").css("top",0).css("left",0).css("width",0).css("height",0),n},n.prototype.createHighlighterDivs=function(){this.containerDiv&&this.unhighlightElement(),this.containerDiv=this.createContainerDiv(),t.prototype.createHighlighterDivs.call(this)},n.prototype.unhighlightElement=function(){this.containerDiv&&this.containerDiv.remove(),this.containerDiv=null,this.highlighterDivs.length=0},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return this.containerDiv.append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(er);o.register("Insideout").asCtor(ir).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter");var or=function(t){r(n,t);function n(e,n,r,i,o,a,s,u){var l=t.call(this,e,i,u)||this;return l.topMostCssStyleSettter=s,l.STEP_IO_OBJ="stepIoObj",l.DEFAULT_ZINDEX="2147483629",l.DEFAULT_COLOR="#000000",l._hostData=n,l._positionHelper=r,l._siteConfigManager=o,l._elementInIframeIndicator=a,l.balloonSettingsKey=l.STEP_IO_OBJ,t.prototype.init.call(l,u.settings),l}return n.prototype.shouldShow=function(){var e=this._commonUtils.getSettingsValue(this._siteConfigManager.get().Settings,"ioEnabled","0");return"1"==this._commonUtils.getSettingsValue(this.balloonSettings,"ioEnabled",e)&&!this._hostData.isQuirksMode(this._element[0])},n.prototype.getSettings=function(e,n){var r=t.prototype.getSettings.call(this,e,n);return r.color=this.DEFAULT_COLOR,r.opacity=.5,r.zindex=this._commonUtils.getSettingsValue(e,"z-index",this.DEFAULT_ZINDEX),r},n.prototype.getDocumentSize=function(){var t=e(document),n=document.documentElement.clientWidth,r=t.height();return{height:r,width:n}},n.prototype.getContainer=function(){return e(document).find("body")},n.prototype.applyStyle=function(e){var t,n=this._element[0],r={top:0,left:0},i=this._commonUtils.getElementDocument(this._element);if(this._elementInIframeIndicator.isInIframe(this._element)){var o=this._positionHelper.getRectRelativeToWindow(this._element,n,window);if(!o)return;t=o}else t=this._element.length>1?this._positionHelper.getMultipleElementsRect(this._element):n.getBoundingClientRect(),r=this._positionHelper.getOffsetRect(n,i,window);var a=this.getRectPositionData(t,r,this.settings);this.setAllDivCss(a.x,a.y,a.w,a.h,e)},n.prototype.getRectPositionData=function(e,t,n){var r={};return r.x=e.left+t.left+n.left-n.width/2,r.y=e.top+t.top+n.top-n.height/2,r.w=e.right-e.left+n.width,r.h=e.bottom-e.top+n.height,r},n.prototype.setAllDivCss=function(e,t,n,r,i){var o=this.getDocumentSize(),a=this._positionHelper.getCollapsedMargin();this.setDivCss(i[0],0-a.top,0,o.width-.5,t+a.top),this.setDivCss(i[1],t,e+n,Math.floor(o.width-n-e),r),this.setDivCss(i[2],t+r,0,o.width-.5,o.height-(t+r)),this.setDivCss(i[3],t,0,e-.5,r)},n.prototype.setDivCss=function(e,t,n,r,i){if(!e)return;this.setCssStyle(e,this.settings.zindex),e.css("top",t+"px").css("left",n+"px").css("width",r+"px").css("height",i+"px").css("background-color",this.settings.color).css("opacity",this.settings.opacity)},n.prototype.setCssStyle=function(e,t){e.css("background-color","red"),this.topMostCssStyleSettter.setTopMostCssStyle(e,t),e.css("display","inline")},n.prototype.createDiv=function(t){var n=e("<div id="+t+" />");return e(document).find("body").append(n),n},n.prototype.getInstanceName=function(){return"insideouter"},n.prototype.getClassName=function(){return"insideoutDiv"},n}(er);o.register("OldInsideout").asCtor(or).asProto().dependencies("Logger, HostData, PositionHelper, CommonUtils, SiteConfigManager, ElementInIframeIndicator, TopMostCssStyleSettter"),o.register("Animator").asCtor(ar).asProto().dependencies("TimerManager, UiUtils, Consts, FeaturesManager, CommonUtils");function ar(e,t,n,r,i,o){var a=this,s=null,u=null,l=null,c=!1,d=!0,p=!1,g=!1,f=!1,h=null,m=!1,v=!1,S=!1,y=null,E=null,T=[],C=null,b=null,I=1,w=150,_="animations",P="marginLeft",A=250,k=10,O=.3,D=50,N={0:"Top",1:"Left",2:"Top",3:"Left"},x="inline",L={InitCSS:{display:x},Properties:{},Options:{}};function M(){var e=o.config;J();var t=e?e:L;s=U(t.InitCSS),u=U(t.Properties),l=U(t.Options),le(t.MetaData),v=o.isVibrating}function F(){return!0}this.disableAnimation=function(){d=!1},this.setPosition=function(e){h=e,te()},this.postAnimation=function(e){e&&T.push(e)},this.prepare=function(e,t){y=e,E=t,C=W(y),$(),Y(),Te()?(V(),G(),H(),a.postAnimation(X),l.complete=Q):a.postAnimation(ie),Ce()&&a.postAnimation(fe)},this.animate=function(e){if(!y)return void(e&&e());this.postAnimation(e),Te()?(c=!0,ue(y),y.animate(u,l),K()):(q(),Q())},this.stop=function(){y.stop(!0,!1)},this.destroy=function(e){var t=y;if(E)for(var n=0;n<E.length;n++)try{t=t.add(E[n])}catch(r){}try{Te()?R(t,e):B(t,e)}catch(r){e&&e()}};function R(e,n){e.removeAttr("id").find("div").removeAttr("id"),e.fadeOut(w,function(){t.destroyDivWithIframes(e,n)})}function B(e,n){t.destroyDivWithIframes(e,n)}function U(e){return mtjQuery.extend({},e)}function W(e){return{filter:e.css("filter")}}function V(){f&&E?Z(re):T.push(ie)}function G(){g&&(ce(),Z(de))}function H(){if(z()){var e=pe(y,j());a.postAnimation(function(){ge(e)})}}function j(){if(p)return ye;if(S)return Se}function Y(){r.isFeatureEnabled("dontPrepForScrl")||y.css({display:"block",visibility:"hidden",filter:""})}function z(){return p||S}function Q(e){for(var t=0;t<T.length;t++)"function"==typeof T[t]&&T[t].apply(null,arguments);T.length=0}function K(){var t=l.duration*I;e.setWalkmeTimeout(ee,t)}function q(){mtjQuery(y).css({display:x,visibility:""}).css(C)}function X(){y&&y.css(C)}function J(){b=mtjQuery({})}function $(){b.clearQueue(_)}function Z(e){b.queue(_,e)}function ee(){b.dequeue(_)}function te(){var e={},t={};ae()?(e.size="height",e.osize="width"):(e.size="width",e.osize="height"),!p&&u.size&&(h==n.POSITION_TYPE.Top&&"height"==e.size||h==n.POSITION_TYPE.Left&&"width"==e.size)&&(S=!0),t.marginTop=h==n.POSITION_TYPE.Bottom?-1:1,t.marginLeft=h==n.POSITION_TYPE.Right?-1:1,e.margin="margin"+N[h],u=ne(u,e,t),s=ne(s,e,t)}function ne(e,t,n){if(!e)return;var r={};for(var o in e)if(e.hasOwnProperty(o)){var a=i.isDefined(t[o])?t[o]:o;if(r[a]=e[o],i.isDefined(n[a])){var s=r[a].toString().replace("px","");r[a]=n[a]*s+"px"}}return r}function re(){oe(E),e.setWalkmeTimeout(function(){ee()},A)}function ie(){mtjQuery(E).each(function(){this.show()}),ee()}function oe(e){var t,r,i=ae(),o=i?"marginTop":"marginLeft",a=se(),s=a?1:-1,u=e.length-1;h==n.POSITION_TYPE.Top&&(t="border-top-width",r="borderTopWidth"),h==n.POSITION_TYPE.Bottom&&(t="border-bottom-width",r="borderBottomWidth"),h==n.POSITION_TYPE.Right&&(t="border-right-width",r="borderRightWidth"),h==n.POSITION_TYPE.Left&&(t="border-left-width",r="borderLeftWidth"),mtjQuery(e).each(function(e,n){this.css("visibility","hidden").css("display","block");var i=(parseInt(this.css(t),10)+2)*s,l=this.css(t),c=this[0].style.zIndex,d={};d[r]=l,d.opacity=1,a&&(d[o]=1);var p={};p.duration=A,p.complete=function(e,t){return function(){e.css(o,""),e.css("zIndex",t)}}(this,c),e==u&&this.css("zIndex",c-1),this.css("visibility",""),a&&this.css(o,i),this.css(t,"0px"),this.animate(d,p)})}function ae(){if(h==n.POSITION_TYPE.Bottom||h==n.POSITION_TYPE.Top)return!0;return!1}function se(){if(h==n.POSITION_TYPE.Bottom||h==n.POSITION_TYPE.Right)return!0;return!1}function ue(e){!h&&s.margin&&(s.margin=0),mtjQuery(e).css({display:"none",visibility:""}).css(C).css(s)}function le(e){e&&(p=i.defaultValue(e.center,!1),g=i.defaultValue(e.hwa,!1),f=i.defaultValue(e.are,!1),I=i.defaultValue(e.delay,1))}function ce(){y.children(":visible").addClass("walkme-balloon-hidden-content").css("display","none")}function de(){y.children(".walkme-balloon-hidden-content").removeClass("walkme-balloon-hidden-content").fadeIn(250,function(){mtjQuery(this).css("direction",mtjQuery(this).css("direction"))})}function pe(e,t){var n={position:"absolute",top:e.css("top"),left:e.css("left"),height:e.height(),width:e.width(),zIndex:e[0].style.zIndex},r=mtjQuery("<div />").css(n);return e.css({top:0,left:0}).wrap(r),t(r,e),n}function ge(e){S&&(y.css("bottom",""),y.css("right","")),y.unwrap().css(e)}function fe(){y.bind("click.wm_animation",function(){if(!m&&(m=!0,me(y,k,P),E))for(var e=0;e<E.length;e++)me(E[e],k,P)}),he(y)}function he(e){e.find("button,a,.walkme-custom-balloon-close-button").bind("click.wm_animation",function(e){e.stopPropagation()})}function me(e,t,n){if(t<=0)return e.css(n,""),void(m=!1);var r=[];r[n]=ve(t),e.animate(r,D,function(){me(e,t-1,n)})}function ve(e){var t=e%2*2-1,n=e*O;return n*t}function Se(e,t){var n=parseInt(t.css("border-top-width"),10)+parseInt(t.css("border-bottom-width"),10),r=parseInt(t.css("border-left-width"),10)+parseInt(t.css("border-right-width"),10);t.css("top",""),t.css("left",""),t.css("bottom","-"+n+"px"),t.css("right","-"+r+"px")}function ye(e,t){Ee(e,t),l.step=function(){Ee(e,t)}}function Ee(e,t){var n=e.height()/2-t.height()/2,r=e.width()/2-t.width()/2;t.css("top",n),t.css("left",r)}function Te(){if(c||!F()||!d)return!1;return!0}function Ce(){if(v)return!0;return!1}M.apply(null,arguments)}mtjQuery.extend(mtjQuery.easing,{easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*(7.5625*t*t)+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeOutBack:function(e,t,n,r,i,o){return void 0==o&&(o=1.70158),r*((t=t/i-1)*t*((o+1)*t+o)+1)+n},easeOutElastic:function(e,t,n,r,i){var o=1.70158,a=0,s=r;if(0==t)return n;if(1==(t/=i))return n+r;if(a||(a=.3*i),s<Math.abs(r)){s=r;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(r/s);return s*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/a)+r+n}}),o.register("PublishDataManager").asCtor(sr).dependencies("Lib, ClientOrServerStorageManager, Logger");function sr(e,t,n){var r,i,o=this,a="wm-ldv";o.init=s;function s(e){i=e&&e.dataVersion||0}o.hasNewDeployables=function(){if(r)return r;var e=t.getData(a)||i;return r=e<i},o.saveDataVersion=function(){t.saveData(a,i,O)}}var ur=function(){function e(e,t,n,r,i,o){this.commonUtils=o,this.NEW_CONTENT_PRIORITY=1e3,this._conditionTreeEvaluator=e,this._agDataManager=t,this._clientOrServerStorageManager=n,this._publishDataManager=r,this._logger=i}return e.prototype.init=function(e){if(!e.config||!e.player)return;this._config=e.config,this._player=e.player,this._menu=e.menu;var t=this._config.Settings.AG,n=this._config.Settings.AGs;if(n&&n.length>0)this._agDataManager.init(),this.initAllAGs(n);else if(t){var r=this.create(e);r.setupAttenGrab()}},e.prototype.reset=function(){this._agData=this._agClass=this._config=this._player=this._menu=void 0},e.prototype.initAllAGs=function(e){if(this._agDataManager.isNewSession){1===this._agDataManager.sessionCounter&&this._publishDataManager.saveDataVersion();var t=this.getPotentialAGsForNewSession(e);t=t.sort(function(e,t){return e.Priority-t.Priority}),this.updateAGForNewSession(t)}else this.updateAGForOldSession(e);this._agData?(this._logger.customerLog("Attention grabber - name: "+this._agData.Name+", settings:",3),this._logger.customerLog(this._agData.Settings,3)):this._logger.customerLog("Attention grabber: not selected",3);var n="Attention grabber data: session counter = "+this._agDataManager.sessionCounter+", selected AG = "+this._agDataManager.selectedId+", unload AG = "+this._agDataManager.unload+", event timestamp delta = "+this._agDataManager.eventTimestampDelta/1e3+"s, session = "+this._agDataManager.isNewSession;this._logger.customerLog(n,4)},e.prototype.getPotentialAGsForNewSession=function(e){for(var t=[],n=this._agDataManager.sessionCounter,r=0;r<e.length;r++){var i=e[r],o=i.Settings;this.shouldPlayAtSession(n,o)&&(parseInt(o.newContent)?this._publishDataManager.hasNewDeployables()&&(i.Priority-=this.NEW_CONTENT_PRIORITY,t.push(i)):t.push(i))}return t},e.prototype.updateAGForNewSession=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.Settings;if(!r.conditions)return this._agData=n,void this._agDataManager.updateSelection(n.Id);var i=this._conditionTreeEvaluator.evaluate(r.conditions);if(i)return this._agData=n,void this._agDataManager.updateSelection(n.Id)}},e.prototype.updateAGForOldSession=function(e){for(var t=this._agDataManager.sessionCounter,n=0;n<e.length;n++){var r=e[n],i=r.Settings;if(r.Id==this._agDataManager.selectedId){var i=r.Settings;if(this.shouldPlayAtSession(t,i)&&this.shouldReplayAG(i))if(i.conditions){var o=this._conditionTreeEvaluator.evaluate(i.conditions);o?(this._agData=r,this._agDataManager.updateSelection(r.Id)):this._logger.customerLog("Attention grabber conditions are not satisfied",5)}else this._agData=r,this._agDataManager.updateSelection(r.Id);return}}},e.prototype.shouldPlayAtSession=function(e,t){if(!t||!this.commonUtils.isDefined(t.session)||!this.commonUtils.isDefined(t.interval))return!1;if(e<t.session)return!1;if(e==t.session)return!0;if(0==t.interval)return!1;if((e-t.session)%t.interval==0)return!0;return!1},e.prototype.shouldReplayAG=function(e){if(this._agDataManager.unload)return!1;if(!e)return!1;var t=this._agDataManager.eventTimestampDelta,n=parseInt(e.replay);if(!n||!t)return!1;var r=60*n*1e3;return t>r?e.delay=0:e.delay=(r-t)/1e3,!0},e.prototype.load=function(){if(!this._agData)return;var e={config:this._config,player:this._player,menu:this._menu,agData:this._agData};this._agClass=o.create("AttentionGrabber",e),this._agClass.setupAttenGrab()},e.prototype.remove=function(e){if(!this._agClass)return void(e&&e());this._agDataManager.updateUnload(),this._agClass.remove(e)},e.prototype.create=function(e){return this._config=e.config,this._player=e.player,this._agClass=o.create("AttentionGrabber",e),this._agClass},e.prototype.getImageAG=function(e){return this._config=e.config,this._player=e.player,this._agClass=o.create("ImageAttentionGrabber",e),this._agClass},e}();o.register("AttentionGrabberManager").asCtor(ur).dependencies("ConditionTreeEvaluator, AttentionGrabberDataManager, ClientOrServerStorageManager, PublishDataManager, Logger, CommonUtils");var lr=function(){function e(e,t,n){this.AG_DATA_COOKIE_NAME="wm-ag-d",this.AG_SESSION_LENGTH_NAME="wm-ag-sl",this._dataManagerWasInit=!1,this._siteConfigManager=e,this._clientOrServerStorageManager=t,this._commonUtils=n}return e.prototype.updateSelection=function(e){this.selectedId=e,this.save()},e.prototype.updateEvent=function(){this._eventTimestamp=(new Date).getTime(),this.save()},e.prototype.updateUnload=function(){this.unload=1,this.save()},e.prototype.init=function(){var e=this._clientOrServerStorageManager.getData(this.AG_DATA_COOKIE_NAME),t=(new Date).getTime(),n=this._siteConfigManager.get().Settings,r=parseInt(n.AGDataVersion)||0;if(e){this._sessionTimestamp=t,this.sessionCounter=e.sc||1,this._version=this._commonUtils.isDefined(e.v)?e.v:r,this._shouldUpdateVersion=r>this._version;var i,o=e.st?Math.abs(t-e.st):0;this._commonUtils.isLocalStorageEnabled()&&(i=window.localStorage.getItem(this.AG_SESSION_LENGTH_NAME)),this._sessionLength=parseFloat(i||n.AGSL||1440),this._shouldUpdateCounter=o/6e4>this._sessionLength,this.isNewSession=this._shouldUpdateCounter||this._shouldUpdateVersion,this.sessionCounter=this._shouldUpdateVersion?1:this._shouldUpdateCounter?this.sessionCounter+1:this.sessionCounter,this._version=this._shouldUpdateVersion?r:e.v,this.selectedId=this.isNewSession?void 0:e.id,this._eventTimestamp=this.isNewSession?t:e.et,this.unload=this.isNewSession?0:e.u,this.eventTimestampDelta=this._eventTimestamp?Math.abs(t-this._eventTimestamp):0}else this.isNewSession=!0,this._sessionTimestamp=t,this.sessionCounter=1,this._version=r,this._eventTimestamp=t,this.unload=0;this._dataManagerWasInit=!0,this.save()},e.prototype.save=function(){if(!this._dataManagerWasInit)return;var e={st:this._sessionTimestamp,sc:this.sessionCounter,v:this._version,id:this.selectedId,et:this._eventTimestamp,u:this.unload};this._clientOrServerStorageManager.saveData(this.AG_DATA_COOKIE_NAME,e,O)},e}();o.register("AttentionGrabberDataManager").asCtor(lr).dependencies("SiteConfigManager, ClientOrServerStorageManager, CommonUtils"),o.register("AttentionGrabber").asFunction(cr).asProto();function cr(e){var t;if(e.agData)t=e.agData.ClassType;else{var n=e.config.Settings.AG;n&&(t=n.type)}t=t||0;var r={0:"ImageAttentionGrabber",1:"OldSwooshAttentionGrabber",2:"SwooshAttentionGrabber",3:"MenuOverviewAttentionGrabber",4:"TickerAttentionGrabber",5:"CustomTextAttentionGrabber",6:"CustomImageAttentionGrabber","3.sub":"MenuOverviewSubAttentionGrabber"},i=r[t];return o.create(i,e)}var dr=function(){function t(e,t,n,r,i,a,s,u,l){this.AG_REPEAT_COOKIE_NAME="wm-ag-rep",this._stopAnimation=!1,this.POSITION="TrianglePosition",this._lib=e,this._commonUtils=t,this._timerManager=n,this._endUsersManager=r,this._auditSourceManager=i,this._hostData=a,this._wmAjax=s,this._safeFullUrlProvider=u,this._config=l.config,this._player=l.player,this._menu=l.menu,this._logger=o.get("Logger"),this._topContainer=o.get("TopContainerProvider").getTopContainer(),l.agData?(this._data=l.agData,this._settings=l.agData.Settings,this._agId=this._data.Id,this._dataManager=o.get("AttentionGrabberDataManager")):(this._oldAG=!0,this._oldAGData=this._commonUtils.getSettingsValue(this._config.Settings,"AG",!1),this._oldAGData&&(this._settings={},this._oldAGData.delay&&(this._settings.delay=this._oldAGData.delay),this._oldAGData.timeout&&(this._settings.duration=this._oldAGData.timeout),this._oldAGData.repeat&&(this._settings.repeat=this._oldAGData.repeat)))}return t.prototype.drawAttentionGrabber=function(){if(this._logger.customerLog("Start drawing attention grabber",5),this._replayTimeoutHandler&&this._replayTimeoutHandler.clear(),this._attentionGrabber=this.getHtml(),!this._attentionGrabber)return;this._attentionGrabberWrapper=e("<div id='walkme-attengrab' class='walkme-to-destroy' style='display: none;'/>"),this._attentionGrabberWrapper.append(this._attentionGrabber),this._topContainer.append(this._attentionGrabberWrapper),this._lib.getUiUtils().setLangAttribute(this._attentionGrabberWrapper),this.updateEvent();var t=e.proxy(function(){this.postDrawing(),this.hideAfterTimeout(),this._commonUtils.handleAccessibleElement(this._attentionGrabberWrapper,"button")},this);this._timerManager.libSetTimeout(t,100)},t.prototype.getHtml=function(){},t.prototype.postDrawing=function(){},t.prototype.hideAfterTimeout=function(){var t=parseInt(this._settings.duration);if(!t)return;var n=e.proxy(function(){this.hide(),this._stopAnimation=!0},this);this._hideTimeoutHandler=this._timerManager.libSetTimeout(n,1e3*t)},t.prototype.isSupportedByBrowser=function(){return!0},t.prototype.setupAttenGrab=function(){if(!this.isSupportedByBrowser())return;if(!this._settings||e.isEmptyObject(this._settings))return;if(this.innerSetup()===!1)return;if(this._settings.repeat){var t=o.get("AutoStartManager").checkRepeatCookie(this.AG_REPEAT_COOKIE_NAME,this._settings.repeat);if(!t.shouldStart)return;t.store()}var n=e.proxy(function(){this.drawAttentionGrabber()},this);this._delayTimeoutHandler=this._timerManager.libSetTimeout(n,1e3*parseFloat(this._settings.delay))},t.prototype.innerSetup=function(){return!0},t.prototype.remove=function(e){try{this._logger.customerLog("Remove attention grabber",5),this._attentionGrabberWrapper&&this._attentionGrabberWrapper.remove(),this.clearTimers(),this.updateEvent(),e&&e()}catch(t){e&&e()}},t.prototype.hide=function(){this.remove(),this.replay()},t.prototype.updateEvent=function(){this._dataManager&&this._dataManager.updateEvent()},t.prototype.replay=function(){var t=parseInt(this._settings.replay);if(!t)return;this._logger.customerLog("Replay attention grabber",5);var n=e.proxy(function(){this.drawAttentionGrabber()},this);this._replayTimeoutHandler=this._timerManager.libSetTimeout(n,1e3*t*60)},t.prototype.getDirection=function(){return this._config.Direction},t.prototype.getDefaultOrFirstTab=function(){for(var e=o.get("UiDataProvider").uiObjectsTree(),t=0;t<e.length;t++)if(e[t].properties().hasProperty("default"))return e[t];for(var t=0;t<e.length;t++)if(e[t].properties().hasProperty("visible"))return e[t]},t.prototype.clearTimers=function(){this._delayTimeoutHandler&&this._delayTimeoutHandler.clear(),this._replayTimeoutHandler&&this._replayTimeoutHandler.clear(),this._hideTimeoutHandler&&this._hideTimeoutHandler.clear()},t}();o.register("AttentionGrabberBase").asCtor(dr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var pr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,r,i,o,a,s,u,l),this._drawAGWaitForImagesFailCount=0,this._oldAG&&(this._oldAGData.id&&(this._settings.id=this._oldAGData.id),this._oldAGData.filename&&(this._settings.filename=this._oldAGData.filename),this._oldAGData.hOffset&&(this._settings.hOffset=this._oldAGData.hOffset),this._oldAGData.vOffset&&(this._settings.vOffset=this._oldAGData.vOffset))}return n.prototype.getHtml=function(){return e("<img src='"+this._settings.filename+"' />")},n.prototype.innerSetup=function(){if(this._settings.filename&&(this._settings.filename=this._lib.ResourceManager.getResourcePath(this._settings.filename)),parseInt(this._settings.id)==-1)return!1;return!0},n.prototype.postDrawing=function(){this.drawAGWaitForImages()},n.prototype.drawAGWaitForImages=function(){var t=e.proxy(this.imageNotLoadedCases,this);if(r(this._player)){if(this._drawAGWaitForImagesFailCount++,this._drawAGWaitForImagesFailCount>10)return;var n=e.proxy(this.drawAGWaitForImages,this);this._timerManager.libSetTimeout(function(){n()},500)}else this.drawAGPostLoad();function r(e){var n=t(),r="1"==e.attr("data-inanimation");return n||r}},n.prototype.drawAGPostLoad=function(){var e="0px",t="0px",n="0px",r="0px",i="auto",o="auto",a="auto",s="auto",u=parseInt(this._settings.hOffset),l=parseInt(this._settings.vOffset),c=(this._player.width()-this._attentionGrabberWrapper.width())/2,d=(this._player.height()-this._attentionGrabberWrapper.height())/2;a=this.handlePosition(a,"bottom",d,l),i=this.handlePosition(i,"top",d,l),o=this.handlePosition(o,"right",c,u),s=this.handlePosition(s,"left",c,u),this._config[this.POSITION].indexOf("center")>-1&&(s="50%",
r=this.buildPosition(r,"margin-left",c,u),r=this.dynamicSizeHandler("width",r)),this._config[this.POSITION].indexOf("middle")>-1&&(i="50%",e=this.buildPosition(e,"margin-top",d,l),e=this.dynamicSizeHandler("height",e)),this._attentionGrabberWrapper.css({position:"fixed",top:i,right:o,bottom:a,left:s,"margin-top":e,"margin-right":t,"margin-bottom":n,"margin-left":r}),this._attentionGrabberWrapper.show()},n.prototype.handlePosition=function(e,t,n,r){return this._config[this.POSITION].indexOf(t)>-1&&(e=this.buildPosition(e,t,n,r)),e},n.prototype.buildPosition=function(e,t,n,r){return e=parseFloat(this._player.css(t).replace("px","")),e+=n,e+=r,e+="px"},n.prototype.dynamicSizeHandler=function(e,t){return this._player.hasClass("walkme-dynamic-size")&&(t=parseFloat(t.replace("px",""))+this._player.css(e).replace("px","")/2*-1),t},n.prototype.imageNotLoadedCases=function(){return 0==this._player.width()||28==this._player.width()||0==this._attentionGrabberWrapper.width()||28==this._attentionGrabberWrapper.width()||24==this._attentionGrabberWrapper.width()&&24==this._attentionGrabberWrapper.width()},n}(dr);o.register("ImageAttentionGrabber").asCtor(pr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var gr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,r,i,o,a,s,u,l),this._defaultValues={animationDuration:700},this._oldAG&&this._oldAGData.settings&&(this._oldAGData.settings.width&&(this._settings.width=this._oldAGData.settings.width),this._oldAGData.settings.right&&(this._settings.right=this._oldAGData.settings.right),this._oldAGData.settings.deg&&(this._settings.deg=this._oldAGData.settings.deg),this._oldAGData.settings.dir&&(this._settings.dir=this._oldAGData.settings.dir,this._direction=this._oldAGData.settings.dir),this._oldAGData.settings.opacity&&(this._settings.opacity=this._oldAGData.settings.opacity))}return n.prototype.isSupportedByBrowser=function(){return!this._hostData.isIE(9,"lte")},n.prototype.getHtml=function(){var t,n;this.isHorizental()?(t=this._settings.width+"px",n="130%"):(n=this._settings.width+"px",t="130%");var r=this._settings.opacity,i=this._settings.deg;return e("<div class='wm-ag-swoosh' style='width: "+t+"; height:"+n+"; position: absolute; top:-6px; right: -6px; background-color: transparent !important; "+this.getRotateCss(i)+this.getBackgoundCss(r)+"'/>")},n.prototype.postDrawing=function(){var e=this._settings.right;this._attentionGrabberWrapper.detach().appendTo(this._player);var t=this.isHorizental()?"width":"height",n=this._player.css(t);this._attentionGrabberWrapper.css({position:"absolute",overflow:"hidden",width:"100%",height:"100%","z-index":this._player.css("z-index"),right:"0",bottom:"auto",top:"0"}).important("background","none"),this._attentionGrabber.show(),this._attentionGrabberWrapper.show();var r=this.getProperty("animationDuration");this.animate(n,e,r)},n.prototype.animate=function(e,t,n){var r=this._attentionGrabber,i=this.isHorizental()?"right":"top",o=this._timerManager;r.css(i,t+"px");var a=1.3*parseFloat(e)+"px";function s(){var e={};e[i]=a,r.animate(e,n);var u=this._stopAnimation;o.setWalkmeTimeout(function(){var e={};e[i]=t+"px",r.animate(e,n)},1e3),u||o.setWalkmeTimeout(s,4e3)}s()},n.prototype.isHorizental=function(){return"hoz"==this._direction},n.prototype.getProperty=function(e){return this._settings[e]||this._defaultValues[e]},n.prototype.getBackgoundCss=function(e){return"background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjUwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjkxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);background: -moz-linear-gradient(left,  rgba(255,255,255,0) 0%, rgba(255,255,255,"+e+") 50%, rgba(255,255,255,0) 100%);background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(255,255,255,0)), color-stop(50%,rgba(255,255,255,"+e+")), color-stop(100%,rgba(255,255,255,0)));background: -webkit-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: -o-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: -ms-linear-gradient(left,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);background: linear-gradient(to right,  rgba(255,255,255,0) 0%,rgba(255,255,255,"+e+") 50%,rgba(255,255,255,0) 100%);"},n.prototype.getRotateCss=function(e){return"transform: rotate("+e+"deg); -moz-transform:rotate("+e+"deg); -webkit-transform:rotate("+e+"deg); -o-transform:rotate("+e+"deg);  -ms-transform:rotate("+e+"deg);"},n}(dr);o.register("OldSwooshAttentionGrabber").asCtor(gr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var fr=function(t){r(n,t);function n(n,r,i,a,s,u,l,c,d){t.call(this,n,r,i,a,s,u,l,c,d),this.hostData=u,this.positions=["left","right","top","bottom"],this._templateId=this._data.UITemplateId,this._templateVersion=this._data.UITemplateVersion,this._templateVariations=[];for(var p in this._data.UIVariationsIds)this._templateVariations.push(o.get("UIVariations").get(this._data.UIVariationsIds[p]));this._data.Settings.customVariation&&this._templateVariations.push(this._data.Settings.customVariation),this._setPositionProxy=e.proxy(function(){this.setPosition()},this),this._playerMajorPosition=this._config[this.POSITION].slice(0,this._config[this.POSITION].indexOf("-")),this._agPlayInitiator=o.get("Consts").STEP_PLAY_INITIATOR_ENUM.ATTENTION_GRABBER}return n.prototype.isSupportedByBrowser=function(){return!this._hostData.isIE(7)},n.prototype.getHtml=function(){return o.get("TemplatesFactory").get(this._templateId,this._templateVersion,this._templateVariations,this.getTemplateData())},n.prototype.getTemplateData=function(){return{}},n.prototype.getHorizontalOffset=function(){return 0},n.prototype.getVerticalOffset=function(){return 0},n.prototype.animate=function(){},n.prototype.postDrawing=function(){this.addMainClass(),this._attentionGrabber.show(),this._attentionGrabberWrapper.show(),this.setPosition(),this.bindEvents(),this.animate()},n.prototype.addMainClass=function(){this._attentionGrabber.addClass("wm-ag-"+this._mainClass)},n.prototype.copyCssProperties=function(){for(var e=0;e<this.positions.length;e++)this._attentionGrabberWrapper.css(this.positions[e],this.getCssPosition(this._player,this.positions[e])),this._attentionGrabberWrapper.css("margin-"+this.positions[e],this._player.css("margin-"+this.positions[e]))},n.prototype.fixCssMargins=function(e,t){var n=parseFloat(this._attentionGrabberWrapper.css("margin-left"))||0,r=parseFloat(this._attentionGrabberWrapper.css("margin-right"))||0,i=parseFloat(this._attentionGrabberWrapper.css("margin-top"))||0,o=parseFloat(this._attentionGrabberWrapper.css("margin-bottom"))||0;this._attentionGrabberWrapper.css("margin-left",n+e+"px").css("margin-right",r+e+"px"),this._attentionGrabberWrapper.css("margin-top",i+t+"px").css("margin-bottom",o+t+"px")},n.prototype.getCssPosition=function(e,t){var n,r=e[0].style[t];n=this.hostData.isIE(8)?e[0].currentStyle[t]:e.css(t),e.important(t,"auto");var i=e.css(t);if(e.important(t,""),r&&(e[0].style[t]=r),n!=i)return n;return"auto"},n.prototype.setLogicCss=function(){this._attentionGrabberWrapper.css("z-index"," 2147483647"),this._attentionGrabberWrapper.css("cursor","pointer")},n.prototype.bindEvents=function(){e(window).resize(this._setPositionProxy);var t=e.proxy(function(){var e={type:this._agPlayInitiator};this._menu.toggle({initiator:e})},this);this._attentionGrabberWrapper.click(t)},n.prototype.unbindEvents=function(){e(window).off("resize",this._setPositionProxy)},n.prototype.setPosition=function(){this._attentionGrabberWrapper.css("position","fixed"),this.setLogicCss();var e,t;"left"==this._playerMajorPosition||"right"==this._playerMajorPosition?(e=this._player.outerWidth()+this.getHorizontalOffset(),t=(this._player.outerHeight()-this._attentionGrabber.outerHeight())/2):"top"!=this._playerMajorPosition&&"bottom"!=this._playerMajorPosition||(e=(this._player.outerWidth()-this._attentionGrabber.outerWidth())/2,t=this._player.outerHeight()+this.getVerticalOffset()),this.copyCssProperties(),this.fixCssMargins(e,t)},n.prototype.remove=function(e){try{this.unbindEvents(),t.prototype.remove.call(this,e)}catch(n){t.prototype.remove.call(this,e)}},n}(dr);o.register("TemplateAttentionGrabber").asCtor(fr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var hr=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l){e.call(this,t,n,r,i,o,a,s,u,l),this._mainClass="ag",this._animationDuration=this._settings.animationDuration||700}return t.prototype.isSupportedByBrowser=function(){return!this._hostData.isIE(9,"lte")},t.prototype.postDrawing=function(){this._attentionGrabberWrapper.detach().appendTo(this._player),this._attentionGrabberWrapper.css({position:"absolute",overflow:"hidden",width:"100%",height:"100%","z-index":this._player.css("z-index"),right:"0",bottom:"auto",top:"0"}).important("background","none"),this._attentionGrabber.show(),this._attentionGrabberWrapper.show(),this.animate()},t.prototype.animate=function(){var e=this._attentionGrabber,t=this._animationDuration,n=this._timerManager,r=this.isHorizental(),i=r?"right":"top",o="-60px";e.css(i,o);var a=r?"width":"height",s=1.3*parseFloat(this._player.css(a))+"px";this.initAnimationProperties(r);function u(){var r={};r[i]=s,e.animate(r,t);var a=this._stopAnimation;n.setWalkmeTimeout(function(){var n={};n[i]=o,e.animate(n,t)},1e3),a||n.setWalkmeTimeout(u,4e3)}u()},t.prototype.initAnimationProperties=function(e){e?this.setInitCss("15deg","50px","130%"):this.setInitCss("105deg","130%","50px")},t.prototype.setInitCss=function(e,t,n){this._attentionGrabber.css({height:n,width:t,transform:"rotate("+e+")","-moz - transform":"rotate("+e+")","-webkit - transform":"rotate("+e+")","-o - transform":"rotate("+e+")","-ms - transform":"rotate("+e+")"})},t.prototype.isHorizental=function(){return this._player.width()>this._player.height()},t}(fr);o.register("SwooshAttentionGrabber").asCtor(hr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var mr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,r,i,o,a,s,u,l),this._oppositeDirections={left:"right",right:"left",bottom:"top",top:"bottom"}}return n.prototype.getTemplateData=function(){var e=o.get("LanguageManager");return{title:this.getBalloonTitle(),text:this.getBalloonText(),position:this.getOppositeDirection(this._playerMajorPosition),buttons:this._settings.buttons,direction:this.getDirection(),language:e.getCurrentLanguage()}},n.prototype.getBalloonText=function(){return""},n.prototype.getBalloonTitle=function(){return},n.prototype.setLogicCss=function(){t.prototype.setLogicCss.call(this),this._attentionGrabberWrapper.css("direction",this.getDirection())},n.prototype.bindEvents=function(){t.prototype.bindEvents.call(this);var n=e.proxy(this.remove,this);this._xBtn=e(".wm-x-button",this._attentionGrabberWrapper),this._xBtn.click(function(){n()})},n.prototype.getHorizontalOffset=function(){return e(".wm-outer-arrow",this._attentionGrabberWrapper).outerWidth()},n.prototype.getVerticalOffset=function(){return e(".wm-outer-arrow",this._attentionGrabberWrapper).outerHeight()},n.prototype.animate=function(){var e=this._attentionGrabberWrapper,t=this._playerMajorPosition,n=parseInt(e.css(t)),r=n+30+"px",i=this._stopAnimation,o=0,a=this._timerManager.libSetTimeout;function s(){if(1==o)return o=0,void a(function(){s()},3e3);o++;var u={};u[t]=r,e.animate(u,{easing:"swing",duration:700,complete:function(){a(function(){var r={};r[t]=n+5+"px",e.animate(r,{easing:"easeOutBounce",duration:700,complete:function(){i||a(function(){s()},100)}})},100)}})}s()},n.prototype.getOppositeDirection=function(e){return this._oppositeDirections[e]},n.prototype.remove=function(n){try{if(this._attentionGrabberWrapper){this._attentionGrabberWrapper.off("click"),this._xBtn&&this._xBtn.off("click");var r=e.proxy(t.prototype.remove,this);this._attentionGrabberWrapper.stop(!0,!0);var i={opacity:0};this._hostData.isIE(8)?t.prototype.remove.call(this,n):this._attentionGrabberWrapper.animate(i,{duration:300,complete:function(){r(n)}})}else t.prototype.remove.call(this,n)}catch(o){t.prototype.remove.call(this,n)}},n}(fr);o.register("BalloonAttentionGrabber").asCtor(mr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var vr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l,c){t.call(this,e,n,r,i,o,a,s,u,c),this.htmlDecoder=l,this._mainClass="ticker",this._textItems=[],this.MAX_DEPLOYABLES_TO_SHOW=5;var d=this.getDefaultOrFirstTab();if(d)for(var p=d.children(),g=0,f=0;f<p.length;f++){var h=p[f];if(h.properties().hasProperty("visible")&&(this._textItems.push(h.name()),g++),g==this.MAX_DEPLOYABLES_TO_SHOW)break}this._currentDeployableIndex=0}return n.prototype.setupAttenGrab=function(){if(0===this._textItems.length)return;t.prototype.setupAttenGrab.call(this)},n.prototype.getBalloonTitle=function(){return"Help me with..."},n.prototype.getBalloonText=function(){return this._textItems[this._currentDeployableIndex]},n.prototype.getDeployableText=function(){var e=this._textItems[this._currentDeployableIndex];return this._currentDeployableIndex<Math.min(this.MAX_DEPLOYABLES_TO_SHOW,this._textItems.length)-1?this._currentDeployableIndex++:this._currentDeployableIndex=0,e},n.prototype.animate=function(){if(this._hostData.isIE(8))this.innerAnimate();else{this._attentionGrabberWrapper.css({opacity:0});var t={opacity:1},n=e.proxy(this.innerAnimate,this);this._attentionGrabberWrapper.animate(t,{duration:300,complete:n})}},n.prototype.innerAnimate=function(){var t=e(".wm-title",this._attentionGrabber),n={opacity:1};this.fixOpacityForIe8(n),t.css(n);var r=this._stopAnimation;t.text(this.htmlDecoder.decodeHtml(this.getDeployableText(),["&",'"',"'",">","<"]));var i=e.proxy(this.innerAnimate,this),o=this._timerManager.libSetTimeout;t.animate(n,{duration:700,complete:function(){o(function(){var e={opacity:0};t.animate(e,{duration:700,complete:function(){r||i()}})},2e3)}})},n.prototype.getDirection=function(){return"ltr"},n.prototype.fixOpacityForIe8=function(e){this._hostData.isIE(8)&&(e.opacity=.99)},n}(mr);o.register("TickerAttentionGrabber").asCtor(vr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider, HtmlDecoder");var Sr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,r,i,o,a,s,u,l),this._mainClass="custom-text"}return n.prototype.getBalloonText=function(){return this._settings.text||""},n.prototype.setLogicCss=function(){t.prototype.setLogicCss.call(this);var n=e(".wm-title",this._attentionGrabber);n.css("width","auto")},n}(mr);o.register("CustomTextAttentionGrabber").asCtor(Sr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var yr=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p){e.call(this,t,n,r,i,o,a,s,u,p),this.commonEvents=c,this.consts=d,this._mainClass="custom-image",this._resourceManager=l}return t.prototype.getHtml=function(){var e=this._resourceManager.getResourcePath(this._settings.image.url);if(this.isHttpOverHttps(e))return this._logger.customerLog("Attention Grabber - Could not load Custom Image because source is http over https",3),this.commonEvents.raiseEvent(this.consts.EVENTS.AttentionGrabberInsecure,{name:"Custom Image"}),null;var t=o.get("TemplatesFactory").get(this._templateId,this._templateVersion,this._templateVariations,{src:e});return t.height(this._settings.image.height).width(this._settings.image.width),t},t.prototype.setLogicCss=function(){e.prototype.setLogicCss.call(this),this._attentionGrabberWrapper.height(this._settings.image.height).width(this._settings.image.width)},t.prototype.isHttpOverHttps=function(e){if(!e)return!1;if(0!=window.location.href.indexOf("https://"))return!1;return e.indexOf("https://")==-1},t}(fr);o.register("CustomImageAttentionGrabber").asCtor(yr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider, ResourceManager, CommonEvents, Consts");var Er=function(t){r(n,t);function n(n,r,i,a,s,u,l,c,d){t.call(this,n,r,i,a,s,u,l,c,d),this._balloonsData={0:{classType:"3.sub",title:"Meet WalkMe!",text:"Your New Personal Assistant.",buttonText:"Start",position:"bottom-center",firstBalloon:!0},1:{classType:"3.sub",text:"The WalkMe menu is the place to get all the help you might need.",boldText:'Click "Next" and take a look...',buttonText:"Next",position:"bottom-center",delay:1,marginBottom:3},2:{classType:"3.sub",text:"Here you can select your preferred language.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"bottom-center",attachedToElementSelector:"#walkme-languages",moveArrow:!0},3:{classType:"3.sub",text:"Quickly find answers to your support issue by using the search bar.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"right-middle",attachedToElementSelector:".walkme-search-box-container",marginRight:12},4:{classType:"3.sub",text:"All the Walk-Thrus and help resources are located here, click them to start your online guidance.",boldText:'Click "Next" to continue...',buttonText:"Next",position:"right-middle",attachedToElementSelector:".walkme-deployables-list .walkme-tab .walkme-deployable",marginRight:14},5:{classType:"3.sub",text:"Couldn't find what you want? this link takes you to the support page.",boldText:"To learn more about WalkMe, click here.",buttonText:"Next",position:"bottom-center",attachedToElementSelector:".walkme-open-ticket",moveArrow:!0},6:{classType:"3.sub",title:"Thank You!",text:"We're here to help.",buttonText:"Done",position:"bottom-center",marginBottom:3}},this._stepIndex=0,this._themeVariation=this._data.ExtraUIVariationsIds[0],this._balloonsData[0].position=this._config[this.POSITION],this._balloonsData[0].delay=this._settings.delay,this._agPlayInitiator=o.get("Consts").STEP_PLAY_INITIATOR_ENUM.ATTENTION_GRABBER;var p=e.proxy(this.updateJqueryMenu,this);this._menu.bind("build-menu-end",function(e,t){p(t.menu)})}return n.prototype.updateJqueryMenu=function(e){this._jQueryMenu=e},n.prototype.createAg=function(t,n){var r=e.proxy(this.showNextBalloon,this),i=e.proxy(function(){var t=e.proxy(function(){if(r(),1==this._stepIndex){var e={type:this._agPlayInitiator};WalkMePlayerAPI.toggleMenu(e)}},this);s.remove(t)},this),a={config:{Direction:this._config.Direction},player:t,menu:this._menu,onClickFunc:i,agData:{Id:n.firstBalloon?this._agId:null,ClassType:n.classType,UITemplateId:this._data.UITemplateId,UITemplateVersion:this._data.UITemplateVersion,UIVariationsIds:[this._themeVariation,this._data.ExtraUIVariationsIds[this._stepIndex+1]],Settings:{delay:n.delay,text:n.text,title:n.title,boldText:n.boldText,buttons:[{text:n.buttonText}],firstBalloon:n.firstBalloon,attachedToElementSelector:n.attachedToElementSelector,jQueryMenu:this._jQueryMenu,moveArrow:n.moveArrow,marginRight:n.marginRight,marginBottom:n.marginBottom}}};a.config[this.POSITION]=n.position;var s=o.create("AttentionGrabber",a);this._currentAg=s,s.setupAttenGrab()},n.prototype.showNextBalloon=function(){if(this._stopPlaying)return;if(this._stepIndex++,!this._balloonsData[this._stepIndex])return;if(!this.shouldPlay())return void this.showNextBalloon();if(this._jQueryMenu)this.createAg(this._jQueryMenu,this._balloonsData[this._stepIndex]);else{var t=e.proxy(function(e){this._jQueryMenu=e,this.createAg(e,this._balloonsData[this._stepIndex])},this);this._menu.bind("on-open-end",function(e,n){e.target.unbind("on-open-end"),t(n.menu)})}},n.prototype.shouldPlay=function(){var t=this._balloonsData[this._stepIndex].attachedToElementSelector;if(!t)return!0;return e(t+":visible",this._jQueryMenu).length>0},n.prototype.setupAttenGrab=function(){if(!this.isWalkthrusTab())return;if("iOS"==this._hostData.os.name||"Android"==this._hostData.os.name)return;var t=e.proxy(this.stopAll,this);this._menu.bind("on-close-begin",function(e){t()}),this.createAg(this._player,this._balloonsData[0])},n.prototype.isWalkthrusTab=function(){var t=this.getDefaultOrFirstTab(),n=t.properties().getAll();return e.inArray("contains-walkthru",n)>-1},n.prototype.stopAll=function(){this._stopPlaying=!0,this._currentAg.remove()},n.prototype.remove=function(e){this._currentAg&&this._currentAg.remove(),t.prototype.remove.call(this,e)},n}(dr);o.register("MenuOverviewAttentionGrabber").asCtor(Er).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");var Tr=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,r,i,o,a,s,u,l),this._mainClass="menu-overview",this._arrowOffset=0,this._onClickFunc=l.onClickFunc}return n.prototype.getTemplateData=function(){return{title:this._settings.title,"bold-text":this._settings.boldText,text:this._settings.text,position:this.getOppositeDirection(this._playerMajorPosition),buttons:this._settings.buttons}},n.prototype.setLogicCss=function(){t.prototype.setLogicCss.call(this),this.moveArrow(),this._data.Settings.firstBalloon||this._attentionGrabberWrapper.css("cursor","auto")},n.prototype.moveArrow=function(){if(this._data.Settings.moveArrow){var t=e(".wm-outer-arrow",this._attentionGrabberWrapper),n=e(".wm-inner-arrow",this._attentionGrabberWrapper),r=t.offset().left;t.css("left");t.css("left","85%"),n.css("left","85%");var i=t.offset().left,o=i-r;this._arrowOffset=o,this._data.Settings.moveArrow=!1}},n.prototype.bindEvents=function(){t.prototype.bindEvents.call(this),this._attentionGrabberWrapper.off("click"),e(".wm-button",this._attentionGrabberWrapper).click(this._onClickFunc),this._fixPositionProxy=e.proxy(this.fixPosition,this),e(window).resize(this._fixPositionProxy),this._data.Settings.firstBalloon&&this._attentionGrabberWrapper.click(this._onClickFunc)},n.prototype.unbindEvents=function(){t.prototype.unbindEvents.call(this),e(window).off("resize",this._fixPositionProxy)},n.prototype.animate=function(){this.fixPosition(),this._data.Settings.firstBalloon&&t.prototype.animate.call(this)},n.prototype.fixPosition=function(){var t=this._attentionGrabberWrapper.css("margin-bottom"),n=this._attentionGrabberWrapper.css("margin-right"),r=this._data.Settings.marginRight||0,i=this._data.Settings.marginBottom||0;if(this._data.Settings.attachedToElementSelector){var o=this._data.Settings.jQueryMenu,a=e(this._data.Settings.attachedToElementSelector,o),s=a.offset().left-o.offset().left,u=a.offset().top-o.offset().top;if("bottom"==this._playerMajorPosition){var l=(this._attentionGrabberWrapper.width(),o.width()),c=this._attentionGrabberWrapper.css("margin-bottom"),d=a.width(),p=(a.css("margin-right"),a.css("margin-top"),parseFloat(n)+l/2-s-d/2+this._arrowOffset+r);this._attentionGrabberWrapper.css("margin-right",p+"px").css("margin-bottom",parseFloat(c)-u+i+"px")}else{var g=o.height(),f=(o.css("border-left-width"),a.css("margin-right"),a.height()),p=parseFloat(t)+g/2-u-f/2+i;this._attentionGrabberWrapper.css("margin-right",parseFloat(n)-s+r+"px").css("margin-bottom",p+"px")}}else this._attentionGrabberWrapper.css("margin-right",parseFloat(n)+r+"px").css("margin-bottom",parseFloat(t)+i+"px")},n}(Sr);o.register("MenuOverviewSubAttentionGrabber").asCtor(Tr).asProto().dependencies("Lib, CommonUtils, TimerManager, EndUsersManager, AuditSourceManager, HostData, WmAjax, SafeFullUrlProvider");function Cr(){var e=this;function t(){}e.getBody=function(e){return e.body},t.apply(null,arguments)}o.register("RegularBodyUtils").asCtor(Cr);var Cr;function br(){var t=this;function n(){}t.getBody=function(t){return e("body",t)[0]},n.apply(null,arguments)}o.register("TagBodyUtils").asCtor(br);var br;o.register("CommonUtils").asCtor(Ir).dependencies("TimerManager,HostData,AuditSourceManager,Consts,RegularBodyUtils,CookiesManager,SettingsValuesRetriever, ExternalWalkMeConfig,PostMessageListener,win,CdnServer,ObjectJpath,FeaturesManager, Logger, ArrayUtils, SiteConfigManager");function Ir(n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S){var y,E,T,C,b=this;b.settingsFieldValid=l.settingsFieldValid,b.isSettingsValueExists=l.isSettingsValueExists,b.getSettingsValue=l.getSettingsValue,b.doAllMeetCondition=_,b.doesAnyMeetCondition=P,b.getInt=w,b.filter=v.filter;function I(){E=s,T=o.get("CommonEvents")}function w(e,t){return b.isNumber(e)?parseInt(e,10):t}function _(e,t){return A(e,t,e.length)}function P(e,t){return A(e,t,1)}function A(e,t,n){for(var r=0,i=0;i<e.length;i++){var o=e[i],a=t(o);if(a&&(r++,r>=n))return!0}return!1}b.isNumber=function(e){if("boolean"==typeof e)return!1;return!isNaN(e-0)},b.formatString=function(){return Nf.apply(null,arguments)},b.isMobileNative=function(){return c.get("platform")==a.PLATFORM.iOS||c.get("platform")==a.PLATFORM.Android},b.isIOS=function(){return c.get("platform")==a.PLATFORM.iOS},b.isAndroid=function(){return c.get("platform")==a.PLATFORM.Android},b.getJQueryElementFinder=function(){return o.get("JQueryElementFinder")},b.waitForCondition=function(t,r,i,o){var a=e.Deferred();function s(e){if(e>=r)return a.reject();var u=t();if(u)return a.resolve(u);o&&m.customerLog(o),n.libSetTimeout(function(){s(++e)},i)}return s(0),a.promise()},b.sendMenuEvent=function(e,t,n){try{var r={Type:e};t&&(r.WalkthruId=t),n&&window.mtjQuery.extend(r,n),T.raiseEvent(e,r),walkme_player_event(r)}catch(i){}},b.isIe7or8=function(){return r.isIE(8,"lte")},b.libSetTimeout=n.libSetTimeout,b.toJSON=function(e){return wf(e)},b.secureEvalJSON=function(e){return _f(e)},b.clone=function(e){return Df(e)},b.elementLastKeeper=o.get("ElementLastKeeper"),b.attentionGrabberFactory={create:function(e){return o.get("AttentionGrabberManager").create(e)}},b.attentionGrabberClass=function(e){return o.get("AttentionGrabberManager").getImageAG(e)},b.isValidMailTo=function(e){return e&&0==e.indexOf("mailto:")},b.isValidUrl=function(e){if(e&&0!=e.indexOf("http")&&0!=e.indexOf("/"))return!1;return!0},b.setDefault=function(e,t,n){void 0===e[t]&&(e[t]=n)},b.isUiObjectActivatable=function(e){return"category"!=e.type()&&"tab"!=e.type()},b.isTrue=function(e,t,n){var r=b.getSettingsValue(e,t,n);return b.isValueTrue(r)},b.isValueTrue=function(e){return e&&(1==e||"True"==e||"1"==e)},b.isLike=function(e,t){t=t.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),t=t.replace(new RegExp("[.]","g"),"\\."),t=t.replace(new RegExp("[*]","g"),".*"),e=e.toString().toLowerCase(),t=t.toLowerCase();try{return e.match(t)[0]==e}catch(n){return!1}},b.isBigger=function(e,t){return e=k(e),t=k(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&e>t},b.isSmaller=function(e,t){return e=k(e),t=k(t),e=parseFloat(e),t=parseFloat(t),!(!b.isNumber(e)||!b.isNumber(t))&&e<t};function k(e){if(!e||"string"!=typeof e||!e.replace)return e;return e.replace(/,|\$|\u20AC|\u20AA|¥|¢|£/g,"")}b.addTabIndex=function(e,t,n){if(T.raiseEvent(a.EVENTS.AddFocusTraits,{element:e,order:t,focusClass:n}),!h.isFeatureEnabled("accessibility"))return;t=b.defaultValue(t,0),e.attr("tabIndex",t),e.keyup(function(t){13!=t.keyCode||t.shiftKey||(e.click(),t.stopPropagation())})},b.handleAccessibleElement=function(e,t){b.addTabIndex(e),b.setRole(e,t)},b.setRole=function(e,t){e.attr("role",t||"complementary")},b.getCustomConfiguration=function(){var e=S.get(),t=h.isFeatureEnabled("configurationTab")?e.Settings.configuration:e.Custom;return t||{}},b.isGradientUsingFilter=function(t){var n=e("<div style='"+t+"' />"),r=n.css("background-image").indexOf("gradient")==-1;return r},b.handleCrossDomainError=function(e){if(!D(e))throw e},b.encloseCall=function(e){var t=function(){var t=arguments;return function(){return e.apply(null,t)}},n=O(arguments,0),r=t.apply(null,n);return r};function O(e,t){for(var n=[],r=0;r<e.length;r++)t!=r&&n.push(e[r]);return n}function D(e){var t=e&&18==e.code,n=e&&e.message&&e.message.indexOf("denied")>=0;return t||n}b.registerEventHandler=function(e,t,n,r){r=r||window;var i=x(t);return r.attachEvent?r.attachEvent("on"+e,i):r.addEventListener&&r.addEventListener(e,i,!!n),function(){b.unregisterEventHandler(e,i,n,r)}};function x(e){var n=t.walkmeWrap;if(!n)return e;return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(e),n.apply(this,t)}}b.unregisterEventHandler=function(e,t,n,r){r=r||window,r.detachEvent?r.detachEvent("on"+e,t):r.removeEventListener&&r.removeEventListener(e,t,!!n)},b.setBodyUtils=function(e){E=e},b.getBody=function(e){return E.getBody(e)},b.postMessageToAllFramesChain=function(e,t){var n=0;if(e)try{e.postMessage(t,"*"),n++,e!=e.parent&&(n+=b.postMessageToAllFramesChain(e.parent,t))}catch(r){m.customerLog("Error in postMessage to frames chain "+r,4)}return n},b.postMessageToFrameAndDescendants=function(e,t){function n(e,t){r(e,t);for(var i=e.frames,o=0;o<i.length;o++){var a=i[o];n(a,t)}}function r(e,t){try{e!=window&&e.postMessage(t,"*")}catch(n){}}n(e,t)},b.getFrameIndex=function(e){var t=L(top,e||window).frameIndex;return t};function L(e,t){if(e==t)return{frameIndex:0};for(var n=0,r=0;r<e.frames.length;r++){n++;var i=e.frames[r],o=L(i,t);if(void 0!==o.frameIndex)return o.frameIndex+=n,o;n+=o.totalFrames}return{totalFrames:n}}b.doForFramesChain=function(e,t){if(!e)return;try{t(e)}catch(n){}e!=e.parent&&b.doForFramesChain(e.parent,t)},b.addScript=function(e,t,n){if(!e)return;var r=M(e);t&&(r.onload=onloadRunner,r.onreadystatechange=onloadRunner),n&&(r.onerror=n),F(r)};function M(e){var t=document.createElement("script");return t.async=!0,t.src=e,t.id="mt_script",t}function F(e){var t=document.getElementsByTagName("head")[0];t.appendChild(e)}b.addScriptWithCallback=function(e,t,r,i){var o="readyState";if(!e||!t)return;var a=M(e),s=!1;r&&R(t,u),i&&(a[o]?a.onreadystatechange=c:a.onerror=i);function u(){return s=!0,r.apply(this,arguments)}function l(){if(s)return;return i.apply(this,arguments)}function c(){"loaded"!=a.readyState&&"completed"!=a.readyState||n.libSetTimeout(function(){l()})}F(a)};function R(e,t){var n=window._walkmeInternals[e];window._walkmeInternals[e]=function(r){window._walkmeInternals[e]=n,t(r)}}b.checkElementText=function(e){return e.is("input")||e.is("textarea")?e.val():e.is("select")?e.find("option:selected").text():e.text()},b.getElementDocument=function(e){try{return e[0].ownerDocument}catch(t){}return document},b.getDateAtUTC=function(){var e=new Date;return e.getTime()},b.nl2br=function(e){return e?e.replace(/\n/g,"<br/>"):""},b.getTimer=function(e){function t(){var t=new Date;return function(n){var r=new Date,i=r-t;return e("Measurer - "+n+" ("+i+" ms)"),t=r,i}}return new t},b.defaultValue=function(e,t){return"undefined"!=typeof e&&null!=e?e:t},b.isLocalStorageEnabled=function(){if(void 0!==y)return y;try{if(!window.localStorage)return y=!1,!1}catch(e){return y=!1,!1}try{window.localStorage.getItem("wm-test")}catch(t){return y=!1,!1}return y=!0,!0},b.createElementInDocument=function(t,n){var r=n.createElement("div");return e(r).html(t).children()},b.createIframe=function(e,t,n,r,i,a,s){var u=document.createElement("iframe");u.id=t,s||(u.className="walkme-to-remove"),n||(u.style.cssText="display:none;"),a=a||o.get("TopContainerProvider").getTopContainer(null,!0)[0],
a.appendChild(u);function l(e){u.removeEventListener?u.removeEventListener("load",l):u.detachEvent&&u.detachEvent("onload",l),r&&r(e)}return u.addEventListener?u.addEventListener("load",l,!1):u.attachEvent&&u.attachEvent("onload",l,!1),i&&d.listen(x(i)),u.src=e,u},b.removeIframeListeners=function(e,t,n){e.removeEventListener?window.removeEventListener(t,n,!1):e.detachEvent&&window.detachEvent("on"+t,n)},b.getTrackData=function(e){return{Id:e.Id,Name:e.Name}},b.getStepTrackData=function(e,t){var n={Id:e.Id,Name:e.StepTitle||e.StepText};return t&&(n.TutorialId=t.Id,n.TutorialName=t.Name),n},b.isImpersonated=function(){return window.editorAPI&&editorAPI.isImpersonated&&editorAPI.isImpersonated()},b.getWindowData=function(e,t){var n=void 0;if(t)switch(e){case N.Cookie:n=b.getWindowCookie(t),n||(n=void 0);break;case N.Var:n=b.getWindowVar(t)}return n},b.getWindowCookie=function(e){return u.getCookie(e)},b.getInputGenerator=function(e){return o.get("InputGenerator")},b.encodeText=function(t){var n=e("<div></div>");return n.text(t),n.html()},b.getWindowVar=function(e){var t=window;return f.getValue(t,e)},b.getPropertyValue=function(e,t,n){var r=f.getValue(e,t);return r||(r=n),r},b.getValue=f.getValue,b.findJspContainer=function(t,n){var r=b.getJspParent(t);return r?e(r).find(".jspPane"):n},b.getJspParent=function(e){var t=b.getClientjQuery();if(!t)return;var n=e.parents("div");return b.firstMatch(n,function(e){var n=t(e);if(void 0!=n.data&&void 0!=n.data("jsp"))return n})},b.getClientjQuery=function(){var e=window.jQuery||window.$;if(e&&e.fn&&e.fn.jquery)return e;return},b.firstMatch=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},b.generateGUID=function(){var e=o.get("GuidGenerator");return e.generateGuid()},b.isDefined=B;function B(e){return null!=e&&void 0!=e}b.definedOrDefault=function(e,t){return B(e)?e:t},b.executeParallel=function(e){var t,n=e.objectsArray,r=e.selectorFunc,i=e.functionsToExecute,o=e.successCallback,a=e.failCallback,s=!1;n?u():l();function u(){if(0==n.length)return void(o&&o());t=i.length*n.length;for(var e=i.length-1;e>=0;e--)for(var a=n.length-1;a>=0;a--){if(s)return;var u=r?r(n[a]):n[a];i[e](u,c)}}function l(){if(0==i.length)return void(o&&o());t=i.length;for(var e=i.length-1;e>=0;e--){if(s)return;i[e](c,d)}}function c(){t--,0==t&&o&&o()}function d(){if(s)return;s=!0,a&&a()}},b.getWinOrigin=function(){return p.location.origin||p.location.protocol+"//"+p.location.hostname+(p.location.port?":"+p.location.port:"")},b.getOrigin=function(){var e=g.get();return U(e)?W()+e:e};function U(e){var t=0===e.indexOf("/");return t}function W(){if(!C){var e=window.location;C=e.origin,C||(C=e.protocol+"//"+e.hostname,e.port&&(C+=":"+e.port))}return C}b.getWalkmeInternals=function(){return t},I.apply(null,arguments)}var Ir;o.register("SettingsValuesRetriever").asCtor(wr);function wr(){var e=this;e.getSettingsValue=t,e.isSettingsValueExists=n,e.settingsFieldValid=r;function t(t,n,r){if(!e.settingsFieldValid(t))return r;if(!e.isSettingsValueExists(t,n))return r;return t[n]}function n(t,n){if(!e.settingsFieldValid(t))return!1;return n in t}function r(e){if(!e||0==e.length)return!1;return!0}}o.register("UiUtils").asCtor(_r).dependencies("FramesetsUtils, TimerManager, DocumentsManager, HostData, TopContainerProvider, FeaturesManager, Consts, CommonEvents");function _r(){var t,n,r,i,a,s,u,l="walkme-ie-",c="walkme-ie-bm-",d=" walkme-override walkme-css-reset",p=" walkme-to-destroy",g=this,f=null,h=!1,m=[],v="Parent has no style",S="Parent is not ':wm_can_embed'";function y(e,o,l,c,d,p,g,h){f=e,t=o,n=l,r=c,i=d,a=p,s=g,u=h}g.canDisplayOverlay=function C(){var C=!(r.isQuirksMode()||f.shouldHandlePageAsFramesets());return C},this.removeOverlay=function(t){var n=m.pop();n&&n.exist()&&(t?n.fadeOut("slow",function(){e(this).remove()}):n.remove(),n=null)},g.displayOverlay=function(e,t,n){void 0==n&&(n="walkme-popup-background");var r=i.getTopContainer();r.append(Nf('<div id="{0}" class="mt-to-destroy"></div>',n));var o=mtjQuery("#"+n,r);return o.css({opacity:"0.7",display:"none",position:"fixed",height:"100%",width:"100%",top:"0",left:"0",background:"#000000","z-index":e-1}),g.addBrowserSpecificClasses(o),t?o.fadeIn("slow"):o.css("display",""),m.push(o),o},g.getStyle=function(e,t){try{return t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle}catch(n){return null}},g.getAnimationDimentionSize=function(e,t){var n;return n="top"==t||"bottom"==t?"height":"width",e.css(n)},g.addBrowserSpecificClasses=function(t){if(r.isMobile()&&t.addClass("walkme-mobile-device"),!r.isIE())return;var n=document.documentMode||Number(e.browser.version),i=window.mtjQuery.browser.version.slice(0,window.mtjQuery.browser.version.indexOf(".")),o=l+n,a=c+i;t.addClass(o),t.addClass(a)},g.addWalkmeClasses=function(e){e[0].className+=p+d,e.find("*").each(E)};function E(e,t){t.className+=d}g.addBrowserClass=function(e){var t=r.browser.name.replace(/ /g,"").toLowerCase();e.addClass("walkme-"+t)},g.setLangAttribute=function(e){var t=o.get("LanguageManager").getCurrentLanguage();if(!t)return;e.attr("lang",t)},g.bindFocusAndBlur=function(e,t){e.focus(function(){e.val()==t&&e.val("")}),e.blur(function(){""==e.val()&&e.val(t)})},g.fixFlash=function(){if(h||!a.isFeatureEnabled("flashTransparent"))return;n.foreachDocument(T,!0)};function T(e){var t=r.browser,n='<PARAM NAME="WMode" VALUE="Window">';t.name.indexOf("Firefox")!=-1?i():t.name.indexOf("IE")!=-1&&o(),h=!0;function i(){a().append("<param name='wmode' value='transparent'>").wrap("<div></div>").unwrap(),mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e).attr("wmode","transparent").wrap("<div></div>").unwrap()}function o(){var r=mtjQuery("embed[wmode!='opaque'][wmode!='transparent']",e);if(r.attr("wmode","transparent"),l(r),t.version>=9){var i=s();mtjQuery("param[name='wmode']",i).remove(),i.append("<param name='wmode' value='transparent'>"),l(i)}t.version<=8&&l(u(),function(e){var t=e.outerHTML;return t.indexOf(n)==-1?t:e.outerHTML.replace(n,'<PARAM NAME="WMode" VALUE="transparent">')})}function a(){return mtjQuery("object:has('param[name='wmode'][value!='transparent'][value!='opaque']')",e)}function s(){return mtjQuery("object:has('param[name*='wmode'][value!='transparent'][value!='opaque']'), object:not(:has(param[name='wmode']))",e)}function u(){return mtjQuery("object[classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000']:not(:has(param[name*='wmode']))",e)}function l(e,t){for(var n=0;n<e.length;n++){var r=e[n].parentNode,i=t?t(e[n]):e[n].outerHTML;e[n].insertAdjacentHTML("beforeBegin",i),r.removeChild(e[n])}}}g.hexToRgba=function(e,t){var n=e.replace("#",""),r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=255&r;return"("+i+","+o+","+a+","+t+")"},g.closestCanEmbed=function(e){for(var t=e.parent(),n={originalElement:e,currentParent:t};t&&t.exist();){if(n.currentParent=t,n.reason="",!t[0].style)return n.reason=v,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,n),i.getTopContainer(e);if(t.is(":wm_can_embed"))return t;n.reason=S,u.raiseEvent(s.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,n),t=t.parent()}return i.getTopContainer(e)},g.destroyDivWithIframes=function(e,n){if(!e)return void(n&&n());var r=mtjQuery("iframe",e);0==r.length?t.libSetTimeout(function(){e.remove(),n&&n()},1):(r.attr("src",""),t.libSetTimeout(function(){r.hide(),r.remove(),e.remove(),n&&n()},1))},y.apply(null,arguments)}o.register("Balloon").asCtor(Pr).asProto().dependencies("TimerManager, BalloonEmbedder, Consts, UiUtils, PositionHelper, CommonUtils, Logger, FeaturesManager, BalloonUtils, HostData, FramesetsUtils, BBCodeParser, Lib, ElementUtils, CommonEvents, ScrollUtils, ElementInIframeIndicator, MoveBalloonByIntervalsHelper, BalloonElementPositionChangedChecker,CurrentWalkthruData, WalkthrusModule, LibDestroyer, CustomCssSetter, DirectHeadProvider, TopMostCssStyleSettter, UserGuidContainer, HighlighterSettingsProvider");function Pr(t,n,r,i,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b,I,w,_,P,A,k,O){var D,N,x,L,M,F,R,B,U,W,V,G,H,j,Y,z,Q,K,q,X,J,$,Z,ee=this,te=null,ne=null,re=!0,ie=!1,oe=!1,ae=!1,se=!1,ue="",le="",ce="",de="",pe="",ge="",fe=!1,he="",me="",ve=0,Se=0,ye=0,Ee="step",Te=0,Ce="walkthru",be=!1,Ie=[],we=[],_e=null,Pe=null,Ae=null,ke=null,Oe=null,De=null,Ne="scroll",xe=800,Le="displayTO",Me=r.POSITION_TYPE.Bottom,Fe={},Re="trigger",Be="balloon",Ue=500;function We(){x=r.STEP_TYPE.Normal,te=O.element,O.parentElement&&(te=O.parentElement,ne=O.element),Y=O.forceEmbedBalloonInIframe,q=O.dontShowIoBalloon,be=O.isFirstStep,N=O.isViewStep,H=O.siteConfig,O.fixedSize&&(ve=O.fixedSize.width,Se=O.fixedSize.height),me=O.stepSettings,G=u.getSettingsValue(me,Le)||u.getSettingsValue(H.Settings,Le)||xe,O.text&&(ue=O.text.title,ce=O.text.subText,le=u.nl2br(O.text.content)),L=O.end,O.buttons&&(ie=O.buttons.next,oe=O.buttons.done,ae=O.buttons.back,se=O.buttons.submit),ge=O.htmlContent,de=O.innerHtml,pe=O.outterHtml,D=O.position,O.data&&(ye=O.data.balloonEntityId||O.data.stepId,Te=O.data.containerEntityId||O.data.tutorialId,x=O.data.type,Ee=O.data.balloonEntityType||"step",Ce=O.data.containerEntityType||"walkthru"),Ge(O.isCaptureBalloon,N),he=O.configuration,d.fixConfiguration(he),X=l.wrapCustomerLog(Be),w.setCustomCssIfNeeded(te),M=O.drawer;var e={element:te,balloonDrawer:M,settings:me};if(j=o.create("ScrollManager",e),!te)return void(re=!0);var t=y.isInIframe(te);re=!(!u.getSettingsValue(me,"embed",!1)&&t&&!Y&&!c.isFeatureEnabled(r.FEATURES.ForceEmbedInOwnerDocument))||g.shouldHandlePageAsFramesets(),O.isCaptureBalloon&&ze(),Z=O.bindButtonsFunc,Ye(he)}function Ve(e){X(e,5,Be)}function Ge(e,t){var n={balloonEntityId:ye,containerEntityId:Te,isCapture:e,isViewStep:t},r=k.getHighlighterSettings(me,te,n);z=o.create("Highlighter",r),ne&&(r.element=ne,r.drawableType=Re,Q=o.create("Highlighter",r));var i=He()?"OldInsideout":"Insideout";K=o.create(i,r)}function He(){var e=c.isFeatureEnabled("oldSpotlight"),t=p.isIE()&&p.isIEOlderThan(9);return e||t}this.onDestroy=function(e){Ie.push(e)},this.setReleaseEvents=function(e){we=e},this.releaseEvents=function(e){for(var t,n=0;n<we.length;n++)try{we[n](e)&&(t=!0)}catch(r){}return t},this.SetTimeoutOn=function(){Et()||F||(F=t.playSetTimeout(function(){ee.elementDisplayTimeoutFunction()},200))},this.getArrowHeight=function(){return M.arrowHeight()};function je(){var e=ge?ge.html():f.parse(le),t={title:f.parse(ue),content:e,customHtml:{inner:de,outter:pe},stepIndexText:ce},n={balloonData:t,userGuid:A.getUserGuid(),nextButton:ie,doneButton:oe,backButton:ae,configuration:he,content:le,title:ue,subtext:ce,settings:me,end:L,stepType:x,submitButton:se,contentDiv:ge};return n}function Ye(e){var t=e.AnimateFirst&&!be||fe||N,n=e.Vibrate&&!fe,r={config:e.Animation,isVibrating:n};De=o.create("Animator",r),t&&De.disableAnimation()}this.AddSubmitButton=function(){se=!0};function ze(){fe=!0,re=!1,fe&&De&&De.disableAnimation()}function Qe(e,t,r){var i={};return B=n.getContainer(me,e,re,i),W=M.generateBalloonDiv(B,fe,Te,ye,x,je(),Ee,Ce),n.handleEmbedding(me,W,i),U=M.fixSize(W,e,re,t,r),ee.showPopupBalloon(W),W}function Ke(e,t,n,r){var i=ot(e),o={element:e,elementBounds:i,fixedMaxWidth:t,fixedHeight:n,isScrollNeeded:r},a=qe(o)||Je(o);if(!a)return;return re&&W.data("iframe",O.element.data("iframe")),ut(a,U,i),tt(W,a),W}function qe(e){if(e.isScrollNeeded||!n.isEmbeded(me)||c.isFeatureEnabled("disableStrongEmbed"))return;var t=je(),i=(new Date).getTime();for(B=e.element;B&&B.exist();){var o=$e(e,t,B);Xe(r.EVENTS.BalloonLogs.BalloonPopLocationCalculated,o);var a=!!o&&st(W,at);Xe(r.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,a);var s=!!o&&a;if(s)return o;W&&W.remove();var u=(new Date).getTime(),l=Ue<u-i,d=B.is("body");if(l||d)return void(B=void 0)}}function Xe(e,t){var r={isEmbeded:n.isEmbeded(me),containerEntityType:Ce,containerEntityId:Te,balloonEntityType:Ee,balloonEntityId:ye,extraData:t};v.raiseEvent(e,r)}function Je(e){var t=je(),n=$e(e,t,e.element);return n}function $e(e,t,r){var i={};if(B=n.getContainer(me,r,re,i),!B.exist())return;W=M.generateBalloonDiv(B,fe,Te,ye,x,t,Ee,Ce),n.handleEmbedding(me,W,i),U=M.fixSize(W,e.element,re,e.fixedMaxWidth,e.fixedHeight),Ze();var o=it(W,U,B,e.elementBounds);return o}function Ze(){var e={};if(null==Pe&&null==Ae){var e=et(te);At(e.top,e.left,e.height,e.width)}}function et(e){var t={};if(re){var r=te.offset();t.top=Math.floor(r.top),t.left=Math.floor(r.left)}else{var i=s.getPosRelativeToWindow(te[0],window,!0);t.top=i.top,t.left=i.left}return t.height=te.height(),t.width=te.width(),s.fixOffsetForIE(te,t),n.fixPosition(t,me,B),t}function tt(e,t){De.setPosition(t.positionType);var n=1==u.getSettingsValue(me,"isInvisible",0);if(n){e.hide();for(var r=0;r<V.length;r++)V[r].hide()}else De.prepare(e,V)}this.showPopupBalloon=function(e){var t=u.getSettingsValue(me,"z-index",r.POPUP_BALLOON_Z_INDEX);e.css({"z-index":t,"min-width":M.minPopupWidth()+"px"});var n=parseInt(u.getSettingsValue(me,"leftOffset",0)),o=parseInt(u.getSettingsValue(me,"topOffset",0)),a={top:o,left:n};h.centerElementInPage(e,!1,a);var l=i.canDisplayOverlay(),c=1==u.getSettingsValue(me,"fadeBackground",1)||1==u.getSettingsValue(me,"fadeBackground",!0)||"True"==u.getSettingsValue(me,"fadeBackground","True");l&&c&&i.displayOverlay(t,!0);var d=p.isQuirksMode(te[0]);d&&M.fixQuirksMode(e),De.prepare(e),De.postAnimation(function(){s.registerResizeAndScrollEvents({element:e,offset:a})})},this.getBalloonDiv=function(){return W},this.getElement=function(){return te},this.getBalloonHTML=function(){return M.generateHtml(je())},this.Show=function(t,n){J=u.getTimer(Ve);var r=re?_.getDirectHead(te):e("head"),i=function(){rt().then(function(){nt(t,n)})};fe?i():M.loadResources(r,i)};function nt(e,t){try{var n=re?te:mtjQuery("body"),r=m.getElementViewport(n),i=ve>0?ve:0,o=Se>0?Se:0;r.width()<=200?0!=D&&2!=D&&void 0!=D||(i=r.width()-te.position().left-20,i<120&&(i=120)):!c.isFeatureEnabled("noHgtLmt")&&r.height()<=200&&(0!=D&&2!=D&&void 0!=D||(D=1)),!q&&K.shouldShow(te,me)&&K.highlight(),ht(e,t,i,o)}catch(a){l.error(a)}}function rt(){var e=[];return Et()||!fe&&!z.shouldShow(te,me)||(e.push(z.highlight()),Q&&e.push(Q.highlight())),a.all(e)}this.stop=function(){De.stop()},this.destroy=function(e,t){v.raiseEvent(r.EVENTS.Walkthrus.DestroyStepBalloon),e||(R=!0,pt(),gt()),ft(W),De.disableAnimation(),De.destroy(function(){try{z.unhighlightElement(te,"balloon"),Q&&Q.unhighlightElement(ne,Re),K.unhighlightElement(te,"balloon")}catch(e){l.error(e,"error removing highlighting elements for balloon")}t&&t()})};function it(e,t,i,o){var a=u.definedOrDefault(D,Me),l=M.arrowHeight()+1,c=s.getDrawingArea(te,!re,M.shouldScrollToElement()),d=M.decideWhereToPop(o,t,a,l,c);if(!d)return;d=dt(d,t,o,i),n.fixPosition(d,me,i),M.addPositionClass(e,d);var g=he.BalloonBorderWidth*(M.hasBorder()?1:0);ct(e,d,g,t);var f=u.getSettingsValue(me,"z-index",r.NORMAL_BALLOON_Z_INDEX);return P.setTopMostCssStyle(e,f),p.isQuirksMode(te[0])&&M.fixQuirksMode(e),d}function ot(e){if(_e)return _e;return s.getElementBounds(e,re,window,me)}function at(e){return e.is(":wm_interact_all_points")}function st(e,t){var n=e.css("display"),r="none"==n;r&&W.css("display","block");var i=t(W);return r&&W.css("display",n),i}function ut(e,t,n){V=M.drawArrows(te,ye,e,t,n,B,Ee);for(var i=u.getSettingsValue(me,"z-index",r.NORMAL_BALLOON_Z_INDEX),o=0;o<V.length;o++)P.setTopMostCssStyle(V[o],i);M.fixArrows({balloonDiv:W,arrowsDivs:V,result:e,isInCaptureMode:fe,isQuirksMode:p.isQuirksMode(te[0])})}function lt(){if(!Z)return;var e={objectId:ye,type:r.STEP_PLAY_INITIATOR_ENUM.STEP};Z(W,e)}function ct(e,t,n,i){e.css("top",t.top-n+"px"),e.css("left",t.left-n+"px");var o=p.isQuirksMode(te[0]);t.positionType==r.POSITION_TYPE.Top&&e.css("top",t.top-2*n+1+"px"),t.positionType==r.POSITION_TYPE.Bottom&&e.css("top",t.top-1+"px"),t.positionType==r.POSITION_TYPE.Left&&(e.css("left",t.left-2*n+1+"px"),o&&e.css("left",t.left-2*n+"px")),t.positionType==r.POSITION_TYPE.Right&&e.css("left",t.left-1+"px"),e.css("width",i.width+"px"),o&&e.css("width",i.width+2*n+"px"),e.css("height",i.height+"px")}function dt(e,t,n,i){var o=u.definedOrDefault(he.BalloonRadius,15);if(e.positionType==r.POSITION_TYPE.Right||e.positionType==r.POSITION_TYPE.Left){var a,s=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;if(isFinite(s)&&0!==s||(s=1),a=fe||me.lv&&me.lv>0?mtjQuery(u.getElementDocument(i)).height()*s:mtjQuery(u.getElementDocument(te)).height()*s,t.height+e.top>a){var l=M.arrowHeight()+1,c=n.top+n.height/2,d=c-t.height/2,p=c-t.height+l+o/2;p=Math.max(0,p);var g=c-l-o/2,f=a-t.height-1,h=Math.min(f,g);e.top=d,e.top=Math.min(h,e.top),e.top=Math.max(e.top,p),e.top=Math.max(0,e.top)}}return e}function pt(){F&&(F.clear(),F=null)}function gt(){for(var e=0;e<Ie.length;e++)try{Ie[e]()}catch(t){}Ie.length=0}function ft(e){if(!e)return;try{e.unbind(),mtjQuery("*",e).unbind()}catch(t){}}function ht(e,t,n,i){var o=c.isFeatureEnabled("noScrlAnm")?S.SCROLL_MODES.Normal:S.SCROLL_MODES.Animated,a=u.getSettingsValue(me,Ne,o);e=e&&S.shouldScroll(te,a,x);var s=!1;e&&(s=S.jspScrollAttempt(te));var l;if(l=x&&x==r.STEP_TYPE.Popup?Qe(te,n,i):Ke(te,n,i,e),!l)return void(t&&t());lt(l),kt(l),v.raiseEvent("BalloonCreated",{Element:l,Configuration:he}),Fe.balloonDrawTime=J("Done drawing balloon"),$=u.getTimer(Ve);var d=function(){Fe.balloonShowTime=$("Done showing balloon"),t&&t(Fe,l)};!s&&e?j.scrollToElementIfNeeded(te,null,function(){var e=function(){j.scrollToBalloon(te,j.getScrollOptions(me),W)};fe||!Tt(e)?De.animate(d):d()},me,D,a,W,V):De.animate(d),M.manipulationsForInlineCss(l)}this.elementDisplayTimeoutFunction=function(){var e=s.isElementVisible(te,me.filter);e?(Tt(),F=t.playSetTimeout(ee.elementDisplayTimeoutFunction,G)):(X("Element not visible anymore.",5,Be),ee.destroy(!1,function(){mt()&&vt()}))};function mt(){switch(C.state){case r.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case r.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case r.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}function vt(){St()?(X("Sticky - keep looking for element.",5),I.releaseBalloons(),C.state=r.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,b.executeCurrentStep()):yt()?(b.setMember("dontContinueTutorial",!1),X("Skippable - continue to next step."),b.executeTutorialNextStep()):C.state!=r.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(X("Stopping walk-thru."),I.releaseBalloons(),C.state=r.WALKTHRU_STATE.PAUSED,v.raiseEvent("WalkthruAborted"),v.raiseEvent("WalkthruStopped"))}function St(){return u.getSettingsValue(C.getCurrentStep().Settings,"sticky",0)}function yt(){return C.getCurrentStep().IsSkippable}function Et(){return x==r.STEP_TYPE.Popup}function Tt(e){var t=!1,n=!1,r=et(te);!re&&_t()&&(t=!0),S.isBalloonPositionVisibleRelativeToParents(te,D)||(t=!0),_e=null;var i=Pt(r.top,r.left,r.height,r.width),o=bt();return i&&o?(n=!0,E.shouldMoveByIntervals(t,W,me)?It(r,e):(X("Element position changed, destroying it",5,Be),At(r.top,r.left,r.height,r.width),Ct(),ee.destroy(!0,function(){X("Finished destorying balloon",5,Be),t||R||(X("Redrawing balloon",5,Be),ee.Show(!1,function(){_e=null,e&&e()}))}))):e&&e(),n}function Ct(){c.isFeatureEnabled(r.FEATURES.CalculateElementBoundsBeforeRedraw)&&(_e=s.getElementBounds(te,re,window,me))}function bt(){var e={stepId:ye,balloonDiv:W,defaultValue:!0};return v.raiseEvent(r.EVENTS.ShouldChangeBalloonPosition,e),e.returnValue}function It(e,n){var r=0;function i(){if(r<10){r++;var o=te.height(),a=te.width(),s=E.getDeltaLeft(Oe,a,Ae,e.left),u=E.getDeltaTop(ke,o,Pe,e.top);At(e.top,e.left,o,a),wt(W,s,u);for(var l=0;l<V.length;l++)wt(V[l],s,u);Et()||!fe&&!z.shouldShow(te,me)||(z.highlight(),Q&&Q.highlight()),!q&&K.shouldShow(te,me)&&K.highlight(),t.playSetTimeout(i,30)}else n&&n()}i()}function wt(e,t,n){var r=parseFloat(e.css("left")),i=parseFloat(e.css("top")),o=r-t+"px",a=i-n+"px";e.css("left",o),e.css("top",a)}function _t(){var e=te.data("iframe");return e&&s.isElementScrolledOut(te,e,D)}function Pt(e,t,n,r){return null!=Pe&&null!=Ae&&null!=ke&&null!=Oe&&(T.check(Pe,e)||T.check(Ae,t)||T.check(ke,n)||T.check(Oe,r))}function At(e,t,n,r){Pe=e,Ae=t,ke=n,Oe=r}function kt(e){he.classes&&mtjQuery.each(he.classes,function(t,n){e.addClass(n)})}We.apply(null,arguments)}o.register("BalloonLogEventHandler").asCtor(Ar).dependencies("Logger, WmInternals, Consts");function Ar(e,t,n){this.init=s;var r,i="[BalloonLogEventHandler] ",o="balloonLogEventHandler";function a(){r=e.wrapCustomerLog(o)}function s(){t.bind(n.EVENTS.BalloonLogs.BalloonPopLocationCalculated,u),t.bind(n.EVENTS.BalloonLogs.BalloonIsFullyVisibleCalculated,l),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedReturnsTop,c),t.bind(n.EVENTS.BalloonLogs.ClosestCanEmbedSkipsElement,c)}function u(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": Something happened while calculaing the position of the balloon, trying to attach it to another element",3)}function l(e,t){t&&t.isEmbeded&&!t.extraData&&d(t.containerEntityType+" "+t.containerEntityId+" "+t.balloonEntityType+" "+t.balloonEntityId+": The balloon is partly covered by an element, trying to attach it to another element",3)}function c(e,t){d(t.reason+", trying to attach the balloon to another element. Invalid parent:",3),r(t.currentParent[0])}function d(e,t){r(i+e,t)}a()}o.register("MoveBalloonByIntervalsHelper").asCtor(kr).asProto().dependencies("FeaturesManager");function kr(e){var t=this;t.shouldMoveByIntervals=n,t.getDeltaLeft=i,t.getDeltaTop=r;function n(t,n,r){return e.isFeatureEnabled("moveByIntervals")}function r(e,t,n,r){return parseFloat(e)-parseFloat(t)}function i(e,t,n,r){return parseFloat(e)-parseFloat(t)}}o.register("BalloonElementPositionChangedChecker").asCtor(Or).asProto().dependencies();function Or(){var e=this;e.check=t;function t(e,t){return e!=t}}o.register("SafeFullUrlProvider").asCtor(Dr).dependencies("FeaturesManager, HostData");function Dr(e,t){var n=this;n.get=r;function r(){return e.isFeatureEnabled("disableWidgetOpenFullUrl")?"":t.getUrl()}}o.register("DeployableSafeStartExecuter").asCtor(Nr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, SafeStartHandlerProvider, SafeStartRedirectService, SafeStartMessageDisplayer");function Nr(e,t,n,r,i,o){var a=this;a.handleSafeStart=s;function s(e,t,a){var s=r.get(e),l=u(t);if(null!=l&&1==l.enabled){var c=o.showAndGetStatus(l,a,e,s);return s.auditSafeStartFirstStatus(c,a),c==n.SAFESTART_ACTION.AutoRedirect&&i.redirect(l.url,n.SAFESTART_ACTION.AutoRedirect,a,s),!0}return s.auditSafeStartDisabled(a),!1}function u(n){var r=e.getSettingsValue(n.Settings,"SafeStart",!1);return r&&"0"!=r.enabled||(r=e.getSettingsValue(t.get().Settings,"SafeStart",null)),r}}o.register("SafeStartMessageDisplayer").asCtor(xr).dependencies("SettingsValuesRetriever, SiteConfigManager, Consts, CommonUtils, HtmlDecoder, LibDestroyer, RedirectService, SafeStartRedirectService");function xr(e,t,n,r,i,a,s,u){var l=this;l.showAndGetStatus=c,l.closePopup=d;function c(e,t,r,i){var o,a=e.url;return 1==e.autoRedirect?o=n.SAFESTART_ACTION.AutoRedirect:s.canRedirect(a)&&!s.isUrlDifferentFromCurrentOnlyInHash(a)?(o=n.SAFESTART_ACTION.PopupShown,f(a,t,i)):(o=n.SAFESTART_ACTION.FailOnUrl,p(v(r))),o}function d(){a.releaseBalloons()}function p(e){var t=g();t.enabled&&(e+=Nf(" or contact <a href='{0}' target='_blank' style='text-decoration: underline; color: blue;'>support.</a>",t.url));var n=S(e),r={popupStepButtons:[{id:0,name:"OK",action:7}]},i=!0;o.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:n},400,r,function(e){mtjQuery(".walkme-action-ok",e).click(function(){d()})},i)}function g(){var n={},o=t.get();return n.enabled=r.isTrue(o.Settings,"openATicketEnabled",!1),n.url=e.getSettingsValue(o.Settings,"openATicketUrl",""),n.url&&r.isValidUrl(n.url)?(n.url=encodeURI(n.url),n.url=i.decodeHtml(n.url,["&"])):(n.enabled=!1,n.url=null),n}function f(e,n,r){var i=t.get(),a=S(i.SafeStartPopupText),s={popupStepButtons:[{id:0,name:i.RedirectButtonText,action:5},{id:1,name:i.StayButtonText,action:6}]};o.get("PopupBalloonDisplayer").showSpecialPopupBalloon({htmlContent:a},400,s,function(t){h(t,e,n,r)})}function h(e,t,r,i){mtjQuery(".walkme-action-redirect",e).click(function(){u.redirect(t,n.SAFESTART_ACTION.RedirectClicked,r,i).then(d)}),mtjQuery(".walkme-action-stay",e).click(function(){m(r,i)}),mtjQuery(".walkme-action-close",e).attr("onclick","").unbind("click"),mtjQuery(".walkme-action-close",e).click(function(){m(r,i)})}function m(e,t){t.auditStayButtonClicked(e),d()}function v(e){return"Sorry about that! The "+n.DEPLOYABLE_DISPLAY_NAME[e]+" cannot be played right now. Please try again later"}function S(e){var t=mtjQuery("<div></div>");return e=r.nl2br(e),t.append(e),t}}o.register("SafeStartRedirectService").asCtor(Lr).dependencies("TimerManager");function Lr(e){var t=this;t.redirect=n;function n(t,n,r,i){var o=mtjQuery.Deferred(),a=function(){i.redirect(t,r),o.resolve()};return i.auditSafeStartStatus(n,r),e.setWalkmeTimeout(a),o.promise()}}o.register("SafeStartHandlerProvider").asCtor(Mr).dependencies("DeployableTypes, FlowSafeStartHandler, WalkthruSafeStartHandler");function Mr(e,t,n){var r=this;r.get=i;function i(r){if(r==e.Tutorial)return n;if(r==e.BusinessSolution)return t}}o.register("Encryptor").asCtor(Fr).dependencies("Base64");function Fr(e){var t=this;t.encrypt=n;function n(t){return e.btoa(unescape(encodeURIComponent(t)))}}o.register("SearchResultActivator").asCtor(Rr).dependencies("CommonUtils, LightboxDisplayer, Logger, CommonEvents, SiteConfigManager");function Rr(e,t,n,r,i){var o=this,a=n.wrapCustomerLog(m),s=[".zendesk.com"],u={width:900,height:500};function l(){return!0}function c(e){e=e.toLowerCase();for(var t=0;t<s.length;t++)if(e.indexOf(s[t].toLowerCase())>=0)return!0;return!1}function d(e){var n=t.getSize(),r='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',i=yf.to_html(r,{width:n.width,height:n.height,url:encodeURI(e)}),o=mtjQuery(i);return o}function p(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://"),n=t||c(e);return n&&a("Can't play content in lightbox",3),n}o.openSearchResult=function(t){if(!e.isValidUrl(t))return void a(Nf("Content url is invalid: {0}",t),3);a(Nf("Content url is :{0}",t),3),r.raiseEvent("LoadingContent",t);var n="true"===i.get().Custom.lightboxEnabled;p(t)||!n?f(t):g(t)};function g(e){a("Started playing content in lightbox",3),WalkMePlayerAPI.isMenuOpen()&&WalkMePlayerAPI.toggleMenu(),h(),t.activate(e,u,"searchResult",l(),d,f)}function f(e){a("Started playing content in new tab",3),window.open(e,"_blank")}function h(e){t&&t.remove()}}o.register("InfoAndValidationsSmartTipComponentsActivator").asCtor(Br).asProto().dependencies("PromiseUtils");function Br(e,t){var n=this;n.activate=a,n.destroy=s;var r,i;function o(){r=t.infoComponentActivator,i=t.validationsComponentActivator}function a(t){s();var n=[r.activate(t),i.activate(t)];return e.executeParallely(n)}function s(){var t=[r.destroy(),i.destroy()];return e.executeParallely(t)}o()}o.register("InfoSmartTipComponentsActivator").asCtor(Ur).asProto().dependencies("SmartTipComponentDrawerFactory");function Ur(t,n){var r=this;r.activate=s,r.destroy=u;var i,o;function a(){i=n.smartTipModel}function s(e){return o=t.get(i,i.Info),o.draw(e)}function u(){if(o)return o.destroy();return e.when()}a()}o.register("SmartTipComponentsActivatorFactory").asCtor(Wr).dependencies("Consts");function Wr(e){var t=this;t.get=r;function n(){}function r(t){switch(t.Mode){case e.SMART_TIP.MODE.OnlyInfo:return i(t);case e.SMART_TIP.MODE.OnlyValidations:return a(t);case e.SMART_TIP.MODE.InfoAndValidations:return s(t);default:throw new Error("Unsupported smartTipMode: "+t.Mode)}}function i(e){var t={smartTipModel:e};return o.create("InfoSmartTipComponentsActivator",t)}function a(e){var t={smartTipModel:e};return o.create("ValidationsSmartTipComponentsActivator",t)}function s(e){var t=i(e),n=a(e),r={infoComponentActivator:t,validationsComponentActivator:n};return o.create("InfoAndValidationsSmartTipComponentsActivator",r)}n()}o.register("ValidationsSmartTipComponentsActivator").asCtor(Vr).asProto().dependencies("Consts, ValidationsSmartTipComponentDrawerCreator, ValidationsSmartTipStateMachineProvider, DocumentElementEventsBinder, TimerManager");function Vr(t,n,r,i,o,a){var s=this;s.activate=m,s.destroy=h;var u,l,c,d,p,g;function f(){c=n.create(a.smartTipModel),g=a.smartTipModel}function h(){return E(),C(),d&&(d.reset(),d=null),l=null,u=null,c.removeValidationFeedback()}function m(t){return u=t,E(),T(),v(),C(),b(),e.when()}function v(){var e=r.get(g,u,y);l=e.activationElementsSelector,d=e.stateMachine,p=e.elementEvents}function S(){return c.drawValidationFeedback(u)}function y(e,t,n){t&&t.shouldValidate&&u&&o.libSetTimeout(function(){S().then(function(){var e=n&&n.sender==u[0];c.applyBehaviorOnFeedback({tooltipStartShown:e})})},0)}function E(){e(g).off(t.SMART_TIP_INNER_EVENTS.CheckValidations)}function T(){e(g).on(t.SMART_TIP_INNER_EVENTS.CheckValidations,S)}function C(){if(!p||!u)return;var e=w(p);i.off(u,l,e)}function b(){if(!p||!u)return;for(var e=w(p),t=0;t<e.length;t++)i.on(u,l,e[t],I(p[t]))}function I(e){return function(t){d.evaluate(e,{sender:t.target})}}function w(e){for(var t=[],n=0;n<e.length;n++){var r=e[n]+"."+g.Id;t.push(r)}return t}f()}o.register("ValidationsSmartTipStateMachineConfiguration").asFunction(Gr).dependencies("Consts");function Gr(e){var t={dontCheck:"dontCheck",delayValidationCheck:"delayValidationCheck",checkValidation:"checkValidation"},n=".walkme.smarttip.validation",r={onFocusOut:"blur"+n,onFocus:"focus"+n,onKeyDown:"keydown"+n,onChange:"change"+n},i=[{toState:t.checkValidation,valueToReturn:{shouldValidate:1}}],o=[{fromState:t.delayValidationCheck,timeout:500,toState:t.checkValidation}],a=[{fromState:"*",onAction:r.onKeyDown,toState:t.delayValidationCheck}],s=[{fromState:"*",onAction:r.onFocusOut,toState:t.checkValidation},{fromState:"*",onAction:r.onFocus,toState:t.dontCheck}],u=[{fromState:"*",onAction:r.onChange,toState:t.checkValidation}];return{initialState:t.dontCheck,timedOutTransitions:o,defaultTransitionValuesToReturn:i,keyDownTransitions:a,keyDownEvents:[r.onKeyDown],focusTransitions:s,focusEvents:[r.onFocus,r.onFocusOut],changeTransitions:u,changeEvents:[r.onChange]}}o.register("ValidationsSmartTipStateMachineProvider").asCtor(Hr).dependencies("ValidationsSmartTipStateMachineConfiguration, StatesMachineCreator, HtmlElementsDataProvider, Consts, ValidationsComplexConditionIndicator");function Hr(e,t,n,r,i){var o=this;o.get=u;var a="*";function s(){}function u(t,r,o){var s=e.focusTransitions,u=e.focusEvents,c=i.containsComplexCondition(t.Validations);t.Settings.validateWhileTyping&&(s=s.concat(e.keyDownTransitions),u=u.concat(e.keyDownEvents)),(n.isSelectInput(r)||c)&&(s=s.concat(e.changeTransitions),u=u.concat(e.changeEvents));var d=l(s,o);return{stateMachine:d,elementEvents:u,activationElementsSelector:c?a:r}}function l(n,r){var i={initState:e.initialState,timedOutTransitions:e.timedOutTransitions,defaultTransitionValuesToReturn:e.defaultTransitionValuesToReturn,onStateChangedCallback:r,transitions:n},o=t.create(i);return o}s()}o.register("ValidationsComplexConditionIndicator").asCtor(jr).dependencies("ConditionTreeUtils");function jr(e){var t=this;t.containsComplexCondition=n;function n(t){if(!t)return!1;for(var n=0;n<t.length;n++){var i=t[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=e.anyMatchesCondition(i.ConditionTrees.Validation,r);if(o)return!0}}return!1}function r(e){if("Func"!=e.nodeType)return!1;var t=0===e.funcName.indexOf("Element"),n=0===e.funcName.indexOf("jQuery");return t||n}}o.register("ChainedSmartTipComponentDrawer").asCtor(Yr).asProto().dependencies("PromiseUtils, inArrayFunc");function Yr(t,n,r){var i=this;i.draw=p,i.applyBehavior=g,i.destroy=f;var o,a,s,u={Drawing:"drawing",Drawn:"drawn",Destroying:"destroying",Destroyed:"destroyed"},l=[u.Drawing,u.Drawn],c=[u.Destroying,u.Destroyed];
function d(){o=r.drawers}function p(t){var n=function(){return v(e(t))};return h(n,l,u.Destroying)}function g(e){for(var t=0;t<o.length;t++)o[t].applyBehavior&&o[t].applyBehavior(e)}function f(){return h(S,c,u.Drawing)}function h(e,t,n){if(m(t))return a;return a=s==n?a.then(e):e()}function m(e){return n(s,e)!=-1}function v(e){s=u.Drawing;for(var n=[],r=0;r<o.length;r++){var i=o[r];n.push(y(i))}var a=t.executePromiseChain(n,e);return a.always(function(){s=u.Drawn}),a}function S(){s=u.Destroying;for(var e=[],n=o.length-1;n>=0;n--){var r=o[n];e.push(E(r))}var i=t.executePromiseChain(e);return i.always(function(){s=u.Destroyed}),i}function y(e){return e.draw}function E(e){return e.destroy}d()}o.register("SmartTipComponentDrawerFactory").asCtor(zr).dependencies("SmartTipComponentDrawerConfigurationProvider, SmartTipGlobalStylingProvider, SmartTipDrawersCreator");function zr(e,t,n){var r=this;r.get=a;function i(){}function a(e,n){var r=t.get(n.GlobalStyleId),i=s(e,n,r);return i}function s(t,r,i){var a=e.getConfig(r),s=[];if(a.shouldDrawHighlighter){var u=n.getHighlighterDrawer(t,r,i);s.push(u)}if(a.shouldDrawIcon){var l=n.getIconDrawer(t,r,i);s.push(l)}if(a.shouldDrawTooltip){var c=n.getInteractiveTooltipDrawer(r,i,t);s.push(c)}return o.create("ChainedSmartTipComponentDrawer",{drawers:s})}i()}o.register("SmartTipDrawersCreator").asCtor(Qr).dependencies("SmartTipHighlighterDrawerCreator");function Qr(t){var n=this;n.getIconDrawer=i,n.getStaticTooltipDrawer=a,n.getInteractiveTooltipDrawer=s,n.getHighlighterDrawer=u;function r(){}function i(e,t,n){var r={smartTipModel:e,smartTipUiComponentModel:t,globalStyling:n};return o.create("SmartTipIconDrawer",r)}function a(e,t,n){var r={smartTipModel:n,smartTipUiComponentModel:e,globalStyling:t};return o.create("SmartTipTooltipDrawer",r)}function s(e,t,n){var r=a(e,t,n),i={smartTipComponentModel:e,tooltipDrawer:r};return o.create("SmartTipInteractiveTooltipDrawer",i)}function u(n,r,i){var o={};return o["z-index"]=n&&n.Settings&&n.Settings["z-index"],o=e.extend({},i.Highlighter,o),t.create(r.Id,"smartTipUiComponent",o,n)}r()}o.register("SmartTipComponentDrawerConfigurationProvider").asCtor(Kr);function Kr(){var e=this;e.getConfig=n;function t(){}function n(e){var t=e.IsWithIcon,n=!!e.TooltipText,r=e.IsWithHighlighter;return{shouldDrawIcon:t,shouldDrawTooltip:n,shouldDrawHighlighter:r}}t()}o.register("SmartTipIconDrawer").asCtor(qr).asProto().dependencies("SmartTipIconCreator, Consts");function qr(t,n,r){var i=this;i.draw=c,i.destroy=d;var o,a,s,u;function l(){a=r.smartTipModel,s=r.smartTipUiComponentModel,u=r.globalStyling}function c(r){o=t.create(a,s,r,u);var i=e.Deferred();return o.show().then(function(e){p();var t=e.getOriginElement();t&&t[0]?i.resolve(t):i.reject()}),e(a).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,g),i.promise()}function d(){return o&&(o.destroy(),o=null),e(a).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,g),e.when()}function p(){e(s).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:n.EVENTS.SmartTips.SmartTipIconShown})}function g(e){o.reposition()}l()}o.register("SmartTipTooltipDrawer").asCtor(Xr).asProto().dependencies("TooltipCreator, Consts, SmartTipDrawerOptionsProvider");function Xr(t,n,r,i){var o=this;o.draw=g,o.destroy=f;var a,s,u,l,c=null,d=e.when();function p(){s=i.smartTipUiComponentModel,l=i.globalStyling,u=i.smartTipModel}function g(e){return c=e,h()}function f(){return c=null,d=d.pipe(v)}function h(){return d=d.pipe(v).pipe(m)}function m(){if(!c)return e.when();var i=s.TooltipStyle||l.Tooltip,o=r.getTooltipDrawerOptions(s,u);a=t.create(c,s.TooltipText,i,o);var d=e.Deferred(),p=d.promise();return a.show().pipe(function(e){S(),d.resolve(e)}),e(u).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,y),p}function v(){if(!a)return e.when();e(u).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,y);var t=a.destroy();return a=void 0,t}function S(){e(s).trigger(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:n.EVENTS.SmartTips.TooltipShown})}function y(e){h()}p()}o.register("SmartTipDrawerOptionsProvider").asCtor(Jr).dependencies("Consts, ObjectMapper");function Jr(e,t){var n=this;n.getTooltipDrawerOptions=i;var r={"uiComponent.Id":"itemId","smartTip.Settings.z-index":"stepSettings.z-index","smartTip.Settings.embedInParent":"stepSettings.embed","smartTip.Settings.tooltipPosition":"tooltipPosition","smartTip.Settings.tooltipPositionOffset":{destination:"tooltipPositionOffset",where:function(e,t){return void 0!==t("smartTip.Settings.tooltipPosition")}},"smartTip.Settings.Position":{destination:"directionToAvoid",transform:function(t){return e.OPPOSITE_POSITION_TYPE[t]},where:function(e,t){return!!t("uiComponent.IsWithIcon")}}};function i(e,n){var i={smartTip:n,uiComponent:e},o={};return t.merge(i,o,r),o.cssClasses=[],n&&o.cssClasses.push("walkme-tooltip-smarttip-"+n.Id),e&&o.cssClasses.push("walkme-tooltip-uicomponent-"+e.Id),o}}o.register("SmartTipInteractiveTooltipDrawer").asCtor($r).asProto().dependencies("TooltipControllerCreator, TooltipVisibilityEventsProvider, WmInternals, Consts");function $r(t,n,r,i,o){var a=this;a.draw=d,a.applyBehavior=p,a.destroy=g;var s,u,l;function c(){s=o.tooltipDrawer,l=o.smartTipComponentModel}function d(r){var i=n.getEventsByElement(r);return u=t.create(s,r,i),u.setEvents(),f(),e.when(r)}function p(e){e&&e.tooltipStartShown&&u&&u.show()}function g(){if(r.unbind(i.EVENTS.SmartTips.TooltipShown,h),!u)return e.when();var t=u.clean();return u=null,t}function f(){r.bind(i.EVENTS.SmartTips.TooltipShown,h)}function h(e,t){if(!t||!t.uiComponent||!u)return;t.uiComponent.Id!=l.Id&&u.hide()}c()}o.register("SmartTipHighlighterDrawer").asCtor(Zr).asProto().dependencies("CommonUtils, Consts");function Zr(t,n,r){var i=this;i.draw=p,i.destroy=f;var a,s,u,l,c;function d(){l=r.drawableType,c=r.drawableId,s=r.highlighterCustomStyling,u=r.smartTipModel}function p(t){return a=g(t),a.highlight(),e(u).on(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when(t)}function g(e){var n=s,r=t.isTrue(u.Settings,"embedInParent",!1),i={element:e,settings:n,drawableType:l,drawableId:c,monitor:!0,defaultSettings:!1,embedInElement:r,cssKeysValues:[{id:c,name:l},{id:u.Id,name:"smarttipid"}]};return o.create("Highlighter",i)}function f(){return a&&(a.unhighlightElement(),a=null),e(u).off(n.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned,h),e.when()}function h(e){a.highlight()}d()}o.register("SmartTipHighlighterDrawerCreator").asCtor(ei);function ei(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var i={drawableType:t,drawableId:e,highlighterCustomStyling:n,smartTipModel:r};return o.create("SmartTipHighlighterDrawer",i)}t()}o.register("ValidationsSmartTipComponentDrawer").asCtor(ti).asProto().dependencies("SmartTipComponentDrawerFactory, SmartTipValidationFeedbackComponentProvider, PromiseUtils, Consts");function ti(t,n,r,i,o){var a=this;a.drawValidationFeedback=p,a.removeValidationFeedback=m,a.applyBehaviorOnFeedback=f;var s,u,l,c;function d(){l=o.smartTipModel,c=!0}function p(t){var r=n.getFeedbackComponent(l,t);if(!h(r)&&!c)return e.when();return c=!1,g(t,r).then(function(){return y(r)})}function g(e,t){var n=[],i=void 0!=u;i&&(u=null,n.push(v));var o=void 0!=t;if(o){u=t;var a=function(){return S(e,t)};n.push(a)}return r.executePromiseChain(n)}function f(e){s&&s.applyBehavior&&s.applyBehavior(e)}function h(e){return e!=u}function m(){return u=null,v()}function v(){if(!s)return e.when();var t=s.destroy();return s=null,t}function S(e,n){return s=t.get(l,n),s.draw(e)}function y(e){e&&e.Type==i.SMART_TIP.COMPONENT_TYPE.Validation?E(i.EVENTS.SmartTips.ValidationFailed,e):E(i.EVENTS.SmartTips.ValidationPassed,e)}function E(t,n){var r={uiComponent:n,eventType:t};e(l).trigger(i.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)}d()}o.register("ValidationsSmartTipComponentDrawerCreator").asCtor(ni);function ni(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e},n=o.create("ValidationsSmartTipComponentDrawer",t);return n}t()}o.register("SmartTip").asCtor(ri).asProto().dependencies("SmartTipVisiblityWatchCreator, Consts, ElementInteractionEventsBinder, SmartTipComponentsIterator, UiChangesTrackerWrapper, SmartTipDrawerCreator, CommonEvents, wmjQuery");function ri(e,t,n,r,i,o,a,s,u){var l=this;l.activate=v,l.deactivate=w;var c,d,p,g,f,h=".wmst";function m(){c=u.smartTipModel,g=o.create(c),A()}function v(){f=!0,d=e.createVisibilityWatch(c,S,C),d.watchForVisibility()}function S(e){if(!f)return;p=e,g.drawSmartTipElements(p),O(),P(),E(),y(e)}function y(e){var n={smartTip:c,element:e};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementShown,n)}function E(){var e={isEmbedInElement:c.Settings.embedInParent,element:p,callback:T};i.trackChanges(e)}function T(){s(c).trigger(t.SMART_TIP_INNER_EVENTS.SmartTipElementRepositioned)}function C(){I(),b()}function b(){var e={smartTip:c};a.raiseEvent(t.EVENTS.SmartTips.SmartTipElementRemoved,e)}function I(){return i.stopTrackingChanges(),p&&(_(),p=null),g.removeSmartTipElements()}function w(){return f=!1,d&&d.cleanResources(),I()}function _(){n.unbind(p,h)}function P(){n.bind(p,h,D)}function A(){r.doOnAllComponents(c,k)}function k(e){s(e).on(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){r.uiComponent=e,s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,r)})}function O(){D(t.EVENTS.SmartTips.SmartTipSegmented)}function D(e){s(c).trigger(t.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,{eventType:e})}m()}o.register("SmartTipSetActivationInitiator").asCtor(ii).dependencies("ElementFinder, SmartTipSetsActivatorFactory, InitiatorManager, Consts");function ii(e,t,n,r){var i=this,o=[];i.start=s,i.stop=l;function a(){}function s(){e.wrapSession(function(){var e={type:r.STEP_PLAY_INITIATOR_ENUM.AUTOSTART};n.setForScope(e,u)})}function u(){o=t.get();for(var e=0;e<o.length;e++)o[e].start()}function l(){for(var e=0;e<o.length;e++)o[e].stop()}a()}o.register("SmartTipDrawer").asCtor(oi).asProto().dependencies("SmartTipHighlighterDrawerCreator, SmartTipComponentsActivatorFactory, PromiseUtils");function oi(e,t,n,r){var i=this;i.drawSmartTipElements=l,i.removeSmartTipElements=p;var o,a,s;function u(){o=r.smartTipModel,a=t.get(o)}function l(e){c()&&d(e),a.activate(e)}function c(){return void 0!=o.Settings.hlType}function d(t){s=e.create(o.Id,"smartTip",o.Settings,o),s.draw(t)}function p(){var e=[a.destroy()];return s&&e.push(s.destroy()),n.executeParallely(e)}u()}o.register("SmartTipDrawerCreator").asCtor(ai);function ai(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return o.create("SmartTipDrawer",t)}t()}o.register("SmartTipGlobalStylingProvider").asCtor(si).dependencies("SiteConfigManager");function si(e){var t=this;t.get=r;function n(){}function r(t){var n=e.get(),r=n.SmarttipSettings,i=r[t];return i}n()}o.register("SmartTipCreator").asCtor(ui);function ui(){var e=this;e.create=n;function t(){}function n(e){var t={smartTipModel:e};return o.create("SmartTip",t)}t()}o.register("SmartTipFirstFailedValidationProvider").asCtor(li).dependencies("ConditionCheckerFactory");function li(e){var t=this;t.getFirstFailedValidation=n;function n(e,t){if(!e.Validations)return null;for(var n=0;n<e.Validations.length;n++){var i=e.Validations[n];if(i.ConditionTrees&&i.ConditionTrees.Validation){var o=i.ConditionTrees.Validation,a=r(o,t);if(!a)return i}}return null}function r(t,n){var r=e.createNew({getSelectedElement:function(){return n}});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}o.register("SmartTipSetManager").asCtor(ci).asProto().dependencies("SmartTipCreator, Consts, PromiseUtils, CommonEvents, GuidGenerator");function ci(t,n,r,i,o,a){var s=this;s.turnOnWithLazyValidations=f,s.turnOnWithImmediateValidations=h,s.turnOff=m;var u,l,c,d,p=!1;function g(){u=a.smartTipModels,c=a.setId,l={},T()}function f(){p||(d=o.generateGuid(),S(),E(),k(),p=!0)}function h(){f(),C(_)}function m(){if(!p)return e.when();return p=!1,y(),v()}function v(){var t=e.map(u,function(e){return l[e.Id]});return r.executeParallelyOnArray(t,I)}function S(){C(b)}function y(){C(P)}function E(){C(A)}function T(){C(w)}function C(t){u&&e.each(u,function(e,n){t(n)})}function b(e){var t=l[e.Id];return t.activate()}function I(e){return e.deactivate()}function w(e){var n=t.create(e);l[e.Id]=n}function _(t){e(t).trigger(n.SMART_TIP_INNER_EVENTS.CheckValidations)}function P(t){e(t).off(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix)}function A(t){e(t).on(n.SMART_TIP_INNER_EVENTS.EventPropogationPrefix,function(n,r){var i={smartTipModel:t};i=e.extend(i,r),O(r.eventType,i)})}function k(){O(n.EVENTS.SmartTips.SetTurnedOn)}function O(t,n){var r={setId:c,playGuid:d};n=e.extend(r,n||{}),i.raiseEvent(t,n)}g()}o.register("SmartTipSetsManager").asCtor(di).dependencies("SmartTipSetManagerCreator, PromiseUtils, DictionaryUtils");function di(t,n,r){var i=this;i.init=u,i.getAll=c,i.getSetManagerById=d,i.turnOffAllSets=p;var o,a;function s(){}function u(e){a=e,l()}function l(){o={};for(var e=a.length-1;e>=0;e--){var n=a[e],r=t.create(n.SmartTips,n.Id);o[n.Id]=r}}function c(){return a}function d(e){return o[e]}function p(){if(!o)return e.when();var t=r.getDictionaryValues(o);return n.executeParallelyOnArray(t,g)}function g(e){return e.turnOff()}s()}o.register("SmartTipSetManagerCreator").asCtor(pi);function pi(){var e=this;e.create=t;function t(e,t){return o.create("SmartTipSetManager",{smartTipModels:e,setId:t})}}o.register("SmartTipValidationFeedbackComponentProvider").asCtor(gi).dependencies("SmartTipFirstFailedValidationProvider");function gi(e){var t=this;t.getFeedbackComponent=r;function n(){}function r(t,n){var r=e.getFirstFailedValidation(t,n);return r||t.PositiveFeedback}n()}o.register("SmartTipVisiblityWatchCreator").asCtor(fi).dependencies("Consts, UIElementVisibilityAttributes");function fi(e,t){var n=this;n.createVisibilityWatch=i;function r(){}function i(e,n,r){var i=e.ConditionTrees.SmartTip,s={logContext:e.Id,stickyType:t.getStickyType(e.Settings),elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings}},isRemoveByCondition:t.getIsRemoveByCondition(e.Settings),conditionCheckerParams:a(e),conditionTree:i&&i.Root?i:void 0,onShow:n,onRemove:r,trackUIChanges:!0},u=o.create("UIVisibilityManager",s);return u}function a(t){return{featureName:e.CONDITION_CHECKER.FEATURE_NAMES.SmartTipSegmentation,elementName:t.Name}}r.apply(null,arguments)}o.register("SmartTipSetActivator").asCtor(hi).asProto().dependencies("SmartTipSetsManager");function hi(e,t){var n=this;n.start=u,n.stop=l;var r,i,a;function s(){r=t.set;var n=e.getSetManagerById(r.Id);i={logContext:r.Id,trackUIChanges:!0,conditionTree:r.ConditionTrees.DisplayRules,onShow:n.turnOnWithLazyValidations,onRemove:n.turnOff,conditionCheckerParams:{elementName:r.Name}}}function u(){if(a)return;a=o.create("UIVisibilityManager",i),a.watchForVisibility()}function l(){a&&a.cleanResources(),a=null}s()}o.register("SmartTipSetsActivatorFactory").asCtor(mi).dependencies("SmartTipSetsManager");function mi(e){var t=this;t.get=r;function n(){}function r(){for(var t=[],n=e.getAll(),r=0;r<n.length;r++){var o=n[r],a=i(o);t.push(a)}return t}function i(e){return o.create("SmartTipSetActivator",{set:e})}n()}o.register("SmartTipComponentsIterator").asCtor(vi);function vi(){var e=this;e.doOnAllComponents=n;function t(){}function n(e,t){if(e.Info&&t(e.Info),e.PositiveFeedback&&t(e.PositiveFeedback),e.Validations)for(var n=0;n<e.Validations.length;n++){var r=e.Validations[n];t(r)}}t()}o.register("DisabledSmartTipsRemover").asCtor(Si).dependencies("DisabledElementsRemover");function Si(e){var t=this;t.remove=n;function n(t){for(var n=0;n<t.length;n++){var i=t[n].SmartTips;e.remove(i,r)}}function r(e){return!e.IsEnabled}}var yi=function(){function e(e){this.deployablesDict={},this.lib=e.lib,this.setDeployables(e.deployables)}return e.prototype.setDeployables=function(e){if(!e)return;for(var t=0;t<e.length;t++)this.deployablesDict[e[t].Id]=e[t]},e.prototype.getActionData=function(e){return{Type:"",ItemId:"",Name:""}},e.prototype.isWithAction=function(e){return!1},e.prototype.activateById=function(e,t,n){},e.prototype.getById=function(e){return this.deployablesDict[e]},e.prototype.getAll=function(){var e=[],t=this.deployablesDict;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e.sort(function(e,t){if(void 0===e.OrderIndex||void 0===t.OrderIndex)return 0;return e.OrderIndex-t.OrderIndex})},e.prototype.getDeployablesDict=function(){return this.deployablesDict},e.prototype.releaseAll=function(e){},e.prototype.autoStartEnabled=function(e){return!1},e.prototype.name=function(){return this._name},e}();o.register("DeployablesManagerFactory").asCtor(Ei).dependencies("Consts");function Ei(e){var t=this;t.get=a;var n;function r(){}function i(){n={},n[e.DEPLOYABLE_TYPE.Tutorial]=o.get("TutorialsManager"),n[e.DEPLOYABLE_TYPE.Content]=o.get("ContentsManager"),n[e.DEPLOYABLE_TYPE.Task]=o.get("TodoListManager"),n[e.DEPLOYABLE_TYPE.Launcher]=o.get("LaunchersManager"),n[e.DEPLOYABLE_TYPE.Category]=o.get("CategoriesManager"),n[e.DEPLOYABLE_TYPE.Collection]=o.get("CollectionsManager"),n[e.DEPLOYABLE_TYPE.Shuttle]=o.get("ShuttlesManager"),n[e.DEPLOYABLE_TYPE.AbExperiment]=o.get("ExperimentsManager"),n[e.DEPLOYABLE_TYPE.Survey]=o.get("SurveysManager"),n[e.DEPLOYABLE_TYPE.ShoutOut]=o.get("ShoutOutsManager"),n[e.DEPLOYABLE_TYPE.ConditionBlock]=o.get("ConditionBlocksManager"),n[e.DEPLOYABLE_TYPE.Tag]=o.get("TagsManager"),n[e.DEPLOYABLE_TYPE.BusinessSolution]=o.get("BusinessSolutionsManager"),n[e.DEPLOYABLE_TYPE.TrackedPage]=o.get("TrackedPagesManager"),n[e.DEPLOYABLE_TYPE.Course]=o.get("CoursesManager"),n[e.DEPLOYABLE_TYPE.Lesson]=o.get("LessonsManager"),n[e.DEPLOYABLE_TYPE.Spotlight]=o.get("SpotlightsManager"),n[e.DEPLOYABLE_TYPE.Tooltip]=o.get("TooltipsManager"),n[e.DEPLOYABLE_TYPE.TrackedElement]=o.get("TrackedElementsManager"),n[e.DEPLOYABLE_TYPE.SearchProviderUrl]=o.get("SearchProviderUrlsManager")}function a(e){return n||i(),n[e]}r()}o.register("DeployableSurveyActivator").asCtor(Ti).dependencies("Logger, SurveysManager, AutoStartManager");function Ti(e,t,n){var r=this;r.activateSurvey=i;function i(n,r,i,a,s){e.customerLog("Checking if need to open survey");var u=o(n,r,i);if(u.shouldStart){e.customerLog("Starting survey");var l=t.activateById(n,a,s);if(l)for(var c=0;c<u.cookiesToSave.length;c++)u.cookiesToSave[c]()}}function o(r,i,o){var s={shouldStart:!1,cookiesToSave:[]},u=t.getById(r);if(!u)return e.customerLog("Couldn't find survey with id:"+r,0,"survey"),s;var l=n.checkRepeatCookie("wm-SrvRep-"+u.Id,a(u.Settings));return l&&l.shouldStart&&(s.cookiesToSave.push(l.store),l=n.checkRepeatCookie(i+"-"+u.Id,o),s.cookiesToSave.push(l.store),s.shouldStart=l.shouldStart),s}function a(e){return e.repeat||"visit"}}o.register("DeployableTypeNameProvider").asCtor(Ci).dependencies("Consts");function Ci(e){var t=this;t.getDeployableTypeNameByTypeNumber=n;function n(t){var n=void 0;return mtjQuery.each(e.DEPLOYABLE_TYPE,function(e,r){if(t==r)return n=e,!1}),n}}o.register("TagsInjector").asCtor(bi).dependencies("ConditionsCombinerFactory");function bi(e){var t=this;t.inject=n;function n(t,n,i){var o=i.isNewConditions?"ConditionTrees":"Settings";t[o]||(t[o]={});var a=t[o][i.name];if(!n)return a;r(t,i.enabled)&&(t.Settings[i.enabled]=1,a=void 0);var s=e.get(i.isNewConditions),u=s.combine("And",n,a);return t[o][i.name]=u,u}function r(e,t){return t&&"true"!==e.Settings[t]&&!e.Settings[t]}}o.register("TagsSegmentationProperties").asCtor(Ii).dependencies("Consts");function Ii(e){var t=this;t.properties={},t.properties[e.DEPLOYABLE_TYPE.Tutorial]={name:"DOCT",enabled:"DOCTEnabled"},t.properties[e.DEPLOYABLE_TYPE.Task]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Launcher]={name:"PlayLauncherConditionTree"},t.properties[e.DEPLOYABLE_TYPE.Shuttle]={name:"DisplayCondition",enabled:"DisplayConditionEnabled"},t.properties[e.DEPLOYABLE_TYPE.Content]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.BusinessSolution]={name:"DisplayRules",enabled:"segmentationEnabled",isNewConditions:!0},t.properties[e.DEPLOYABLE_TYPE.Course]={name:"DisplayCondition"},t.properties[e.DEPLOYABLE_TYPE.SearchProviderUrl]={name:"DisplayCondition"}}var wi=function(){function e(e){this.eventSender=e}return e.prototype.map=function(e,t){return{type:this.eventSender.EVENT_APPS.Question,oType:e.getType(),owId:t.surveyJson.Id,owName:t.surveyJson.Name,owType:this.eventSender.EVENT_APPS.Survey,pInit:this.getPInit(t)}},e.prototype.getPInit=function(e){if(e.tutorialId)return this.getTutorialPInit(e);if(e.businessSolutionId)return this.getBusinessSolutionPInit(e)},e.prototype.getTutorialPInit=function(e){return{id:e.tutorialId,appType:"wt"}},e.prototype.getBusinessSolutionPInit=function(e){return{id:e.businessSolutionId,appType:"bizFlow"}},e}();o.register("QuestionToEventMapper").asCtor(wi).dependencies("EventSender"),o.register("AnalyticsTrackerConsts").asCtor(_i);function _i(){var e=this;e.EVENT_NAMESPACE=".wmte",e.LOG_LEVEL_DEFAULT=3,e.FEATURES={analyticsTracking:"analyticsTracking",autoTracking:"autoTracking",pageChangeTracking:"pageChangeTracking"}}o.register("AnalyticsTrackerLogger").asCtor(Pi).dependencies("Logger, AnalyticsTrackerConsts, Consts");function Pi(e,t,n){var r=this;r.customerLog=i,r.error=o;function i(r){e.customerLog(r,t.LOG_LEVEL_DEFAULT,n.FEATURES_LOGS.AnalyticsTracking)}function o(t){e.error(t)}}o.register("TrackedElementEventBinder").asCtor(Ai).dependencies("AnalyticsTrackerConsts, AnalyticsTrackerLogger, TrackedElementEventDataSender, ElementInteractionEventsBinder, PageVisitGuidProvider, ChangesTrackerFactory");function Ai(e,t,n,r,i,o){var a=this;a.bind=s,a.unbind=u;function s(a,s,u){t.customerLog(Nf("TrackedElementEventBinder - binding events to element with id {0}",s.Id)),r.bind(a,e.EVENT_NAMESPACE,function(e){i.get(o.get().getCurrentIndex()).then(function(t){n.send(e,t,s,u,a)})})}function u(n,i){t.customerLog(Nf("TrackedElementEventBinder - unbinding events from element with id {0}",i.Id)),r.unbind(n,e.EVENT_NAMESPACE)}}o.register("TrackedElementEventDataSender").asCtor(ki).dependencies("Consts, EventSender, CommonEvents");function ki(e,t,n){var r=this;r.send=i;function i(r,i,o,a,s){var u={type:e.EVENT_SENDER_EVENT_APPS.TrackedElement,oId:o.Id,oName:o.Name,owType:e.EVENT_SENDER_EVENT_APPS.TrackedPage,pId:(a?a.Id:"0")+"_"+i};a?(u.owId=a.Id,u.owName=a.Name):(u.owId=0,u.owName="Site-Wide");var l={eventName:r,eventData:u,trackedElement:o,trackedPage:a,element:s};n.raiseEvent(e.EVENTS.TrackedElementBeforeSendEvent,l),t.postEvent(r,u)}}o.register("TrackedElementInteractionsToggler").asCtor(Oi).dependencies("TrackedElementEventBinder");function Oi(e){var t=this;t.toggleBinder=n,t.stopBinder=r;function n(t,n,r,i){i?e.bind(t,n,r):e.unbind(t,n)}function r(t,n){t&&e.unbind(t,n)}}var Di=function(e){r(t,e);function t(t,n,r,i){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedElement}),this.arrayUtils=r,this.trackedElementsVisibilityTrackerFactory=i,this._name="TrackedElement",this.setDeployables([])}return t.prototype.getAllByPageId=function(e){return this.arrayUtils.filter(this.getAll(),function(t){return t.TrackedPageId==e})},t.prototype.start=function(){this._trackedElementsVisibilityTracker=this.trackedElementsVisibilityTrackerFactory.create({}),this._trackedElementsVisibilityTracker.startTrack()},t.prototype.releaseAll=function(){if(!this._trackedElementsVisibilityTracker)return;this._trackedElementsVisibilityTracker.stopTrack()},t}(yi);o.register("TrackedElementsManager").asCtor(Di).dependencies("Lib, Consts, ArrayUtils, TrackedElementsVisibilityTrackerFactory");function Ni(t,n,r){var i=this;i.stopTrack=u,i.startTrack=l;var o,a=[];function s(){a=t.getAllByPageId(r.trackedPage&&r.trackedPage.Id),o=n.create(r)}function u(){o.stopTrack()}function l(){e(a).each(function(e,t){o.startTrack(t)})}s()}function xi(e,t,n,r){var i=this;i.evaluateAsync=s,i.cleanResources=l,i.getElement=u;var o,a;function s(i){var s=-1;a=t.getStickyType(r.trackedElement.Settings),a!=e.STICKY_TYPE.ONCE&&(s=2e3);var u={logContext:r.trackedElement.Id,findElementParams:{IdentifySettings:r.trackedElement.IdentifySettings},trackUIChanges:!0,elementEvaluationIntervalMs:s};o=n.create(u),o.setOnVisibilityChanged(function(t){i(t==e.VISIBILITY_STATE.VISIBLE),t==e.VISIBILITY_STATE.VISIBLE&&a!=e.STICKY_TYPE.STRONG&&o.cleanResources()}),o.evaluateElementVisibilityAsynch()}function u(){if(o)return o.getElement()}function l(){o&&o.cleanResources()}}o.register("TrackedPageEventDataSender").asCtor(Li).dependencies("Consts, EventSender");function Li(e,t){var n=this;n.send=r;function r(n,r){var i={type:e.EVENT_SENDER_EVENT_APPS.TrackedPage,oId:r.Id,oName:r.Name,pId:r.Id+"_"+n};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Play,i)}}var Mi=function(e){r(t,e);function t(t,n,r){e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.TrackedPage}),this.trackedPagesEventsListener=r,this._name="TrackedPage",this.setDeployables([])}return t.prototype.start=function(){this.trackedPagesEventsListener.startListen()},t.prototype.setDeployables=function(t){if(!t)return;e.prototype.setDeployables.call(this,t),this.trackedPagesEventsListener.init(t)},t.prototype.releaseAll=function(){this.trackedPagesEventsListener.stopListen()},t}(yi);o.register("TrackedPagesManager").asCtor(Mi).dependencies("Lib, Consts, TrackedPagesEventsListener");function Fi(e,t){var n=this;n.evaluate=o;var r;function i(){var n={featureName:"evaluate tracked page segmentation",elementName:t.trackedPage.Name,stopPollingAfterEvaluateTrue:!1};r=e.createNew(n)}function o(){if(!t.trackedPage.ConditionTrees||!t.trackedPage.ConditionTrees.DisplayRules)return!0;var e=t.trackedPage.ConditionTrees.DisplayRules;return r.getCurrentEvaluationValueAndStopEvaluating(e)}i()}function Ri(e,t,n,r,i,o,a,s){var u=this;u.stopListen=g,u.evaluateAndUpdateContainer=f;var l,c,d;function p(){l=o.create(s),c=a.create(s),d=s.trackedPage}function g(){l.stopTrack()}function f(n){var i=c.evaluate();e.customerLog(Nf("TrackedPageEventsListener - for page with id {0}, segmentation condition was{1}met",d.Id,i?" ":" not ")),i?(r.get(n).then(h),l.startTrack(),d.IsComplex&&t.add(d)):(l.stopTrack(),d.IsComplex&&t.remove(d))}function h(e){i.isAutoTrackingOn()||n.send(e,d)}p()}o.register("TrackedPagesEventsListener").asCtor(Bi).dependencies("AnalyticsTrackerLogger, ChangesTrackerFactory, TrackedActivatedPagesContainer, TrackedPageEventsListenerFactory");function Bi(t,n,r,i){var o,a=this,s=[];a.init=l,a.startListen=c,a.stopListen=d;var u;function l(e){t.customerLog("TrackedPagesEventsListener - init"),o=e,u=n.get()}function c(){t.customerLog("TrackedPagesEventsListener - startListen"),u.bind(p),e(o).each(function(e,t){var n={trackedPage:t},r=i.create(n);s.push(r)}),p({uiChangeIndex:0})}function d(){t.customerLog("TrackedPagesEventsListener - stopListen"),u.unbind(p);for(var e=0;e<s.length;e++)s[e].stopListen();s=[]}function p(e){for(var t=0;t<s.length;t++)s[t].evaluateAndUpdateContainer(e.uiChangeIndex);r.resolveUIChange(e.uiChangeIndex)}}o.register("PageVisitGuidProvider").asCtor(Ui).dependencies("ChangesTrackerFactory, GuidGenerator, Consts");function Ui(e,n,r){var i,o,a,s=this;s.get=d,s.releaseResources=g;var u;function l(){o=0,u=e.get(),u.bind(c),p(),a=mtjQuery.Deferred(),mtjQuery(t).on(r.EVENTS.NewSession,p)}function c(e){o=e.uiChangeIndex,p(),a&&a.resolve(i),a=mtjQuery.Deferred()}function d(e){return e<o?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==o?mtjQuery.Deferred().resolve(i):a.promise()}function p(){i=n.generateGuid(!0)}function g(){mtjQuery(t).off(r.EVENTS.NewSession,p),u.unbind(c)}l()}o.register("TrackedElementIndicatorService").asCtor(Wi).dependencies("FeaturesManager, AnalyticsTrackerConsts");function Wi(e,t){var n=this;n.isAutoTrackingOn=r;function r(){return e.isFeatureEnabled(t.FEATURES.autoTracking)}}o.register("TrackedActivatedPagesContainer").asCtor(Vi).dependencies("DictionaryUtils");function Vi(e){var t,n,r=this;r.add=s,r.remove=u,r.getAll=l,r.resolveUIChange=a;var i;function o(){i={},t=0,n=mtjQuery.Deferred()}function a(e){t=e,n&&n.resolve(c()),n=mtjQuery.Deferred()}function s(e){i[e.Id]=e}function u(e){delete i[e.Id]}function l(e){return e<t?mtjQuery.Deferred().reject("uiChangeIndex was smaller the the current one"):void 0===e||e==t?mtjQuery.Deferred().resolve(c()):n.promise()}function c(){return e.getDictionaryValues(i)}o()}function Gi(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){(e.IdentifySettings.IsJquerySelector||1==e.IsViewsOnly)&&t.startTrack(e,o)}function i(){t.stopTrack(a)}function o(t){0==t.trackedElement.IsViewsOnly&&e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}function a(t,n){0==n.IsViewsOnly&&e.stopBinder(t,n)}}function Hi(e,t){var n=this;n.startTrack=r,n.stopTrack=i;function r(e){t.startTrack(e,o)}function i(){t.stopTrack(e.stopBinder)}function o(t){e.toggleBinder(t.element,t.trackedElement,t.trackedPage,t.isVisible)}}function ji(t,n,r,i,o,a,s){var u=this;u.startTrack=d,u.stopTrack=p;var l;function c(){l={}}function d(e,t){if(l[e.Id])return;n.customerLog(Nf("TrackedElementVisibilityTracker - trackVisibility for element with id {0}",e.Id));var r={trackedElement:e},i=a.create(r);l[e.Id]={evaluator:i,trackedElement:e},i.evaluateAsync(function(n){var r={isVisible:n,trackedElement:e,trackedPage:s.trackedPage,visibilityCallback:t};g(r)})}function p(t){n.customerLog(Nf("TrackedElementVisibilityTracker - stopTrack")),e.each(l,function(e,n){var r=n.evaluator.getElement();t&&t(r,n.trackedElement),n.evaluator.cleanResources()}),l={}}function g(e){n.customerLog(Nf("TrackedElementVisibilityTracker - visibility changed for element with id {0} to {1}",e.trackedElement.Id,e.isVisible));var a=l[e.trackedElement.Id].evaluator.getElement();e.isVisible&&i.get(o.get().getCurrentIndex()).then(function(n){r.send(t.EVENT_SENDER_EVENT_TYPES.Visible,n,e.trackedElement,e.trackedPage,a)}),e.element=a,e.visibilityCallback&&e.visibilityCallback(e)}c()}o.register("ElementVisibilityEvaluatorFactory").asCtor(Yi).dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator");function Yi(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new Rd(e,t,n,r,i,o,a,s)}}o.register("TrackedElementsVisibilityTrackerFactory").asCtor(zi).dependencies("TrackedElementVisibilityTrackerFactory");function zi(e){var t=this;t.create=n;function n(t){var n=o.get("TrackedElementsManager");return new Ni(n,e,t)}}o.register("TrackedElementVisibilityEvaluatorFactory").asCtor(Qi).dependencies("Consts, UIElementVisibilityAttributes, ElementVisibilityEvaluatorFactory");function Qi(e,t,n){var r=this;r.create=i;function i(r){return new xi(e,t,n,r)}}o.register("TrackedElementVisibilityTrackerFactory").asCtor(Ki).dependencies("TrackedElementIndicatorService, Consts, AnalyticsTrackerLogger, TrackedElementEventDataSender, PageVisitGuidProvider, ChangesTrackerFactory, TrackedElementInteractionsToggler, TrackedElementVisibilityEvaluatorFactory");function Ki(e,t,n,r,i,o,a,s){var u,l=this;l.create=d;function c(){u=e.isAutoTrackingOn()}function d(e){var l=new ji(t,n,r,i,o,s,e);return u?new Gi(a,l):new Hi(a,l)}c()}o.register("TrackedPageEventsListenerFactory").asCtor(qi).dependencies("AnalyticsTrackerLogger, TrackedActivatedPagesContainer, TrackedPageEventDataSender, PageVisitGuidProvider, TrackedElementIndicatorService, TrackedElementsVisibilityTrackerFactory, TrackedPageSegmentConditionCheckerFactory");function qi(e,t,n,r,i,o,a){var s=this;s.create=u;function u(s){return new Ri(e,t,n,r,i,o,a,s)}}o.register("TrackedPageSegmentConditionCheckerFactory").asCtor(Xi).dependencies("ConditionCheckerFactory");function Xi(e){var t=this;t.create=n;function n(t){return new Fi(e,t)}}o.register("ChangesTrackerFactory").asCtor(Ji).dependencies("FeaturesManager, AnalyticsTrackerConsts, UIChangeTracker, PageChangeTracker");function Ji(e,t,n,r){var i=this;i.get=s;var o;function a(){o=e.isFeatureEnabled(t.FEATURES.pageChangeTracking)?r:n;
}function s(){return o}a()}function $i(e,t,n){var r,i=o.create("WalkmeOOP",this),a=i.Prop.Public("contentMargin",15);i.Override("manipulationsForInlineCss",function(e){if(t.isIE(8,"lte"))return;r.balloonSettings()}),i.Override("createTemplateData",function(){var n=r.createTemplateData();return n.outerDiv=r.getCustomDivHtml("inner-div"),n.colors.xBtn=r.balloonSettings().XButtonColor,n.top={minHeight:30,textAlign:n.direction.side,content:{sideMargin:a(),oppositeSideMargin:a()-2}},n.shadow=e.calculate(r.balloonSettings().ShadowType,r.balloonSettings().ShadowLevel,r.balloonSettings().ShadowColor),n.isNotIe7=!t.isIEBrowser(7),n}),i.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-tooltip-outer-div walkme-tooltip-v1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-tooltip-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; -webkit-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); -moz-box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); box-shadow: 0px 3px 2px -3px rgba(0, 0, 0, 0.6); font-family: walkme-opensans; border-radius:3px; overflow: hidden;'><div class='walkme-tooltip-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius: 3px; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-tooltip-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius: 3px;'><div class='walkme-tooltip-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'>"),r.s(r.d("data.content",e,t,1),e,t,0,1006,1264,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-tooltip-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; padding: 9px 9px 8px 9px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b("; overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div></div></div></div>"),r.fl()};return e});function s(){i.ExtendsInstance(o.create("BaseBalloon",n)),r=i._base}s.apply(null,arguments)}o.register("TooltipV1").asCtor($i).asProto().dependencies("ShadowCalculator, HostData"),o.register("TooltipDrawerV1").asCtor(Zi).asProto().dependencies("CommonUtils, ResourceManager, UiUtils, Consts, BalloonPositionProvider, PlatformsService, FeaturesManager, ContainerAppender");function Zi(t,n,r,i,a,s,u,l,c){var d,p=o.create("WalkmeOOP",this),g=[];p.Override("addBalloonDiv",function(n,i){var o=t.createElementInDocument(n,i[0].ownerDocument);return u.isFeatureEnabled("accessibility")&&(focusableElements=o.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),t.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),r.setLangAttribute(o),o.css("display","none"),l.appendToContainer(i,o)}),p.Override("decideWhereToPop",function(e,t,n,r,i,o){if(void 0!=c.tooltipPosition)return a.getPredefinedPosition(e,t,r,i,c.tooltipPosition,c.tooltipPositionOffset);return a.findBestPosition(e,t,r,i,c.directionToAvoid)}),p.Override("loadResources",function(e,t){var r=d.balloonSettings().FontsData;r?n.fonts(r,e,t,t):t&&t()}),p.Override("fixWidth",function(e,t,n,r){d.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),p.Override("getArrowsColors",function(e){var t=d.balloonSettings(),n=t.Color,r=t.BorderColor;return{innerArrow:n,outterArrow:r}}),p.Override("fixArrows",function(e){var t=e.balloonDiv,n=e.arrowsDivs,r=e.result,o=e.isInCaptureMode,a=e.isQuirksMode,s=d.balloonSettings().direction,u=r.positionType==i.POSITION_TYPE.Left||r.positionType==i.POSITION_TYPE.Right;u?S(t,n,r,s,a):o&&r.positionType==i.POSITION_TYPE.Top&&y(n),e.isQuirksMode&&T(t)}),p.Override("fixQuirksMode",function(e){}),p.Override("finalizeArrowsPosition",function(e,t,n){switch(e){case i.POSITION_TYPE.Top:t.top--;break;case i.POSITION_TYPE.Bottom:t.top++;break;case i.POSITION_TYPE.Left:t.left--;break;case i.POSITION_TYPE.Right:t.left++}}),p.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-tooltip-content",t);n.css("width",e+"px"),t.css("width","auto");var r=t.width();t.css("width",r+"px")});p.Override("generateIdForBalloon",f);function f(e){return"walkme-tooltip-"+c.itemId}p.Override("generateClassesForBallon",h);function h(e,t,n){return g}p.Override("generateClassesForArrows",m);function m(e,t,n){return["walkme-custom-tooltip-arrow","walkme-custom-tooltip-arrow-"+t,"walkme-custom-tooltip-arrow-"+e,"walkme-custom-tooltip-arrow-"+e+"-"+t,"walkme-custom-tooltip-item-"+c.itemId]}function v(){p.ExtendsInstance(o.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;g=c.cssClasses||[],d=p._base,E(),d.balloonClass("TooltipV1"),d.minWidth(0),d.minPopupWidth(e),d.arrowHeight(5),d.arrowBaseWidth(9),d.hasBorder(!1),d.shouldScrollToElement(!1),d.balloonTitleSelector(".walkme-tooltip-content"),d.balloonContentSelector(".walkme-tooltip-content")}function S(e,t,n,r,i){e.show();var o=d.arrowBaseWidth(),a=parseFloat(t[0].css("top")),s=parseFloat(e.css("top")),u=e[0]?e[0].offsetHeight:0,l=a-s,c=u;if(e.hide(),c-l<o&&c>l){var p=s-(c-l);e.css("top",p+"px")}}function y(e){e[0].css("border-top-color",d.balloonSettings().Color)}function E(){s.getCurrentPlatform()==i.PLATFORM.MobileWeb&&d.defaultMaxWidth(230)}function T(t){var n,r=e(".walkme-tooltip-arrow-inner",t.parent()),i=e(".walkme-tooltip-arrow-outer",t.parent());if(r.hasClass("walkme-tooltip-arrow-right"))n="right";else{if(!r.hasClass("walkme-tooltip-arrow-left"))return;n="left"}r.css("border-"+n+"-color",d.balloonSettings().Color),i.css("border-"+n+"-color",d.balloonSettings().BorderColor)}v.apply(null,arguments)}o.register("Tooltip").asCtor(eo).asProto().dependencies("TooltipBalloonAdapter");function eo(t,n){var r=this;r.show=a,r.destroy=s;var i;function o(){i=t.createBalloon(n)}function a(){var t=e.Deferred();return i.Show(!1,function(e,n){t.resolve(n)}),t.promise()}function s(){var t=e.Deferred();return i.destroy(!1,function(){t.resolve()}),t.promise()}o.apply(null,arguments)}o.register("TooltipBalloonAdapter").asCtor(to).dependencies("Consts, PositionHelper, Logger, BalloonButtonsEventsBinder, SiteConfigManager");function to(t,n,r,i,a){var s=this;s.createBalloon=u;function u(s){var u=a.get(),c=l(u,s.styling),d=e.extend(!0,{},s.drawingOptions);d.balloonSettings=c;var p={element:s.element,forceEmbedBalloonInIframe:!1,positionHelper:n,stepSettings:d.stepSettings||{},text:{title:"",content:s.text,subText:""},data:{type:t.STEP_TYPE.Normal},configuration:c,logger:r,drawer:o.create("TooltipDrawerV1",d),siteConfig:u,bindButtonsFunc:i.addButtonEventsToBalloon},g=o.create("Balloon",p);return g}function l(e,t){var n=Df(e.BalloonSettings);return c(n,t),n.Vibrate=!1,d(n),n}function c(e,t){e.Color=t.backColor,e.BorderColor=t.borderColor,e.ContentColor=t.textColor,e.BalloonBorderWidth=1}function d(e){e.Animation&&(e.Animation={Id:t.ANIMATION_TYPES.None,InitCSS:{display:"block"},MetaData:{},Options:{},Properties:{}})}}o.register("TooltipCreator").asCtor(no).dependencies();function no(){var e=this;e.create=n;function t(){}function n(e,t,n,r){var i={element:e,text:t,styling:n,drawingOptions:r};return o.create("Tooltip",i)}t.apply(null,arguments)}o.register("TooltipActions").asCtor(ro);function ro(){var e=this;e.actions={element:{mouseover:"mouseover.element",mouseout:"mouseout.element",focus:"focus.element",blur:"blur.element",click:"click.element"},tooltip:{show:"show.tooltip",hide:"hide.tooltip"},document:{click:"click.document",touchstart:"touchstart.document"}}}o.register("TooltipController").asCtor(io).asProto().dependencies("Consts, wmjQuerySafe, EventBinder, StatesMachineCreator, TooltipStatesMachineConfigProvider, TooltipEventsConfiguration, TooltipActions");function io(t,n,r,i,o,a,s,u){var l=this;l.clean=E,l.setEvents=b,l.show=T,l.hide=C;var c,d,p,g,f,h,m=1e7,v=Math.floor(Math.random()*m),S=".Walkme.Tooltip."+v;function y(){d=u.tooltipDrawer,p=u.boundElement;var e=o.getConfig(k),t=a.get(u.events);g=t.eventsForElement,f=t.eventsForDocument,h=t.eventsForTooltip,c=i.create(e);for(var n=0;n<e.stateMachineInitialActions.length;n++){var r=e.stateMachineInitialActions[n];r.shouldSimulateAction(p)&&c.evaluate(r.action)}}function E(){var e=n(p);return _(e,g),_(e.getDocument(),f),c.reset(),d.destroy()}function T(){c.evaluate(s.actions.tooltip.show)}function C(){c.evaluate(s.actions.tooltip.hide)}function b(){w(p,g,P),w(e(p[0].ownerDocument),f,A)}function I(){d.draw(p).then(function(e){e&&w(e,h,P)})}function w(e,t,n){if(!t)return;for(var i=t.length-1;i>=0;i--){var o=t[i];r.bind(e,o+S,n(o))}}function _(e,t){if(!t)return;for(var n=t.length-1;n>=0;n--){var i=t[n];r.unbind(e,i+S)}}function P(e){return function(){c.evaluate(e)}}function A(t){return function(n){n.target==p[0]||e.contains(p[0],n.target)||c.evaluate(t)}}function k(e,t){if(!t)return;t.shouldShow?I():t.shouldHide&&d.destroy()}y()}o.register("TooltipControllerCreator").asCtor(oo);function oo(){var e=this;e.create=n;function t(){}function n(e,t,n){return o.create("TooltipController",{tooltipDrawer:e,boundElement:t,events:n})}t.apply(null,arguments)}o.register("TooltipVisibilityEventsProvider").asCtor(ao).dependencies("Consts, HtmlElementsDataProvider");function ao(e,t){var n=this;n.getEventsByElement=i;function r(){}function i(n){var r={};return r[e.TOOLTIPS_ACTIVATION_MODES.Mouse]=!0,t.isInput(n)&&(r[e.TOOLTIPS_ACTIVATION_MODES.Focus]=!0),r}r.apply(null,arguments)}o.register("TooltipStatesMachineConfigProvider").asCtor(so).dependencies("Consts, TooltipActions");function so(t,n){var r=this;r.getConfig=f;var i={mouseInside:1,focused:2},o={hidden:"hidden",delayShow:"delayShow",visible:"visible",delayHide:"delayHide"},a=([n.actions.element.mouseover,n.actions.element.mouseout],[n.actions.element.focus,n.actions.element.blur],{});a[n.actions.element.mouseover]={addFlag:[i.mouseInside]},a[n.actions.element.mouseout]={removeFlag:[i.mouseInside]},a[n.actions.element.focus]={addFlag:[i.focused]},a[n.actions.element.blur]={removeFlag:[i.focused]};var s=[{fromState:o.delayShow,toState:o.visible,valueToReturn:{shouldShow:1}},{fromState:o.delayHide,toState:o.hidden,valueToReturn:{shouldHide:1}},{fromState:o.visible,toState:o.hidden,valueToReturn:{shouldHide:1}},{fromState:o.hidden,toState:o.visible,valueToReturn:{shouldShow:1}}],u=[{fromState:o.delayShow,timeout:300,toState:o.visible},{fromState:o.delayHide,timeout:300,toState:o.hidden}],l=[{fromState:o.hidden,onAction:n.actions.tooltip.show,toState:o.delayShow},{fromState:o.delayHide,onAction:n.actions.tooltip.show,toState:o.visible},{fromState:o.visible,onAction:n.actions.tooltip.hide,toState:o.hidden,ifNotFlagged:[i.focused,i.mouseInside]},{fromState:o.delayShow,onAction:n.actions.tooltip.hide,toState:o.hidden}],c=[{fromState:o.hidden,onAction:n.actions.element.mouseover,toState:o.delayShow},{fromState:o.delayShow,onAction:n.actions.element.mouseout,toState:o.hidden},{fromState:o.visible,onAction:n.actions.element.mouseout,toState:o.delayHide,ifNotFlagged:[i.focused]},{fromState:o.delayHide,onAction:n.actions.element.mouseover,toState:o.visible},{fromState:o.hidden,onAction:n.actions.element.click,toState:o.visible},{fromState:o.visible,onAction:n.actions.element.click,toState:o.hidden},{fromState:o.visible,onAction:n.actions.document.click,toState:o.hidden,ifNotFlagged:[i.focused]},{fromState:o.visible,onAction:n.actions.document.touchstart,toState:o.hidden,ifNotFlagged:[i.focused]}],d=[{fromState:o.hidden,onAction:n.actions.element.focus,toState:o.visible},{fromState:o.visible,onAction:n.actions.element.blur,toState:o.hidden,ifNotFlagged:[i.mouseInside]},{fromState:o.delayShow,onAction:n.actions.element.focus,toState:o.visible},{fromState:o.delayHide,onAction:n.actions.element.focus,toState:o.visible}],p=[{shouldSimulateAction:function(t){return e(t).is(":focus")},action:n.actions.element.focus}];function g(){}function f(e){var t=l;return t=t.concat(c),t=t.concat(d),{initState:o.hidden,transitions:t,timedOutTransitions:u,globalActionFlags:a,defaultTransitionValuesToReturn:s,onStateChangedCallback:e,stateMachineInitialActions:p}}g()}R.register(L.PLATFORM.Web,function(){o.register("TooltipEventsConfiguration").asCtor(uo).dependencies("Consts, TooltipActions")});function uo(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[],a=[t.actions.element.mouseover,t.actions.element.mouseout],s=[t.actions.element.focus,t.actions.element.blur];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat(a),o=o.concat(a)),n[e.TOOLTIPS_ACTIVATION_MODES.Focus]&&(r=r.concat(s)),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}R.register(L.PLATFORM.MobileWeb,function(){o.register("TooltipEventsConfiguration").asCtor(lo).dependencies("Consts, TooltipActions")});function lo(e,t){var n=this;n.get=r;function r(n){var r=[],i=[],o=[];return n[e.TOOLTIPS_ACTIVATION_MODES.Mouse]&&(r=r.concat([t.actions.element.click]),o=o.concat([t.actions.element.click]),i=i.concat([t.actions.document.click,t.actions.document.touchstart])),{eventsForElement:r,eventsForDocument:i,eventsForTooltip:o}}}o.register("DisabledCourseQuizzesRemover").asCtor(co);function co(){var e=this;e.remove=t;function t(e){for(var t=0;t<e.length;t++){var n=e[t].Quiz;n&&!n.IsEnabled&&delete e[t].Quiz}}}o.register("QuizStatusManager").asCtor(po).dependencies("Consts, ServerStorageManager");function po(e,t){var n=this;n.setQuizStatus=r,n.getQuizStatus=i;function r(n,r){t.saveData(o(n),r,e.COOKIE_LIFE_10_YEARS)}function i(e){return t.getData(o(e),null)}function o(t){return e.TeachMe.QUIZ_RESULT_STORAGE_KEY_PREFIX+t.Id}}o.register("QuizPlayer").asCtor(go).dependencies("UIComponentsFactory, QuizStatusManager, Consts, CommonEvents");function go(t,n,r,i){var a=this;a.releaseAll=l,a.playQuiz=c;var s,u;function l(e){u&&u.destroy(),u=null,e&&e()}function c(e){return s=o.create("QuizPlayEventRaiser",{quiz:e}),s.raiseQuizPlayEvent(),d(e).pipe(p).pipe(g).pipe(f).always(function(){i.raiseEvent(r.EVENTS.UIComponentDestroyed),u=null})}function d(e){var n=e.WelcomePage,r=t.get(n.UiComponentId,[n,e]);return s.registerXButtonClickedEvent(r),h(r,"start-quiz").pipe(function(){return e})}function p(r){var i=t.get(r.UiComponentId,r);return s.registerXButtonClickedEvent(i),h(i,"quiz-submitted").then(function(e,t,n){for(var r=0;r<n.questionsResults.length;r++){var i=n.questionsResults[r];s.raiseQuizAnswerSubmittedEvent(i)}s.raiseQuizSubmittedEvent()}).pipe(function(t,r,i){var o=1==i.didPassQuiz,a=o?r.SuccessSummeryPage:r.FailSummeryPage;return s.raiseQuizCompletionEvent(o,i.score),n.setQuizStatus(r,i.didPassQuiz),e.Deferred().resolve(r,a,i)})}function g(e,n,r){var i=t.get(n.UiComponentId,[n,e,r]);return s.registerXButtonClickedEvent(i),h(i,"open-quiz-results").pipe(function(){return r})}function f(e){var t=o.create("QuizResultsDisplayer",{quizResults:e});return u=t,t.show()}function h(t,n){var r=e.Deferred();return u=t,t.once("append-end",function(){t.show(),r.notify("shown")}),t.once(n,function(){r.resolve.apply(null,arguments)}),"destroy-end"!=n&&t.once("destroy-end",function(){r.reject()}),t.append(),r.promise()}}o.register("QuizPlayEventRaiser").asCtor(fo).asProto().dependencies("Consts, CommonEvents, PlayGuidGenerator");function fo(t,n,r,i){var o=this;o.raiseQuizPlayEvent=l,o.raiseQuizSubmittedEvent=c,o.raiseQuizAnswerSubmittedEvent=d,o.raiseQuizCompletionEvent=p,o.registerXButtonClickedEvent=g;var a,s;function u(){a=i.quiz,s=r.generateNewPlayGuid(a.Id)}function l(){n.raiseEvent(t.EVENTS.Quizzes.QuizPlay,{currentPlayGuid:s,quiz:a})}function c(){n.raiseEvent(t.EVENTS.Quizzes.QuizSubmitted,{currentPlayGuid:s,quiz:a})}function d(r){for(var i={currentPlayGuid:s,quiz:a,questionId:r.questionId,question:r.question},o=0;o<r.userAnswersIds.length;o++)n.raiseEvent(t.EVENTS.Quizzes.QuizAnswerSubmitted,e.extend({},i,{answerId:r.userAnswersIds[o],answer:r.userAnswers||r.correctAnswers}))}function p(e,r){var i=e?t.EVENTS.Quizzes.QuizPass:t.EVENTS.Quizzes.QuizFail;n.raiseEvent(i,{currentPlayGuid:s,quiz:a,score:r})}function g(e){e.once("x-clicked",function(){n.raiseEvent(t.EVENTS.Quizzes.QuizXButtonClicked)})}u()}o.register("ContainerAppender").asCtor(ho);function ho(){var t=this;t.appendToContainer=n;function n(t,n){return e(n).appendTo(t)}}function mo(e,t,n,r){var i,a,s=o.create("WalkmeOOP",this),u=s.Prop.Protected("lib"),l=s.Prop.Protected("title"),c=s.Prop.Protected("content"),d=s.Prop.Protected("customHtml"),p=s.Prop.Protected("stepIndexText"),g=s.Prop.Protected("balloonSettings"),f=s.Prop.Protected("direction"),h=s.Prop.Protected("userGuid"),m=(s.Prop.Protected("contentDiv"),s.Prop.Protected("fixedWidth"),s.Prop.Protected("fixedHeight"),s.Prop.Protected("stepType")),v=s.Prop.Protected("buttons"),S=(s.Virtual.Public("generateHtml",function(){var e=S(),t=y(),n=yf.to_html(e,t);return n}),s.Virtual.Protected("createHtmlTemplate")),y=s.Virtual.Protected("createTemplateData",function(){A("BalloonCloseTooltip");var r=1==e.getSettingsValue(i,"displayX",!0)||"True"==e.getSettingsValue(i,"displayX","True")||1==e.getSettingsValue(i,"displayX",1),o={data:{title:l(),content:c(),customHtml:d(),stepIndexText:p(),balloonCloseTooltip:t.get().BalloonCloseTooltip},font:g().Font,cssReset:n,displayX:r,colors:{mainBg:g().Color,minorBg:g().BalloonColor2,border:g().BorderColor,header:g().HeaderColor,content:g().ContentColor,footerText:g().FooterTextColor,buttonBg:g().ButtonBgColor,buttonBg2:g().ButtonBgColor2,buttonBorder:g().ButtonBorderColor,buttonText:g().ButtonTextColor},radiuses:{balloon:g().BalloonRadius+"px",button:g().BalloonButtonRadius+"px"},direction:{basic:f(),side:"rtl"==f()?"right":"left",oppositeSide:"rtl"==f()?"left":"right"},poweredBy:{showText:"txt"==g().showPoweredByFormat,link:g().showPoweredBy?"http://www.walkme.com/?u="+h():""},buttons:v().buttonsArr,border:{size:g().BalloonBorderWidth+"px"}};return o}),E=(s.Virtual.Public("manipulationsForInlineCss",function(){}),s.Protected("getCustomDivHtml",function(e){return"<div class='walkme-custom-balloon-custom-div-"+e+"' style='display:none;' ></div>"}),s.Virtual.Protected("generateNormalButtonClasses",function(e,t){return _(t,e)}));s.Public("initButtons",function(e){var t={back:e.backButton,next:e.nextButton,done:e.doneButton,submit:e.submitButton},n=T(),r=b(t,n);v(r)});function T(){var t=e.getSettingsValue(i,"customButtons",[]);if(0==t.length){var n=m()==L.STEP_TYPE.Popup,r=n?e.getSettingsValue(i,"popupStepButtons",[]):[];t=r}return t}function C(){u(r.lib),l(r.balloonData.title),c(r.balloonData.content),d(r.balloonData.customHtml),p(r.balloonData.stepIndexText),g(r.balloonSettings),f(r.balloonSettings.direction),h(r.userGuid),m(r.stepType),i=r.settings,a=r.end}function b(e,t){var n={};if(n.nextButton=n.doneButton=n.backButton=n.submitButton=!1,n.buttonsArr=[],0==t.length)m()!=L.STEP_TYPE.Popup&&(n=I(e.back,e.next,e.done,e.submit));else for(var r=0;r<t.length;r++){var i=t[r];if(0==i.action){var o=I(!1,e.next,e.done,!1);n.nextButton=o.nextButton,n.doneButton=o.doneButton,o.buttonsArr.length>0&&n.buttonsArr.push(o.buttonsArr[0])}else if(2==i.action){var a=I(e.back,!1,!1,!1);n.backButton=a.backButton,a.buttonsArr.length>0&&n.buttonsArr.push(a.buttonsArr[0])}else n.buttonsArr.push(w(i))}return n}function I(e,n,r,i){var o={},a=t.get();return o.backButton=o.nextButton=o.doneButton=o.submitButton=!1,o.buttonsArr=[],e&&(o.backButton={order:2,weak:!0,classes:E("back","weak"),buttonText:a.BackButtonText},o.buttonsArr.push(o.backButton)),n&&(o.nextButton={order:3,normal:!0,classes:E("next","normal"),buttonText:a.NextButtonText},P()&&(o.nextButton.buttonText=a.DoneButtonText),o.buttonsArr.push(o.nextButton)),r&&(o.doneButton={order:3,normal:!0,classes:E("done","normal"),buttonText:a.DoneButtonText},o.buttonsArr.push(o.doneButton)),i&&(o.submitButton={order:4,normal:!0,classes:E("submit","normal"),buttonText:a.SubmitButtonText},o.buttonsArr.push(o.submitButton)),o}function w(e){var n=t.get(),r=e.action||-1;switch(parseInt(r)){case 1:return{order:4,normal:!0,classes:_("normal","start"),buttonText:n.WelcomeStepButtonStartText};case 3:return{order:1,weak:!0,classes:_("weak","cancel"),buttonText:n.WelcomeStepButtonCancelText};case 4:return{order:4,normal:!0,classes:E("submit","normal"),buttonText:n.SubmitButtonText};case 5:return{order:4,normal:!0,classes:_("normal","redirect"),buttonText:e.name};case 6:return{order:2,weak:!0,classes:_("weak","stay"),buttonText:e.name};case 7:return{order:4,normal:!0,classes:_("normal","ok"),buttonText:e.name}}var i=e.name||"",o=e.type,a=e.weak?"weak":"normal";return{order:2,weak:e.weak,normal:!e.weak,classes:_(a,o),buttonText:i}}function _(e,t){var n="walkme-custom-balloon-button walkme-custom-balloon-"+e+"-button";return t&&(n+=" walkme-custom-balloon-"+t+"-button walkme-action-"+t),n}function P(){var t=e.getSettingsValue(i,"isNextToDone","0");return"1"==t}function A(e){if(t.get()[e]){var n=t.get()[e];n=n.replace(/&quot;/gi,'"'),n=n.replace(/&#39;/gi,"'"),n=n.replace(/&amp;/gi,"&"),t.get()[e]=n}}C.apply(null,arguments)}o.register("BalloonCssResetStyle").asInstance("display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit; letter-spacing: normal; text-transform: none; outline: invert none medium; width: auto; box-shadow:none; text-shadow:none; border-top: none; border-right: none; border-bottom: none; border-left: none; position: static; top: auto; left: auto; transition: none;"),o.register("BaseBalloon").asCtor(mo).asProto().dependencies("CommonUtils, SiteConfigManager,BalloonCssResetStyle");function vo(t){this.LocalSVNRevision="$Rev$";var n=this;function r(){}n.finalizeArrowsPosition=function(e,n){switch(e){case t.POSITION_TYPE.Top:n.top--;break;case t.POSITION_TYPE.Bottom:n.top++;break;case t.POSITION_TYPE.Left:n.left--;break;case t.POSITION_TYPE.Right:n.left++}},n.fixArrows=function(e){var n=e.balloonDiv,r=e.arrowsDivs,s=e.result,u=e.isInCaptureMode,l=e.isQuirksMode,c=e.balloonSettings,d=e.arrowBaseWidth,p=e.balloonSettings.Color,g=e.outerArrowColor,f=c.direction,h=s.positionType==t.POSITION_TYPE.Left||s.positionType==t.POSITION_TYPE.Right;h?i(c,n,r,s,f,d,l):u&&s.positionType==t.POSITION_TYPE.Top&&a(c,r),l&&o(n,g,p)};function i(t,n,r,i,o,a,u){n.show();var l=e(".walkme-custom-balloon-bottom-div",n),c=l[0]?l[0].offsetHeight:0,d=a,p=parseFloat(r[0].css("top")),g=parseFloat(n.css("top")),f=n[0]?n[0].offsetHeight:0,h=p-g,m=f-c;if(n.hide(),m-h<d&&m>h){var v=g-(m-h+1);n.css("top",v+"px"),s(t,r,o,i.positionType,u)}else m<=h&&s(t,r,o,i.positionType,u)}function o(t,n,r){var i,o=e(".walkme-custom-balloon-arrow-inner",t.parent()),a=e(".walkme-custom-balloon-arrow-outer",t.parent());if(o.hasClass("walkme-custom-balloon-arrow-right"))i="right";else{if(!o.hasClass("walkme-custom-balloon-arrow-left"))return;i="left"}o.css("border-"+i+"-color",r),a.css("border-"+i+"-color",n)}function a(e,t){t[0].css("border-top-color",e.Color)}function s(e,n,r,i,o){var a=i==t.POSITION_TYPE.Left&&"ltr"==r||i==t.POSITION_TYPE.Right&&"rtl"==r;if(a||o){var s=i==t.POSITION_TYPE.Left?"left":"right";n[0].css("border-"+s+"-color",e.BalloonColor2)}for(var u=0;u<n.length;u++)n[u].addClass("walkme-custom-balloon-arrow-footer")}r.apply(null,arguments)}o.register("ArrowsHelper").asCtor(vo).asProto().dependencies("Consts"),o.register("BalloonV2").asCtor(So).asProto().dependencies("CommonUtils, BalloonUtils, CdnServer, Consts");function So(e,t,n,r,i){var a,s,u=o.create("WalkmeOOP",this);u.Override("generateHtml",function(){return a.customHtml()&&a.customHtml().inner||a.generateHtml()}),u.Override("generateNormalButtonClasses",function(e,t){return a.generateNormalButtonClasses(e,t)+" mt-custom-balloon-"+e+"-button CUSTOM-STEP-ID"}),u.Override("createTemplateData",function(){var r=a.createTemplateData(),i=n.get();r.outerDiv=a.getCustomDivHtml("outer-div"),r.title=a.getCustomDivHtml("title"),r.content=a.getCustomDivHtml("content"),r.poweredBy.showImage="img"==a.balloonSettings().showPoweredByFormat,r.buttonShadowWidth=a.balloonSettings().ButtonShadowWidth,r.serverName=i;var o="rtl"==a.direction()?"right":"left";r.data.stepIndexText=c(a.stepIndexText(),a.direction(),o),r.ie7LayoutFix="overflow: auto;zoom: 1;",r.buttonsExist=a.buttons().buttonsArr.length>0,r.showBottomDiv=!("no"==a.balloonSettings().showPoweredByFormat&&0==a.stepIndexText().length),t.fixGradientColorsInConfiguration(s,"ButtonBgColor"),t.fixGradientColorsInConfiguration(s,"ButtonBgColor2");var u=s.ButtonBgColor,l=s.ButtonBgColor2;return u==l?r.BackgroundCSS=" background-color: "+u+"; ":(r.BackgroundCSS="background:-moz-linear-gradient(top, "+u+" , "+l+" ); background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+u+"), color-stop(100%,"+l+")); background:-webkit-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-o-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:-ms-linear-gradient(top, "+u+" 0%,"+l+" 100%); background:linear-gradient(to bottom, "+u+" 0%,"+l+' 100%); filter:progid:DXImageTransform.Microsoft.gradient( startColorstr="'+u+'", endColorstr="'+l+'",GradientType=0 ); ',t.isGradientWithBorderRadiusCompatible()||(r.radiuses.button="0"),e.isGradientUsingFilter(r.BackgroundCSS)&&(r.BackgroundCSS+="background: url("+i+"/player/resources/images/spacer.gif) repeat;")),r}),u.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div mt-custom-balloon-top-div CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";padding-top:5px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 3px; padding-bottom: 1px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 7px;margin:3px 3px 0 3px;direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='min-height: "),r.s(r.f("buttonsExist",e,t,1),e,t,0,388,390,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("30")}),e.pop()),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("0"),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,460,818,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-close-button walkme-action-close mt-custom-balloon-close-button CUSTOM-STEP-ID walkme-action-close' style='opacity:0.7; font-size: 16px; position: absolute; top: 2px; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 8px; cursor: pointer;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";font-weight:normal;font-family:;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title mt-custom-balloon-title CUSTOM-STEP-ID' style='text-align: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";font-weight:bold;margin-top:2px;margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(":14px;font-size:15px;color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";font-family:"),r.b(r.t(r.f("font",e,t,0))),r.b(";'>"),r.b(r.t(r.f("title",e,t,0))),r.b(r.t(r.d("data.title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1134,1429,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content mt-custom-balloon-content CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(";margin-top: 4px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 6px; font-family:"),n.b(n.v(n.f("font",e,t,0))),n.b(";font-size:14px;color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";"),n.b(n.v(n.f("ie7LayoutFix",e,t,0))),n.b("'>"),n.b(n.t(n.f("content",e,t,0))),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div><div class='walkme-custom-balloon-top-div-bottom mt-custom-balloon-top-div-bottom CUSTOM-STEP-ID' style='clear: both;'>"),r.s(r.f("buttonsExist",e,t,1),e,t,1,0,0,"")||r.b("<div class='walkme-custom-balloon-no-buttons-div' style='height: 10px'></div>"),r.s(r.f("buttonsExist",e,t,1),e,t,0,1699,2702,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-buttons-div mt-custom-balloon-buttons-div CUSTOM-STEP-ID' style='clear:both;padding:5px;text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(";direction:"),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("'>"),n.s(n.f("buttons",e,t,1),e,t,0,1902,2684,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b("' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(";-moz-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; -webkit-border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.b(n.v(n.f("BackgroundCSS",e,t,0))),n.b("-moz-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); -webkit-box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "),n.b(n.v(n.f("buttonShadowWidth",e,t,0))),n.b("px rgba(0, 0, 0, 0.4); border: 1px solid "),n.b(n.v(n.d("colors.buttonBorder",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal; font-family: Arial; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static; overflow: visible;' "),n.b(n.v(n.f("wtIdAttribute",e,t,0))),n.b(">"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</button>")}),e.pop()),n.b("</div>")}),e.pop()),r.b("</div></div>"),r.s(r.f("showBottomDiv",e,t,1),e,t,0,2749,4329,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-separator' style='display: block; margin: 0 10px; height: 1px; opacity: 0.2; filter: alpha(opacity=20); background-color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; line-height: 0px;'>&#160;</div><div class='walkme-custom-balloon-bottom-div' style='position: relative; height: 23px; display: block;'><div class='walkme-custom-balloon-subtext mt-custom-balloon-subtext CUSTOM-STEP-ID' style='text-align: "),n.b(n.v(n.d("direction.side",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; display:inline-block;font-family: "),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;margin-top:3px;margin-bottom:0px;color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>"),n.b(n.t(n.d("data.stepIndexText",e,t,0))),n.b("</div><div class='walkme-custom-balloon-powered-by-div mt-custom-balloon-powered-by-div CUSTOM-STEP-ID' style='display:inline-block;position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 10px; top: 3px;text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; width:100px; color:"),n.b(n.v(n.d("color.content",e,t,0))),n.b(";text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(" '>"),n.s(n.d("poweredBy.link",e,t,1),e,t,0,3744,3993,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<a class='walkme-custom-balloon-powered-by-link mt-custom-balloon-powered-by-link CUSTOM-STEP-ID' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),
n.b("' target='_blank' style='text-decoration:none;font-family:"),n.b(n.t(n.f("font",e,t,0))),n.b(";font-size:10px;opacity: 0.9; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("'>")}),e.pop()),n.s(n.d("poweredBy.showText",e,t,1),e,t,0,4035,4048,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("By WalkMe.com")}),e.pop()),n.s(n.d("poweredBy.showImage",e,t,1),e,t,0,4095,4251,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div title='WalkMe.com' style='border: none; background-image: url("),n.b(n.v(n.f("serverName",e,t,0))),n.b("/player/resources/images/by-walkme.png); width: 49px; height: 18px;'></div>")}),e.pop()),n.s(n.d("poweredBy.link",e,t,1),e,t,0,4294,4298,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("</a>")}),e.pop()),n.b("</div></div>")}),e.pop()),r.fl()};return e});function l(){u.ExtendsInstance(o.create("BaseBalloon",i)),a=u._base,s=i.balloonSettings}function c(e,t,n){return t="direction:"+t+";",d(e,t,n)}function d(e,t,n){if(e.indexOf(r.SUBTEXT_CURRENT_START)>-1&&e.indexOf(r.SUBTEXT_CURRENT_END)>-1&&e.indexOf(r.SUBTEXT_TOTAL_START)>-1&&e.indexOf(r.SUBTEXT_TOTAL_END)>-1){n="float:"+n+";";var i="<span style='"+n+"'>&nbsp;</span>";e="<div class='walkme-custom-balloon-current-step-text' style='"+t+n+"'>"+e,e=e.replace(r.SUBTEXT_CURRENT_START,"</div>"+i+"<div class='walkme-custom-balloon-current-step-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_CURRENT_END,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-text' style='"+t+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_START,"</div>"+i+"<div class='walkme-custom-balloon-total-steps-number' style='"+n+"'>"),e=e.replace(r.SUBTEXT_TOTAL_END,"</div>"),e+="<div style='clear:both;'></div>"}return e}l()}function yo(e,t,n,r,i,a,s){var u,l,c=o.create("WalkmeOOP",this),d=8,p=c.Prop.Public("contentMargin",15);c.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=u.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),c.Override("createTemplateData",function(){var n=u.createTemplateData();n.outerDiv=u.getCustomDivHtml("inner-div"),n.title=u.getCustomDivHtml("title"),n.colors.xBtn=u.balloonSettings().XButtonColor,n.colors.stepInfo=u.balloonSettings().StepInfoColor,n.colors.separator=u.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:p(),oppositeSideMargin:p()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=d,n.bottom.stepIndexMarginTop-=d/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:u.balloonSettings().BalloonBorderWidth+"px",marginHorizental:parseInt(u.balloonSettings().BalloonBorderWidth)+4+"px"};var o=u.balloonSettings().BalloonBorderWidth-4;return o<0&&(o=0),n.border.side={size:o+"px"},n.shadow=t.calculate(u.balloonSettings().ShadowType,u.balloonSettings().ShadowLevel,u.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),f(),n.buttonsHtml=h(n),n.designTemplateCssClass=i.get(l,a.ENTITY_TYPE.step),n}),c.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-v3 "),r.b(r.v(r.f("designTemplateCssClass",e,t,0))),r.b("' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,331,415,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.border",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,803,830,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1218,1616,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" font-size: 12px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal;' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size:14px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,1963,2347,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:12px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: auto;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; margin-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 10px; float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div><div class='walkme-custom-side-border' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; width: 4px; height: 100%;  top:0px; "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(":0px; border:"),r.b(r.v(r.d("border.side.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": none; border-top: none; border-bottom: none; position: absolute;'></div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3748,3776,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()};return e});function g(){c.ExtendsInstance(o.create("BaseBalloon",s)),u=c._base,l=s.entity}function f(){u.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function h(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,906,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 21px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 5px; padding-right: 5px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,690,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 3px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 10px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1028,1546,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1051,1523,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top:6px; margin-bottom:6px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=yf.to_html(t,e);return n}g.apply(null,arguments)}o.register("BalloonV3").asCtor(yo).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData, SpecificEntityDesignTemplateCssClassGetter, SharedConsts");function Eo(e,t,n,r,i){var a,s=o.create("WalkmeOOP",this),u=8,l=5,c=s.Prop.Public("contentMargin",15);s.Override("manipulationsForInlineCss",function(e){if(r.isIE(8,"lte"))return;var t=a.balloonSettings();n.addClickAndHover({regularColor:t.ButtonBgColor,hoverColor:t.ButtonBgHoverColor,clickColor:t.ButtonBgClickColor,cssProperty:"background-color",elemSelector:".walkme-custom-balloon-normal-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-powered-by",balloonDiv:e}),n.addClickAndHover({regularColor:t.XButtonColor,hoverColor:t.XButtonHoverColor,clickColor:t.XButtonClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-close-button",balloonDiv:e}),n.addClickAndHover({regularColor:t.FooterTextColor,hoverColor:t.FooterTextHoverColor,clickColor:t.FooterTextClickColor,cssProperty:"color",elemSelector:".walkme-custom-balloon-weak-button",balloonDiv:e})}),s.Override("createTemplateData",function(){var n=a.createTemplateData();return n.outerDiv=a.getCustomDivHtml("inner-div"),n.title=a.getCustomDivHtml("title"),n.colors.xBtn=a.balloonSettings().XButtonColor,n.colors.stepInfo=a.balloonSettings().StepInfoColor,n.colors.separator=a.balloonSettings().SeparatorColor,n.stepIndexHeight=46,n.top={minHeight:57,textAlign:n.direction.side,title:{paddingTop:12},content:{sideMargin:c(),oppositeSideMargin:c()-2}},n.data.title&&!n.data.content&&(n.top.minHeight=43),n.bottom={},n.bottom.stepIndexMarginTop=10,e.isDefined(n.buttons)&&0!=n.buttons.length||(n.stepIndexHeight-=u,n.bottom.stepIndexMarginTop-=u/2),n.stepIndexHeight+="px",n.bottom.poweredByHeight+="px",n.xBtn={marginTop:a.balloonSettings().BalloonBorderWidth-l+"px",marginHorizental:parseInt(a.balloonSettings().BalloonBorderWidth)+4+"px"},n.shadow=t.calculate(a.balloonSettings().ShadowType,a.balloonSettings().ShadowLevel,a.balloonSettings().ShadowColor),n.isNotIe7=!r.isIEBrowser(7),p(),n.buttonsHtml=g(n),n}),s.Override("createHtmlTemplate",function(){var e=function(e,t,n){var r=this;return r.b(n=n||""),r.b("<div class='walkme-custom-balloon-outer-div walkme-custom-balloon-vm1' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" width: auto; min-width: 190px; position: absolute; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-mid-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; position: relative; "),r.s(r.f("shadow",e,t,1),e,t,0,305,389,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("-webkit-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; -moz-box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b("; box-shadow: "),n.b(n.v(n.f("shadow",e,t,0))),n.b(";")}),e.pop()),r.b(" font-family: "),r.b(r.t(r.f("font",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; overflow: hidden;'><div class='walkme-custom-balloon-inner-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border:"),r.b(r.v(r.d("border.size",e,t,0))),r.b(" solid "),r.b(r.v(r.d("colors.buttonBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b("; border-"),r.b(r.v(r.d("position.side",e,t,0))),r.b(": none; overflow: hidden;'>"),r.s(r.d("data.customHtml.inner",e,t,1),e,t,0,779,806,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.inner",e,t,0)))}),e.pop()),r.s(r.d("data.customHtml.inner",e,t,1),e,t,1,0,0,"")||(r.b(r.t(r.f("outerDiv",e,t,0))),r.b("<div class='walkme-custom-balloon-top-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; background-color:"),r.b(r.v(r.d("colors.mainBg",e,t,0))),r.b("; border-radius:"),r.b(r.v(r.d("radiuses.balloon",e,t,0))),r.b(";'><div class='walkme-custom-balloon-content-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; min-height: "),r.b(r.v(r.d("top.minHeight",e,t,0))),r.b("px;'>"),r.s(r.f("displayX",e,t,1),e,t,0,1194,1715,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-click-and-hover walkme-custom-balloon-close-button walkme-action-close' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" border-radius: 20px; font-size: 23px; color: "),n.b(n.v(n.d("colors.xBtn",e,t,0))),n.b("; position: absolute; "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 0px; top: 0px; padding-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("xBtn.marginHorizental",e,t,0))),n.b("; padding-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 18px; padding-bottom: 6px; margin-top: "),n.b(n.v(n.d("xBtn.marginTop",e,t,0))),n.b("; cursor: pointer;font-weight:normal; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);' title='"),n.b(n.v(n.d("data.balloonCloseTooltip",e,t,0))),n.b("'>&#215;</div>")}),e.pop()),r.b("<div class='walkme-custom-balloon-title' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" line-height: 30px; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; padding-top:"),r.b(r.v(r.d("top.title.paddingTop",e,t,0))),r.b("px; padding-"),r.b(r.v(r.d("direction.side",e,t,0))),r.b(": 15px; padding-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 13px; text-align: "),r.b(r.v(r.d("top.textAlign",e,t,0))),r.b("; font-size: 16px; color:"),r.b(r.v(r.d("colors.header",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.title",e,t,0))),r.b(r.t(r.f("title",e,t,0))),r.b("</div>"),r.s(r.d("data.content",e,t,1),e,t,0,2082,2468,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-balloon-content' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align: "),n.b(n.v(n.d("top.textAlign",e,t,0))),n.b("; margin-top: 2px; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.sideMargin",e,t,0))),n.b("px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": "),n.b(n.v(n.d("top.content.oppositeSideMargin",e,t,0))),n.b("px; line-height: 18px; font-size:13px; color:"),n.b(n.v(n.d("colors.content",e,t,0))),n.b(";overflow: hidden;zoom: 1;'>"),n.b(n.t(n.d("data.content",e,t,0))),n.b("</div>")}),e.pop()),r.b("</div></div><div class='walkme-custom-balloon-separator' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" background-color:"),r.b(r.v(r.d("colors.separator",e,t,0))),r.b(";  height:1px; margin-top:10px;  font-family: Arial; font-size: 1px;'></div><div class='walkme-custom-balloon-bottom-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" padding: 3px 3px 3px 0; min-height:36px; background-color:"),r.b(r.v(r.d("colors.minorBg",e,t,0))),r.b(";'><div class='walkme-custom-balloon-subtext' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" position: absolute; color: "),r.b(r.v(r.d("colors.stepInfo",e,t,0))),r.b("; font-size: 9px; margin-top: "),r.b(r.v(r.d("bottom.stepIndexMarginTop",e,t,0))),r.b("px; left: 50%; transform: translateX(-65%); float: "),r.b(r.v(r.d("direction.side",e,t,0))),r.b(";'>"),r.b(r.t(r.d("data.stepIndexText",e,t,0))),r.b("</div><div class='walkme-custom-balloon-top-div-bottom' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b(";'><div class='walkme-custom-balloon-buttons-wrapper' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" text-align: "),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b("; direction: "),r.b(r.v(r.d("direction.basic",e,t,0))),r.b("; margin-"),r.b(r.v(r.d("direction.oppositeSide",e,t,0))),r.b(": 6px;'>"),r.b(r.t(r.f("buttonsHtml",e,t,0))),r.b("</div></div><div class='walkme-custom-balloon-bottom-clear' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b(" clear: both'></div></div>")),r.b("</div></div>"),r.s(r.d("data.customHtml.outter",e,t,1),e,t,0,3616,3644,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b(n.t(n.d("data.customHtml.outter",e,t,0)))}),e.pop()),r.b("</div>"),r.fl()};return e});function d(){s.ExtendsInstance(o.create("BaseBalloon",i)),a=s._base}function p(){a.buttons().buttonsArr.sort(function(e,t){return e.order-t.order})}function g(e){var t=function(e,t,n){var r=this;return r.b(n=n||""),r.s(r.f("buttons",e,t,1),e,t,0,12,920,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("<button class='"),n.b(n.v(n.f("classes",e,t,0))),n.b(" walkme-click-and-hover' type='button' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" zoom: 1; border: none; margin-top: 6px; margin-bottom: 6px; height: 25px; font-family: inherit; cursor: pointer; display: inline-block; direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b(";"),n.s(n.f("normal",e,t,1),e,t,0,277,513,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:center; background-color: "),n.b(n.v(n.d("colors.buttonBg",e,t,0))),n.b("; color: "),n.b(n.v(n.d("colors.buttonText",e,t,0))),n.b("; border-radius:"),n.b(n.v(n.d("radiuses.button",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 7px; "),n.s(n.f("isNotIe7",e,t,1),e,t,0,445,461,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("min-width: 42px;")}),e.pop()),n.b(" padding-left: 7px; padding-right: 7px;")}),e.pop()),n.s(n.f("weak",e,t,1),e,t,0,533,704,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("text-align:"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("; background:none; float: left; color: "),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; margin-"),n.b(n.v(n.d("direction.side",e,t,0))),n.b(": 10px; margin-"),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b(": 2px;")}),e.pop()),n.b("'><span class='walkme-custom-balloon-button-text' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" direction: "),n.b(n.v(n.d("direction.basic",e,t,0))),n.b("; text-align:center; font-size: 12px; position:relative; color:inherit;'>"),n.b(n.t(n.f("buttonText",e,t,0))),n.b("</span></button>")}),e.pop()),r.s(r.f("buttons",e,t,1),e,t,1,0,0,"")||(r.b("<div class='walkme-custom-balloon-no-buttons-div' style='"),r.b(r.t(r.f("cssReset",e,t,0))),r.b("'></div>"),r.s(r.d("poweredBy.link",e,t,1),e,t,0,1042,1581,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.s(n.d("poweredBy.showText",e,t,1),e,t,0,1065,1558,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b("<div class='walkme-custom-powered-by-div' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" cursor: pointer; margin-top: 11px; margin-bottom:6px; margin-right: 5px; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; font-size:9px; display: inline-block; text-align: "),n.b(n.v(n.d("direction.oppositeSide",e,t,0))),n.b("'><a draggable='false' class='walkme-custom-powered-by walkme-click-and-hover' style='"),n.b(n.t(n.f("cssReset",e,t,0))),n.b(" text-decoration:none; font-size: inherit; color:"),n.b(n.v(n.d("colors.footerText",e,t,0))),n.b("; display: inline;' href='"),n.b(n.v(n.d("poweredBy.link",e,t,0))),n.b("' target='_blank'>By WalkMe</a></div>")}),e.pop())}),e.pop())),r.fl()},n=yf.to_html(t,e);return n}d.apply(null,arguments)}o.register("BalloonVM1").asCtor(Eo).asProto().dependencies("CommonUtils, ShadowCalculator, ClickAndHoverAdder, HostData");function To(e,t,n,r,i,a,s,u,l,c,d){var p=["top","right","bottom","left"],g=["center","start","end"],f=o.create("WalkmeOOP",this),h=f.Prop.Protected("balloon"),m=f.Prop.Protected("balloonClass"),v=f.Prop.Protected("balloonSettings"),S=f.Prop.Protected("minWidth"),y=f.Prop.Protected("maxWidth"),E=f.Prop.Protected("defaultMaxWidth"),T=(f.Prop.Public("minPopupWidth"),f.Prop.Public("arrowHeight")),C=f.Prop.Public("arrowBaseWidth"),b=f.Prop.Public("hasBorder"),I=f.Prop.Public("shouldScrollToElement"),w=f.Prop.Public("balloonTitleSelector"),_=f.Prop.Public("balloonContentSelector"),P=f.Virtual.Protected("addBalloonDiv"),A=f.Virtual.Public("loadResources",function(e,t){t&&t()}),k=f.Virtual.Protected("getArrowsColors"),O=(f.Virtual.Public("fixSize",function(e,t,n,r,i){O(e,t,n,r),D(e,i);var o={width:e.width(),height:e.height()};return o}),f.Virtual.Protected("fixWidth",function(e,t,n,i,o){var a=0;a=r.isQuirksMode(t[0])?Q(e):e.width();var s=0;s=!i||i<=0?E():i;var u=S();if(void 0!=o&&(u=o),a<u&&(a=u),a>s&&(a=s),e.css("width",a+"px"),!i||i<=0){var l=0;mtjQuery.each(mtjQuery("[width], [style*=width], [style*=WIDTH]",e),function(e,t){mtjQuery(t).width()>l&&(l=mtjQuery(t).width())}),l>a&&N(l,e)}})),D=f.Virtual.Protected("fixHeight",function(e,t){var n=e.height();t&&t>0&&(n=t),e.css("height",n+"px")}),N=f.Virtual.Protected("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t);n.css("width",e+"px"),t.css("width","auto")}),x=f.Virtual.Protected("generateHtmlParams",function(e){var t={balloonSettings:v(),balloonData:e.balloonData,userGuid:e.userGuid,settings:e.settings,end:e.end,stepType:e.stepType,contentDiv:e.contentDiv},n={nextButton:e.nextButton,doneButton:e.doneButton,backButton:e.backButton,submitButton:e.submitButton};return{balloonParams:t,buttonsParams:n}}),M=f.Public("generateHtml",function(e){var t=x(e);return h(o.create(m(),t.balloonParams)),h().initButtons(t.buttonsParams),h().generateHtml()}),F=(f.Public("manipulationsForInlineCss",function(e){return h().manipulationsForInlineCss(e)}),f.Public("generateBalloonDiv",function(e,t,n,r,i,o,a,s){var u=P(M(o),e,t);return U(u,n,r,i,o,a,s),u}),f.Virtual.Protected("generateIdForBalloon",function(e){return"walkme-balloon-"+e})),R=f.Virtual.Protected("generateClassesForBallon",function(e,t,n,r,i){return["walkme-custom-"+n+"-"+e,"walkme-custom-"+r+"-"+t,"walkme-custom-"+(i==L.STEP_TYPE.Popup?"popup":"simple")+"-step"]}),B=f.Virtual.Protected("generateClassesForArrows",function(e,t,n,r){return["walkme-custom-balloon-arrow","walkme-custom-balloon-arrow-"+t,"walkme-custom-balloon-arrow-"+e,"walkme-custom-balloon-arrow-"+e+"-"+t,"walkme-custom-"+r+"-"+n]}),U=f.Virtual.Protected("addIdentifiers",function(e,n,r,o,a,s,u){e.attr("id",F(r));for(var l=R(n,r,u,s,o),c=0;c<l.length;c++)e.addClass(l[c]);var d=i.getCurrentLanguage()||"default";e.addClass("walkme-custom-language-"+d),t.addBrowserSpecificClasses(e),te(e,a)}),W=f.Virtual.Protected("addArrowClasses",function(e,t,n,r,i){for(var o=B(t,n,r,i),a=0;a<o.length;a++)e.addClass(o[a])}),V=(f.Virtual.Public("fixArrows",function(){}),f.Virtual.Public("fixQuirksMode",function(){}),f.Virtual.Protected("finalizeArrowsPosition",function(){})),G=(f.Virtual.Public("drawArrows",function(e,t,n,i,o,s,u){var l=$(n,i,o,e),c={top:l.top,left:l.left};n.positionType==a.POSITION_TYPE.Top&&(c.top=l.top,l.top=l.top-v().BalloonBorderWidth+1,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Bottom&&(l.top=l.top+v().BalloonBorderWidth-1,c.top=l.top-v().BalloonBorderWidth,c.left=l.left-1),n.positionType==a.POSITION_TYPE.Left&&(r.isQuirksMode(e[0])?(l.left=l.left-v().BalloonBorderWidth+1,c.left=l.left+v().BalloonBorderWidth,c.top=l.top-1):(l.left=l.left-v().BalloonBorderWidth+1,c.left=l.left+v().BalloonBorderWidth-1,c.top=l.top-1)),n.positionType==a.POSITION_TYPE.Right&&(l.left=l.left+v().BalloonBorderWidth-1,c.left=l.left-v().BalloonBorderWidth,c.top=l.top-1),V(n.positionType,l,c);var d="",g=null,f=p[n.positionType],h=k(f);v().BalloonBorderWidth>0&&(g=q(c,n,s,h.outterArrow,T()+1,T()+1),W(g,"outer",f,t,u)),d=q(l,n,s,h.innerArrow,T(),T()),W(d,"inner",f,t,u);var m=[d];return g&&m.push(g),m}),f.Protected("getBalloonBasicWidth",function(e,t,n){var i=0;i=r.isQuirksMode(t[0])?Q(e):e.width();var o=0;return o=n||n<=0?y():n,i<S()&&(i=S()),i>o&&(i=o),i}),f.Public("setConfiguration",function(e){l.fixConfiguration(e),v(e),A()}));f.Public("decideWhereToPopForCaptureBalloon",function(t,n,r,i){try{var o={width:r,height:i},a=z(),s=Y(t),u=j(),l=re(s,o,n,u,a,!0);return l}catch(c){e.error(c)}}),f.Public("getPossiblePositionsForCaptureBalloon",function(t,n,r){try{var i={width:n,height:r},o=z(),a=Y(t),s=j(),u=ne(a,i,s,o);return u}catch(l){e.error(l)}}),f.Public("addPositionClass",function(e,t){var n="walkme-custom-position-"+p[t.positionType];n+=" walkme-custom-offset-"+g[t.positionOffset],e.addClass(n)});function H(){y(400),E(400),b(!0),w(".walkme-custom-balloon-title"),_(".walkme-custom-balloon-content"),I(!0),G(d.balloonSettings)}function j(){return T()+1}function Y(e){var t=e[0],r=t.getBoundingClientRect(),i=n.getElementDocument(e),o=s.getOffsetRect(t,i,window),a=s.getElementBoundsWithRectAndOffset(r,o);return a}function z(){var e=mtjQuery(document);return e.height=e.height(),e.width=e.width(),e.top=0,e.left=0,e}function Q(e){var t=mtjQuery(w(),e).text(),r=0,i=0,o=0,a=mtjQuery(_(),e);if(a.length>0){for(var s=a.html().replace(/<br*">/g,"< >").split("< >"),l=0;l<s.length;l++){var c=s[l].replace(/(<([^>]+)>)/gi,"").length;o<c&&(o=c)}var d=mtjQuery(_()+" span",e);i=d.length>0?parseInt(d.css("font-size").replace(/px/,"")):parseInt(a.css("font-size").replace(/px/,""))}var p=mtjQuery(w()+" span",e);r=p.length>0?parseInt(p.css("font-size").replace(/px/,"")):parseInt(mtjQuery(w(),e).css("font-size").replace(/px/,""));var g=0;g=t.length*r>o*i?t.length*r:o*i;var f=parseFloat(n.getSettingsValue(u.get().Settings,"quirksModeFactor",.5));return g*=f}function K(e,t){var n=.5;return e==a.POSITION_OFFSET.Start?n=1:e==a.POSITION_OFFSET.End&&(n=0),2!=t&&3!=t||(n=1-n),n}function q(e,t,n,r,i,o){var s=X(i,o);s.color=r;var u=e.top,l=e.left;t.positionType==a.POSITION_TYPE.Bottom,t.positionType==a.POSITION_TYPE.Right,s.point_direction=t.positionType,s.angle=K(t.positionOffset,s.point_direction);var c=J(s,n[0].ownerDocument);return c.css("top",u+"px"),c.css("left",l+"px"),c.css("display","none"),mtjQuery(n.append(c)),c}function X(e,t,n,r,i,o){return{width:e,height:t,point_direction:n||0,angle:r||0,color:i||"red",background:o||"transparent"}}function J(e,t){var n=mtjQuery(t.createElement("div"));return n.css("display","block"),n.css("width","0"),n.css("height","0"),n.css("border",e.width+"px solid transparent"),n.css("border-"+p[e.point_direction]+"-color",e.color),n.css("line-height","0"),n.css("border-"+p[(e.point_direction+2)%4],"0px"),3==e.point_direction||1==e.point_direction?n.css("border-style","outset solid solid solid"):n.css("border-style","solid outset solid solid"),n}function $(e,t,n,i){var o,s;if(e.positionType==a.POSITION_TYPE.Top||e.positionType==a.POSITION_TYPE.Bottom){var u=e.left+t.width;o=Z(e.left,u,C(),e.positionOffset,n.width,n.left),s=e.positionType==a.POSITION_TYPE.Top?e.top+t.height:e.top-T()}else if(e.positionType==a.POSITION_TYPE.Left||e.positionType==a.POSITION_TYPE.Right){var l=e.top+t.height;s=Z(e.top,l,C(),e.positionOffset,n.height,n.top),e.positionType==a.POSITION_TYPE.Left?(o=e.left+t.width,r.isQuirksMode(i[0])&&(o-=2)):o=e.left-T()}return{top:s,left:o}}function Z(t,n,r,i,o,s){var u;return i==a.POSITION_OFFSET.Center?u=(n+t-r)/2:i==a.POSITION_OFFSET.Start?u=s+(o-r)/2:i==a.POSITION_OFFSET.End?u=s+(o-r)/2:e.error(null,"incorrect offset type: "+i),ee(u,t,n,r);
}function ee(e,t,n,r){var i=n-r;if(e>i)return i;if(e<t)return t;return e}function te(e,t){var n=t.balloonData;n.title||e.addClass("walkme-custom-no-title"),n.content||n.customHtml&&(n.customHtml.inner||n.customHtml.outter)||e.addClass("walkme-custom-no-content");var r=t.settings.customButtons&&t.settings.customButtons.length>0,i=t.settings.popupStepButtons&&t.settings.popupStepButtons.length>0,o=i||r||t.nextButton||t.backButton||t.doneButton||t.submitButton;o||e.addClass("walkme-custom-no-buttons")}function ne(e,t,n,r){var i=e.top-t.height-n>r.top,o=e.right+t.width+n<r.width+r.left,a=e.bottom+t.height+n<r.height+r.top,s=e.left-t.width-n>r.left;return{top:i,right:o,bottom:a,left:s}}var re=f.Virtual.Public("decideWhereToPop",function(e,t,r,i,o,s){var u,l,d=e.left+e.width/2,p=e.top+e.height/2,g=ne(e,t,i,o),f=d-t.width/2>o.left,h=d+t.width/2<o.width+o.left,m=p-t.height/2>o.top,v=p+t.height/2<o.height+o.top,S=0;r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom?(f&&h?l=a.POSITION_OFFSET_TYPE.HorizontalCentered:f?h||(l=a.POSITION_OFFSET_TYPE.SnapToViewportRight):l=a.POSITION_OFFSET_TYPE.ToRight,u=r==a.POSITION_TYPE.Top?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom,s&&(u=g.top&&r==a.POSITION_TYPE.Top||r==a.POSITION_TYPE.Bottom&&!g.bottom?a.POSITION_TYPE.Top:a.POSITION_TYPE.Bottom)):r!=a.POSITION_TYPE.Right&&r!=a.POSITION_TYPE.Left||(v&&m?l=a.POSITION_OFFSET_TYPE.VerticallyCentered:v?m||(l=a.POSITION_OFFSET_TYPE.Below,S=2-T()):(l=a.POSITION_OFFSET_TYPE.Below,S=2-T()),u=r==a.POSITION_TYPE.Left?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right,s&&(u=g.left&&r==a.POSITION_TYPE.Left||r==a.POSITION_TYPE.Right&&!g.right?a.POSITION_TYPE.Left:a.POSITION_TYPE.Right));var y=c.getOrientationByName(u),E=c.getOffsetByName(l);return{top:Math.ceil(n.defaultValue(y.getTopPosition(e,t,i,o),E.getTopPosition(e,t,i,o)+S)),left:Math.ceil(n.defaultValue(y.getLeftPosition(e,t,i,o),E.getLeftPosition(e,t,i,o)+S)),positionType:y.type,positionOffset:E.type}});H.apply(null,arguments)}o.register("BaseBalloonDrawer").asCtor(To).asProto().dependencies("Logger, UiUtils, CommonUtils, HostData, LanguageManager, Consts, PositionHelper, SiteConfigManager, BalloonUtils, BalloonOrientationProvider");function Co(t,n,r){var i,a=o.create("WalkmeOOP",this);a.Override("addBalloonDiv",function(e,r,o){var a=mtjQuery(r[0].ownerDocument.createElement("div"));return a.addClass("walkme-custom-balloon-outer-div"),a.addClass("mt-custom-balloon-outer-div"),a.css("display","none"),a.css("direction","ltr"),n.setStyleForBalloon(a,i.balloonSettings(),o),t.setLangAttribute(a),mtjQuery(r.append(a)),a.html(e),a}),a.Override("addIdentifiers",function(t,n,r,o,a,s,u){i.addIdentifiers(t,n,r,o,a,s,u),e("*",t).addClass("walkme-custom-step-"+r)}),a.Override("addArrowClasses",function(e,t,n,r,o){i.addArrowClasses(e,t,n,r,o),e.addClass("mt-custom-balloon-arrow-"+t)}),a.Override("getArrowsColors",function(e){var t=i.balloonSettings(),n=""==t.BalloonColor2?"transparent":t.BalloonColor2,r=t.BorderColor;switch(e){case"bottom":n=""==t.Color?"transparent":t.Color;break;case"top":break;case"left":case"right":n="transparent"==t.Color||"transparent"==t.BalloonColor2||"#00000000"==t.Color||"#00000000"==t.BalloonColor2?"transparent":u(t.Color,t.BalloonColor2)}return{innerArrow:n,outterArrow:r}});function s(){a.ExtendsInstance(o.create("BaseBalloonDrawer",r));var e=r.balloonSettings.minPopupWidth?r.balloonSettings.minPopupWidth:400;i=a._base,i.balloonClass("BalloonV2"),i.minWidth(190),i.arrowHeight(13),i.arrowBaseWidth(26),i.minPopupWidth(e)}function u(e,t){var n=function(e,t){return(e+t)/2},r=function(e){return parseInt((""+e).replace("#",""),16)},i=function(e){return(e>>0).toString(16)},o=r(e),a=r(t),s=function(e){return e>>16&255},u=function(e){return e>>8&255},l=function(e){return 255&e},c=i(n(s(o),s(a))),d=i(n(u(o),u(a))),p=i(n(l(o),l(a))),g="#"+(c.length<2?"0"+c:c)+(d.length<2?"0"+d:d)+(p.length<2?"0"+p:p);return g}s.apply(null,arguments)}o.register("BalloonDrawerV2").asCtor(Co).asProto().dependencies("UiUtils, BalloonUtils");function bo(t,n,r,i,a,s,u,l,c){var d,p,g=o.create("WalkmeOOP",this);g.Override("addBalloonDiv",function(e,t){var r=n.createElementInDocument(e,t[0].ownerDocument);return i.setLangAttribute(r),r.css("display","none"),s.appendToContainer(t,r)}),g.Override("loadResources",function(e,t){var n=d.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),g.Override("fixWidth",function(e,t,n,r){d.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),g.Override("getArrowsColors",function(e){var t=d.balloonSettings(),n=t.Color,r=h(),i=t.direction;switch(e){case"bottom":n=t.Color;break;case"top":n=t.BalloonColor2;break;case"left":"ltr"==i?n=t.Color:(n=t.ButtonBgColor,r=t.ButtonBgColor);break;case"right":"ltr"==i?(n=t.ButtonBgColor,r=t.ButtonBgColor):n=t.Color}return{innerArrow:n,outterArrow:r}}),g.Override("fixArrows",function(e){e.balloonSettings=d.balloonSettings(),e.arrowBaseWidth=d.arrowBaseWidth(),e.outerArrowColor=h(),t.fixArrows(e)}),g.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),g.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),g.Override("generateHtmlParams",function(e){var t=d.generateHtmlParams(e);return t.balloonParams.entity=p,t}),g.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto");var i=t.width();t.css("width",i+"px"),r.css("width","auto")}),g.Override("generateClassesForArrows",function(e,t,n,r){var i=d.generateClassesForArrows(e,t,n,r),o=u.get(p,l.ENTITY_TYPE.step);return o&&i.push(o),i});function f(){g.ExtendsInstance(o.create("BaseBalloonDrawer",c));var e=c.balloonSettings.minPopupWidth?c.balloonSettings.minPopupWidth:300;d=g._base,d.balloonClass("BalloonV3"),d.minWidth(190),d.minPopupWidth(e),d.arrowHeight(10),d.arrowBaseWidth(18),d.hasBorder(!1),p=c.entity}function h(){return d.balloonSettings().BorderColor}f.apply(null,arguments)}o.register("BalloonDrawerV3").asCtor(bo).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, ContainerAppender, SpecificEntityDesignTemplateCssClassGetter, SharedConsts"),o.register("BalloonDrawerVM1").asCtor(Io).asProto().dependencies("ArrowsHelper, CommonUtils, ResourceManager, UiUtils, Consts, FeaturesManager");function Io(t,n,r,i,a,s,u){var l,c=o.create("WalkmeOOP",this);c.Override("addBalloonDiv",function(t,r){var o=n.createElementInDocument(t,r[0].ownerDocument);return s.isFeatureEnabled("accessibility")&&(focusableElements=o.find(".walkme-custom-balloon-content-wrapper, .walkme-custom-balloon-button, .walkme-custom-balloon-close-button"),n.addTabIndex(focusableElements),focusableElements.on("focus",function(){e(this).css({outline:"2px solid #efb05e","outline-offset":"-1px"})}),focusableElements.on("blur",function(){e(this).css({outline:"none","outline-offset":"0px"})})),i.setLangAttribute(o),o.css("display","none"),r.append(o),o}),c.Override("loadResources",function(e,t){var n=l.balloonSettings().FontsData;n?r.fonts(n,e,t,t):t&&t()}),c.Override("fixWidth",function(e,t,n,r){l.fixWidth(e,t,n,r),e.css("width",e.width()+1+"px")}),c.Override("getArrowsColors",function(e){var t=l.balloonSettings(),n=t.Color,r=p();return n="top"==e?t.BalloonColor2:t.Color,{innerArrow:n,outterArrow:r}}),c.Override("fixArrows",function(e){e.balloonSettings=l.balloonSettings(),e.arrowBaseWidth=l.arrowBaseWidth(),e.outerArrowColor=p(),t.fixArrows(e)}),c.Override("fixQuirksMode",function(t){var n=e(".walkme-custom-side-border, .walkme-custom-balloon-bottom-clear",t);n.hide();var r=e(".walkme-custom-powered-by-div",t);if(r.length>0){var i=r.css("margin-bottom"),o=r.css("margin-top");r.css("margin-bottom","0px").css("margin-top","0px"),r.css("padding-bottom",i).css("padding-top",o)}}),c.Override("finalizeArrowsPosition",function(e,n,r){t.finalizeArrowsPosition(e,n)}),c.Override("handleWiderElement",function(e,t){var n=mtjQuery(".walkme-custom-balloon-content",t),r=mtjQuery(".walkme-custom-balloon-title",t);r.css("width","10px"),n.css("width",e+"px"),t.css("width","auto");var i=t.width();t.css("width",i+"px"),r.css("width","auto")});function d(){c.ExtendsInstance(o.create("BaseBalloonDrawer",u));var e=u.balloonSettings.minPopupWidth?u.balloonSettings.minPopupWidth:300;l=c._base,l.balloonClass("BalloonVM1"),l.minWidth(190),l.minPopupWidth(e),l.arrowHeight(10),l.arrowBaseWidth(18),l.hasBorder(!1),l.defaultMaxWidth(230)}function p(){return l.balloonSettings().ButtonBgColor}d.apply(null,arguments)}o.register("BalloonDrawerFactory").asCtor(wo);function wo(){var e=this;function t(){}e.get=function(e,t){var n;switch(e){case"v3":n=o.create("BalloonDrawerV3",t);break;case"vm1":n=o.create("BalloonDrawerVM1",t);break;default:n=o.create("BalloonDrawerV2",t)}return n},t.apply(null,arguments)}function _o(){var t=this;function n(){}function r(t,n,r){e(t).css(n,r)}t.addClickAndHover=function(t){var n=t.cssProperty,i=t.regularColor,o=t.hoverColor,a=t.clickColor,s=t.elemSelector,u=!1,l=t.balloonDiv,c=l.find(s);c.mouseenter(d),c.mouseleave(p),c.mouseup(f),c.mousedown(g);function d(t){u=!0;var i=e(".walkme-click-and-hover:active")[0]==t.currentTarget;i?r(t.currentTarget,n,a):r(t.currentTarget,n,o)}function p(e){u=!1,r(e.currentTarget,n,i)}function g(e){r(e.currentTarget,n,a)}function f(e){u?r(e.currentTarget,n,o):r(e.currentTarget,n,i)}},n.apply(null,arguments)}o.register("ClickAndHoverAdder").asCtor(_o);function Po(e){var t=this,n={None:0,Shadow:1,Glow:2};function r(){}t.calculate=function(t,r,i){if(t==n.Shadow)switch(r){case 0:return"1px 1px 3px 0px rgba(0, 0, 0, 0.2)";case 1:return"0px 0px 13px 0px rgba(0, 0, 0, 0.2)";case 2:return"0px 0px 13px 5px rgba(0, 0, 0, 0.2)"}else if(t==n.Glow){var o=e.hexToRgba(i,.6);switch(r){case 0:return"0px 0px 7px 0px rgba"+o;case 1:return"0px 0px 14px 0px rgba"+o;case 2:return"0px 0px 26px 5px rgba"+o}}},r.apply(null,arguments)}o.register("ShadowCalculator").asCtor(Po).dependencies("UiUtils"),o.register("BalloonPositionProvider").asCtor(Ao).dependencies("BalloonOrientationProvider, CommonUtils");function Ao(e,t){var n=this;n.findBestPosition=r,n.getPredefinedPosition=o;function r(t,n,r,o,a){var s=e.getOrderedDirections({lowPriorityDirection:a}),u=e.getOrderedOffsets();return i({elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:o},{mainOrientations:s,offsets:u})}function i(e,t){for(var n={},r=0;r<t.mainOrientations.length;r++){var i=t.mainOrientations[r];u(n,i,e);for(var o=0;o<t.offsets.length;o++){var l=t.offsets[o];if(l.isRelevant(n)){var c=a(n,l,e);if(c&&s(c,e))return c}}}return}function o(t,n,r,i,o,s){var l={},c=e.getOrientationByName(o),d=e.getOffsetByName(s)||e.getOffsetByName(c.defaultOffset),p={elementBounds:t,balloonSize:n,marginFromElement:r,drawingArea:i};return u(l,c,p),a(l,d,p)}function a(e,n,r){var i=n.getLeftPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea),o=n.getTopPosition(r.elementBounds,r.balloonSize,r.marginFromElement,r.drawingArea);return{left:t.defaultValue(e.left,i),top:t.defaultValue(e.top,o),positionType:e.positionType,positionOffset:n.type}}function s(e,t){var n=t.drawingArea.top<e.top,r=e.left+t.balloonSize.width<t.drawingArea.left+t.drawingArea.width,i=e.top+t.balloonSize.height<t.drawingArea.top+t.drawingArea.height,o=t.drawingArea.left<e.left;return n&&r&&i&&o}function u(e,t,n){e.top=t.getTopPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.left=t.getLeftPosition(n.elementBounds,n.balloonSize,n.marginFromElement,n.drawingArea),e.positionType=t.type}}o.register("BalloonOrientationProvider").asCtor(ko).dependencies("Consts, SiteConfigManager");function ko(e,t){var n=this;n.getOrderedDirections=l,n.getOrderedOffsets=c,n.getOrientationByName=d,n.getOffsetByName=p;var r="Direction",i="rtl",o=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Right,e.POSITION_TYPE.Left],a=[e.POSITION_TYPE.Top,e.POSITION_TYPE.Bottom,e.POSITION_TYPE.Left,e.POSITION_TYPE.Right],s=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToRight,e.POSITION_OFFSET_TYPE.ToLeft],u=[e.POSITION_OFFSET_TYPE.VerticallyCentered,e.POSITION_OFFSET_TYPE.HorizontalCentered,e.POSITION_OFFSET_TYPE.Above,e.POSITION_OFFSET_TYPE.Below,e.POSITION_OFFSET_TYPE.ToLeft,e.POSITION_OFFSET_TYPE.ToRight];function l(e){e=e||{};var t=g()?a:o;return f(m,t,e.lowPriorityDirection)}function c(){var e=g()?u:s;return f(v,e)}function d(e){return m[e]}function p(e){return v[e]}function g(){var e=t.get();return e&&e[r]==i}function f(e,t,n){for(var r=[],i=0;i<t.length;i++)r.push(e[t[i]]);return void 0!==n&&h(r,n),r}function h(e,t){e.sort(function(e,n){return e.type==t?1:n.type==t?-1:0})}var m={};m[e.POSITION_TYPE.Top]={type:e.POSITION_TYPE.Top,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.top-t.height-n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Bottom]={type:e.POSITION_TYPE.Bottom,defaultOffset:e.POSITION_OFFSET_TYPE.HorizontalCentered,getTopPosition:function(e,t,n,r){return e.bottom+n},getLeftPosition:function(e,t,n,r){return}},m[e.POSITION_TYPE.Right]={type:e.POSITION_TYPE.Right,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right+n}},m[e.POSITION_TYPE.Left]={type:e.POSITION_TYPE.Left,defaultOffset:e.POSITION_OFFSET_TYPE.VerticallyCentered,getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left-t.width-n}};var v={};v[e.POSITION_OFFSET_TYPE.VerticallyCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return Math.ceil(e.top+e.height/2-t.height/2)},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Above]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.bottom-t.height},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.Below]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.top)},getTopPosition:function(e,t,n,r){return e.top},getLeftPosition:function(e,t,n,r){return}},v[e.POSITION_OFFSET_TYPE.HorizontalCentered]={type:e.POSITION_OFFSET.Center,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return Math.ceil(e.left+e.width/2-t.width/2)}},v[e.POSITION_OFFSET_TYPE.ToRight]={type:e.POSITION_OFFSET.Start,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.left}},v[e.POSITION_OFFSET_TYPE.ToLeft]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return e.right-t.width}},v[e.POSITION_OFFSET_TYPE.SnapToViewportRight]={type:e.POSITION_OFFSET.End,isRelevant:function(e,t,n,r,i){return isNaN(e.left)},getTopPosition:function(e,t,n,r){return},getLeftPosition:function(e,t,n,r){return r.left+r.width-t.width-1}}}o.register("BalloonPositionVisibilityChecker").asCtor(Oo).dependencies("CommonUtils, FeaturesManager, Logger");function Oo(e,t,n){var r=this;r.isBalloonPositionVisibleRelativeToParents=function(e,n){if(t.isFeatureEnabled("disableIEVRTP"))return!0;var r=a(e);if(r)return!0;var u=i(e,n),c=e.parents("div"),d=!1,p=!1,g=!l(c,function(e){var e=mtjQuery(e);if(!t.isFeatureEnabled("disableAbsRTP")&&"absolute"==e.css("position"))return d=!0,!0;if(!t.isFeatureEnabled("disableFixRTP")&&"fixed"==e.css("position"))return p=!0,!0;var n=e.css("overflow"),r=o(n),i=s(u,e);return r&&i});return d||p||g};function i(e,t){var r=e.offset(),i=e.height(),o=e.width(),a={top:r.top,left:r.left};switch(t){case 0:a.left+=o/2;break;case 1:a.top+=i/2,a.left+=o;break;case 2:a.top+=i,a.left+=o/2;break;case 3:a.top+=i/2;break;default:n.error(new Error("Unknown balloon position"))}return a}function o(e){return"auto"==e||"scroll"==e||"hidden"==e}function a(e){var t=e.css("position");return"absolute"==t||"fixed"==t}function s(e,t){var n=t.offset();return u(e.top,n.top,t.outerHeight())||u(e.left,n.left,t.outerWidth())}function u(e,t,n){var r=t+n;return e<t||e>r}var l=function(t,n){return null!=e.firstMatch(t,n)}}o.register("PopupBalloonDisplayer").asCtor(Do).dependencies("PopupStepElementProvider, SiteConfigManager, PositionHelper, Consts, Logger, WalkthruBalloonContainer, BalloonDrawerProvider, BalloonButtonsEventsBinder");function Do(t,n,r,i,s,u,l,c){var d=this;d.showSpecialPopupBalloon=p;function p(d,p,g,f,h,m,v,S){var y=t.get(!0),E=Df(g);h&&(E.displayX=!1);var T=n.get().BalloonSettings;T=Df(T),e.extend(T,m);var C=o.create("Balloon",{element:y,forceEmbedBalloonInIframe:!1,positionHelper:r,fixedSize:{width:p,height:0},stepSettings:E,htmlContent:d.htmlContent,text:{title:d.title||"",content:d.text||"",subText:d.subText||""},data:{type:i.STEP_TYPE.Popup},configuration:T,logger:s,drawer:l.getBalloonDrawer(T,S),siteConfig:n.get(),bindButtonsFunc:v?void 0:c.addButtonEventsToBalloon});return new a(function(e){C.Show(!1,function(){var t=mtjQuery(C.getBalloonDiv());if(t.removeClass("walkme-custom-step-undefined"),mtjQuery("*",t).removeClass("walkme-custom-step-undefined"),t.removeClass("walkme-custom-walkthru-undefined"),mtjQuery("*",t).removeClass("walkme-custom-walkthru-undefined"),m&&m.surveyId){var n=m.surveyId;t.attr("id","walkme-survey-balloon-"+n)}f(t,T),e(C)}),u.add(C)})}}o.register("BalloonDrawerProvider").asCtor(No).dependencies("SiteConfigManager, BalloonDrawerFactory");function No(e,t){var n=this;n.getBalloonDrawer=i;function r(){}function i(e,n){var r=o(e),i={balloonSettings:r,entity:n},a=r.BalloonVersion;return t.get(a,i)}function o(t){var n=Df(t),r=e.get();return r&&(n.direction=r.Direction,n.showPoweredBy="1"==r.PoweredByLink,n.showPoweredByFormat=r.IsDisplayPoweredBy),n}r()}o.register("BalloonButtonsEventsBinder").asCtor(xo).dependencies("CurrentWalkthruData, Consts, Lib, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, WalkthruBalloonContainer, InitiatorTypeToAppTypeMapper, LibDestroyer, BBCodeEventsBinder, FeaturesManager");function xo(e,t,n,r,i,a,s,u,l,c,d){var p=this;p.addButtonEventsToBalloon=g,p.attachBalloonXButtonClickEvent=h;function g(e,t){f(e),h(e),c.bind(e,null,t),e.on("click mousedown mouseup",function(e){e.stopPropagation()})}function f(e){mtjQuery(".walkme-action-next, .walkme-action-start",e).click(function(e){y()}),mtjQuery(".walkme-action-back",e).click(function(e){v()}),mtjQuery(".walkme-action-done",e).click(function(e){E()})}function h(e){mtjQuery(".walkme-action-close, .walkme-action-cancel",e).click(function(e){m(e)})}function m(n){var a={ClickEvent:n};i.raiseEvent("UserStoppedWalkthru",a);var s=e.currentStep==-1;s||o.get("AuditStepsManager").auditStep(e.getCurrentWalkthru(),e.getCurrentStep(),t.STEP_STATUS.Exited),r.stopTutorial(s),i.raiseEvent("UserStoppedWalkthruAfterStop",a)}function v(){i.raiseEvent("BackButtonClicked");var t=e.getCurrentStep();T(t),e.stepPlayStack.pop(),S()&&r.executePreviousStep()}function S(){if(d.isFeatureEnabled("backButtonAlways"))return!0;return!C(e.lastBackButtonStepIndex-1)}function y(){i.raiseEvent("NextButtonClicked");var n=e.getCurrentStep();i.deprecatedRaiseEvent(t.EVENTS.Walkthrus.StepTriggered,n),T(n);var o=C();o||(e.state=t.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){b(n)||(r.stepWasCompleted(),r.executeTutorialNextStep())}))}function E(){i.raiseEvent("DoneButtonClicked");var n=e.getCurrentStep();if(i.deprecatedRaiseEvent(t.EVENTS.Walkthrus.StepTriggered,n),T(n),!b(n)){var o=C();o||(r.stepWasCompleted(),r.tutorialFinished())}}function T(e){e.durationHandler&&(e.durationHandler.clear(),e.durationHandler=null)}function C(e){for(var t,n=s.getAll(),r=0;r<n.length;r++)n[r].releaseEvents(e)&&(t=!0);return t}function b(e){return!(e.Type!=t.STEP_TYPE.Popup||!e.LinkedTutorialIds||!r.isTutorialIdsExist(e.LinkedTutorialIds.split(";")))&&(a.makeSplit(e.LinkedTutorialIds.split(";")),!0)}}o.register("Launcher").asCtor(Lo).asProto().dependencies("IconCreatorParamsProvider, IconCreator, IconContentProvider, CommonEvents, Consts, ClickAuditManager, InitiatorManager, UiElementPositionTrackerCreator, HostData, SettingsValuesRetriever, LauncherDefaultIcon, WalkmeVisibleReporter, LauncherActions");function Lo(e,t,n,r,i,a,s,u,l,c,d,p,g,f){var h=this;h.show=T,h.destroy=C,h.setTimeoutOn=b,h.isDrawn=I,h.display=w,h.removeDisplay=_,h.watchLauncherTimeout=null;var m,v,S,y;function E(){y=o.create("Highlighter",{element:f.element,settings:f.launcher.Settings,embedInElement:f.launcher.Settings.embedInParent,drawableType:"launcher",drawableId:f.launcher.Id,monitor:!0,defaultSettings:!1,cssKeysValues:[{id:f.launcher.Id,name:"launcher"}]})}function T(e){P().then(function(){p.report(),F(),e&&e(S)})}function C(e){v&&(v.destroy(),v=null),h.watchLauncherTimeout&&h.watchLauncherTimeout.clear(),R(),S=null,f.element=null,y=null,m=null,e&&e()}function b(){v=u.create(f.element,function(){m&&(m.reposition(),M())}),v.track()}function I(){try{return B()}catch(e){return!1}}function w(){S.show()}function _(){S.hide()}function P(){return m=A(),m.show().then(function(e){S=e.getOriginElement(),N(e);var t=U(f.launcher);t.applyBehavior(e);var n=x();n.applyBehavior(e),M(),"onHover"==f.launcher.Settings.displayStyle&&S.css("display","none")})}function A(){var n=k(),r=e.get(f.element,n);return t.create(r,f.element)}function k(){var e=O(),t={TemplateId:e.data.id,Type:e.type,Predefined:e},r=n.get(t);r||(r={mainImageUrl:e.data.url,hoverImageUrl:e.data.hover,clickImageUrl:e.data.click,text:e.data.customText,cssClassName:"custom-launcher-"+e.data.id,kind:e.data.url?i.ICON_CONTENT_KIND.Image:i.ICON_CONTENT_KIND.Text});var o={uniqueIdentifierType:"Launcher",uniqueIdentifierId:f.launcher.Id,isEmbedInElement:f.launcher.Settings.embedInParent,attachmentSide:f.launcher.Position,zindex:f.launcher.Settings["z-index"],perimeterType:f.launcher.Settings.context,isAnimated:f.launcher.Settings.animated,growingDirection:f.launcher.Settings.direction,positionTopCustomOffset:f.launcher.Settings.topOffset,positionLeftCustomOffset:f.launcher.Settings.leftOffset,contentElementCssClassNames:["walkme-launcher-image-div"],positionElementCssClassNames:D(),contentData:r};return o}function O(){return c.getSettingsValue(f.launcher.Settings,"imageObject",d)}function D(){var e=[];return e.push("walkme-launcher-id-"+f.launcher.Id),e.push("walkme-custom-launcher-outer-div"),e.push("walkme-text-launcher"),e}function N(e){if(f.launcher.Settings.embedInParent){var t=e.getTopMostElement();t.addClass("walkme-launcher-container"),t.addClass("walkme-launcher-container-id-"+f.launcher.Id)}}function x(){var e={clickAction:L()},t=o.create("ClickIconExecutionBehavior",e);return t}function L(){var e=function(){r.raiseEvent(i.EVENTS.Launchers.LauncherClicked,{launcherId:f.launcher.Id});var e={type:i.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,objectId:f.launcher.Id};s.setForScope(e,function(){g.getAction(f.launcher).doAction()}),a.SendClickAudit(i.DEPLOYABLE_TYPE.Launcher,f.launcher.Id)};return e}function M(){y.shouldShow()&&!l.isQuirksMode(f.element[0])&&y.highlight()}function F(){r.deprecatedRaiseEvent(i.EVENTS.Launchers.LauncherIsShown,{getId:function(){return f.launcher.Id},getName:function(){return f.launcher.Name}},{customText:O().data.customText,name:f.launcher.Name,launcherDiv:S,launcherId:f.launcher.Id})}function R(){m&&m.destroy(),y&&y.unhighlightElement()}function B(){var e=S.parents("html").length>0;return e}function U(e){var t=c.getSettingsValue(e.Settings,"tooltip",""),n={tooltipText:t},r=o.create("TolltipIconUiBehavior",n);return r}E()}o.register("LaunchersModule").asCtor(Mo).dependencies("ActionsFactory, Consts, CommonUtils, CommonEvents, SettingsValuesRetriever, Logger,CustomCssSetter, TimerManager, TutorialsManager, ContentsManager, SurveysManager,FeaturesManager, ConditionCheckerFactory, LauncherActions");function Mo(e,t,n,r,i,a,s,u,l,c,d,p,f,h){var m=this;m.getLaunchers=S,m.setLaunchers=y,m.showLauncher=b,m.showAllLaunchers=E,m.getLauncherAction=C,m.releaseLaunchers=L;var v=[];function S(){return v}function y(e){h.reset(),v=e}function E(){try{var e,t=0,n=0;function r(){try{e()}catch(t){}}function i(e,o){n++,n>=t&&(r(),w(!1,i))}try{window._walkmeInternals&&(e=profilerAPI.startProfile("showAllLaunchers"),e&&w(!0,i))}catch(o){w(!1,i)}for(var s=0;s<v.length;s++){var u=v[s],l=b(u);l&&t++,a.customerLog(Nf("willDrawLauncher={0} for launcher with id {1}",l,u.Id),1,g)}e&&0==t&&(r(),w(!1,i))}catch(c){a.error(c)}}function T(e){for(var t=0;t<v.length;t++)if(v[t].Id==e)return v[t]}function C(e){var t=T(e);return h.getAction(t)}function b(e,t){var n=p.isFeatureEnabled("hideLauncherWithoutLink");if(n&&!O(e))return!1;var r=i.getSettingsValue(e.Settings,"PlayLauncherConditionTree",null);return _(e,t,r)}function I(e,t){var n={featureName:g,elementName:e.Name,stopPollingAfterEvaluateTrue:!1},r=f.createOld(n);e.hoverLauncherEvaluator&&e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=r,r.onValueChanged(function(t){if(!t)return e.hoverDestroyTimeout=u.libSetTimeout(function(){e.drawable&&e.drawable.isDrawn()&&(e.hoverLauncherEvaluator.getCachedValue()||e.drawable.removeDisplay())},300),!1;e.hoverDestroyTimeout&&(e.hoverDestroyTimeout.clear(),e.hoverDestroyTimeout=void 0),e.drawable&&e.drawable.display()});var i,o=".walkme-launcher-id-"+e.Id;if(e.IdentifySettings.IsJquerySelector)i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:e.IdentifySettings.JquerySelector},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0};else{var a=D(e.IdentifySettings);i={nodeType:"Or",leftSon:{nodeType:"Func",funcName:"ElementHoverSwitch",funcArgs:{IdentifySettings:a},nodeDepth:0},rightSon:{nodeType:"Func",funcName:"jQueryHoverSwitch",funcArgs:{jQuerySelector:o},nodeDepth:0},nodeDepth:0}}r.evaluateAsync(i)}function w(e,t){var n=window._walkmeInternals;if(n){var r="LauncherIsShown";e?n.bind(r,t):n.unbind(r,t)}}function _(e,n,r){var a=!1,s=t.STICKY_TYPE.ONCE,l=i.getSettingsValue(e.Settings,t.IS_STICKY_SETTING_KEY,!1),c=!0;if(l&&parseInt(l)>0){var d=parseInt(i.getSettingsValue(e.Settings,t.STICKINESS_TYPE_SETTING_KEY,null));s=d==t.OLD_STICKIES.STICKINESS_TYPES.soft?t.STICKY_TYPE.SOFT:t.STICKY_TYPE.STRONG,c=!1}var p={logContext:e.Id,stickyType:s,isRemoveByCondition:1==e.Settings.condHide,elementVisibilityParams:{findElementParams:{IdentifySettings:e.IdentifySettings}},conditionCheckerParams:{featureName:g,elementName:e.Name},conditionTree:r,onShow:h,onRemove:v,trackUIChanges:!0},f=o.create("UIVisibilityManager",p);f.watchForVisibility();function h(t){a=!0,P(e,t,m)&&(e.drawable.uiVisibilityManager=f)}function m(){"onHover"===e.Settings.displayStyle&&I(e),S()}function v(){e.drawable&&e.drawable.destroy(),e.hoverLauncherEvaluator&&(e.hoverLauncherEvaluator.cleanResources(),e.hoverLauncherEvaluator=null)}function S(){e.drawable.watchLauncherTimeout=u.libSetTimeout(y,2e3)}function y(){e.drawable.isDrawn()?S():(v(),f.cleanResources(),f.watchForVisibility())}return a}function P(e,n,o){var u=i.getSettingsValue(e.Settings,"imageObject",""),l=A(n,u,e);if(l)return e.isContentSecure=!1,a.customerLog("Launcher ["+e.Id+"] will not be displayed. Launcher URL must be https in secure page",1),r.raiseEvent(t.EVENTS.Launchers.LauncherIsInsecure,{name:e.Name}),!1;e.isContentSecure=!0,s.setCustomCssIfNeeded(n);var c=M(n,e);e.drawable=c;var d=function(e){return function(){e.show(function(){e.setTimeoutOn(),o&&o()})}}(c);return k(e,d),!0}function A(e,t,n){if(void 0===typeof n.isContentSecure)return n.isContentSecure;var r=e[0].ownerDocument.location.href;if(!x(r)||"custom"!=t.type)return!1;if(!x(t.data.url)||!N(t.data.click)||!N(t.data.hover))return!0;return!1}function k(e,t){var r=n.isTrue(e.Settings,"hasDelay",!1);if(r){var o=i.getSettingsValue(e.Settings,"delayInSeconds",0);u.libSetTimeout(t,1e3*o)}else t()}function O(e){var t=e.Settings.action;switch(t.actionType){case"playWt":return null!=l.getById(parseInt(t.arguments.wtId));case"playContent":return null!=c.getById(parseInt(t.arguments.contentId));case"playSurvey":return null!=d.getById(parseInt(t.arguments.surveyId))}return!0}function D(e){var t=Df(e);return t.Sensitivity=e.StepSensitivity,t.StepSensitivity=void 0,t.IgnoreId=e.IsIgnoreId,t.IsIgnoreId=void 0,t.IgnoreText=e.IsIgnoreText,t.IsIgnoreText=void 0,t}function N(e){return!e||x(e)}function x(e){return/^https/i.test(e)}function L(e,t,r){var i=function(e,t){e.drawable?e.drawable.destroy(t):t&&t()};n.executeParallel({objectsArray:S(),functionsToExecute:[i],successCallback:function(){r||y([]),e&&e()}})}function M(e,t){return o.create("Launcher",{element:e,launcher:t})}}R.register(L.PLATFORM.Web,function(){o.register("LauncherDefaultIcon").asInstance({type:"shape",data:{shape:"round-question-mark",color:"blue"}})}),R.register(L.PLATFORM.MobileWeb,function(){o.register("LauncherDefaultIcon").asInstance({type:"htmlShape",data:{shape:"round-question-mark",color:"blue",customClass:"html-launcher-round-question-mark-blue",customText:"?"}})}),o.register("LauncherActions").asCtor(Fo).dependencies("SettingsValuesRetriever, Logger, ActionsFactory, Consts");function Fo(e,t,n,r){var i=this;i.reset=a,i.getAction=s;var o={};function a(){o={}}function s(i){if(o[i.Id])return o[i.Id];var a=e.getSettingsValue(i.Settings,"action",null);if(!a)return t.customerLog("No action core. aborting..."),null;return o[i.Id]=n.get(a.actionType,a.arguments,r.STEP_PLAY_INITIATOR_ENUM.LAUNCHER,i),o[i.Id]}}o.register("AuditStepsManager").asCtor(Ro).dependencies("Lib,ServerDataSenderManager,WalkMeInfo,Logger,HostData,WmAjax,Consts,StepUtils,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator, WmAjax, AuditingEnabledIndicator");function Ro(e,t,n,r,i,o,a,s,l,c,d,p,g,f,h,m,o,v){var S=this;S.init=C,S.safeStartAudit=I,S.auditStep=w,S.removeAllStepAuditsLogs=x,this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=k;var y,E;function T(){y=r.wrapCustomerLog(u)}function C(){E=t.register("sa",{beforeSendingManipulationFunc:b,actionUrl:"/Statistics/AddStepsLogs",prefixForStorage:"sa",sendingThreshold:5,dataType:"step audit",dataIdFieldName:"Id",requestParamsFunc:function(e){return{stepActionsSerialized:l.toJSON(e),source:n.getEnvironmentId(),customFieldsSerialized:l.toJSON(n.getAnalyticsCustomFields()),browser:i.browser.string,os:i.os.name,domain:window.location.host,permutationId:n.getPermutationId(),endUserGuid:n.getEndUserGuid()}}})}function b(e,t){L(e,t)}function I(e,t){if(!v.isEnabled())return y("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:t.TutorialId,tutorialName:t.Name,playGuid:S._currentPlayGUID,playInitiator:S._currentPlayInitiator,status:e};d.send(n)}catch(i){r.error(i)}try{var o=D(t.Id,-1,-1,a.STEP_STATUS.SupposedToShow,t.Steps.length,!1);o.SafeStartAction=e,E.sendData(o)}catch(i){r.error(i)}}function w(e,t,n,i){O(n,t);var o=e.Steps.length;if(!v.isEnabled())return y("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(t.TutorialId<0)return void y(Nf("Audit steps manager - Step with id {0} has negative tutorial id ({1})",t.Id,t.TutorialId),3);try{var a=D(t.TutorialId,t.Id,t.StepIndex+1,n,o,i);E.sendData(a);try{return _(t,e,o,n)}catch(s){return r.error(s,"Failed auditStep: stepId="+t.Id+", wtId="+e.TutorialId+", status="+n+", pId="+S._currentPlayGUID),!0}}catch(s){return r.error(s),s}}function _(e,t,n,r){var i=g.getSettingsValue(e.Settings,"action","");
return c.postEvent(c.EVENT_TYPES.Play,{type:c.EVENT_APPS.Step,oId:e.Id,oName:e.StepTitle||"",aType:P(i),aAppType:A(i),oType:e.Type,indx:e.StepIndex+1,owId:t.TutorialId,owName:t.Name,owType:c.EVENT_APPS.Walkthru,total:n,status:r,pId:S._currentPlayGUID})}function P(e){return e?p.map(e.actionType):""}function A(e){return e?f.map(e.actionType):""}function k(e){void 0!=S._currentPlayGUID&&0!=S._currentPlayGUID.length||(S._currentPlayGUID=m.generateNewPlayGuid(e))}function O(e,t){if(e!=a.STEP_STATUS.SkippedByActionStep){var n=e==a.STEP_STATUS.SkippedStartedFromBiggerStep?"NewSkippedStep":"CheckNewStep";h.deprecatedRaiseEvent(n,t)}}function D(e,t,n,r,i,o){k(e);var a={};return a.tutorialID=e,a.stepId=t,a.stepIndex=n,a.totalSteps=i,a.playGuid=S._currentPlayGUID,a.TicksSince1970=l.getDateAtUTC(),a.StepStatus=r,N(a),l.defaultValue(o,!1)&&(a.isFirstStepError=!0),a}function N(e){if(!S._currentPlayInitiator||S._currentPlayInitiator.type==a.STEP_PLAY_INITIATOR_ENUM.NONE)return void(e.playInitiator=a.STEP_PLAY_INITIATOR_ENUM.NONE);e.playInitiator=S._currentPlayInitiator.type,void 0!=S._currentPlayInitiator.objectId&&S._currentPlayInitiator.objectId>-1&&(e.initObjId=S._currentPlayInitiator.objectId)}function x(){E.clearAndStopSavingData()}function L(e,t){var n=[];if(e.length<=0)return n;for(var r=0;r<e.length;r++)e[r].stepIndex==t.stepIndex&&e[r].playGuid==t.playGuid&&(n.push(e.splice(r,1)[0]),r--);return n}T.apply(null,arguments)}o.register("AuditWtsManager").asCtor(Bo).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator");function Bo(e,t,n,r){var i=this;i.auditWalkthruStart=a;function o(){}function a(i,o,a,s,u){if(!r.isEnabled())return;var l=i.Steps;t.postEvent(t.EVENT_TYPES.Play,{type:t.getEventAppByDeployable(e.Tutorial),oId:i.TutorialId,oName:i.Name,pId:u||-1,pInit:n.map(o),oRequestedSubObject:l[a].Id,oActualSubObject:l[s].Id})}o.apply(null,arguments)}o.register("DocumentElementEventsBinder").asCtor(Uo).asProto().dependencies("wmjQuerySafe");function Uo(t){var n=this;n.on=r,n.off=i;function r(t,n,r,i){if(!r)return;r=[].concat(r);var o=e(t[0].ownerDocument);n=n||t;for(var a=0;a<r.length;a++)o.find(n).on(r[a],i)}function i(e,n,r){if(!r)return;r=[].concat(r);var i=t(e).getDocument();n=n||e;for(var o=0;o<r.length;o++)i.find(n).off(r[o])}}o.register("AuditTasksManager").asCtor(Wo).dependencies("EventSender, Consts, ReportInitiatorMapper, DeployableTypeToEventSenderAppTypeMapper, DeployablesManagerFactory, AuditingEnabledIndicator");function Wo(e,t,n,r,i,o){var a=this;a.auditTaskPlayed=u;function s(){}function u(a,s){if(!o.isEnabled())return;var u=i.get(a.RelatedDeployableType),l=u.getById(a.RelatedDeployableId);e.postEvent(t.EVENT_SENDER_EVENT_TYPES.Play,{type:t.EVENT_SENDER_EVENT_APPS.Task,oId:a.Id,oName:a.Name,pId:"-1",aoId:l.Id,aoName:l.Name,aAppType:r.map(a.RelatedDeployableType),pInit:n.map(s)})}s.apply(null,arguments)}o.register("AuditSafeStartManager").asCtor(Vo).dependencies("EventSender,ReportInitiatorMapper,Logger, Consts");function Vo(e,t,n,r){var i=this;i.send=a;function o(){}function a(t){if(u(t)){var r=s(t);e.postEvent(e.EVENT_TYPES.PlayFailed,r)}else n.error(null,"params is not valid for send action in AuditSafeStartManager")}function s(e){return{oId:e.tutorialId,oName:e.tutorialName,pId:e.playGuid,pInit:t.map(e.playInitiator),status:e.status,type:r.EVENT_SENDER_ACTIONS.PlayWalkthru}}function u(e){return null!=e&&null!=e.tutorialId&&null!=e.playGuid&&null!=e.status}o.apply(null,arguments)}o.register("EndUsersManager").asCtor(Go).dependencies("ClientStorageManager,Logger,JQueryElementFinder,GuidGenerator,CommonUtils, CommonEvents, Consts, MessageSender,IsInEditor");function Go(e,t,n,r,i,o,a,s,u){var l=this;l.setEndUserSettings=S,l.getEndUserSettings=C,l.isWalkMeGeneratedEndUserType=b,l.getEndUserGuid=w,l.createEndUserGuid=I,l.getEndUserGuidSource=D,l.isEndUserGuidValid=y,l.calculateCustomEndUserGuid=P;var c,d,p,g,f="wm-ueug",h="wm-fgug",m="endUser";function v(){}function S(e){c=e,o.raiseEvent(a.EVENTS.EndUserSettingsSet,{endUserSettings:e})}function y(){return!i.isValueTrue(c.FallbackDisabled)||T()||E()}function E(){var e=!0;return w(e)!==!1}function T(){return"walkme"==c.Method||"none"==c.Method}function C(){return c}function b(){var e=!0;return c&&(e=T()||!w(!0)),e}function I(){if(c||R("Cannot create end user guid before end user settings were set"),d)return;d=_(),d&&t.customerLog("getEndUserGuid: created endUserGuid-"+d,3,m)}function w(e){if(d||u.get()||R("Cannot get end user guid before it was created"),!e||!g)return d;return t.customerLog("Could not retrieve endUserGuid",3,m),!1}function _(){if(c){var e=l.calculateCustomEndUserGuid(c);return e?(p="Identifier",M(e)):e=A()||k(),e}}function P(e){if(!e)return;var r,o=e.Method,a=e.Parameters;switch(o){case"var":a.VarName&&(r=i.getWindowData(N.Var,a.VarName),L(r)&&(t.customerLog("endUserGuid - invalid variable name",1,m),r=void 0));break;case"salesforce":r=x();break;case"cookie":a.VarName&&(r=i.getWindowData(N.Cookie,a.VarName));break;case"jquery":a.VarName&&(r=n.getjQueryElementText(a.VarName))}var u={method:o,params:a};return r=s.send("EndUserRetrieved",u)||r}function A(){var e=F();if(e)return p="Cache",e}function k(){var e=!1;c&&"walkme"!=c.Method&&"none"!=c.Method?(p="Generated",e=!0):p="Identifier";var n=r.generateGuid();return t.customerLog("getEndUserGuid: generating new user guid-"+n+" isForced: "+e,3,m),M(n,e),n}function D(){return p}function x(){if(window.walkme_sf_vars)return window.walkme_sf_vars.userId}function L(e){return e&&e.nodeType}function M(t,n){e.saveData(f,t,O),n?(g=!0,e.saveData(h,1,O)):(g=!1,e.removeData(h))}function F(){return g=e.getData(h),e.getData(f)}function R(e){var n=new Error(e);throw t.error(n),n}v.apply(null,arguments)}o.register("EndUserLoggerManager").asCtor(Ho).dependencies("ClientStorageManager, Logger, EndUsersManager, SiteConfigManager, AbCurrentPermutationProvider, RecorderServerManager, HostData, FeaturesManager, WmAjax, AuditSourceManager, UserGuidContainer");function Ho(e,t,n,r,i,o,a,s,u,l,c){var d,p,g,f=this,h=1e4,m="endUser",v="wm-euaf";function S(){d=i.getCurrentPermutation}function y(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationName}function E(){if(window.walkme_sf_vars)return window.walkme_sf_vars.organizationId}function T(){if(window.walkme_sf_vars)return window.walkme_sf_vars.roleId}function C(){if(!window.walkme_sf_vars)return;var e=Df(window.walkme_sf_vars);return delete e.organizationName,delete e.organizationId,delete e.userId,e}function b(){if(window.walkme_sf_vars&&window.walkme_sf_vars.walkme_error)return!0;return!1}function I(){return v+n.getEndUserGuid()}function w(){var e=window.walkme_sf_vars,n="walkme_sf_error:"+wf(e);t.customerLog(n,1,m)}function _(){return void 0===p&&(p=r.get().EndUserSettings&&r.get().EndUserSettings.logWalkMeVisible),p}f.reportEndUser=function(e,i){if(g)return;var p=r.get().EndUserSettings?r.get().EndUserSettings.auditFreq:null,f=_();if(f&&!p&&(p=1440),!p||f&&!i)return;var v=A();if(v)return void(g=!0);if(0===v)return t.customerLog("Loading WalkMe Failed due to ISV Limitations",1),void(e&&e());if(b())return void w();var S={permutationId:d(),endUserGuid:n.getEndUserGuid(),domain:window.location.host,source:l.get(),browser:a.browser.string,os:a.os.name,userGuid:c.getUserGuid()};s.isFeatureEnabled("dontReportSF")||(S.organizationName=y(),S.organizationId=E(),S.roleId=T(),S.extraData=C());var I="Logging WalkMe EndUser ("+n.getEndUserGuid()+"). Caused by WalkMe Visible : "+!!i;t.customerLog(I,1,m);var k=wf(S);g=!0;u.execute({dataType:"jsonp",url:o.get()+"/EndUser/AddEndUserData",data:{endUsersDataSerialized:k},timeout:h,success:function(t){"true"==t?P(p,1):"false"==t&&(P(p,0),e&&e())}})};function P(t,n){e.saveData(I(),n,60*t)}function A(){return e.getData(I())}S.apply(null,arguments)}R.register([L.PLATFORM.Web,L.PLATFORM.iOS,L.PLATFORM.Android],function(){o.register("screen").asInstance(screen)}),R.register(L.PLATFORM.MobileWeb,function(){o.register("screen").asCtor(jo).dependencies("ExternalWalkMeConfig")});function jo(e){var t=e.get("isEmulator");if(t)return{width:window.innerWidth,height:window.innerHeight};return screen}function Yo(e,t,n,r,i,a){var s=this,u="deviceSystemVersion",l={"Camera Access":"video","Location Services":"location",Contacts:"contacts","Photo Gallery":"photos","Sending Notifications":"notifications"},c=0;s.getFuncList=function(){return Q},s.getFuncAssert=function(){return K},s.getAsyncFuncs=function(){return q};function d(e,t,n,r){return p(e,{varName:t},n,r)}function p(e,t,n,r,i){var a=i?i:new qo.regular,s=o.get("MobileUtils"),u=function(e){r&&r(e,a)},l=[{name:"success",callback:u}];return s.message(e+"_"+c,t,n,l),c++,a}function g(e){var n=function(n,r){r.setValue(n==t.ELEMENT_INTERACTION_TYPES.Visible),r.onRefresh(function(){r.setValue(!1),g(e.funcArgs,null,null,r)})};return p("Element_visible",{IdentifySettings:e.funcArgs.IdentifySettings},t.MOBILE_COMMANDS.GET_DATA.elementFinder,n,e.asyncResultObject)}function f(e){var n=function(n,r){r.setValue(n==t.ELEMENT_INTERACTION_TYPES.NotVisible),r.onRefresh(function(){r.setValue(!1),f(e.funcArgs,null,null,r)})};return p("Element_notVisible",{IdentifySettings:e.funcArgs.IdentifySettings},t.MOBILE_COMMANDS.GET_DATA.elementFinder,n,e.asyncResultObject)}function h(e,n,r){var i=l[n.PermissionsForApplicationVar];function o(e,t){t.setValue(void 0!==e[i]&&e[i]===r)}return d(e+i,i,t.MOBILE_COMMANDS.GET_DATA.permissions,o)}var m=function(e){return h("Permission_enabled_",e.funcArgs,!0)},v=function(e){return h("PermissionFor_notEnabled_",e.funcArgs,!1)};function S(e,t){if(e.toString()===t.toString())return!1;for(var n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length),o=0;o<i;){var a=Number(n[o]),s=Number(r[o]);if(a!=s)return a>s;o++}return n.length>r.length}function y(e,t){if(e.toString()===t.toString())return!1;return!S(e,t)}function E(e,t,n,r){var i=e[u];void 0===i||null===i?n.setValue(!1):n.setValue(r(i,t))}var T=function(e){function n(t,n){E(t,e.funcArgs.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()==t.toString().toLowerCase()})}return d("OSVersion_is",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},C=function(e){function n(t,n){E(t,e.funcArgs.OSVersionInput,n,function(e,t){return e.toString().toLowerCase()!=t.toString().toLowerCase()})}return d("OSVersion_isNot",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},b=function(e){function n(t,n){E(t,e.funcArgs.OSVersionInput,n,function(e,t){return S(e.toString(),t.toString())})}return d("OSVersion_newerThan",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)},I=function(e){function n(t,n){E(t,e.funcArgs.OSVersionInput,n,function(e,t){return y(e.toString(),t.toString())})}return d("OSVersion_olderThan",u,t.MOBILE_COMMANDS.GET_DATA.systemInfo,n)};function w(e,n,r){return d(e.StorageVarName+n,e.StorageVarName,t.MOBILE_COMMANDS.GET_DATA.storageVar,r)}var _=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName],i=a.decodeHtml(e.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!1):n.setValue(r.toString().toLowerCase()==i.toLowerCase())}return w(e.funcArgs,"_equals",t)},P=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName],i=a.decodeHtml(e.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===r||null===r?n.setValue(!0):n.setValue(r.toString().toLowerCase()!=i.toLowerCase())}return w(e.funcArgs,"_notEquals",t)},A=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isBigger(i,t.funcArgs.StorageVarInput))}return w(t.funcArgs,"_bigger",n)},k=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName];void 0===i||null===i?r.setValue(!1):r.setValue(e.isSmaller(i,t.funcArgs.StorageVarInput))}return w(t.funcArgs,"_smaller",n)},O=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName],o=a.decodeHtml(t.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!1):r.setValue(e.isLike(i.toString(),o))}return w(t.funcArgs,"_like",n)},D=function(t){function n(n,r){var i=n[t.funcArgs.StorageVarName],o=a.decodeHtml(t.funcArgs.StorageVarInput,["&",'"',"'"]);void 0===i||null===i?r.setValue(!0):r.setValue(!e.isLike(i.toString(),o))}return w(t.funcArgs,"_notLike",n)},N=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName];void 0!==r&&null!==r?n.setValue(!0):n.setValue(!1)}return w(e.funcArgs,"_exists",t)},x=function(e){function t(t,n){var r=t[e.funcArgs.StorageVarName];void 0!==r&&null!==r?n.setValue(!1):n.setValue(!0)}return w(e.funcArgs,"_notExists",t)},L=function(e){var t=n.getVisitsNumber();return t==e.funcArgs.VisitsNumber},M=function(e){var t=n.getVisitsNumber();return t>e.funcArgs.VisitsNumber},F=function(e){var t=n.getVisitsNumber();return t==e.funcArgs.VisitsNumber},R=function(e){var t=n.getLastVisitDate();return H(t,new Date(e.funcArgs.LastVisitDate))},B=function(e){var t=n.getLastVisitDate();return t>new Date(e.funcArgs.LastVisitDate)},U=function(e){var t=n.getLastVisitDate();return t<new Date(e.funcArgs.LastVisitDate)},W=function(e){var t=n.getLastVisitDate(),r=G(new Date,e.funcArgs.NumberOfDays);return H(t,r)||t>r},V=function(e){var t=n.getLastVisitDate(),r=G(new Date,e.funcArgs.NumberOfDays);return t<r};function G(e,t){var n=new Date;return n.setDate(e.getDate()-t),n}function H(e,t){return e>=t&&e<=t}var j=function(e){return r.wasAppUpdated()},Y=function(e){var t=r.getAppVersion();return void 0!==t&&t<e.funcArgs.LatestVersion},z=function(e){var t=e.funcArgs.DeviceOS;return i.getCurrentPlatform()==t},Q={StorageVarEquals:_,StorageVarNotEquals:P,StorageVarBigger:A,StorageVarSmaller:k,StorageVarLike:O,StorageVarNotLike:D,StorageVarExists:N,StorageVarNotExists:x,OSVersionIs:T,OSVersionIsNot:C,OSVersionNewerThan:b,OSVersionOlderThan:I,PermissionEnabled:m,PermissionNotEnabled:v,NumberOfVisitsIs:L,NumberOfVisitsGreaterThan:M,NumberOfVisitsLessThan:F,LastVisitDateWasIn:R,LastVisitDateWasAfter:B,LastVisitDateWasBefore:U,UserActiveInPastDays:W,UserNonActiveInPastDays:V,WasAppUpdated:j,IsAppHasOutdatedVersion:Y,DeviceOSIs:z,NativeElementVisible:g,NativeElementNotVisible:f},K=[];K.StorageVarExists=!1,K.StorageVarNotExists=!1,K.StorageVarEquals=!1,K.StorageVarNotEquals=!1,K.StorageVarLike=!1,K.StorageVarNotLike=!1,K.StorageVarBigger=!1,K.StorageVarSmaller=!1,K.OSVersionIs=!1,K.OSVersionIsNot=!1,K.OSVersionNewerThan=!1,K.OSVersionOlderThan=!1,K.PermissionEnabled=!1,K.PermissionNotEnabled=!1,K.NativeElementVisible=!1,K.NativeElementNotVisible=!1;var q=["StorageVarExists","StorageVarNotExists","StorageVarEquals","StorageVarNotEquals","StorageVarLike","StorageVarNotLike","StorageVarBigger","StorageVarSmaller","OSVersionIs","OSVersionIsNot","OSVersionNewerThan","OSVersionOlderThan","PermissionEnabled","PermissionNotEnabled","NativeElementVisible","NativeElementNotVisible"]}o.register("mobileConditionFunctions").asCtor(Yo).asSingleton().dependencies("CommonUtils, Consts, VisitsManager, VersionsManager, PlatformsService, HtmlDecoder");function zo(){var e=this,t=o.get("screen");e.getFuncList=function(){return s},e.getFuncAssert=function(){return u},e.getAsyncFuncs=function(){return l};var n=function(e){if(t.width>e.funcArgs.WidthInput)return!0;return!1},r=function(e){if(t.width<e.funcArgs.WidthInput)return!0;return!1},i=function(e){if(t.height>e.funcArgs.HeightInput)return!0;return!1},a=function(e){if(t.height<e.funcArgs.HeightInput)return!0;return!1},s={widthMoreThan:n,widthLessThan:r,heightMoreThan:i,heightLessThan:a},u=[],l=[]}o.register("ScreenSizeConditionFunctions").asCtor(zo).asSingleton().dependencies("screen");function Qo(){var e=this,t=o.get("win");e.getFuncList=function(){return a},e.getFuncAssert=function(){return s},e.getAsyncFuncs=function(){return u};function n(e,t,n){if(t==e.WindowSizeInput)return!1;return t>e.WindowSizeInput===n}var r=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!0);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!0)}},i=function(e){switch(e.funcArgs.SizeParameter){case"Width":return n(e.funcArgs,t.innerWidth||document.documentElement.clientWidth,!1);case"Height":return n(e.funcArgs,t.innerHeight||document.documentElement.clientHeight,!1)}},a={WindowSizeMoreThan:r,WindowSizeLessThan:i},s=[],u=[]}o.register("WindowSizeConditionFunctions").asCtor(Qo).asSingleton().dependencies("win");var Ko=function(){function t(e,t,n,r,i){this.args=[];for(var o=0;o<arguments.length;o++)arguments[o]&&this.args.push(arguments[o])}return t.prototype.getFuncList=function(){var t={};return e.safeEach(this.args,function(n,r){r&&r.getFuncList&&e.extend(t,r.getFuncList())}),t},t.prototype.getFuncAssert=function(){var t=[];return e.safeEach(this.args,function(n,r){r&&r.getFuncAssert&&e.extend(t,r.getFuncAssert())}),t},t.prototype.getAsyncFuncs=function(){var t=[];return e.safeEach(this.args,function(e,n){n&&n.getAsyncFuncs&&t.push.apply(t,n.getAsyncFuncs())}),t},t}();o.register("ConditionFunctionsHandler").asCtor(Ko).asSingleton().dependencies("ScreenSizeConditionFunctions, mobileConditionFunctions, WindowSizeConditionFunctions, HistoricalConditionFunctions, OnboardingConditionFunctions");var qo={};qo.fixed=function(e){var t=new qo.regular;return t.setValue(e),t},qo.noMemory=function(){var e,t,n,r=this;function i(e){t=e}r.onGotValue=function(e){},r.getValue=function(e){if(e)return n;return n=t()},r.onResourceClean=function(t){e=t},r.cleanResources=function(){e&&e()},r.onRefresh=function(){},r.refresh=function(){},i.apply(null,arguments)},qo.regular=function(){var e,t,n,r,i=this;function o(t){e=t}i.onGotValue=function(e){t=e},i.setValue=function(n){e=n,t&&t()},i.getValue=function(){return e},i.onResourceClean=function(e){n=e},i.cleanResources=function(){n&&n(),t=void 0},i.onRefresh=function(e){r=e},i.refresh=function(){r&&r()},o.apply(null,arguments)},qo.complex=function(){var e,t,n,r,i,o=this;function a(e,i,o){t=e,n=i,r=o}o.getValue=function(e){if(e)return i;return i=r(t.getValue,n.getValue)},o.onGotValue=function(e){t.onGotValue(e),n.onGotValue(e)},o.cleanResources=function(){t.cleanResources(),n.cleanResources(),e=void 0},o.refresh=function(){t.refresh(),n.refresh()},a.apply(null,arguments)},o.register("SonarEventHandler").asCtor(Xo).dependencies("FeaturesManager, Logger, ElementFinder, MessageSender, EventBinder");function Xo(e,t,n,r,i){var o=this;o.handleEvent=s,o.unbindEvent=l;var a=".mtCond";function s(i,o,a,s){var c=function(u){t.customerLog("An event was fired for condition checker result. (event:'"+o+"', element specified below) ",3),t.customerLog(i[0],3);var l=r.send("SonarEventRaised",{event:u});if(l)return;if(e.isFeatureEnabled("verifySonarAfterEvent")){var c=s(),d=u.srcElement||u.target;if(!c||c.length>0&&d&&!c.is(d))return t.customerLog("triggered element does not match condition selector",5),void a.setValue(!1)}n.wrapSession(function(){a.setValue(!0)})};u(i,o,c),a.onResourceClean(function(){l(i,o,c)})}function u(e,n,r){if(t.customerLog("Listening to event on element. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.bind(e,o,r)}}function l(e,n,r){try{if(t.customerLog("Stopped listening for event in condition checker result. (event:'"+n+"', element specified below) ",5),t.customerLog(e,5),e){var o=c(n,a);i.unbind(e,o,r)}}catch(s){}}function c(e,t){return e.replace(/ /g,t+" ")+t}}o.register("ConditionFunctions").asCtor(Jo).dependencies("Lib, JQueryElementFinder, CommonUtils, HostData, TimerManager, LanguageManager, ConditionFunctionsHandler, UrlCommonStringsRemover, StepRetriever, WalkthrusContainer, ConditionTreeUtils, Consts, WalkthrusModule, CurrentWalkthruData, ConditionBlocksManager, CookiesManager, ClientStorageManager, HtmlDecoder, LocationService, LocationMatcher, NewToOldConditionConverter, Logger, ArrayUtils, ClientOrServerStorageManager, AbTestingGoalsManagerInstance, SonarEventHandler");function Jo(t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b,I,w,_,P){var A=this,k={TRUE:0,FALSE:1,CANNOT_ASSERT:2},O="jQuery",D="SelectedElement",x="Element",L=function(){var e={Id:-1,TutorialId:-1,StepText:"",StepTitle:"",ElementDescription:"",StepIndex:-1,ConfigurationId:"1",Configuration:null,StepSensitivity:1,Type:-1,Settings:{},Duration:4,Delay:0};return e};function M(e,t){return r.isBigger(e,t)}function F(e,t){return r.isSmaller(e,t)}function R(e,t){return r.isLike(e,t)}function B(e,t){var n,r;try{t.regexText&&(r=new RegExp(t.regexText,t.regexFlags),n=r.exec(e))}catch(i){}return null!=n}function U(e){var t=e.split(":"),n=Number(t[0]),r=Number(t[1]);return 60*n+r}this.getElementTextForEditor=function(e){var t=_f(e);return A.getElementText(t)},this.getElementStrength=function(e){var n=_f(e),r=Te(n),i={score:-1},o=t.findElement(r,null,i);if(o)return i.score},this.getElementText=function(n){var i=Te(n),o=t.findElement(i,!1);return o!==!1&&r.checkElementText(e(o))};function W(t){var n=new RegExp("[ \t"+String.fromCharCode(160)+"\r\n\x0B\f]+","gi");return t=t.replace(n," "),t=e.trim(t)}function V(e){b.customerLog("jQuery find element for condition",5);var t=n.findElementsByjQueryComplexSelector(e.jQuerySelector);return b.customerLog(t,5),0===t.length&&(t=!1),t}function G(e,t){var n=function(){return V(e.funcArgs)};return Ne(t,e.pollingInterval,n)}function H(e,t,n,r){var i=function(){return V(e)};return Le(e,t,n,r,i)}var j=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"hover")},Y=function(e){return G(e,"hover")},z=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"click mouseup mousedown")},Q=function(e){return G(e,"click mouseup mousedown")},K=function(t){return t=e.extend(t,{pollingInterval:-1}),G(t,"swipe")},q=function(e){return G(e,"swipe")},X=function(e){return H(e.funcArgs,"mouseenter","mouseleave",e.pollingInterval)},J=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>0},$=function(e){return 0==n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length},Z=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length>parseInt(e.funcArgs.jQueryLength)},ee=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length<parseInt(e.funcArgs.jQueryLength)},te=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length==parseInt(e.funcArgs.jQueryLength)},ne=function(e){return n.findElementsByjQueryComplexSelector(e.funcArgs.jQuerySelector).length!=parseInt(e.funcArgs.jQueryLength)},re=function(e){for(var t=parseInt(e.funcArgs.StepId),n=h.stepPlayHistory,r=0;r<n.length;r++)if(n[r]==t)return!0;return!1},ie=function(e){return!re(e)},oe=function(e){for(var t=parseInt(e.funcArgs.StepId,10),n=0;n<h.stepCompletedHistory.length;n++)if(h.stepCompletedHistory[n]==t)return!0;return!1},ae=function(e){return!oe(e)},se=function(e){var t=new Date(y.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),t-n==0},ue=function(e){return!se(e)},le=function(e){var t=new Date(y.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n>=t},ce=function(e){var t=new Date(y.decodeHtml(e.funcArgs.DateInput,["&"])),n=new Date;return n.setHours(0,0,0,0),n<=t},de=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getDay()},pe=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getMonth()},ge=function(e){var t=new Date;return Number(e.funcArgs.DateInput)==t.getFullYear()},fe=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n>=U(e.funcArgs.TimeInput)},he=function(e){var t=new Date,n=60*t.getHours()+t.getMinutes();return n<=U(e.funcArgs.TimeInput)},me=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(E.getCurrentLocation().toLowerCase())},ve=function(e){return!me(e)},Se=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(E.getCurrentLocation()).toLowerCase().indexOf(l.remove(t).toLowerCase())>=0},ye=function(e){return!Se(e)};function Ee(e){return"boolean"==typeof e?e:1===e||0!==e&&("string"==typeof e?"true"==e.toLowerCase()||"1"==e||"false"!=e.toLowerCase()&&"0"!=e&&void 0:void 0)}function Te(e){var t=L();return e.IdentifySettings?(t.ElementDescription=_f(wf(e.IdentifySettings.ElementDescription)),t.IsIgnoreText=void 0===e.IdentifySettings.IgnoreText?Ee(e.IdentifySettings.IsIgnoreText):parseInt(e.IdentifySettings.IgnoreText),t.StepSensitivity=void 0===e.IdentifySettings.Sensitivity?parseInt(e.IdentifySettings.StepSensitivity):parseInt(e.IdentifySettings.Sensitivity),t.IsIgnoreId=void 0===e.IdentifySettings.IgnoreId?Ee(e.IdentifySettings.IsIgnoreId):parseInt(e.IdentifySettings.IgnoreId),t.IgnorePosition=Ee(e.IdentifySettings.IgnorePosition),t.IsIdentifyByText=Ee(e.IdentifySettings.IsIdentifyByText)):t.ElementDescription=_f(wf(e.ElementDescription)),t}var Ce=function(e){var t=Oe(e.funcArgs);return l.remove(t).toLowerCase()==l.remove(E.getCurrentUrlPath()).toLowerCase()},be=function(e){return!Ce(e)},Ie=function(e){var t=Oe(e.funcArgs);return E.getCurrentUrlPath().toLowerCase().indexOf(t.toLowerCase())>=0},we=function(e){return!Ie(e)},_e=function(e){var t=Oe(e.funcArgs),n=l.remove(E.getCurrentUrlPath()),r=l.remove(t);return R(n,r)},Pe=function(e){return!_e(e)},Ae=function(e){var t=l.remove(E.getCurrentUrlPath()),n=e.funcArgs.UrlInput;return B(t,n)},ke=function(e){return!Ae(e)};function Oe(e){return y.decodeHtml(e.UrlInput,["&"])}var De=function(e){var n=Te(e.funcArgs);return 0!=t.findElement(n,!1)};function Ne(e,t,n){var r,i,o=new qo.regular((!1));function s(){b.customerLog("Poll Element: start search for element (polling: "+t>"0)",5),r&&r.clear();var u=!!i&&xe(i);u||(P.unbindEvent(i,e),i=n(),b.customerLog("Poll Element: element matched: ",5),b.customerLog(i,5),i?P.handleEvent(i,e,o,n):t>=0&&o.setValue(!1)),t>=0&&(r=a.libSetTimeout(s,t))}return o.onResourceClean(function(){t=-1}),o.onRefresh(function(){o.getValue()&&o.setValue(!1),s()}),o.getValue()||s(),o}function xe(e){var t;try{t=e[0].ownerDocument}catch(n){return!1}var r=t.defaultView||t.parentWindow;if(!r||r.top!=window.top||!e.is(":mt_visible"))return!1;return!0}function Le(e,t,n,r,i){var o,a=function(e){return e?o:o=i()},s=new qo.regular,u=Ne(t,r,function(){return a(!1)}),l=Ne(n,r,function(){return a(!0)});return u.onGotValue(function(){u.getValue()&&s.setValue(!0)}),l.onGotValue(function(){l.getValue()&&s.setValue(!1)}),s.onResourceClean(function(){u.cleanResources(),l.cleanResources()}),s}function Me(e){var n=Te(e);b.customerLog("Find element for condition",5);var r=t.findElement(n,null);return b.customerLog(r,5),r}function Fe(e,t){var n=function(){return Me(e.funcArgs)};return Ne(t,e.pollingInterval,n)}function Re(e,t,n){var r=function(){return Me(e.funcArgs)};return Le(e.funcArgs,t,n,e.pollingInterval,r)}var Be=function(t){return t=e.extend(t,{pollingInterval:-1}),Fe(t,"hover")},Ue=function(e){return Fe(e,"hover")},We=function(t){return t=e.extend(t,{pollingInterval:-1}),Fe(t,"click mouseup mousedown")},Ve=function(e){return Fe(e,"click mouseup mousedown")},Ge=function(t){return t=e.extend(t,{pollingInterval:-1}),Fe(t,"swipe")},He=function(e){return Fe(e,"swipe")},je=function(e){return Re(e,"mouseenter","mouseleave")},Ye=function(e){return!De(e)},ze=function(e){var n=Te(e.funcArgs);return 0!=t.findElement(n,!0)},Qe=function(e){return!ze(e)},Ke=function(n){var r=Te(n.funcArgs),i=t.findElement(r,!1);return e(i).is(":checked")},qe=function(e){return!Ke(e)};function Xe(e,t){return B(e,t)}function Je(e,t){return!Xe(e,t)}function $e(e,t){var n=y.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&W(e.toLowerCase())==W(n.toLowerCase())}function Ze(e,t){return!$e(e,t)}function et(e,t){var n=y.decodeHtml(t,["&",'"',"'",">","<"]);return e!==!1&&R(W(e),W(n))}function tt(e,t){return!et(e,t)}function nt(e,t){return e!==!1&&M(e,t)}function rt(e,t){return e!==!1&&F(e,t)}function it(t,n){return t=e.trim(t),t.length<parseInt(n)}function ot(t,n){return t=e.trim(t),t.length==parseInt(n)}function at(t,n){return t=e.trim(t),t.length>parseInt(n)}function st(t){var n=e.grep(t.split(/\s+/),function(e){return 0!=e.length}).length;return n}function ut(e,t){return st(e)<parseInt(t)}function lt(e,t){return st(e)==parseInt(t)}function ct(e,t){return st(e)>parseInt(t)}function dt(e){if(!e)return!1;if(!isNaN(e))return!0;if(/^[+-]?(?=.)(\d{1,3}(,\d{3})*)?(\.\d+)?$/.test(e))return!0;if(!isNaN(e.replace(",",".")))return!0;if(/^[+-]?(?=.)(\d{1,3}(\.\d{3})*)?(,\d+)?$/.test(e))return!0;return!1}function pt(e){return!dt(e)}function gt(e){var t="([1-9]\\d?|0?[1-9])",n="(\\d\\d\\d[1-9])",r="([.\\-\\/ ])",i=Nf("(({0}{2}{0}\\4{1})|({1}{2}{0}\\9{0})|({0}{2}{0}\\14{0}))",t,n,r),o=new RegExp(i,"i"),a=o.exec(e);return null!=a&&e==a[0]}function ft(e){return!gt(e)}function ht(e){var t=/((2[0-4])|([0-1]?[0-9])):([0-5][0-9])[^:]*/,n=e.match(t);return null!=n&&e==n[0]}function mt(e){return!ht(e)}function vt(e){var t=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,n=e.match(t);return null!=n&&e==n[0]}function St(e){return!vt(e)}function yt(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function Et(e){return!yt(e)}function Tt(e){var t=/(https?:\/\/)?[-a-zA-Z0-9@:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/,n=e.match(t);return null!=n&&e==n[0]}function Ct(e){return!Tt(e)}var bt=function(e){return!!e.funcArgs.getSelectedElement()},It=function(e){return!bt(e)},wt=function(t){return e(t.funcArgs.getSelectedElement()).is(":checked")},_t=function(e){return!wt(e)},Pt=function(e){return!!e.funcArgs.getSelectedElement()},At=function(e){return!Pt(e)},kt=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]);if(0==t.indexOf("regexp:"))return T.isLocationMatchString(t);var n=l.remove(E.getCurrentLocation()),r=l.remove(t);return R(n,r)},Ot=function(e){return!kt(e)},Dt=function(e){var t=l.remove(E.getCurrentLocation()),n=e.funcArgs.UrlInput;return B(t,n)},Nt=function(e){return!Dt(e)},xt=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(t.toLowerCase())==l.remove(Br().toLowerCase())},Lt=function(e){return!xt(e)},Mt=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]);return l.remove(Br().toLowerCase()).indexOf(l.remove(t.toLowerCase()))>=0},Ft=function(e){return!Mt(e)},Rt=function(e){var t=y.decodeHtml(e.funcArgs.UrlInput,["&"]),n=l.remove(Br()),r=l.remove(t);return R(n,r)},Bt=function(e){return!Rt(e)},Ut=function(e){var t=l.remove(Br()),n=e.funcArgs.UrlInput;return B(t,n)},Wt=function(e){return!Ut(e)},Vt=function(e){return R(i.browser.string,"*"+e.funcArgs.BrowserName+"*")},Gt=function(e){return!Vt(e)},Ht=function(e){return window.self!==window.top},jt=function(e){return!Ht(e)},Yt=4e3,zt=function(e){var t=S.getData(g.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY);if(!t)return!1;var n=((new Date).getTime()-t)/2,r=n>Yt?Yt:Kt(n,Yt)*Yt;return o.get("WalkmeLoadTimeManager").getWalkmeLoadTime()+r>t},Qt=function(e){return!zt(e)};function Kt(e,t){return e/=t,e--,Math.sqrt(1-e*e)}var qt=function(e){var t=v.getCookie(e.funcArgs.CookieName),n=y.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&t.toLowerCase()==n.toLowerCase()},Xt=function(e){return!qt(e)},Jt=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1&&M(t,e.funcArgs.CookieInput)},$t=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1&&F(t,e.funcArgs.CookieInput)},Zt=function(e){var t=v.getCookie(e.funcArgs.CookieName),n=y.decodeHtml(e.funcArgs.CookieInput,["&",'"',"'"]);return t!==!1&&R(t,n)},en=function(e){return!Zt(e)},tn=function(e){var t=v.getCookie(e.funcArgs.CookieName);return t!==!1},nn=function(e){return!tn(e)},rn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;null===t&&(t="null");var n=y.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase();
},on=function(e){return!rn(e)},an=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return M(t,e.funcArgs.DataValue)},sn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t)return!1;return F(t,e.funcArgs.DataValue)},un=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);if(void 0===t||null===t)return!1;var n=y.decodeHtml(e.funcArgs.DataValue,["&",'"',"'"]);return R(t,n)},ln=function(e){return!un(e)},cn=function(e){var t=w.getData(e.funcArgs.DataKey,void 0);return void 0!==t},dn=function(e){return!cn(e)},pn=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName),n=y.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&t.toString().toLowerCase()==n.toLowerCase()},gn=function(e){return!pn(e)},fn=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName);return void 0!==t&&M(t,e.funcArgs.WindowVarInput)},hn=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName);return void 0!==t&&F(t,e.funcArgs.WindowVarInput)},mn=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName),n=y.decodeHtml(e.funcArgs.WindowVarInput,["&",'"',"'"]);return void 0!==t&&null!==t&&R(t.toString(),n)},vn=function(e){return!mn(e)},Sn=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName);return void 0!==t&&null!==t},yn=function(e){return!Sn(e)},En=function(e){var t=r.getWindowData(N.Var,e.funcArgs.WindowVarName);return B(t,e.funcArgs.WindowVarInput)},Tn=function(e){return!En(e)},Cn=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=y.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return n.toLowerCase()==t.toLowerCase()},bn=function(e){return!Cn(e)},In=function(e){var t=s.getCurrentLanguage();""===t&&(t="default");var n=y.decodeHtml(e.funcArgs.LanguageName,["&",'"',"'"]);return R(t,n)},wn=function(e){return!In(e)},_n=function(e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),i=d.getWalkthruById(r),o=c.getStepIndex(n,r);if(i&&o>-1){var a=i.Steps[o];return t.findElement(a,!1)!==!1}return!1},Pn=function(e){return!_n(e)},An=function(e){var t=parseInt(e.funcArgs.StepId),n=parseInt(e.funcArgs.TutorialId),r=d.getWalkthruIndexByWalkthruId(n),i=c.getStepIndex(t,n);if(i>-1&&r>-1){var o=f.checkIfStepExistsWithSkippables(r,i,void 0,void 0,void 0,g.CHECK_STEP_MODE.Sandbox);if(o>=0)return!0}return!1},kn=function(e){return!An(e)},On=function(e){var n=parseInt(e.funcArgs.StepId),r=parseInt(e.funcArgs.TutorialId),i=d.getWalkthruById(r),o=c.getStepIndex(n,r);if(i&&o>-1){var a=i.Steps[o];return t.findElement(a,!0)!==!1}return!1},Dn=function(e){return!On(e)},Nn=function(e){var t=parseInt(e.funcArgs.GoalId);return _.value&&_.value.isGoalReached(t)},xn=function(e){return!Nn(e)},Ln=function(e){return!!Fn(e)},Mn=function(e){var t=Fn(e);return null==t?null:!t};function Fn(e){var t=parseInt(e.funcArgs.TaskId),n=parseInt(e.funcArgs.GoalId);return o.get("TodoListManager").isTaskGoalReached(t,n)}var Rn=function(t){var n=e("#tsidLabel"),r=y.decodeHtml(t.funcArgs.SfTabInput.toString(),["&",'"',"'",">","<"]);return 0!=n.length&&W(n.text().toLowerCase())==W(r.toLowerCase())},Bn=function(e){return!Rn(e)},Un=function(t){var n=e("#tsidLabel"),r=y.decodeHtml(t.funcArgs.SfTabInput,["&",'"',"'",">","<"]);return 0!=n.length&&W(n.text().toLowerCase()).indexOf(W(r.toLowerCase()))>=0},Wn=function(e){return!Un(e)},Vn={Accounts:"salesforce.com/001/",Contacts:"salesforce.com/003/",Opportunities:"salesforce.com/006/",Documents:"salesforce.com/015/",Cases:"salesforce.com/500/",Solutions:"salesforce.com/501/",Contracts:"salesforce.com/800/",Reports:"salesforce.com/00O/",Leads:"salesforce.com/00Q/",Dashboards:"salesforce.com/01Z/",CustomTabs1:"salesforce.com/a00/",Products:"salesforce.com/a01/"},Gn={MainPage:"o",New:"e"},Hn=function(e){var t=e.funcArgs.SfType,n=e.funcArgs.SfModoule,r={funcArgs:{UrlInput:""+Vn[t]+Gn[n]}};return Se(r)},jn=function(e){return!Hn(e)},Yn=function(e){if(e.funcArgs.conditionBlockId>0)return m.activateById(e.funcArgs.conditionBlockId,void 0);return!1},zn=function(e,t){var n=r.getWindowData(N.Var,e);return void 0!==n&&null!==n&&t(n)},Qn="walkMeWorkday.segmentation.flow.forms";this.WORKDAY_FORMS_VAR_NAME=Qn;var Kn=function(e){return zn(Qn,function(t){return t[e.funcArgs.FormInput]})},qn=function(e){return!Kn(e)},Xn=function(e){return zn(Qn,function(t){var n=y.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(r.toLowerCase().indexOf(n.toLowerCase())>=0)return!0;return!1})},Jn=function(e){return!Xn(e)},$n=function(e){return zn(Qn,function(t){var n=y.decodeHtml(e.funcArgs.FormInput,["&",'"',"'"]);for(var r in t)if(R(r,n))return!0;return!1})},Zn=function(e){return!$n(e)},er=function(e){return zn(Qn,function(t){var n=0;for(var r in t)n++;return n.toString()===e.funcArgs.FormInput})},tr=function(e){return r.getWindowData(N.Var,Qn)},nr=function(e){return!tr(e)},rr="walkMeWorkday.segmentation.flow.page";this.WORKDAY_PAGE_VAR_NAME=rr;var ir=function(e){return zn(rr,function(t){var n=y.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},or=function(e){return!ir(e)},ar=function(e){return zn(rr,function(t){var n=y.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},sr=function(e){return!ar(e)},ur=function(e){return zn(rr,function(t){var n=y.decodeHtml(e.funcArgs.PageInput,["&",'"',"'"]);return R(t,n)})},lr=function(e){return!ur(e)},cr=function(e){return zn(rr,function(e){if(""===e)return!1;return!0})},dr=function(e){return!cr(e)},pr="walkMeWorkday.segmentation.flow.subPage";this.WORKDAY_SUB_PAGE_VAR_NAME=pr;var gr=function(e){return zn(pr,function(t){var n=y.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toString().toLowerCase()==n.toLowerCase()})},fr=function(e){return!gr(e)},hr=function(e){return zn(pr,function(t){var n=y.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return t.toLowerCase().indexOf(n.toLowerCase())>=0})},mr=function(e){return!hr(e)},vr=function(e){return zn(pr,function(t){var n=y.decodeHtml(e.funcArgs.SubPageInput,["&",'"',"'"]);return R(t,n)})},Sr=function(e){return!vr(e)},yr=function(e){return zn(pr,function(e){if(""===e)return!1;return!0})},Er=function(e){return!yr(e)},Tr="walkMeWorkday.segmentation.worklets";function Cr(e){return zn(Tr,function(t){return t&&t[e.funcArgs.workletUid]})}function br(e){return!Cr(e)}var Ir="walkMeWorkday.segmentation.inbox";function wr(e){return zn(Ir,function(t){return t&&t[e.funcArgs.inboxItemUid]})}function _r(e){return!wr(e)}var Pr={jQueryTrue:J,jQueryFalse:$,jQueryLengthBigger:Z,jQueryClicked:z,jQueryClickedSticky:Q,jQueryHovered:j,jQueryHoveredSticky:Y,jQueryHoverSwitch:X,jQuerySwiped:K,jQuerySwipedSticky:q,jQueryLengthSmaller:ee,jQueryLengthEquals:te,jQueryLengthNotEquals:ne,StepPlayed:re,StepNotPlayed:ie,StepCanPlay:An,StepCannotPlay:kn,StepIsVisible:On,StepIsNotVisible:Dn,StepExists:_n,StepNotExists:Pn,StepCompleted:oe,StepNotCompleted:ae,UrlEquals:me,UrlNotEquals:ve,UrlContains:Se,UrlNotContains:ye,UrlLike:kt,UrlNotLike:Ot,UrlIsPerRegularExpression:Dt,UrlIsNotPerRegularExpression:Nt,UrlPathEquals:Ce,UrlPathNotEquals:be,UrlPathContains:Ie,UrlPathNotContains:we,UrlPathLike:_e,UrlPathNotLike:Pe,UrlPathIsPerRegularExpression:Ae,UrlPathIsNotPerRegularExpression:ke,DateEquals:se,DateNotEquals:ue,DateFrom:le,DateUntil:ce,DateIsDay:de,DateIsMonth:pe,DateIsYear:ge,TimeFrom:fe,TimeUntil:he,ReferrerUrlEquals:xt,ReferrerUrlNotEquals:Lt,ReferrerUrlContains:Mt,ReferrerUrlNotContains:Ft,ReferrerUrlLike:Rt,ReferrerUrlNotLike:Bt,ReferrerUrlIsPerRegularExpression:Ut,ReferrerUrlIsNotPerRegularExpression:Wt,ElementExists:De,ElementNotExist:Ye,ElementVisible:ze,ElementNotVisible:Qe,ElementClicked:We,ElementClickedSticky:Ve,ElementHovered:Be,ElementHoveredSticky:Ue,ElementHoverSwitch:je,ElementSwiped:Ge,ElementSwipedSticky:He,ElementSelected:Ke,ElementNotSelected:qe,BrowserEquals:Vt,BrowserNotEquals:Gt,ContainerIsIframe:Ht,ContainerNotIframe:jt,WindowIsNew:zt,WindowIsNotNew:Qt,CookieExists:tn,CookieNotExists:nn,CookieEquals:qt,CookieNotEquals:Xt,CookieBigger:Jt,CookieSmaller:$t,CookieLike:Zt,CookieNotLike:en,WalkMeDataExists:cn,WalkMeDataNotExists:dn,WalkMeDataEquals:rn,WalkMeDataNotEquals:on,WalkMeDataBigger:an,WalkMeDataSmaller:sn,WalkMeDataLike:un,WalkMeDataNotLike:ln,LanguageEquals:Cn,LanguageNotEquals:bn,LanguageLike:In,LanguageNotLike:wn,WindowVarEquals:pn,WindowVarNotEquals:gn,WindowVarBigger:fn,WindowVarSmaller:hn,WindowVarLike:mn,WindowVarNotLike:vn,WindowVarExists:Sn,WindowVarNotExists:yn,WindowVarIsPerRegularExpression:En,WindowVarIsNotPerRegularExpression:Tn,TaskGoalReached:Ln,TaskGoalNotReached:Mn,ExperimentGoalReached:Nn,ExperimentGoalNotReached:xn,SalesforceTabEquals:Rn,SalesforceTabNotEquals:Bn,SalesforceTabContains:Un,SalesforceTabNotContains:Wn,SalesforceUrlEquals:Hn,SalesforceUrlNotEquals:jn,ConditionBlockTrue:Yn,FormEquals:Kn,FormNotEquals:qn,FormContains:Xn,FormNotContains:Jn,FormLike:$n,FormNotLike:Zn,FormCount:er,FormExists:tr,FormNotExists:nr,PageEquals:ir,PageNotEquals:or,PageContains:ar,PageNotContains:sr,PageLike:ur,PageNotLike:lr,PageExists:cr,PageNotExists:dr,SubPageEquals:gr,SubPageNotEquals:fr,SubPageContains:hr,SubPageNotContains:mr,SubPageLike:vr,SubPageNotLike:Sr,SubPageExists:yr,SubPageNotExists:Er,SelectedElementVisible:bt,SelectedElementNotVisible:It,SelectedElementSelected:wt,SelectedElementNotSelected:_t,SelectedElementExists:Pt,SelectedElementNotExist:At,WorkletExists:Cr,WorkletNotExists:br,InboxItemExists:wr,InboxItemNotExists:_r},Ar={TextPerRegularExpression:Xe,TextNotPerRegularExpression:Je,TextEquals:$e,TextNotEquals:Ze,TextLike:et,TextNotLike:tt,TextEmpty:$e,TextNotEmpty:Ze,TextBigger:nt,TextSmaller:rt,TextLengthIsLessThan:it,TextLengthIsEqualTo:ot,TextLengthIsGreaterThan:at,TextWordCountIsLessThan:ut,TextWordCountIsEqualTo:lt,TextWordCountIsGreaterThan:ct,TextNumeric:dt,TextNotNumeric:pt,TextIsDate:gt,TextIsNotDate:ft,TextIsTime:ht,TextIsNotTime:mt,TextIsUSPhoneNumber:vt,TextIsNotUSPhoneNumber:St,TextIsEmail:yt,TextIsNotEmail:Et,TextIsWebAddress:Tt,TextIsNotWebAddress:Ct};for(var kr in Ar)Ar.hasOwnProperty(kr)&&(Or(Ar[kr],kr),Dr(Ar[kr],kr),Nr(Ar[kr],kr));function Or(e,t){var r=O+t;Pr[r]=function(t){var r=n.getjQueryElementText(t.funcArgs.jQuerySelector);return t.funcArgs.jQueryText||""==t.funcArgs.jQueryText?e.call(this,r,t.funcArgs.jQueryText):e.call(this,r)}}function Dr(t,n){var i=D+n;Pr[i]=function(n){var i=r.checkElementText(e(n.funcArgs.getSelectedElement()));return n.funcArgs.ElementText||""==n.funcArgs.ElementText?t.call(this,i,n.funcArgs.ElementText):t.call(this,i)}}function Nr(e,t){var n=x+t;Pr[n]=function(t){var n=A.getElementText(t.funcArgs);if(n===!1)return!1;return t.funcArgs.ElementText||""==t.funcArgs.ElementText?e.call(this,n,t.funcArgs.ElementText):e.call(this,n)}}e.extend(Pr,u.getFuncList());var xr=[];xr.StepPlayed=!1,xr.StepNotPlayed=!1,xr.StepCanPlay=!1,xr.StepCannotPlay=!1,xr.StepCompleted=!1,xr.StepNotCompleted=!1,xr.LanguageEquals=!1,xr.LanguageNotEquals=!1,xr.LanguageLike=!1,xr.LanguageNotLike=!1,xr.TaskGoalReached=!1,xr.TaskGoalNotReached=!1,xr.jQueryClicked=!1,xr.jQueryClickedSticky=!1,xr.jQueryHovered=!1,xr.jQueryHoveredSticky=!1,xr.jQuerySwiped=!1,xr.jQuerySwipedSticky=!1,xr.ElementClicked=!1,xr.ElementClickedSticky=!1,xr.ElementHovered=!1,xr.ElementHoveredSticky=!1,xr.ElementSwiped=!1,xr.ElementSwipedSticky=!1,xr.ExperimentGoalReached=!1,xr.ExperimentGoalNotReached=!1,e.extend(xr,u.getFuncAssert());var Lr=["ElementClicked","ElementHovered","ElementHoverSwitch","jQueryClicked","jQueryHovered","jQueryHoverSwitch","jQuerySwiped","ElementSwiped"];Lr.push.apply(Lr,u.getAsyncFuncs()),this.isFuncAsync=function(e){return I.inArray(e,Lr)>=0};var Mr=["jQueryHoveredSticky","jQueryClickedSticky","jQuerySwipedSticky","ElementClickedSticky","ElementHoveredSticky","ElementSwipedSticky"];this.isFuncSticky=function(e){return I.inArray(e,Mr)>=0},this.getFunctionsByLibNameType=function(e){return Pr[e]},this.canAssertFunction=function(e){return void 0==xr[e]||0!=xr[e]};function Fr(e,n){if(!n.identifySettings)return;if(p.checkIfTreeContainsSelectedElement(e)){var r=n.identifySettings;e.funcArgs.getSelectedElement=function(){return t.findElement(r,!1)}}}this.evaluationPreviewForEditor=function(e){var t=_f(e);return Fr(t.node,t),A.evaluationPreview(t.node)},this.evaluationPreview=function(e){var t=this.getFunctionsByLibNameType(e.funcName);if(!this.canAssertFunction(e.funcName))return k.CANNOT_ASSERT;var n={funcArgs:e.funcArgs,conditionId:-1,pollingInterval:-1};return t(n)?k.TRUE:k.FALSE},this.evaluationTreePreviewForEditor=function(e){var t=_f(e);return Rr(t),Ur(t)};function Rr(e){e.node&&e.node.Root&&(e.node=C.convert(e.node.Root))}var Br=function(){return document.referrer};function Ur(e){function t(n){if("Func"==n.nodeType)return Fr(n,e),A.evaluationPreview(n);var r=t(n.leftSon),i=t(n.rightSon);if("And"==n.nodeType){if(r==k.TRUE&&i==k.TRUE)return k.TRUE;if(r==k.CANNOT_ASSERT||i==k.CANNOT_ASSERT)return k.CANNOT_ASSERT;return k.FALSE}if("Or"==n.nodeType){if(r==k.TRUE||i==k.TRUE)return k.TRUE;if(r==k.CANNOT_ASSERT||i==k.CANNOT_ASSERT)return k.CANNOT_ASSERT;return k.FALSE}}var n=e.node;if(null==n)return k.TRUE;return t(n)}}var $o=function(){function e(t,n,r,i,o,a,s,u,l,c){this.timerManager=t,this.conditionFunctions=n,this.uiChangeTracker=r,this.profilerAPI=a,this.commonEvents=s,this.consts=u,this.debuggerManager=l,c=c||{},this._conditionCheckerPollingIntervalMs=c.evaluationPollingIntervalMs&&!c.onlyPollConditionFunctions?c.evaluationPollingIntervalMs:e.NO_POLLING,this._conditionFunctionsPollingInterval=c.evaluationPollingIntervalMs||e.NO_POLLING,this._getSelectedElement=c.getSelectedElement,this._stopPollingAfterEvaluateTrue=void 0===c.stopPollingAfterEvaluateTrue||c.stopPollingAfterEvaluateTrue,this._evaluateSonar=void 0===c.evaluateSonar||c.evaluateSonar,this._featureName=c.featureName,this._elementName=c.elementName,a.isEnabled()&&this.trackEvaluation(),this._trackUIChange=c.trackUIChange,this._logger=i.wrapCustomerLog("ConditionChecker"),this._subTreesResults={},e.registerInstance(this),c=null}return e.prototype.trackEvaluation=function(){var e=this;this.profilerAPI.registerProfilerCallback(function(t){var n=e.innerEvaluateAsync;e.innerEvaluateAsync=t.profile("innerEvaluateAsync",function(t,r){return n.apply(e,[t,r])});var r=e.innerGetValue;e.innerGetValue=t.profile("innerGetValue",function(t){return r.apply(e,[t])})})},e.prototype.getCurrentEvaluationValueAndStopEvaluating=function(e){this.onValueChanged(void 0),this.evaluateAsync(e);var t=this.getCachedValue();return this.cleanResources(),t},e.prototype.getValue=function(){var e=!1;return this.innerGetValue(e)},e.prototype.innerGetValue=function(e){return this._result.getValue(e)},e.prototype.getCachedValue=function(){var e=!0;return this.innerGetValue(e)},e.prototype.isPollingEvaluation=function(){return this._conditionCheckerPollingIntervalMs>=0&&!this._isStopEvaluate},e.prototype.cleanResources=function(){this._oldValue=!1,this._isStopEvaluate=!0,this._logger(this._elementName+" - ConditionChecker cleans resources",5,this._featureName),this.cleanResultAndTimer(),this.uiChangeTracker.unbind(this._uiChangeCallback),e.unregisterInstance(this),this._getSelectedElement=void 0,this.cleanTree(this._dirtyTree)},e.prototype.cleanTree=function(e){if(!e)return;e.funcArgs&&delete e.funcArgs.getSelectedElement,this.cleanTree(e.leftSon),this.cleanTree(e.rightSon)},e.prototype.cleanResultAndTimer=function(){this._result&&this._result.cleanResources(),this._timerHandle&&this._timerHandle.clear()},e.prototype.onValueChanged=function(e){this._onValueChanged=e},e.prototype.callOnValueChangedIfExist=function(e,t){this.raiseEventWithSubTreesResults(),this._onValueChanged&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onValueChanged",4,this._featureName),this._onValueChanged(e,t))},e.prototype.raiseEventWithSubTreesResults=function(){this.debuggerManager.isDebuggerOnWindow()&&this.commonEvents.raiseEvent(this.consts.EVENTS.ConditionTreeResult,this._subTreesResults)},e.prototype.onPreEvaluation=function(e){this._onPreEvaluation=e},e.prototype.callOnPreEvaluationIfExist=function(e,t){this._onPreEvaluation&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onPreEvaluation",5,this._featureName),this._onPreEvaluation(e,t))},e.prototype.onEvaluated=function(e){this._onEvaluated=e},e.prototype.callOnEvaluatedIfExist=function(e,t){this._onEvaluated&&(t=void 0!==t&&t,this._logger(this._elementName+" - ConditionChecker calls onEvaluated",5,this._featureName),this._onEvaluated(e,t))},e.prototype.onSonar=function(e){this._onSonar=e},e.prototype.callOnSonarIfExist=function(){this._onSonar&&this._onSonar()},e.prototype.evaluateAsyncAndDontEvaluateImmediately=function(e){var t=!0;this.innerEvaluateAsync(e,t)},e.prototype.evaluateAsync=function(e){var t=!1;this.innerEvaluateAsync(e,t)},e.prototype.innerEvaluateAsync=function(e,t){this._dirtyTree=e,this._isStopEvaluate=!1,this.handleUIChangeTracking(),this.evaluateAsyncCall(e,t)},e.prototype.handleUIChangeTracking=function(){var e=this;this._uiChangeCallback=function(){e._result.refresh(),e._trackUIChange&&e.reEvaluate(!0)},this.uiChangeTracker.bind(this._uiChangeCallback)},e.prototype.evaluateAsyncCall=function(e,t){this.firstEvaluation(e,t),this.startPollingEvaluation(e)},e.prototype.firstEvaluation=function(e,t){this._logger(this._elementName+" - ConditionChecker evaluates async tree",5,this._featureName),this.prepareResult(e),this._oldValue=void 0,t?this._oldValue=!1:this.reEvaluateResult(!0)},e.prototype.prepareResult=function(e){var t=this;this._result=this.createResult(e),this._result.onGotValue(function(){if(t.callOnSonarIfExist(),t._evaluateSonar){var e=t.reEvaluateResult(!0);t._stopPollingAfterEvaluateTrue&&e&&t.cleanResources()}})},e.prototype.startPollingEvaluation=function(e){var t=this;this.isPollingEvaluation()&&(this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs))},e.prototype.reEvaluate=function(e){var t=this;if(this._isStopEvaluate)return;var n=this.reEvaluateResult(e),r=this.shouldPollingStop(n);!this.isPollingEvaluation()||r||e?r&&this.cleanResources():this._timerHandle=this.timerManager.libSetTimeout(function(){t.reEvaluate()},this._conditionCheckerPollingIntervalMs)},e.prototype.reEvaluateResult=function(e){this.callOnPreEvaluationIfExist(void 0,e),this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName);var t=this.getValue();return this._oldValue!==t&&(this.callOnValueChangedIfExist(t,e),this._oldValue=t),this.callOnEvaluatedIfExist(t,e),t},e.prototype.shouldPollingStop=function(e){if(e&&(this._logger(this._elementName+" - ConditionChecker reevaluating tree conditions",5,this._featureName),this._stopPollingAfterEvaluateTrue))return this._elementName+" - ConditionChecker stopped polling tree evaluation after 'true' evaluation",this._featureName,!0;return!1},e.prototype.createResult=function(t){var n=this,r={Func:o,And:a(function(e,t){return e()&&t()}),Or:a(function(e,t){return e()||t()})};if(null==t)return qo.fixed(!0);return i(t);function i(e){var t=r[e.nodeType];if(!t)return!1;return t(e)}function o(t){var r=n.conditionFunctions.isFuncSticky(t.funcName),i=n.conditionFunctions.getFunctionsByLibNameType(t.funcName);t.funcArgs.getSelectedElement=n._getSelectedElement;var o={conditionId:t.ConditionId,funcArgs:t.funcArgs,pollingInterval:r?n._conditionFunctionsPollingInterval:e.NO_POLLING};function a(){return i.call(this,o)}var u=r||n.conditionFunctions.isFuncAsync(t.funcName)?a():new qo.noMemory(a);return s(u,t),u}function a(e){return function(t){var n=i(t.leftSon),r=i(t.rightSon),o=new qo.complex(n,r,e);return s(o,t),o}}function s(e,t){var r=e.getValue;e.getValue=function(e){return t.result=r(e),n._subTreesResults[t.ConditionId]=u(t),t.result}}function u(e){return{id:e.ConditionId,type:e.nodeType,result:e.result}}},e.registerInstance=function(t){t._id=e.sequence,++e.sequence,e.instances[t._id]=t},e.unregisterInstance=function(t){delete e.instances[t._id]},e.cleanResources=function(){for(var t in e.instances)e.instances.hasOwnProperty(t)&&e.instances[t].cleanResources();e.instances={}},e.NO_POLLING=-1,e.instances={},e.sequence=0,e}();o.register("ConditionCheckerType").asInstance($o),o.register("ConditionChecker").asCtor($o).asProto().dependencies("TimerManager, ConditionFunctions, UIChangeTracker, Logger, FeaturesManager, ProfilerAPI, CommonEvents, Consts, DebuggerManager"),o.register("ConditionCheckerFactory").asCtor(Zo).dependencies("ConditionCheckerType,NewConditionCheckerType,TimerManager,ConditionFunctions,UIChangeTracker,Logger,FeaturesManager,ProfilerAPI,CommonEvents,Consts,NewToOldConditionConverter,DebuggerManager");function Zo(e,t,n,r,i,o,a,s,u,l,c,d){var p=this;p.createConditionChecker=g,p.createNew=f,p.createOld=h;function g(e,t){return e&&e.Root?f(t):h(t)}function f(e){return new t(n,r,i,o,a,s,u,l,d,c,e)}function h(t){return new e(n,r,i,o,a,s,u,l,d,t)}}var ea=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d){e.call(this,t,n,r,i,o,a,s,u,l,d),this.newToOldConditionConverter=c}return t.prototype.evaluateAsync=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsync.call(this,n)},t.prototype.evaluateAsyncAndDontEvaluateImmediately=function(t){var n=this.newToOldConditionConverter.convert(t.Root);e.prototype.evaluateAsyncAndDontEvaluateImmediately.call(this,n)},t}($o);o.register("NewConditionCheckerType").asInstance(ea),o.register("OldConditionsCombiner").asCtor(ta);function ta(){var e=this;e.combine=t;function t(e,t,n){if(!t)return n;if(!n)return t;return{nodeType:e,leftSon:t,rightSon:n,nodeDepth:0}}}o.register("NewConditionsCombiner").asCtor(na).dependencies("OldConditionsCombiner, NewToOldConditionConverter, OldToNewConditionConverter");function na(e,t,n){var r=this;r.combine=i;function i(r,i,o){var a=o?t.convert(o.Root):void 0,s=e.combine(r,i,a),u=n.convert(s);return u}}o.register("ConditionsCombinerFactory").asCtor(ra);function ra(){var e=this;e.get=t;function t(e){return e?o.get("NewConditionsCombiner"):o.get("OldConditionsCombiner")}}o.register("EngagementRulesDataSynchronizer").asCtor(ia).dependencies("ClientStorageManager, EndUsersManager, SettingsFile, TimerManager, wmjQuery, CommonUtils, Encryptor, HostData, RecorderServerManager");function ia(e,t,n,r,i,a,s,u,l){var c=this;c.init=S;var d="wm-engagementRules",p="loadEngagementRules",g=1800,f=5e3,h="/engagementRulesReports/",m="wm-engagementRulesFileExists",v=604800;function S(){var e=y();if(!e)return E();return r.setWalkmeTimeout(E,f),i.when(e)}function y(){return e.getData(d,null)}function E(){return T().then(w)}function T(){var t=i.Deferred(),n=I(t);if(b(n,t))return t.promise();var r=n,o=u.browser.name;if(("Chrome"==o||"Safari"==o)&&!e.getData(m,!1)){var s=n.indexOf("users"),c=n.substring(s,n.length),d=l.get()+"/FilesContentRetriever/LoadFileByName";r=d+"?fileName="+c}var g=C(t);return a.addScriptWithCallback(r,p,function(n){0!=n.length&&e.saveData(m,!0,v);var r=_(n);g.clear(),t.resolve(r)},function(){g.clear(),t.resolve({})}),t.promise()}function C(e){var t=o.create("EngagementRulesErrorTimer",{loadScriptDeferred:e});return t}function b(e,t){if(!e)return t.resolve({}),!0;return!1}function I(e){var r=".json",i=t.getEndUserGuid(),o=s.encrypt(i),a=n.getSettingsFile();if(b(a,e))return;var u=a.BaseUserCdnFolder;if(b(u,e))return;var l=u+h+o+r;return l}function w(t){e.saveData(d,t,g)}function _(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}}o.register("EngagementRulesErrorTimer").asCtor(oa).asProto().dependencies("TimerManager, Logger, LibDestroyer");function oa(e,t,n,r){var i=this;i.clear=s;var o;function a(){var i=r.loadScriptDeferred;o=e.setWalkmeTimeout(function(){i.isResolved()||(t.error(null,"Error trying to get engagement rules data from player server"),i.resolve({}),n.removeWalkMe("Failed loading engagement rules data after 5 seconds"))},5e3)}function s(){o.clear()}a.apply(null,arguments)}o.register("EngagementRulesRepository").asCtor(aa).dependencies("EngagementRulesDataSynchronizer, FeaturesManager, wmjQuery");function aa(e,t,n){var r=this;r.init=a,r.isReady=u,r.get=l;var i,o={};function a(){t.isFeatureEnabled("engagementRules")?i=e.init().then(s):(s({}),i=n.when())}function s(e){o=e}function u(e){i.then(e)}function l(){return o}}o.register("HistoricalConditionFunctions").asCtor(sa).asSingleton().dependencies("EngagementRulesRepository");function sa(t){var n=this;n.getFuncList=l,n.getFuncAssert=c,n.getAsyncFuncs=d;var r=[],i=[],o={},a=["UserWebsiteVisitedBefore","UserWebsiteVisitedAfter","UserWebsiteVisitedMoreThan","UserWebsiteVisitedInLast","UserTrackedElementClickedMoreThan","UserTrackedElementClickedInLast","UserTrackedElementClickedAfter","UserTrackedElementClickedBefore","UserTrackedPageVisitedInLast","UserTrackedPageVisitedBefore","UserTrackedPageVisitedAfter","UserTrackedPageVisitedMoreThan"],s=["UserWebsiteVisitedFirstTime","UserWebsiteVisitedLessThan","UserWebsiteNotVisitedEver","UserWebsiteNotVisitedBefore","UserWebsiteNotVisitedAfter","UserWebsiteNotVisitedInLast","UserTrackedElementClickedLessThan","UserTrackedElementNotClicked","UserTrackedElementNotClickedAfter","UserTrackedElementNotClickedBefore","UserTrackedElementNotClickedInLast","UserTrackedPageVisitedLessThan","UserTrackedPageNotVisited","UserTrackedPageNotVisitedBefore","UserTrackedPageNotVisitedAfter","UserTrackedPageNotVisitedInLast"];u(a,p),u(s,g);function u(t,n){e.each(t,function(e,t){o[t]=n,r[t]=!1})}function l(){return o}function c(){return r}function d(){return i}function p(e){var n=t.get()[e.conditionId];return!!n}function g(e){return!p(e)}}o.register("OnboardingConditionFunctions").asCtor(ua).asSingleton().dependencies("TasksPercentageCalculator");function ua(t){var n=this;n.getFuncList=a,n.getFuncAssert=s,n.getAsyncFuncs=u;var r=[],i=[],o={UserOnboardingProgressMoreThan:l,UserOnboardingProgressLessThan:c,UserOnboardingProgressNotStarted:d,UserOnboardingProgressOngoing:p,UserOnboardingProgressComplete:g};e.each(o,function(e){r[e]=!1});function a(){return o}function s(){return r}function u(){return i}function l(e){var n=t.getTasksCompletionProgress();return n>e.funcArgs.UserOnboardingProgressInput}function c(e){var n=t.getTasksCompletionProgress();return n<e.funcArgs.UserOnboardingProgressInput}function d(e){var n=t.getTasksCompletionProgress();return 0==n}function p(e){var n=t.getTasksCompletionProgress();return n>0&&n<100}function g(e){var n=t.getTasksCompletionProgress();return 100==n}}o.register("BizFlowShowInMenuChecker").asCtor(la).dependencies("CommonUtils, DisplayConditionChecker, Consts, TagsSegmentationProperties");function la(e,t,n,r){var i=this;i.isShowInMenu=a;var o=r.properties[n.DEPLOYABLE_TYPE.BusinessSolution];function a(e){if(!s(e.Settings))return!1;var n=u(e);if(!n)return!0;return t.checkConditions(n,e)}function s(t){var n=e.getSettingsValue(t,"IsVisible",!0);return"False"!=n}function u(t){var n=1==e.getSettingsValue(t.Settings,o.enabled,0);if(!n)return!1;return t.ConditionTrees&&t.ConditionTrees[o.name]}}o.register("DeployableShowInMenuChecker").asCtor(ca).dependencies("DisplayConditionChecker");function ca(e){var t=this;t.isShowInMenu=n;function n(t){var n=r(t);if(!n)return!0;return e.checkConditions(n,t)}function r(e){return e.Settings&&e.Settings.DisplayCondition}}o.register("ShowInMenuCheckerFactory").asCtor(da).dependencies("Lib, BizFlowShowInMenuChecker, DeployableShowInMenuChecker, TodoListManager, Consts");function da(e,t,n,r,i){var o=this;o.getDisplayConditionCheckerFunc=a;function a(r){switch(r){case i.DEPLOYABLE_TYPE.Task:return s;case i.DEPLOYABLE_TYPE.Tutorial:return e.canShowTutorial;case i.DEPLOYABLE_TYPE.BusinessSolution:return t.isShowInMenu;case i.DEPLOYABLE_TYPE.Content:case i.DEPLOYABLE_TYPE.Shuttle:case i.DEPLOYABLE_TYPE.Course:return n.isShowInMenu;default:return u}}function s(e){return r.isTaskDisplayed(e)}function u(){return!0}}o.register("DisplayConditionChecker").asCtor(pa).dependencies("ConditionCheckerFactory");function pa(e){var t=this;t.checkConditions=n;function n(t,n){if(!t)return!0;var r=e.createConditionChecker(t,{featureName:s,elementName:n.Name});return r.getCurrentEvaluationValueAndStopEvaluating(t)}}o.register("ConditionTreeGetter").asCtor(ga).dependencies("DeployableTypes, CommonUtils");function ga(e,t){var n=this;n.get=o;var r="Settings",i={};i[e.BusinessSolution]="ConditionTrees";function o(e,n,o){var a=i[e]?i[e]:r;return t.getSettingsValue(n[a],o,"")}}o.register("ConditionTreeEvaluator").asCtor(fa).dependencies("ConditionFunctions");function fa(e){this.evaluate=function(t){function n(t){if("Func"==t.nodeType){var r=e.getFunctionsByLibNameType(t.funcName),i=[];i.push({funcArgs:t.funcArgs});var o=r.apply(this,i);return t.result=o,o}if("And"==t.nodeType){var o=n(t.leftSon)&&n(t.rightSon);return t.result=o,o}if("Or"==t.nodeType){var o=n(t.leftSon)||n(t.rightSon);return t.result=o,o}return!1}return null==t||n(t)}}o.register("ConditionEvaluator").asCtor(ha).dependencies("CurrentWalkthruData, StepRetriever, LocationMatcher");function ha(e,t,n){var r=this;r.supportedFunctions={isExistJQ:l,isTextValueJQ:c,isLocationMatch:d,isStepPlayed:u};var i=new ma;function o(e){if(e=e.replace(/&quot;/gi,'"'),e=e.replace(/&apos;/gi,"'"),e=e.replace(/&#39;/gi,"'"),e=e.replace(/&amp;/gi,"&"),void 0==e||e.length<=0)throw"Ilegal Expression";var t=0;for(var n in this.supportedFunctions)if(this.supportedFunctions.hasOwnProperty(n)){var r=a(e,n,t);e=r[1];for(var o=t;o<r[0].length;o++){var u=s(r[0][o]);i.setFunction(u,t++)}}i.setExpression(e)}this.evaluate=function(e){if(o(e),void 0!=i)return i.evaluate();throw"Evaluator is undefined"};function a(e,t,n){for(var r=Array(),i=n,o=e.indexOf(t);o>-1;){if("("!=e.charAt(o+t.length))throw"Ilegal function definition in expression";for(var a=o+t.length+1,s=Array(),u=a;(")"!=e.charAt(u)||0!=s.length)&&u<e.length;){if("'"==e.charAt(u)||'"'==e.charAt(u))if(0==s.length)s.push(e.charAt(u));else{var l=s.pop();l!=e.charAt(u)&&(s.push(l),s.push(e.charAt(u)))}u++}if(")"!=e.charAt(u))throw"Ilegal function definition in expression";r[i]=e.substring(o,u+1),e=e.substring(0,o)+"["+i+"]"+e.substr(u+1),i++,o=e.indexOf(t)}return[r,e]}function s(e){if(void 0==e||e.length<=0)throw"Ilegal function definition";for(var t=e.substr(0,e.indexOf("(")),n=e.substring(e.indexOf("(")+1,e.length-1).split(","),i=0;i<n.length;i++)n[i]=n[i].replace(/^\s+|\s+$/g,""),("'"==n[i].charAt(0)&&"'"==n[i].charAt(n[i].length-1)||'"'==n[i].charAt(0)&&'"'==n[i].charAt(n[i].length-1))&&(n[i]=n[i].substring(1,n[i].length-1));return function(){return r.supportedFunctions[t].apply(this,n)}}function u(n){n=parseInt(n);for(var r=e.stepPlayHistory,i=0;i<r.length;i++){var o=t.getStepById(r[i]);if(o&&o.StepIndex==n)return!0}return!1}function l(e,t){return void 0==t&&(t=1),mtjQuery(e).length>=t}function c(e,t){return mtjQuery(e).text()==t}function d(e){return n.isLocationMatchString(e)}}var ma=function(){this.functions=Array(),this.treeNode=null,this.errorStack=Array();var e=this;this.setFunction=function(e,t){if(void 0==e||void 0==t||t<0)throw"Wrong arguments.";return this.functions[t]=e,!0},this.evaluate=function(){if(null!=this.treeNode)return this.treeNode.evaluate();throw"Evaluation tree doesn't exist - No expression was set."},this.setExpression=function(e){if(void 0!=e&&e.length>0&&i(e)){if(this.treeNode=a(e),this.treeNode)return!0;var t=this.errorStack.join("\n");throw this.errorStack=this.errorStack.splice(),t}return this.errorStack.push("Ilegal expression!"),!1};function t(t){var n=new RegExp("^\\[\\d+\\]$","i");if(n.test(t)){var r=parseInt(t.substring(1,t.length-1));return e.functions.length>=r&&void 0!=e.functions[r]?new d(e.functions[r]):(e.errorStack.push("Function id doesn't exist!"),!1)}return e.errorStack.push("function token isn't in the form [funcId]. recieved:"+t),!1}function n(t){if(t)return new c(t);return e.errorStack.push("Failed to create NOT node."),!1}function r(t,n,r){if(n&&r){if("OR"==t.toUpperCase())return new l(n,r);
if("AND"==t.toUpperCase())return new u(n,r)}return e.errorStack.push("Failed to create "+t.toUpperCase()+" node."),!1}function i(e){for(var t=Array(),n=0;n<e.length;n++)if("("==e.charAt(n))t.push("(");else if(")"==e.charAt(n)){if(0==t.length)return!1;t.pop()}return 0==t.length}function o(e){if(e=mtjQuery.trim(e),e=e.replace("  "," "),e=e.replace("( ","("),e=e.replace(/not\(/gi,"not ("),e=e.replace(/and\(/gi,"and ("),e=e.replace(/or\(/gi,"or ("),"("!=e.charAt(0)||")"!=e.charAt(e.length-1))return e;var t=e.substring(1,e.length-1);return i(t)?t:e}function a(i){var u=o(i),l=u.split(" ");switch(l.length){case 0:e.errorStack.push("Error - a try to build tree with empty expression");break;case 1:return t(l[0]);case 2:return"NOT"==l[0].toUpperCase()?n(a(l[1])):(e.errorStack.push("Ilegal expression"),!1);case 3:if("NOT"==l[0].toUpperCase())return n(a(l[1]+" "+l[2]));return r(l[1],a(l[0]),a(l[2]));default:for(var c=Array(),d=0;d<l.length;d++){if(0==d&&l[d].length>=3&&"NOT"==l[d].substr(0,3).toUpperCase())return n(a(l.join(" ").substr(3)));for(var p=!1,g=0;g<l[d].length;g++)"("==l[d].charAt(g)?(p=!0,c.push("(")):")"==l[d].charAt(g)&&(p=!0,c.pop());if(!p&&0==c.length&&s(l[d]))return r(l[d],a(l.splice(0,d).join(" ")),a(l.splice(1,l.length-1).join(" ")))}return e.errorStack.push("Ilegal expression"),!1}}function s(e){if(e.match(/not/i)||e.match(/or/i)||e.match(/and/i))return!0;return!1}function u(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()&&this.rightSon.evaluate()}}function l(e,t){this.leftSon=e,this.rightSon=t,this.evaluate=function(){return this.leftSon.evaluate()||this.rightSon.evaluate()}}function c(e){this.son=e,this.evaluate=function(){return!this.son.evaluate()}}function d(e){this.func=e,this.evaluate=function(){return this.func()}}};function va(){var t,n,r,i,s,u,l,c,d,p,g,f=null,h=null,m=this,v={},S=function(){},y=null,E="wm-sync",T=15e3,C=[],b={terminate:"terminate",getAll:"getAllMultiple",checkCanSave:"checkCanSave",get:"get",increment:"increment",del:"delete",setSession:"setSession",getSession:"getSession",set:"set",addSet:"addSet",add:"add",remove:"remove"};m._iframeReady=!1;function I(){return o.get("TimerManager")}function _(e,i,a,c,p,g){l=o.get("StorageResourceManager"),d=i,f=new Sa,y=o.get("CookiesStorageManager"),h=[],t=P(a,c),u=e,n=u.isLocalStorageEnabled(),r=g,s=p,o.get("Logger").customerLog("Storage mode: "+t+", ["+(c?"from db/feature":"auto detected")+"], compressed: "+p,3),m._origin=l.getOrigin(),m._saveCookiePath=l.getSaveCookiePath(),m._path=l.getHiddenIframePath(p)}function P(e,t){var n=o.get("HostData");if(e&&"Safari"==n.browser.name)return w.Cookies;if(t)return t;if(e&&n.isIEBrowser(10,"gte"))return w.IndexedDB;return w.LocalStorage}m.refreshGetData=function(e,t){fe(t),g!==!0||o.get("LibDestroyer").removingWalkMe?he():Y(e)};function A(e){for(var t=0;t<C.length;t++)C[t].push(e)}m.saveData=function(e,t,n,r){U(e,t,n,r),f.saveData(e,t,n,r),A(e)},m.getData=function(e,t){return f.getData(e,t)},m.removeData=function(e,t){W(e,t),f.removeData(e,t),A(e)},m.increment=function(e,t,n,r,i){N({requestType:b.increment,userGuid:r,key:e,ttl:n,lastValue:t},i)},m.setSyncFlag=function(e){var t=B(E,1,10,e);j(t)},m.addToSet=function(e,t,n,r){for(var i=k(e,r,[]),o=0;o<t.length;o++)i.indexOf(t[o])==-1&&i.push(t[o]);U(e,t,n,r,b.addSet),f.saveData(e,wf(i),n,r),A(e)},m.addToDictionary=function(e,t,n,r,i){var o=k(e,i,{});o[t]=n,o=wf(o);var a={};a[t]=n,O(e,a,r,i),f.saveData(e,o,r,i)},m.removeFromDictionary=function(e,t,n,r){var i=k(e,r,{});delete i[t],i=wf(i);var o=[t];D(e,o,n,r),f.saveData(e,i,n,r)};function k(e,t,n){var r=m.getData(e,t)||n;return r&&"string"==typeof r&&(r=_f(r)||n),r}m.getInternalKeys=function(e,t){return f.getInternalKeys(e,t)};function O(e,t,n,r){var i={requestType:b.add,userGuid:r,key:e,keyValues:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};H(i)}function D(e,t,n,r){var i={requestType:b.remove,userGuid:r,key:e,keysToRemove:t,saveObj:{value:"{}",saveTime:(new Date).getTime(),expireSeconds:n}};H(i)}this.sessionSetData=function(e,t,n){var r={requestType:b.setSession,userGuid:n,key:e,value:t};H(r)},this.sessionGetData=function(e,t,n,r){N({requestType:b.getSession,userGuid:n,key:e,defaultValue:t},r)};function N(e,t){H(x(e,t))}function x(e,t){var n=M();return e.actionId=n,v[n]=t,e}var L=0;function M(){return L+=1,L>1e3&&(L=1),L}function F(e){if(e&&v[e.actionId]){var t=v[e.actionId];delete v[e.actionId],t(e.value)}}this.init=function(e){if(m._iframeReady=!1,S=e,!R())return o.get("Logger").customerLog("Cannot run cross-domain Walk-Thrus on this browser. Removing WalkMe."),!1;i=r?new te(s,u,l,o.get("Consts")):new ee(s,u,l),i.init(pe,Q),o.get("PostMessageListener").addTeardownCallback(me)},this.removeAllData=function(e){var t=f.getStorageInternal(),n=t[e];if(n)for(var r in n)m.removeData(r,e)};function R(){if(!window.postMessage)return!1;if(t==w.LocalStorage)return n;return!0}function B(e,t,n,r,i){return{requestType:i||b.set,userGuid:r,key:e,saveObj:{value:t,saveTime:(new Date).getTime(),expireSeconds:n}}}function U(e,t,n,r,i){var o=B(e,t,n,r,i);H(o)}function W(e,t){H({requestType:b.del,userGuid:t,key:e})}function V(t){var n=C.shift();if(t)for(var r in t){var i=t[r];if(i&&i.length&&i.length>0&&void 0!=i[0].saveObj)for(var o=0;o<i.length;o++){var a=i[o].key;if(e.inArray(a,n)==-1){var s=i[o].saveObj,u=G(s);u>0?f.saveData(a,s.value,u/1e3,r):m.removeData(a,r)}}}}function G(e){var t=(new Date).getTime(),n=e.saveTime+1e3*e.expireSeconds-t;return n}function H(e){m._iframeReady&&(i.isInitialized()?g!==!1&&j(e):m.init(function(){j(e)}))}function j(e){i.postMessage(wf(e),"*")}function Y(e){C.push([]);var t={requestType:b.getAll,usersToLoad:e};H(t)}function z(){var e={requestType:b.checkCanSave,saveMode:t,userGuids:d};H(e)}function Q(){mtjQuery.browser.msie&&window.opener?(K(),I().libSetTimeout(X,3e3)):X()}function K(){m._iframeReady||(q(),I().libSetTimeout(K,100))}function q(){j({requestType:b.get,key:E,userGuids:d,saveMode:t})}function X(){m._iframeReady||(m._iframeReady=!0,J(),z())}function J(){ie(),p=I().libSetTimeout($,T)}function $(){o.get("Logger").customerLog("storage failed loading, removing walkme",3),ie(),g=!1,o.get("LibDestroyer").removeWalkMe("storageFailedLoading",{sendLog:!0})}var Z=!1;function ne(){window.open(m._saveCookiePath,"_blank"),Z=!0,window.focus(),mtjQuery(document).unbind("click.wmpopup"),re()}function re(e){e=e||0,e>10?$():g!==!0&&(e++,z(),I().libSetTimeout(function(){re(e)},200))}function ie(){p&&(p.clear(),p=null)}var oe;function ae(e){ie(),e.canSave||Z?e.canSave&&(clearTimeout(oe),ce(),J(),Y(d)):"cookies"==t?(void 0===oe&&le(),oe=I().libSetTimeout(z,500)):$()}var se="wm-popup",ue=31536e4;function le(){var e=parseInt(y.getData(se)||0);e<3?(e++,y.saveData(se,e.toString(),ue),mtjQuery(document).bind("click.wmpopup touchend.wmpopup",ne)):$()}function ce(){mtjQuery(document).unbind(".wmpopup")}function de(){g||(g=!0,ie(),y.removeData(se),y.removeData(o.get("Consts").DOMAIN_IN_COOKIE))}function pe(e){if(m._origin.toLowerCase().indexOf(e.origin)>-1){try{var t=_f(e.data)}catch(n){return}if(t.key==b.checkCanSave)ae(t);else if(t.key==b.getAll){if(de(),V(t.allValues),S){var r=S;S=null,r()}he()}else if(void 0!==t.actionId)F(t);else if(t.key==b.get)if(G(t.saveObj)>0)ge(t.dataKey,t.saveObj.value);else for(var i=0;i<d.length;i++)m.removeData(t.dataKey,d[i]);else t.key==b.terminate&&ve()}}function ge(e,t){e==E&&t&&X()}function fe(e){e&&h.push(e)}function he(){if(h.length>0){var e=h.shift();e&&e()}}m.releaseCallbacks=function(){h.length=0,v={}},m.releaseCallback=function(e){for(var t=0;t<h.length;t++)if(h[t]==e)return void(h[t]=null)};function me(){var e=new a(function(e){c=e});return j({requestType:b.terminate}),e}function ve(){i&&i.terminate(),c&&c(),c=null}_.apply(null,arguments)}function Sa(){var t=this,n=null;function r(){n={}}this.saveData=function(e,t,n,r){var o={};o.value=t,o.saveTime=(new Date).getTime(),o.expiresSeconds=n;var a=i(r);a[e]=o},this.getData=function(e,n){var r=i(n),o=r[e];if(o){var a=(new Date).getTime(),s=o.saveTime+1e3*o.expiresSeconds-a;if(s>0)return o.value;t.removeData(e,n)}return},this.removeData=function(e,t){var n=i(t);delete n[e]},this.clear=function(e){n[e]={}},this.getStorageInternal=function(){return n},this.getInternalKeys=function(n,r){var o={},a=i(n);return e.safeEach(a,function(i,a){0===e.trim(i).toLowerCase().indexOf(r)&&(o[i]=t.getData(i,n))}),o};function i(e){return void 0===n[e]&&(n[e]={}),n[e]}r.apply(null,arguments)}o.register("ClientStorageManager").asFunction(function(e){return e.bySettingsFile()}).dependencies("StorageManagerFactory");function ya(){this.ONE_HOUR_SECONDS=3600;var t,n,r,i=this,a=null,s=!1;function u(e,o,s,u,l){t={type:e,mode:"client"},i.dataManager=o,a=s,n=u,r=l}this.getStorageType=function(){return t},this.init=function(e){if(e=e||function(){},l())return void e();if(s=!0,i.dataManager.init)return i.dataManager.init(e);e()};function l(){return i.dataManager.isInitialized?i.dataManager.isInitialized():s}this.refreshGetData=function(e,t){e=e&&e.length>0?e:[c()],i.dataManager.refreshGetData?i.dataManager.refreshGetData(e,t):t&&t()},this.saveData=function(e,t,r,o){if(0===r&&n.error(null,"ClientStorageManager.saveData - expiresSeconds is 0"),e=mtjQuery.trim(e),o=c(o),void 0===t)return void i.removeData(e,o);if(void 0==r){var a="storageManager: trying to save key in storage manager without expiration, key: "+e+", value: "+t+", userGUID: "+o;n.customerLog(a,3)}i.dataManager.saveData(e,wf(t),r,o)},this.getData=function(e,t,n){e=mtjQuery.trim(e),n=c(n);var r=i.dataManager.getData(e,n);if(void 0===r||""===r)return t;return _f(r)},this.addToDictionary=function(e,t,n,r,o){if(e=mtjQuery.trim(e),o=c(o),i.dataManager.addToDictionary)i.dataManager.addToDictionary(e,t,n,r,o);else{var a=i.getData(e,o);null!==a&&"object"==typeof a||(a={}),a[t]=n,i.saveData(e,a,r,o)}},this.removeFromDictionary=function(e,t,n,r){if(e=mtjQuery.trim(e),r=c(r),i.dataManager.removeFromDictionary)i.dataManager.removeFromDictionary(e,t,n,r);else{var o=i.getData(e,r);o&&void 0!==o[t]&&(delete o[t],i.saveData(e,o,n,r))}},this.addToSet=function(t,n,r,o){if(t=mtjQuery.trim(t),o=c(o),i.dataManager.addToSet)i.dataManager.addToSet(t,n,r,o);else{var a=i.getData(t,o);e.isArray(a)||(a=[]);for(var s=0;s<n.length;s++)a.indexOf(n[s])==-1&&a.push(n[s]);i.saveData(t,a,r,o)}},this.removeData=function(e,t){e=mtjQuery.trim(e),t=c(t),i.dataManager.removeData(e,t)},this.addToQueue=function(e,t,n,r,o){e=mtjQuery.trim(e),o=c(o);var a=i.getData(e,[],o);a||(a=[]),a.push(t),a.splice(0,a.length-n),i.saveData(e,a,r,o)},i.convertOldCookieStorage=function(e){var t=o.get("CookiesManager"),n=t.getCookie(e),r='"#!@DeL@!#"';if(n&&n!=r&&0!==n.indexOf('"')){i.saveData(e,n,O);var a=o.get("SettingsFile").getStorageType();a&&a!=STORAGE_TYPE.Cookie&&t.setCookie(e,r,-1)}},i.increment=function(e,t,n,r,o){if(e=mtjQuery.trim(e),r=c(r),i.dataManager.increment)i.dataManager.increment(e,t,n,r,o);else{var a=i.getData(e,0,r);t!==a&&(a++,i.saveData(e,a,n,r)),o&&o(a)}},i.getInternalKeys=function(e,t){t&&""!==t||(t="wm-");var n=i.dataManager.getInternalKeys(c(e),t);return d(n),n},this.removeAllData=function(e){i.dataManager.removeAllData(c(e))},i.sessionSetData=function(e,t,n){e=mtjQuery.trim(e),i.dataManager.sessionSetData?i.dataManager.sessionSetData(e,t,n):window.sessionStorage[n+e]=t},i.sessionGetData=function(e,t,n,r){e=mtjQuery.trim(e),i.dataManager.sessionGetData?i.dataManager.sessionGetData(e,t,n,r):r&&r(window.sessionStorage[n+e]||t)},i.setSyncFlag=function(e){i.dataManager.setSyncFlag&&i.dataManager.setSyncFlag(e)};function c(e){return r.defaultValue(e,a)}function d(t){e.safeEach(t,function(e,n){void 0!==n&&""!==n&&(n=_f(n)),t[e]=n})}i.isEnabled=function(){return i.dataManager.isEnabled()},i.releaseCallbacks=function(){i.dataManager.releaseCallbacks&&i.dataManager.releaseCallbacks()},i.releaseCallback=function(e){e&&i.dataManager.releaseCallback&&i.dataManager.releaseCallback(e)},u.apply(null,arguments)}function Ea(){var e,t,n=this;function r(n,r){e=r,t=n}n.saveToStorage=function(n,r,i){t.saveData(n+e,r,i)},n.getFromStorage=function(n,r){return t.getData(n+e,r)},n.removeFromStorage=function(n){return t.removeData(n+e)},n.refreshGetData=function(e,n){return t.refreshGetData(e,n)},r.apply(null,arguments)}function Ta(e,t,n,r){var i,a,s,u,l,c=this,d=o.get("TimerManager");function p(){a=e,s=t,u=n,l=r}var g=function(e){if(!e)return;var t=arguments;d.libSetTimeout(function(){e.apply(this,Array.prototype.slice.call(t,1))},0)},f={};function h(e,t,n){f[e]||(f[e]={success:[],fail:[]}),t&&f[e].success.push(t),n&&f[e].fail.push(n)}function m(e,t){for(var n=t?f[e].success:f[e].fail,r=[].splice.call(arguments,2,arguments.length-2),i=0;i<n.length;i++)try{g.apply(this,[n[i]].concat(r))}catch(o){}f[e]=void 0}function v(e){return!!f[e]}this.loadServerData=function(e,t,n,r,i,a){var s=v(n);if(h(n,r,i),s)return;o.get("WmAjax").execute({url:e,data:t,traditional:a,success:function(e,t,r){e.ErrorMessage?m(n,!1,e.ErrorMessage):(c.updateLocalData(n,e),m(n,!0,e))},error:function(e,t,r){m(n,!1,t)}})},this.retrieveData=function(e,t,n,r,o,s){if(void 0!==i)return void(r&&r(i));var u=a.getData(n,null);if(u){var t=l?l(u):u;r&&r(t)}else c.loadServerData(e,t,n,r,o,s)},this.retrieveLocalData=function(e){if(void 0!==i)return i;var t=a.getData(e,null);return l&&t?l(t):t},this.updateLocalData=function(e,t){i=t;var n=u&&t?u(t):t;a.saveData(e,n,s)},this.updateRemoteData=function(e,t,n,r){o.get("WmAjax").execute({url:e,data:t,success:function(e,t,i){e.ErrorMessage?g(r,e.ErrorMessage):g(n)},error:function(e,t,n){g(r,t)}})},p.apply(null,arguments)}function Ca(t,n,r,i,a,s,u,l,c){var d,p,g,f,h,m=this,v=1948,S=3600,y="/ToDoList/UserCompletedTasksByIdsAndGoalsIds",E="/ToDoList/UpdateUserTasksCompleted";function T(){d=t;var e=c.getSettingsValue(l.Settings,"remoteDataLifeTime",S);p=new Ta(n,e,b,I),g=i,h=r}m.init=function(){f=h.register("tg",{beforeSendingManipulationFunc:P,actionUrl:E,prefixForStorage:"tg",sendingThreshold:1,dataType:"task goal",dataIdFieldName:"Id",requestParamsFunc:function(e){return{userCompletedTasksSerialized:wf(e),userGuid:a.getUserGuid()}}})},m.getEndUserUniqueDataKey=function(e){return"wm_ct_"+a.getEnvironmentId()+"_"+a.getUserGuid()+"_"+e};function C(e,t){return{userGuid:a.getUserGuid(),endUserId:e,taskGoalsIds:wf(t),source:a.getEnvironmentId()}}function b(e){var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;var r=mtjQuery.extend(!0,{},n);w(r,"TaskId","t"),w(r,"IsCompleted","c"),w(r,"CompletedGoals","g"),t.push(r)}),t}function I(e){var t={};return mtjQuery.each(e,function(e,n){if(!n.t)return;var r=mtjQuery.extend(!0,{},n);w(r,"t","TaskId"),w(r,"c","IsCompleted"),w(r,"g","CompletedGoals"),t[r.TaskId]=r}),t}function w(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])}this.asyncRetrieveCompletedTasks=function(t,n,r,i){if(!d)return;var o=C(t,n);e.param(o).length>v&&(o.taskGoalsIds=null),p.retrieveData(d+y,o,m.getEndUserUniqueDataKey(t),r,i,!0)},this.syncRetrieveCompletedTasks=function(e,t){if(!d)return null;var n=p.retrieveLocalData(m.getEndUserUniqueDataKey(e));if(n)return n;return p.loadServerData(d+y,C(e,t),m.getEndUserUniqueDataKey(e),null,null,!0),null};function _(e,t){var n=0;for(var r in e){var i=e[r];e.hasOwnProperty(r)&&i.IsCompleted&&t[i.TaskId]&&n++}return n}this.updateTaskCompleted=function(e,t,n,r,i,u){var l=m.getEndUserUniqueDataKey(e);p.updateLocalData(l,r);var c=o.get("DictionaryUtils").getDictionaryKeys(i).length;if(u){var d={endUserId:e,taskId:t?t.Id:-1,goalId:n?n.Id:-1,tasksCount:c,permutationId:a.getPermutationId(),endUserGuid:a.getEndUserGuid(),source:a.getEnvironmentId()};f.sendData(d);try{if(s.isReportingEnabled()&&t&&t!=={}){var h=o.get("DeployablesManagerFactory").get(t.RelatedDeployableType),v=h.getById(t.RelatedDeployableId),S=_(r,i),y=S/c,E=Number(y.toFixed(2)),T=o.get("DeployableTypeToEventSenderAppTypeMapper"),C={type:s.EVENT_APPS.Task,oId:t.Id,oName:t.Name,pId:"-1",total:i?c:-1,aoId:v.Id,aoName:v.Name,aAppType:T.map(t.RelatedDeployableType),ratio:E};s.postEvent(s.EVENT_TYPES.Complete,C)}}catch(b){g(b)}}};function P(e,t){if(!e||0===e.length)return;for(var n=e.length-1;n>=0;n--)e[n].taskId==t.taskId&&e[n].goalId==t.goalId&&e[n].permutationId==t.permutationId&&e[n].source==t.source&&e[n].endUserGuid==t.endUserGuid&&e.splice(n,1)}T.apply(null,arguments)}function ba(){var e,t,n,r,i,o,a,s,u=86400,l="p",c="g";function d(l){e=l.serverAddress,n=l.userGuidContainer.getUserGuid(),r=l.lib.Logger.error,i=l.getPermutationId,o=l.getEndUserGuid,a=l.getAuditSource,s=e+"/AbTesting/UserCompletedGoals",t=new Ta(l.storageManager,u)}function p(e){return"wm_abg_"+n+"_"+e}function g(e,t){return{userGuid:n,endUserId:e,source:a(),permutationId:i(),goalsToCheck:t}}this.asyncRetrieveCompletedGoals=function(e,n,r,i){var o=function(n){var i=p(e),o=f(n);t.updateLocalData(i,o),r&&r(n)},a=g(e,n);t.loadServerData(s,a,p(e),o,i,!0)},this.syncRetrieveCompletedGoals=function(e){var t=h(e);if(t)return t[c];return null},this.updateGoalCompleted=function(e,n){var r=p(e),i=h(e)||f([]);i[c].push(n),t.updateLocalData(r,i)};function f(e){var t={};return t[l]=i(),t[c]=e,t}this.tempClearUserCompletedGoals=function(e){t.updateLocalData(p(e),{})};function h(e){var n=t.retrieveLocalData(p(e));if(n&&i()==n[l])return n;return null}d.apply(null,arguments)}function Ia(){var e,t=null,n=null;function r(r){t=r.goalsManager,n=r.todoListManager,e=_makeTutorial.Logger.wrapCustomerLog(f)}var i=this;function o(e){return e.GoalsNotCompleted?e.GoalsNotCompleted:[]}var a=function(e){n.updateGoalCompleted(e)};this.startWatchingTasks=function(){var e=n.getTasksGoalsNotCompleted();mtjQuery.each(e,function(e,t){if(!t.TaskId)return;i.startWatchingTask(t)})},this.startWatchingTask=function(n){var r=o(n);if(r.length>0){var i={goalCompletedFunc:a};t.addGoalsWatch(r,i)}e("Started watching Task : "+n.Name,2)},r.apply(null,arguments)}o.register("TasksPercentageCalculator").asCtor(wa).asSingleton().dependencies("ObjectTreePercentageCalculator, UIChangeTracker");function wa(e,t){var n=this;n.getTasksCompletionProgress=s;var r;function i(){t.bind(a)}function a(){r=void 0}function s(){if(void 0===r){var t=o.get("UiDataProvider").uiTasksTree();t&&t.length>0&&(r=e.calculate(t[0],"task"))}return r}i()}o.register("FramesetsUtils").asCtor(_a).dependencies("Logger, HostData, TimerManager, FeaturesManager");function _a(t,n,r,i){var o,a=7e3,s=5,u=null,l=[],c=void 0,d=null,g=void 0,f=this;f.isFramesetsPage=m,f.checkIfAnyFrameIsUnloaded=v,f.waitForFramesToLoad=y,f.isFrameActive=E,f.getAllFramesDocuments=C,f.waitForFramesHeadsAndBodies=b,f.shouldHandlePageAsFramesets=I,f.findBiggestFrame=M,f.doForAllFrames=T;function h(){o=t.wrapCustomerLog(p)}function m(){return void 0===g&&(g=e("frameset").length>0),g}function v(e){r.libSetTimeout(x,e),c=w(),l=[],u=r.playSetInterval(_,5),null!=d&&d.clear(),d=r.libSetTimeout(L,a)}function S(e){function t(){if(l.length>0)return r.libSetTimeout(t,200),e.promise();return e.resolve()}return t()}function y(){var t=e.Deferred();return S(t)}function E(e){if(null==e)return o("Frame is not active (Frame is null)",s),!1;if(null==e.contentWindow)return o("Frame is not active (frame.contentWindow is null)",s),!1;if(null==e.contentWindow.document)return o("Frame is not active (frame.contentWindow.document is null)",s),!1;if(0==mtjQuery("head",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("head", frame.contentWindow.document).length == 0)',s),!1;if(0==mtjQuery("body",e.contentWindow.document).length&&0==mtjQuery("frameset",e.contentWindow.document).length)return o('Frame is not active (mtjQuery("body", frame.contentWindow.document).length == 0)',s),!1;return!0}function T(e){for(var t=C(),n=0;n<t.length;n++)e(t[n])}function C(){for(var e=[],t=w(),n=0;n<t.length;n++)e.push(t[n].contentWindow.document);return e}function b(e){if(!f.isFramesetsPage())return void e();var t=40,n=0;i();function i(){var a=f.findBiggestFrame(),s=f.isFrameActive(a);if(s)return o("Biggest frame is active. waitCount: "+n,5,"FramesetsUtils"),void e();if(n>t)return void o("Failed waiting for head and body in biggest frame. Stopping execution"+n,1,"FramesetsUtils");r.setWalkmeTimeout(function(){n++,o("Biggest frame wasn't ready on attempt "+n,5,"FramesetsUtils"),i()},200)}}function I(){return!i.isFeatureEnabled("oldframesets")&&f.isFramesetsPage()}function w(e,t){return void 0===t&&(t=[]),mtjQuery("frame",e).each(function(){try{mtjQuery("frame, frameset",this.contentWindow.document).length>0&&(t=w(this.contentWindow.document,t)),t.push(this)}catch(e){o("Frame is cross-domain, we can't access it",s)}}),t}function _(){for(var e=0;e<c.length;e++){var t=c[e];f.isFrameActive(t)||null!=t&&null!=t.contentWindow&&P(t)}}function P(e){if(!D(e)){if(l.push(e),i.isFeatureEnabled("useDocumentReadyForIframeLoad"))return void mtjQuery(e.contentWindow.document).ready(function(){O(e)});n.isIE(9,"lte")?e.addEventListener?e.addEventListener("load",A,!1):e.attachEvent("onload",A):mtjQuery(e).bind("load.walkme",function(){O(e)})}}function A(e){O(e.currentTarget)}function k(e){n.isIE(9,"lte")?e.removeEventListener?e.removeEventListener("load",A,!1):e.detachEvent("onload",A):mtjQuery(e).unbind("load.walkme")}function O(e){k(e),N(e)}function D(e){for(var t=0;t<l.length;t++)if(l[t]==e)return!0;return!1}function N(e){for(var t=0;t<l.length;t++)l[t]==e&&l.splice(t,1)}function x(){null!=u&&(u.clear(),u=null)}function L(){for(var e=0;e<l.length;e++)mtjQuery(l[e]).unbind("load.walkme");l=[]}function M(e,t){e=e?e:document;var n=t?F(t):-1;return mtjQuery("frame",e).each(function(){try{if(mtjQuery("frame, frameset",this.contentWindow.document).length>0){var e=this.contentWindow.document;e&&(t=f.findBiggestFrame(e,t),n=t?F(t):-1)}else{var r=F(this);r>n&&(n=r,t=this)}}catch(i){}}),t}function F(e){var t=0;return t=void 0!==e.height&&void 0!==e.width?e.height*e.width:mtjQuery(e).height()*mtjQuery(e).width()}h.apply(null,arguments)}function Pa(e,t,n){var r=this,i=e,o=t,a=n.wrapCustomerLog(C);r.foreachDocument=function(e,t){e(document),i.doForAllFrames(e),o.foreachIframe(n);function n(t){try{e(t.iframe.contentWindow.document)}catch(n){a("DocumentsManager - Skipping inaccessible document",3)}}}}o.register("DocumentsManager").asCtor(Pa).dependencies("FramesetsUtils, IFramesManager, Logger"),o.register("TriggersManager").asCtor(Aa).dependencies("TimerManager,FramesetsUtils,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils");function Aa(t,n,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E){var T=this;T.getDelay=P;var C=1e3,b=2e3,I=500,w=[];function _(){}T.handle=function(e,n,r,o,a){var p=d.getStep(r),g=!1,f=!!p.LinkedTutorialIds,h=[];if(f){var m=p.LinkedTutorialIds.split(";"),y=c.isTutorialIdsExist(m);y?(i.customerLog("This is a branched step. Branched walk-thru's: "+p.LinkedTutorialIds),h.push(M(e,["click","mousedown"],m,C))):(i.customerLog("Branch walk-thru id, not found: "+p.LinkedTutorialIds),f=!1)}var b=!1,w=!1,_=-1,P=c.getNextStepIncludingSplit(),O=null==P;c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(d.state=u.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,O?w=!0:(P.IsSkippable||S.getSettingsValue(P.Settings,"skipNotExists",!1)||c.getPlayConditionMode(P)!=u.playConditionModes.STICKY_CONDITION&&!c.checkPlayStepCondition(P)||S.getSettingsValue(P.Settings,"fake",!1))&&c.checkIfStepExistsWithSkippables(P.TutorialIndex,P.StepIndex,void 0,void 0,void 0,u.CHECK_STEP_MODE.Normal)==-2?w=!0:b=!0);var D;if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.NOTHING))O||(g=!0);else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.HOVER))D=["mouseenter"],h.push(k(e,n,D,O,I));else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.CLICK)&&!f)D=l.get(),h.push(k(e,n,D,O,C));else if(c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var x=T.getDelay(n);D=["keydown","paste","change"],h.push(k(e,n,D,O,x))}else c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(d.state=u.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,c.setMember("dontContinueTutorial",!0)):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.DURATION)?p.durationHandler=t.playSetTimeout(function(){c.stepWasCompleted(),c.executeTutorialNextStep()},1e3*p.Duration):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?A(e,n,O,h,!1):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?A(e,n,O,h,!0):c.isStepTrigger(p.End,u.WALKTHRU_STEP_TRIGGER.SWIPE)&&(D=["swipe"],h.push(k(e,n,D,O,I)));if(p.Settings.additionalTriggers){s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggerSet,p);var F={elementName:n.StepTitle||n.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0},R=v.createOld(F);R.onValueChanged(function(e){if(s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,p),e){c.setMember("dontContinueTutorial",!1),p.durationHandler&&(p.durationHandler.clear(),p.durationHandler=null);var t=L(p.Settings.additionalTriggers);N(O,C,t)}}),R.evaluateAsync(p.Settings.additionalTriggers),c.addCurrentStepResource(R)}return _=E.handleStepIndex(p,a,o),{executeNextStep:g,clearElementEventsFuncs:h,buttons:{nextButton:b,doneButton:w,backButtonStepIndex:_}}};function P(e){var t=a.get();return t.Settings.keyPressedNextStepDelay?t.Settings.keyPressedNextStepDelay:b}function A(e,t,n,r,i){function o(e){var n,r=t.Settings.complexHtml;return n="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],n.value==r.val||n.text==r.txt}var a=void 0;i&&(a=o);var s=["change"],u={change:a};r.push(k(e,t,s,n,C,u))}T.releaseAllEventBindings=function(){for(var e=0;e<w.length;e++)try{var t=w[e].element,n=w[e].eventName;h.unbind(t,n)}catch(r){}w.length=0};function k(t,n,r,o,a,s){d.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var l=function(t,n){i.customerLog("Step event triggered.");var s=e.inArray("click",r)!==-1;return N(o,a,s,t,n),!0},c=O(l),p=0;p<r.length;p++){var g=s&&s[r[p]];function f(e){var t=function(t){if(e&&!e(t))return;c(t)};return t}var h=f(g);D(t,r[p]+".mt",h)}return function(e){return c(null,e)}}function O(e){var t=!1;function n(n,r){var i;return t||(i=e(n,r),t=!0),i}return n}function D(e,t,n){h.bind(e,t,n),w.push({element:e,eventName:t})}function N(e,r,i,o,a){f.releaseBalloons(),i&&(n.shouldHandlePageAsFramesets()&&n.checkIfAnyFrameIsUnloaded(r),null!=o&&y.setIgnoreNextBeforeUnload(x(mtjQuery(o.target)))),d.state=u.WALKTHRU_STATE.RUNNING,p.storeStateInCookie(),c.stepWasCompleted(void 0==a),void 0!=a&&(d.currentStep=a),e&&void 0==a?c.tutorialFinished():t.playSetTimeout(function(){c.executeTutorialNextStep()},r)}function x(e){if(m.isIE()){var t=!1;if("a"==e[0].nodeName.toLowerCase())t=e;else{var n=e.parents("a");n.length>0&&(t=mtjQuery(n[0]))}if(t&&t.attr("href")&&0==t.attr("href").indexOf("javascript:"))return!0}return!1}function L(e){return"Func"==e.nodeType?"ElementClicked"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(L(e.leftSon)||L(e.rightSon))}function M(e,t,n,r){d.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,c.releaseEvents(e,t);for(var o=function(r){i.customerLog("Clicked the branched walk-thru."),c.releaseEvents(e,t),g.makeSplit(n)},a=O(o),s=O(function(){c.releaseEvents(e,t)}),l=0;l<t.length;l++)D(e,t[l]+".mt",a);return function(){return s()}}_.apply(null,arguments)}o.register("BackButtonUtils").asCtor(ka).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils");function ka(e,t,n,r){var i=this;i.handleStepIndex=o;function o(r,i,o){var s;if(r.StepIndex>0&&e.isStepTrigger(r.End,t.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!a(i)){if(s=e.checkIfStepExistsWithSkippables(o,r.StepIndex-1,0,-1,void 0,t.CHECK_STEP_MODE.Normal),s>=0){var u=n.getStep(s);e.isStepTrigger(u.End,t.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(s=-1)}n.lastBackButtonStepIndex=s}return s}function a(e){if(null!=e){var t=n.getStep(e);return r.isActionStep(t)}return!1}}function Oa(){var e,t=this;jf=function(n,r){t._question=n,t._questionDiv=mtjQuery("<div></div>"),e=r},t.getQuestionDivFromWindow=function(){var n=o.get("TopContainerProvider").getTopContainer(),r=n.find("#walkme-survey-balloon-"+e.Id+" .walkme-survey"),i=mtjQuery("#"+t._questionDiv.attr("id"),r);return i},t.setTitle=function(e){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-question-title"),n.css("font-weight","bold"),n.css("font-size","16px"),n.css("margin-bottom","6px"),n.html(e),t._questionDiv.append(n)},t.setSubTitle=function(e){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-question-sub-title"),n.css("margin-bottom","8px"),n.html(e),t._questionDiv.append(n)},t.Generate=function(){return t._questionDiv=mtjQuery("<div></div>"),t._questionDiv.attr("Id","walkme-survey-question-"+t._question.Id),t._questionDiv.addClass("walkme-survey-question"),t.setTitle(t._question.Title),t.setSubTitle(t._question.SubTitle),t._questionDiv},jf.apply(null,arguments)}o.register("SurveyFreeTextQuestion").asCtor(Da).asProto().dependencies("Consts, CommonEvents");function Da(e,t,n){var r=this;r.Generate=a,r.getAnswers=s,r.validateAnswers=u,r.getType=c;function i(e){Va.extend(r,Oa,e.question,e.survey)}function a(){r._questionDiv=r._base.Generate();var t=mtjQuery("<div></div>");t.addClass("walkme-survey-question-freetext-answers"),t.attr("id","walkme-survey-question-freetext-answers-"+r._base._question.Id);var n=mtjQuery('<textarea rows="4" cols="20" maxlength="'+e.FREE_TEXT_MAX_LENGTH+'"></textarea>');return n.css("resize","none"),n.attr("id","walkme-survey-question-freetext-"+r._base._question.Id),n.addClass("walkme-survey-answer-textarea"),n.css("width","100%"),n.css("max-width","97%"),n.css("border","1px solid #b9b9b9"),o.get("HostData").isIE(7)&&n.css("width","310px"),t.append(n),r._questionDiv.append(t),r._questionDiv}function s(){var e={},t=r._base.getQuestionDivFromWindow(),n=mtjQuery(".walkme-survey-answer-textarea",t).val(),i={id:r._base._question.Id,questionDiv:t,val:n},o=r.validateAnswers(i);if(!o)return!1;if(""===n)return[];return e.questionId=r._base._question.Id,e.answerText=n,[e]}function u(n){t.raiseEvent(e.EVENTS.Surveys.SurveyFreeTextAnswerValidated,n);var r=l(n);if(""==n.val&&r)return!1;return!0}function l(e){var t=window._walkMe.getSiteConfig().Custom.mandatorySurveyQuestions;if(t&&t.indexOf(e.id.toString())>-1)return!0;return!1}function c(){return _.FreeText}i.apply(null,[n])}o.register("SurveyCheckBoxQuestion").asCtor(Na).asProto();function Na(t){var n=this;n.Generate=a,n.getAnswers=u,n.getType=l;var r;function i(e){r=o.get("TimerManager"),Va.extend(n,Oa,e.question,e.survey)}function a(){n._questionDiv=n._base.Generate();var e=mtjQuery("<div></div>");e.addClass("walkme-survey-question-checkbox-answers"),e.attr("id","walkme-survey-question-checkbox-answers-"+n._base._question.Id);for(var t=n._base._question.Answers,r=o.get("SiteConfigManager").get(),i=o.get("HostData"),a=0;a<t.length;a++){var u=mtjQuery("<div></div>");u.addClass("walkme-survey-question-checkbox-answer"),"rtl"==r.Direction?u.css("margin","0 0 5px 8px"):u.css("margin","0 8px 5px 0"),u.attr("id","walkme-survey-answer-"+t[a].Id);var l=mtjQuery("<label><label/>");l.attr("for","walkme-survey-answer-checkbox-"+t[a].Id),l.addClass("walkme-survey-answer-text"),l.css("*display","inline"),l.css("display","inline-block"),l.css("zoom","1"),l.css("max-width","91%"),i.isIE("8")?l.css("vertical-align","top"):l.css("vertical-align","text-top"),l.html(t[a].Title);var c=mtjQuery('<input type="checkbox"/>');c.addClass("walkme-survey-answer-checkbox"),c.css("vertical-align","-3px"),"rtl"==r.Direction?i.isIE("7")?(c.css("margin","0px -3px 0px -1px"),c.css("vertical-align","-4px")):i.isIE("8")?c.css("margin","-1px -3px 0px 3px"):i.isIE("9")?c.css("margin","0 -4px 0px 2px"):i.isIE("11")?(c.css("vertical-align","-2px"),c.css("margin","0 0 0 3px")):"Safari"==i.browser.name?(c.css("margin","0px 1px 0px 5px"),c.css("vertical-align","1px")):c.css("margin","0 0 0 3px"):i.isIE("7")?(c.css("margin","0px -1px 0px -3px"),
c.css("vertical-align","-4px")):i.isIE("8")?c.css("margin","-1px 3px 0px -3px"):i.isIE("11")?(c.css("vertical-align","-2px"),c.css("margin","0 3px 0 0")):"Safari"==i.browser.name?(c.css("margin","0px 5px 0px 1px"),c.css("vertical-align","1px")):c.css("margin","0 3px 0 0"),c.attr("value",t[a].Id),c.attr("id","walkme-survey-answer-checkbox-"+t[a].Id);var d=mtjQuery("<label />");d.addClass("walkme-survey-answer-label-checkbox"),d.addClass("walkme-survey-answer-label-unchecked"),d.attr("for","walkme-survey-answer-checkbox-"+t[a].Id),u.append(d),u.append(c),u.append(l),s(u,t[a]),e.append(u)}return n._questionDiv.append(e),n._questionDiv}function s(t,n){if(n.Settings.enableInputText){var i=e("<input />").attr("id","walkme-survey-checklist-freetext-"+n.Id).attr("type","text").addClass("walkme-survey-answer-input").css("margin-left","10px");n.Settings.placeholder&&i.attr("placeholder",n.Settings.placeholder),r.libSetTimeout(function(){e("#walkme-survey-checklist-freetext-"+n.Id).focus(function(){e("#walkme-survey-answer-checkbox-"+n.Id).prop("checked",!0)}),e("#walkme-survey-checklist-freetext-"+n.Id).blur(function(t){t.currentTarget.value.length<1&&e("#walkme-survey-answer-checkbox-"+n.Id).prop("checked",!1)}),e("#walkme-survey-answer-checkbox-"+n.Id)[0].checked&&e("#walkme-survey-checklist-freetext-"+n.Id).show(),n.Settings.InputTextShowByClick&&e("#walkme-survey-answer-checkbox-"+n.Id).change(function(){this.checked?e("#walkme-survey-checklist-freetext-"+n.Id).show():e("#walkme-survey-checklist-freetext-"+n.Id).hide()})},0),i.hide(),t.append(i)}}function u(){for(var t=n._base.getQuestionDivFromWindow(),r=mtjQuery("input:checkbox:checked",t),i=[],o=0;o<r.length;o++){var a,s={};if(s.answerId=r[o].value,s.questionId=n._base._question.Id,e.each(n._base._question.Answers,function(e,t){t.Id==s.answerId&&(a=t.Settings)}),e("#walkme-survey-checklist-freetext-"+r[o].value).length>0&&(e("#walkme-survey-checklist-freetext-"+r[o].value).val()&&(s.answerText=e("#walkme-survey-checklist-freetext-"+r[o].value).val()),!a.optionalInputAnswer&&!s.answerText))return!1;i.push(s)}return i}function l(){return _.CheckBox}i.apply(null,arguments)}o.register("SurveyRadioButtonQuestion").asCtor(xa).asProto().dependencies("Consts, CommonEvents");function xa(t,n,r){var i=this;i.Generate=u,i.handlePlaceholders=c,i.getAnswers=d,i.getType=p;var a;function s(e){a=o.get("TimerManager"),Va.extend(i,Oa,e.question,e.survey)}function u(){i._questionDiv=i._base.Generate();var e=mtjQuery("<div></div>");e.attr("id","walkme-survey-question-radiobutton-answers-"+i._base._question.Id),e.addClass("walkme-survey-question-radiobutton-answers");for(var t=o.get("SiteConfigManager").get(),n=o.get("HostData"),r=i._base._question.Answers,a=0;a<r.length;a++){var s=mtjQuery("<div></div>");s.addClass("walkme-survey-radiobutton-answer"),"rtl"==t.Direction?s.css("margin","0 0 5px 8px"):s.css("margin","0 8px 5px 0"),s.attr("id","walkme-survey-question-answer-"+r[a].Id);var u=mtjQuery("<div></div>");u.addClass("walkme-survey-answer-text"),n.isIE(7)?(u.css("display","inline"),u.css("vertical-align","top")):u.css("display","inline-block"),u.css("max-width","91%"),u.css("zoom","1"),u.attr("id","walkme-survey-answer-text-"+r[a].Id);var c=mtjQuery("<label></label>");c.attr("for","walkme-survey-answer-radiobutton-"+r[a].Id),c.addClass("walkme-survey-answer-title"),c.css("display","inline-block"),c.css("max-width","545px"),n.isIE(8,"lte")?c.css("vertical-align","top"):c.css("vertical-align","text-top"),c.html(r[a].Title);var d=mtjQuery("<label></label>");d.attr("for","walkme-survey-answer-radiobutton-"+r[a].Id),d.addClass("walkme-survey-answer-subtitle"),d.css("display","inline-block"),d.html(r[a].SubTitle),u.append(c),u.append(d);var p=mtjQuery("<div></div>");p.addClass("walkme-survey-answer-radiobutton-div"),n.isIE(7)?p.css("display","inline"):p.css("display","inline-block"),n.isIE(8,"lte")&&p.css("vertical-align","top"),p.css("zoom","1"),p.attr("id","walkme-survey-answer-radiobutton-div-"+r[a].Id);var g=mtjQuery('<input type="radio" name="walkme-survey-question-group-'+i._base._question.Id+'" />');g.addClass("walkme-survey-answer-radiobutton"),g.css("display","inline-block"),g.css("vertical-align","-3px"),"rtl"==t.Direction?n.isIE("8")?g.css("margin","-1px -4px 1px 1px"):n.isIE("7")?(g.css("margin","0px -3px 0px -1px"),g.css("vertical-align","-3px")):n.isIE("9")?g.css("margin","0px -5px 0px 0px"):n.isIE("11")?(g.css("vertical-align","-3px"),g.css("margin","0px 0px 0px 3px")):"Safari"==n.browser.name?(g.css("margin","0px 1px 0px 5px"),g.css("vertical-align","1px")):g.css("margin","0 0 0 3px"):n.isIE("8")?(g.css("margin","-1px 0px 1px -3px"),g.css("vertical-align","-3px")):"Safari"==n.browser.name?(g.css("margin","0px 5px 0px 1px"),g.css("vertical-align","1px")):n.isIE("7")?(g.css("margin","0px -1px 0px -3px"),g.css("vertical-align","-3px")):n.isIE("11")?(g.css("vertical-align","-2px"),g.css("margin","0 3px 0 1px")):g.css("margin","0 3px 0 1px"),g.attr("value",r[a].Id),g.attr("id","walkme-survey-answer-radiobutton-"+r[a].Id);var f=mtjQuery("<label />");f.addClass("walkme-survey-answer-label-radiobutton"),f.addClass("walkme-survey-answer-label-unchecked"),p.append(f),p.append(g),s.append(p),s.append(u),l(s,r[a]),e.append(s)}return i._questionDiv.append(e),i._questionDiv}function l(t,n){if(n.Settings.enableInputText){var r=e("<input />").attr("id","walkme-survey-checklist-freetext-"+n.Id).attr("type","text").addClass("walkme-survey-answer-input").css("margin-left","10px");n=i.handlePlaceholders(n),n.Settings.placeholder&&r.attr("placeholder",n.Settings.placeholder),a.libSetTimeout(function(){e("#walkme-survey-checklist-freetext-"+n.Id).focus(function(){e("#walkme-survey-answer-radiobutton-"+n.Id).prop("checked",!0)}),e("#walkme-survey-answer-radiobutton-"+n.Id)[0].checked&&e("#walkme-survey-checklist-freetext-"+n.Id).show(),n.Settings.InputTextShowByClick&&e("#walkme-survey-question-answer-"+n.Id).change(function(){e("[id^=walkme-survey-checklist-freetext-]").hide(),e("#walkme-survey-checklist-freetext-"+n.Id).show()})},0),r.hide(),t.append(r)}}function c(e){n.raiseEvent(t.EVENTS.Surveys.SuveyBeforeRadioButtonAppended,e);var r=WalkMeAPI.getCurrentLanguage(),i=window._walkMe.getSiteConfig().Custom.placeholder;return i&&""!=r&&(e.Settings.placeholder=i[r]),e}function d(){var t,n={},r=i._base.getQuestionDivFromWindow(),o="input[name=walkme-survey-question-group-"+i._base._question.Id+"]:checked",a=mtjQuery(o,r).val();if(e.each(i._base._question.Answers,function(e,n){n.Id==a&&(t=n.Settings)}),a){if(n.answerId=a,n.questionId=i._base._question.Id,e("#walkme-survey-checklist-freetext-"+a).length>0&&(e("#walkme-survey-checklist-freetext-"+a).val()&&(n.answerText=e("#walkme-survey-checklist-freetext-"+a).val()),!t.optionalInputAnswer&&!n.answerText))return!1;return[n]}return!1}function p(){return _.RadioButton}s.apply(null,[r])}o.register("SurveyQuestionFactory").asCtor(La).dependencies("Logger").asSingleton();function La(e){var t=this;t.getSurveyQuestion=function(e,t){var n,r={question:e,survey:t};switch(e.QuestionType){case _.FreeText:n=o.create("SurveyFreeTextQuestion",r);break;case _.CheckBox:n=o.create("SurveyCheckBoxQuestion",r);break;case _.RadioButton:n=o.create("SurveyRadioButtonQuestion",r)}return n}}o.register("SurveyQuestionGenerator").asCtor(Ma);function Ma(){var e=this;e.generateSingleQuestion=t,e.generateMultipleQuestions=n;function t(e,t){return n(e,[t])}function n(e,t){var n=mtjQuery("<div></div>"),a=r(),u=i(e.Name);a.append(u);var l=o(t);return a.append(l),s(a),n.append(a),n}function r(){var e=mtjQuery("<div></div>");return e.addClass("walkme-survey"),e}function i(e){var t=mtjQuery("<div></div>");return t.addClass("walkme-survey-title"),t.html(e),t.css("margin-bottom","8px"),t.css("font-weight","bold"),t.css("font-size","24px"),t}function o(e){var t=mtjQuery("<div></div>");t.addClass("walkme-survey-questions"),t.css("overflow-y","auto"),t.css("overflow-x","hidden");for(var n=0;n<e.length;n++){t.append(a(n,"before"));var r=e[n].Generate();n!=e.length-1&&r.css("margin-bottom","20px"),t.append(r),t.append(a(n,"after"))}return t}function a(e,t){var n=mtjQuery("<div></div>");return n.addClass("walkme-survey-question-separator-"+t),n.attr("id","walkme-survey-question-separator-"+t+"-"+e),n}function s(e){for(var t=0;t<4;t++){var n=mtjQuery("<div></div>");n.addClass("walkme-survey-extra-div-"+t),e.append(n)}}}o.register("AllQuestionsSurvey").asCtor(Fa).asProto().dependencies("DeployablesManagerFactory, DeployableTypes, SurveyQuestionGenerator, SurveyQuestionFactory, SurveyHelper, SurveyBalloon, BalloonButtonDataGenerator, Consts");function Fa(t,n,r,i,o,a,s,u,l){var c=this;c.show=m;var d,p,g,f;function h(){p=l.surveyJson,g=0,f=[],d=t.get(n.Survey);for(var e=0;e<p.Questions.length;e++)f.push(i.getSurveyQuestion(p.Questions[e],p))}function m(){var e=r.generateMultipleQuestions(p,f),t=[s.generate(u.BALLOON_BUTTON_TYPE.Submit)],n=p.Settings&&p.Settings.fadeBackground;return a.show(p.Id,e,t,n,v)}function v(e,t){o.setSurveyBalloonActions(e,p),mtjQuery(".walkme-action-submit",e).click(function(){S(e,t.FooterTextColor)}),mtjQuery(".walkme-action-close",e).click(function(){d.surveyExited(l,f,o.closeSurvey)})}function S(t,n){var r=e.grep(f,function(e){return!e.getAnswers()});r.length>0?o.showValidationErrors(t,n,p):d.submitSurvey(l,f,y(),o.closeSurvey)}function y(){var t=[];return e.each(f,function(e,n){t.push(n.getAnswers())}),t}h.apply(null,[l])}o.register("SurveyHelper").asCtor(Ra).dependencies("Lib, SiteConfigManager, LibDestroyer, CommonEvents, Consts");function Ra(t,n,r,i,o){var a=this;a.setSurveyBalloonActions=l,a.closeSurvey=d,a.showValidationErrors=c;var s;function u(){s=n.get()}function l(e,n){e.css("min-width","350px"),mtjQuery(".walkme-action-close",e).attr("onclick","").unbind("click"),h(e);for(var r=0;r<n.Questions.length;r++)f(e,"radiobutton",n.Questions[r].Id),f(e,"checkbox",n.Questions[r].Id);mtjQuery(".walkme-survey-answer-radiobutton",e).change(function(){p(this.id,!0,e)}),mtjQuery(".walkme-survey-radiobutton-answer",e).click(function(){g(this.id,e)}),e.addClass("walkme-survey-balloon"),t.getUiUtils().addBrowserClass(e);var a={surveyBalloon:e,surveyObj:n};i.raiseEvent(o.EVENTS.Surveys.SurveyBalloonDisplayed,a)}function c(t,n,r){var i=t.find(".walkme-custom-balloon-buttons-wrapper"),o="walkme-survey-validation-errors",a="."+o;i.find(a).remove();var u=s.SurveySingleSelectionValidationError,l="<span role='alert' style='font-size: 11px;color: rgb(68, 68, 68);display: inline-block;float: left;position: relative;top: 9px;left: 10px;color:"+n+"' class='"+o+"'>"+u+"</span>";1==r.Settings.shouldShowOneByOne&&1==r.Settings.shouldShowOneByOneCount?e(".walkme-survey-question-count").after(l):i.prepend(l)}function d(){r.releaseBalloons()}function p(e,t,n){var r=mtjQuery("#"+e,n).parent(),i=r.parent(),o=i.parent();t&&mtjQuery(".selected",o).removeClass("selected"),r.addClass("selected"),i.addClass("selected")}function g(e,t){var n=mtjQuery("#"+e,t),r=mtjQuery(".walkme-survey-answer-radiobutton",n);if(r.attr("checked"))return;var i=n.parent();mtjQuery("input:checked",i).removeAttr("checked"),r.attr("checked","checked"),r.change()}function f(e,t,n){var r=e.find("#walkme-survey-question-"+n),i=r.find(".walkme-survey-answer-"+t);i.change(function(){for(var e=0;e<i.length;e++){var n=i[e],r=mtjQuery(n).parent().find(".walkme-survey-answer-label-"+t);r.removeClass("walkme-survey-answer-label-checked"),r.removeClass("walkme-survey-answer-label-unchecked"),i[e].checked?r.addClass("walkme-survey-answer-label-checked"):r.addClass("walkme-survey-answer-label-unchecked")}})}function h(e){mtjQuery(".walkme-custom-balloon-close-button",e).attr("title","Close Survey")}u()}o.register("SurveyBalloon").asCtor(Ba).dependencies("PopupBalloonDisplayer");function Ba(e){var t=this;t.show=n;function n(t,n,i,o,a){var s=!1,u=!0,l=600,c={htmlContent:n},d={fadeBackground:o,popupStepButtons:i},p={minPopupWidth:350,Vibrate:!1,surveyId:t,classes:[r(t)]};return e.showSpecialPopupBalloon(c,l,d,a,s,p,u)}function r(e){var t="walkme-survey-id-";return t+e}}o.register("OneByOneSurvey").asCtor(Ua).asProto().dependencies("CommonUtils, SurveysManager, SurveyAnswersFiller, SurveyQuestionGenerator, SurveyQuestionFactory, SurveyHelper, SurveyBalloon, BalloonButtonDataGenerator, Consts, CommonEvents");function Ua(t,n,r,i,o,a,s,u,l,c,d){var p=this;p.show=T;var g,f,h,m,v,S;function y(){h=d.surveyJson,m=0,v=E(h)}function E(e){for(var t=[],n=0;n<e.Questions.length;n++)t.push({question:o.getSurveyQuestion(e.Questions[n],e)});return t}function T(){var e=i.generateSingleQuestion(h,v[m].question),t=h.Settings&&h.Settings.fadeBackground;return g&&(g.destroy(),t=!1),s.show(h.Id,e,C(),t,b).then(function(e){return g=e,e})}function C(){var e=[],t=0==m;t||e.push(u.generateWithoutBackground(l.BALLOON_BUTTON_TYPE.Back));var n=m==h.Questions.length-1;return n?e.push(u.generate(l.BALLOON_BUTTON_TYPE.Submit)):e.push(u.generate(l.BALLOON_BUTTON_TYPE.Next)),e}function b(e,t){f=e,S=t.FooterTextColor,a.setSurveyBalloonActions(f,h),I(),O(),r.fillAnswers(v[m].answers,h.Questions[m].QuestionType);var n={surveyQuestionObject:v[m],container:f};c.raiseEvent(l.EVENTS.Surveys.SurveyBalloonActionsSet,n)}function I(){e(".walkme-action-submit, .walkme-action-next",f).click(function(){var e=P();e&&A()}),e(".walkme-action-back",f).click(function(){var e=P();e&&D()}),e(".walkme-action-close",f).click(function(){n.surveyExited(d,w(),a.closeSurvey,_())})}function w(){return e.map(v,function(e){return e.question})}function _(){var t=[];return e.each(v,function(e,n){t.push(n.answers||[])}),t}function P(){var e=v[m].question.getAnswers();return e?(v[m].answers=e,!0):(a.showValidationErrors(f,S,h),!1)}function A(){m=k(),m==h.Questions.length?n.submitSurvey(d,w(),_(),a.closeSurvey):T()}function k(){var e={survey:h,surveyQuestionObject:v[m],currentQuestionIndex:m,defaultValue:m+1};return c.raiseEvent(l.EVENTS.Surveys.SurveyNextQuestion,e),e.returnValue}function O(){if(1==h.Settings.shouldShowOneByOneCount){var e=f.find(".walkme-survey-question-count");0==e.length&&(f.find(".walkme-custom-balloon-buttons-wrapper").prepend('<span class="walkme-survey-question-count" style="float:left;margin-top: 10px;font-size: 9px;color: rgb(173, 173, 173);"></span>'),e=f.find(".walkme-survey-question-count")),e.text(t.formatString("{0}/{1}",m+1,h.Questions.length))}}function D(){var e={defaultValue:m-1};c.raiseEvent(l.EVENTS.Surveys.SurveyBackQuestion,e),m=e.returnValue,T()}y.apply(null,[d])}o.register("SurveyAnswersFiller").asCtor(Wa);function Wa(){var t=this;t.fillAnswers=n;function n(e,t){e&&e[0]&&(t==_.RadioButton?r(e):t==_.FreeText?i(e):t==_.CheckBox&&o(e))}function r(t){e("#walkme-survey-answer-radiobutton-"+t[0].answerId).prop("checked",!0).trigger("change"),"undefined"!=typeof t[0].answerText&&e("#walkme-survey-checklist-freetext-"+t[0].answerId).val(t[0].answerText)}function i(t){e("#walkme-survey-question-freetext-"+t[0].questionId).text(t[0].answerText)}function o(t){for(var n=0;n<t.length;n++)e("#walkme-survey-answer-checkbox-"+t[n].answerId).prop("checked",!0),e("#walkme-survey-checklist-freetext-"+t[n].answerId).val(t[n].answerText)}}function Va(){function e(e,t){var n={};for(var r in t){n[r]=t[r];var i="function"==typeof t[r],o="function"==typeof e[r];i&&!o?e[r]=t[r]:i&&o&&t[r].WM_VIRTUAL&&(t[r]=e[r])}return n}this.extend=function(t,n,r,i,o,a){var s=new n(r,i,o,a),u=e(t,s);t._base=u},this.VIRTUAL=function(e){return e.WM_VIRTUAL=!0,e};var t=this.VIRTUAL(function(){throw"Function is pure virtual. must override"});this.WM_PURE_VIRTUAL=function(){return t}}var Va=new Va;o.register("PlayManager").asCtor(Ga).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger");function Ga(e,t,n,r,i){var o=this;function a(){}o.findFirstStep=function(e,r,i){return r=r?r:0,n.checkIfStepExistsWithSkippables(e,r,void 0,void 0,i,t.CHECK_STEP_MODE.Normal)},a.apply(null,arguments)}o.register("StepUtils").asCtor(Ha).dependencies("Consts");function Ha(e){var t=this;t.isActionStep=n,t.isBranchStep=r,t.isPopupStep=i;function n(t){return t.Type&&t.Type==e.STEP_TYPE.Action}function r(t){return t.Type&&t.Type==e.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.Branch}function i(t){return t.Type&&t.Type==e.STEP_TYPE.Popup}}o.register("StepRetriever").asCtor(ja).dependencies("WalkthrusContainer");function ja(e){var t=this;t.getStepByWalkthruAndStepIds=n,t.getStepById=r,t.getStepIndex=o;function n(t,n){var i=e.getWalkthruIndexByWalkthruId(t);if(i>-1){var o=e.getWalkthruByIndex(i),a=r(n,o);if(a)return a}return null}function r(t,n){if(n)return i(t,n);for(var r=e.getWalkthrus(),o=0;o<r.length;o++){var a=i(t,r[o]);if(a)return a}return null}function i(e,t){for(var n=t.Steps,r=0;r<n.length;r++)if(n[r].Id==e)return n[r];return null}function o(e,t){var r=n(t,e);if(r)return r.StepIndex;return-1}}o.register("POVisibleIframeChecker").asCtor(Ya).dependencies("CommonUtils,FeaturesManager,Logger,PostMessageListener, PostMessage");function Ya(){var t=this;t.executeIfVisible=d,t.reset=h;var n,r,i,o,a,s="isVisibleFrameAsk",u="isVisibleFrameAnswer",l=[];function c(e,t,s,u,l){i=s,n=e,o=u,r=t.isFeatureEnabled("sfLightningPo"),a=l,r&&p()}function d(e){if(!r||window==top)return e();l.push(e);try{var t={wm:!0,type:s};a.apply(parent,[n.toJSON(t),"*"])}catch(o){i.error(o)}}function p(){o.listen(f)}function g(t){var n=!0;return e("iframe,frame").each(function(r,i){if(i.contentWindow==t)return n=e(i).is(":mt_visible"),!1}),n}function f(e){try{var t=n.secureEvalJSON(e.data);if(!t.wm)return;switch(t.type){case s:e.source.postMessage(n.toJSON({wm:!0,type:u,isVisible:g(e.source)}),"*");break;case u:if(t.isVisible){var r=l.shift();r&&r()}}}catch(i){}}function h(){l=[]}c.apply(null,arguments)}o.register("WalkthruPassOwnershipDeterminator").asCtor(za).dependencies("Consts");function za(e){var t=this;t.isPassOwnershipStep=n,t.evaluateOwnership=r;function n(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==e.STEP_ACTION.PassOwnership}function r(t,r,o){return o&&!n(t)?e.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:i(t,r)?e.PASS_OWNERSHIP.EvaluateOwnership.Owner:e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}function i(e,t){if(null===e)return o.get("WalkthruStepsLoader").LoadStepsForWT(t),!1;try{return _makeTutorial.evaluateConditionTree(e.Settings.action.arguments.condition)}catch(n){return!0}}}o.register("PassOwnershipDeterminatorFactory").asCtor(Qa).dependencies("DeployableTypes, BizflowPassOwnershipDeterminator, WalkthruPassOwnershipDeterminator");function Qa(e,t,n){var r=this;r.getDeterminatorByType=i;function i(r){if(r==e.Tutorial)return n;if(r==e.BusinessSolution)return t}}o.register("PreExecutionPassOwnershipWrapper").asCtor(Ka);function Ka(){var e=this;e.wrap=r,e.setCurrent=s,e.getCurrent=i,e.clearCurrent=a,e.getCurrentStepData=o;var t,n;function r(e,t,n){s(e,t);var r=n();return a(),r}function i(){return t}function o(){return n}function a(){s(void 0,void 0)}function s(e,r){t=e,n=r}}o.register("WalkthruOwnershipManager").asCtor(qa).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager, FlowStack");function qa(e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v){var S=this;S.walkthruStarted=T,S.evaluateOwnership=b,S.evaluateOwnershipByPeeking=_,S.gainedOwnership=P,S.lostOwnership=k;var y;function E(){y=d.wrapCustomerLog(t.PASS_OWNERSHIP.LOG_FEATURE)}function T(e,n){return h.wrap(t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,N(e,n),function(){return C(e,n)})}function C(r,i){v.clear();var o=e.get().optimizedDetermineOwnership();return o||(a.state=t.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,a.currentWalkthru=r,a.currentStep=i,s.storeStateInCookie(),n.terminateTutorial(),a.state=t.WALKTHRU_STATE.NOT_RUNNING,e.get().reset()),o}function b(e,n){if(n)return h.wrap(t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,n,function(){return I(e)});return I(e)}function I(e){var t=w(),n=t?h.getCurrentStepData():x(),i=r.evaluateOwnership(n.step,n.walkthruId,t);return t||e||D(i),i}function w(){return h.getCurrent()==t.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru}function _(){return(g.isFeatureEnabled("po_peek")||g.isFeatureEnabled("passOwnership"))&&r.isPassOwnershipStep(p.peekNextCookieStep())}function P(e,t,n){n&&A(e,t)}function A(e,t){e?O():(y("ownership granted to: "+t,3),c.restoreStateFromCookie(l.getUserGuid()))}function k(){o.get("WalkthrusModule").terminateTutorial()}function O(){o.get("WalkthrusModule").setMember("dontContinueTutorial",!1),f.resumeTimeoutsArray("playTimeouts")}function D(e){switch(e){case t.PASS_OWNERSHIP.EvaluateOwnership.Owner:L();break;case t.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:M()}}function N(e,t){var n=i.getWalkthruByIndex(e);return{walkthruId:n.Id,step:n.Steps[t]}}function x(){var e=m.getData(t.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,l.getUserGuid());if(e)return{walkthruId:e.tutorialId,step:u.getStepByWalkthruAndStepIds(e.tutorialId,e.stepId)}}function L(){n.stepWasCompleted(),n.executeTutorialNextStep()}function M(){a.state=t.WALKTHRU_STATE.PASSING_OWNERSHIP,a.currentStep++,s.storeStateInCookie()}E()}o.register("PassOwnershipRouter").asCtor(Xa).dependencies("Consts, BizflowOwnershipManager, WalkthruOwnershipManager, FlowStack, CommonEvents, ClientStorageManager");function Xa(e,t,n,r,i,o){var a=this;a.evaluateOwnership=s,a.loseOwnership=u,a.gainOwnership=l,a.evaluateOwnershipByPeeking=c;function s(e,t,n){return d(n).evaluateOwnership(e,t)}function u(){return i.raiseEvent("loseOwnership"),p().lostOwnership()}function l(e,t,n){return i.raiseEvent("gainOwnership"),d().gainedOwnership(e,t,n)}function c(){return d().evaluateOwnershipByPeeking()}function d(e){return r.load(),p(e)}function p(i){switch(i){case e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:return n;case e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow:return t;default:return r.isEmpty()&&!o.getData(e.FLOW_BEFORE_PLAY_KEY)?n:t}}}o.register("BizflowOwnershipManager").asCtor(Ja).dependencies("CrossDomainManager, Consts, BizflowPassOwnershipDeterminator, FlowsContainer, FlowsPlayer, TimerManager,FlowStack, WmInternals, ClientStorageManager");function Ja(e,t,n,r,i,o,a,s,u){var l=this;l.determineOwner=d,l.evaluateOwnership=p,l.evaluateOwnershipByPeeking=g,l.gainedOwnership=S,l.lostOwnership=y;function c(){s.on(t.EVENTS.Flows.FlowStopped,function(){e.get().reset()}),s.on(t.EVENTS.Flows.FlowCompleted,function(){e.get().loseOwnership()})}function d(t,r){v({flowId:t,stageId:r});var i=e.get().optimizedDetermineOwnership();i||(e.get().reset(),n.isPassOwnershipNode(h())&&e.get().setOwnershipCondition({flowId:t,stageId:r}))}function p(e,t){return n.evaluateOwnership(f(t))}function g(){var e=h();return n.isPassOwnershipNode(e)}function f(e){if(e)return C(e.flowId,e.node.Id);var n=u.getData(t.FLOW_BEFORE_PLAY_KEY);return n?C(n.flowId,n.stageId):m()}function h(){var e=u.getData(t.FLOW_BEFORE_PLAY_KEY)||a.peek();return C(e.flowId,e.stageId)}function m(){var e=u.getData(t.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE);if(e)return C(e.flowId,e.stageId)}function v(e){u.saveData(t.FLOW_BEFORE_PLAY_KEY,e,36e5),u.refreshGetData()}function S(e,n,r){var a=u.getData(t.FLOW_BEFORE_PLAY_KEY);a?(v(null),E(e,T(a.flowId,a.stageId))):i.restore(),e&&r&&o.resumeAllTimeouts()}function y(){i.pause()}function E(e,t){var r=t.node;if(!r)return;var o=r.Id;!e&&n.isPassOwnershipNode(r)&&(o=r.Links[0].TargetFlowNodeId),i.play(t.flowId,o)}function T(e,t){return{flowId:e,node:C(e,t)}}function C(e,t){return r.getNodeById(e,t)}c()}o.register("BizflowPassOwnershipDeterminator").asCtor($a).dependencies("Consts, ConditionCheckerFactory");function $a(e,t){var n=this;n.isPassOwnershipNode=r,n.evaluateOwnership=i;function r(t){return t&&t.ActionType==e.FLOW_ACTION_TYPE.PassOwnership}function i(t){return r(t)?o(t)?e.PASS_OWNERSHIP.EvaluateOwnership.Owner:e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:e.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined}function o(e){var n=t.createNew({featureName:"SwitchToFrameNode",elementName:e.Name});return n.getCurrentEvaluationValueAndStopEvaluating(e.ConditionTrees.SwitchToFrame)}}o.register("PassOwnershipManager").asCtor(Za).initialize(!1);function Za(){var e,t,n,r,i,a,s,u,l,c,d,p=new Ef(this),g=2e3,f=3600,h=2,m=3e3,v=1100,S="wm-cdstop",y=this,E=!1,T=p.Prop.Protected("isRunning",!1),C=p.Prop.Protected("storageManager",!1),b=p.Prop.Protected("allUserGuids",{}),I=p.Prop.Public("crossDomainSampleRate",{}),w=p.Prop.Protected("listenCallback");function _(e){c=o.get("CommonEvents"),d=o.get("Consts"),i=o.get("Logger"),a=o.get("FeaturesManager"),l=o.get("TimerManager"),I(P()),t=e.errorHandler,n=e.userGuid,C(e.storageManager),b(e.allUserGuids),r=e.topWindow==e.owner,u=i.wrapCustomerLog(d.PASS_OWNERSHIP.LOG_FEATURE)}var P=p.Virtual.Protected("getSampleRate",function(){return 200}),A=p.Public("enabled",function(){return a.isFeatureEnabled("cd_play")||a.isFeatureEnabled("passOwnership")});p.Virtual.Public("start",function(e){if(!A())return;u("starting cross domain listening..."),w(e),U()}),p.Virtual.Public("stop",function(){C().releaseCallback(W)}),p.Virtual.Public("reset",function(){if(!A())return;K(!0),J(),l.libSetTimeout(function(){K(!1)},v)}),p.Virtual.Public("determineOwnership",function(e){if(!A())return;u("switching owner...");var t=k(e);return t||(F(),O(),C().setSyncFlag(n)),t});var k=p.Virtual.Protected("checkIsConditionMet",function(e){return X(e),D()});p.Virtual.Public("loseOwnership",function(e,t){if(!A())return;u("losing ownership..."+document.location.href),T()&&(e&&(u("reset state: reseting the ownership condition"),J()),t?x():T(!1))});var O=p.Virtual.Protected("removeOwner",function(){});p.Virtual.Public("optimizedDetermineOwnership",function(){if(!A())return z().gainOwnership(),!0;return N(),!1});var D=p.Virtual.Public("isConditionMet",function(e,t,n){var r=z().evaluateOwnership(e,t,n);return r==d.PASS_OWNERSHIP.EvaluateOwnership.Owner||r==d.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined&&y.isOwnerByDefault()}),N=p.Virtual.Protected("dontStartAsOwner",function(){}),x=(p.Virtual.Protected("startAsOwner",function(){}),p.Virtual.Protected("resumeCrossDomain",function(){u("saving data to resume after unload",3),X(e),E=!0,e=null,L()}));function L(){l.setWalkmeTimeout(M,m)}var M=p.Virtual.Protected("actualResume",function(){u("continue listening after "+m+" milliseconds",3),U()}),F=p.Virtual.Protected("terminate",function(){u("owner killed, losing ownership",3),z().loseOwnership(),y.loseOwnership()}),R=p.Virtual.Protected("gainOwnership",function(){u("gaining ownership with state "+o.get("CurrentWalkthruData").state+" "+document.location.href,3),T(!0),z().gainOwnership(E,B(),!0),E=!1}),B=p.Virtual.Protected("windowIdentifier",function(){return window.location.href}),U=p.Virtual.Protected("listen",function(){C().refreshGetData(b(),W)}),W=p.Virtual.Protected("handleOwnership",function(){var e=Q();T()?e&&F():e||!j()&&!H()?e?u("waiting for other owner to die before gaining ownership...",3):E&&(E=!1):R(),l.libSetTimeout(U,G()),V()}),V=p.Protected("handleListenCallback",function(){w()&&(w()(),w(null))}),G=p.Protected("calculateDomainListenInterval",function(){return E?g:I()}),H=p.Protected("checkOwnership",function(){try{if(q())return z().evaluateOwnership(!0)==d.PASS_OWNERSHIP.EvaluateOwnership.Owner;if(Y())return u("no ownership condition, owner by default",5),!0}catch(e){t(e,"Error determining the owner of a cross domain step")}return!1}),j=p.Protected("isOwnerByPeeking",function(){var e=z().evaluateOwnershipByPeeking();return e&&u("[passownership] owner by peeking",5),e}),Y=p.Public("isOwnerByDefault",function(){return r});function z(){return s||(s=o.get("PassOwnershipRouter")),s}function Q(){return C().getData(S,!1,n)}function K(e){C().saveData(S,e,h,n)}function q(){return e=C().getData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,n)}var X=p.Public("setOwnershipCondition",function(t){e=t,C().saveData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,t,f,n)}),J=p.Protected("resetOwnershipCondition",function(){C().saveData(d.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,!1,f,n)});_.apply(null,arguments)}o.register("PassOwnershipNextStepProvider").asCtor(es).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer");function es(e,t,n,r){var i=this;i.peekNextCookieStep=a;function o(){}function a(i){try{i=i||0;var o=e.getData(t.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},r.getAllUserGuids()[0]),a=o[t.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],s=n.getWalkthruById(a),u=o[t.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME],l=s.Steps[u+i];return l}catch(c){return null}}o()}o.register("TabbedOwnershipManager").asCtor(ts).initialize(!1);function ts(){var e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b=new Ef(this),I=3600,w=300,_="wm-po-p",P="wm-po-r",A="wm-po-q",k="wm-setPriority",O="priority",D="wm-qp-req",N="wm-qp-res",x="wm-po-pc",L=100,M=1,F=10,R=this,B=0,U=!1;function W(s){a=o.get("Consts"),E=o.get("CommonEvents"),y=o.get("TimerManager"),f=o.get("PassOwnershipRouter");var c=o.get("Logger");T=o.get("POVisibleIframeChecker"),S=s.isFeatureEnabled("po_doubleCheck"),b.Extends(Za,s),i=b._base,i.crossDomainSampleRate(H()),e=2*i.crossDomainSampleRate(),t=V()?5e3:800,n=V()?2e4:5e3,r="Chrome"==o.get("HostData").browser.name?1200:700,l=s.errorHandler,u=s.userGuid,d=i.storageManager,p=i.allUserGuids,g=i.isRunning,C=c.wrapCustomerLog(a.PASS_OWNERSHIP.LOG_FEATURE),le()}b.Virtual.Public("getPriority",function(){return s});function V(){return G()||o.get("HostData").isIEBrowser(10,"gte")}var G=b.Protected("isSlowerBrowser",function(){return o.get("HostData").isIEBrowser(9,"lte")}),H=b.Override("getSampleRate",function(){var e=i.getSampleRate();return G()&&(e*=2),e});b.Override("start",function(e){J(function(){E.raiseEvent(a.EVENTS.PassOwnership.PriorityInitialized,{priority:s}),ue(),ne(),i.start(e)})}),b.Override("stop",function(){if(!R.enabled())return;ce(),de(),C("stop ownership",4),g(!1),i.stop()}),b.Override("reset",function(){if(!R.enabled())return;h=0,C("reset ownership",4),i.resetOwnershipCondition(),Te(),g(!1)});var j=b.Override("dontStartAsOwner",function(){i.dontStartAsOwner(),Ie()}),Y=b.Override("startAsOwner",function(){g(!0),Ee(s)});b.Override("resumeCrossDomain",function(){g(!1),U=!0,i.resumeCrossDomain()}),b.Override("actualResume",function(){U=!1,i.actualResume()}),b.Override("handleOwnership",function(){var e=ye();q()||(g()&&s!=e&&(i.terminate(),T.reset()),g()||(!e&&i.checkOwnership()||K()?z():s==e&&Q()&&(i.gainOwnership(),he()))),y.libSetTimeout(i.listen,i.calculateDomainListenInterval()),i.handleListenCallback()});function z(){var e={priority:s,asyncCallback:Ce};E.raiseEvent(a.EVENTS.PassOwnership.PORegisterPriority,e)}var Q=b.Virtual.Protected("shouldRegainOwnership",function(){return i.checkOwnership()});function K(){if(i.isOwnerByPeeking())return B++,B>=F;B=0}function q(){if(!h)return!1;return h--,!0}b.Override("determineOwnership",function(e){i.setOwnershipCondition(e),c=i.isConditionMet(),c||Ie(),S?he(null,t,S):t();function t(){i.determineOwnership(e)}var n=c;return c=void 0,n}),b.Override("checkIsConditionMet",function(){return c}),b.Override("optimizedDetermineOwnership",function(){if(!i.enabled())return f.gainOwnership(),!0;return i.isConditionMet()?(Y(),f.gainOwnership(),!0):(j(),!1)});function X(){i.storageManager().refreshGetData(p(),function(){m=null;var e=we(),t=ye(),n=K();!e||s!=e||t&&!n?!n&&t&&t!=s&&Ie():(C("priority is highest, gaining ownership - "+s,4),Ee(s),i.gainOwnership())})}b.Override("windowIdentifier",function(){return s+":"+window.location.href}),b.Override("removeOwner",function(e,t){i.removeOwner(),Te()});function J(e){Z(function(t){var n=parseInt(t,10)||0;C("got priority "+n+" from sessionStorage",4),oe(n,function(t){0===n||t?(C((t?"inherited priority from parent":"priority is zero")+", getting a new priority",4),
he(null,e,!0)):(s=n,S?$(e):e&&e())})})}function $(e){oe(s,function(t){t?he(null,e,!0):e&&e()})}var Z=b.Virtual.Protected("restorePriority",function(e){i.storageManager().sessionGetData(O,0,u,e)}),ee=b.Virtual.Protected("storePriority",function(e){d().sessionSetData(O,e,u)});function te(){return o.get("HostData").isIE()||S}function ne(){te()&&re()}function re(){var e=x+s,t=d().getData(e,void 0,u);t>=1&&d().increment(e,null,I,u),y.libSetTimeout(re,w)}function ie(e,t){var n=x+e;d().increment(n,null,I,u,function(){var e=!0;function i(){if(!e)return;d().refreshGetData(p(),function(){if(!e)return;var t=d().getData(n,void 0,u);t>1&&a(!0),y.libSetTimeout(i,L)})}var o=y.libSetTimeout(a,r);function a(r){r=!!r,d().saveData(n,0,I,u),d().removeData(n,u),e=!1,o&&o.clear(),t&&t(r)}i()})}function oe(e,t){if(!e)return void(t&&t(!1));te()?(C("checking if priority is inherited using storageManager",4),ie(e,t)):(C("checking if priority is inherited using window.opener",4),ae(e,t))}function ae(e,t){if(window.opener){var n,r,i;function o(e){C("is priority inherited: "+e,4),r&&r.clear(),n&&n(),t&&t(e)}n=Ir.registerEventHandler("message",function(t){try{var n=_f(t.data);n.requestType==N&&(n.priority==e?(h=M,o(!0)):(i--,0==i&&o()))}catch(r){C("Error in priority inherited message event "+r,4)}}),r=y.libSetTimeout(function(){o(!1)},1e3),i=Ir.postMessageToAllFramesChain(window.opener,wf({requestType:D})),0==i&&o(!1)}else t&&t(!1)}var se=b.Virtual.Protected("shouldRegisterFocusEvents",function(){return window==top});function ue(){se()&&(mtjQuery(window).bind("focus",he),mtjQuery(window).bind("mouseenter",he))}function le(){Ir.registerEventHandler("message",pe)}function ce(){se()&&(mtjQuery(window).unbind("focus",he),mtjQuery(window).unbind("mouseenter",he))}function de(){Ir.unregisterEventHandler("message",pe)}function pe(e){var t;try{switch(t=_f(e.data),t.requestType){case k:ge(t.priority);break;case D:e.source.postMessage(wf({requestType:N,priority:s}),"*")}}catch(n){t&&l(n,"error handling priority message from parent")}}var ge=b.Virtual.Protected("handleSendPriorityRequest",function(e){C("frame got new priority from parent window: "+e,4),s=e,Se(e)}),fe=[],he=b.Virtual.Public("updatePriority",function(e,t,n){if(t&&fe.push(t),v||U)return;var r=s;v=!0;var i=n?null:s;d().increment(_,i,I,u,function(e){e!==s&&(C("updating priority from "+r+" to "+e,4),ve(e),me(e,r));var t=fe;fe=[],v=!1;for(var n=0;n<t.length;n++)t[n](s)})}),me=b.Virtual.Protected("afterUpdatingPriority",function(e){Se(e)});function ve(e){s=e,ee(s),g()&&(C("is running during set priority - setting current owner",4),Ee(s)),C("updated priority: "+s,4)}function Se(e){var t={requestType:k,priority:e};C("sending priority to all frames: "+e,4),mtjQuery("iframe").each(function(e,n){n.contentWindow.postMessage(wf(t),"*")})}function ye(){return d().getData(P,!1,u)}function Ee(e){return C("setting owner to: "+document.location.href+"owner id:"+e,4),h=M,d().saveData(P,e,I,u)}function Te(){C("removing current owner",4),d().saveData(P,null,I,u)}function Ce(){T.executeIfVisible(function(){C("register in queue with priority "+s,4),d().addToDictionary(A,s,be(),I,u),m&&!m.cleared||(m=y.libSetTimeout(X,e))})}function be(){return(new Date).getTime()}function Ie(){C("po_tabs - clear priorities queue",4),d().saveData(A,null,I,u)}function we(){var r=d().getData(A,!1,u);C("registered priorities: "+wf(r),4);for(var i=0,o=t;!i&&o<n;){for(var a in r)if(r.hasOwnProperty(a)){var s=parseInt(a,10);be()-r[a]<o&&s>i&&(i=s)}o+=e}return i}W.apply(null,arguments)}o.register("FramedOwnershipManager").asCtor(ns).initialize(!1);function ns(){var t,n,r,i,a=new Ef(this),s="walkme-priorities";function u(e){var n=o.get("Logger"),s=o.get("Consts");i=o.get("UserGuidContainer").getUserGuid(),a.Extends(ts,e),r=a._base,t=n.wrapCustomerLog(s.PASS_OWNERSHIP.LOG_FEATURE)}a.Override("getPriority",function(){return r.getPriority()||n}),a.Override("restorePriority",function(i){if(t("[po_frames] restoring priority, temp priority is: "+n,4),window==top)r.restorePriority(i);else{var o=l();if(o&&o.length){var a=g(p());o.sort(function(e,t){return e>t?-1:e<t?1:0}),t("[po_frames] used priorities: "+wf(o),4);for(var u=0;u<o.length&&!n;u++)e.inArray(o[u],a)==-1&&(a.push(o[u]),sessionStorage.setItem(s,wf(a)),n=o[u])}c(n,i)}});function l(){var e=sessionStorage.getItem(s);if(t("[po_frames] getting session priorities: "+e,4),e)return _f(e)}function c(e,t){e&&!d(e)?t&&t(e):r.updatePriority(null,function(e){c(e,t)})}function d(t){return e.inArray(t,g(top))!=-1}a.Override("storePriority",function(n){if(n=parseInt(n,10),window==top)r.storePriority(n);else{var i=_f(sessionStorage.getItem(s)||"[]");e.inArray(n,i)==-1&&i.push(n),t("[po_frames] storing priority "+n+" in the session",4),sessionStorage.setItem(s,wf(i))}});function p(){try{top.frames;return top}catch(e){return window}}function g(e){var t=[];try{if(e!=window&&e._walkmeInternals){var n=e._walkmeInternals.ctx.get("CrossDomainManager");if(n&&n.isReady())var r=n.get().getPriority();r&&i==e._walkmeInternals.ctx.get("UserGuidContainer").getUserGuid()&&t.push(parseInt(r,10))}}catch(o){}try{for(var a=e.frames,s=0;s<a.length;s++)t=t.concat(g(a[s]))}catch(o){}return t}a.Override("afterUpdatingPriority",function(e,t){f(t)});function f(n){var r=l();if(t("[po_frames] removing priority "+n+" from session",4),r&&n){var i=e.inArray(n,r);i>=0&&(r.splice(i,1),sessionStorage.setItem(s,wf(r)))}}a.Override("handleSendPriorityRequest",function(e){}),a.Override("shouldRegisterFocusEvents",function(){return!0}),a.Override("shouldRegainOwnership",function(e,t){return!0}),u.apply(null,arguments)}var rs=function(){function t(e,t,n,r,i,o,a,s,u,l,c,d){this._mustache=e,this._commonUtils=t,this._positionHelper=n,this._commonEvents=r,this._uiUtils=o,this._siteConfigManager=a,this._timerManager=s,this._cdnServer=i.get(),this._getTopContainer=u,this._lib=l,this._hostData=c,this._consts=d}return t.prototype.activate=function(e,t,n,r,i,o){this._activateContentInNewTab=o,this.createLightBox(e,t,n,r,i)},t.prototype.getElement=function(){return this._lightBoxDiv},t.prototype.getAjaxLoader=function(n){var r=e("#"+t.AJAX_LOADER_DIV_ID,n);return r},t.prototype.remove=function(e){e||(e=this._getTopContainer(null,!1)),this.removeTakingLongMsg(!1),this.removeLightBox(e),this.removeOverlay(),this.unbindEscButton(e)},t.prototype.removeOverlay=function(){e("#"+t.OVERLAY_ID).remove()},t.prototype.unbindEscButton=function(e){e.unbind(t.KEY_UP_EVENT)},t.prototype.removeLightBox=function(n){var r=e("#"+t.LIGHTBOX_DIV_ID,n);r.exist()&&(r.find("iframe").attr("src",""),r.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.ContentRemoved,{}))},t.prototype.createLightBox=function(n,r,i,o,a){var s=this._getTopContainer(null,!1),u=this.getHtml(n,r),l=e(u);this._lightBoxDiv=l,this.addCssClasses(n,l,i),this._uiUtils.setLangAttribute(l);var c=this.createXButtonElement();l.append(c),this.handleCreatingOpenInNewTabButton(n,s,l,o),this.handleCreatingOverlay(),this.bindEscButton(s);var d=a(n);this.setTakingLongTimers(l),this.overlayContent(d,l);var p=this.handleIosIframeScrolling(d);this.appendContent(p),s.append(l);var g=e("#"+t.RELOAD_LIGTHBOX_DIV_ID);return g.click(e.proxy(function(){var e=d.get(0);e.src=e.src,this.getAjaxLoader(l).show(),this.removeTakingLongMsg(!1),this.setTakingLongTimers(l)},this)),this._positionHelper.centerElementInParent(g,l),g.css("left","0"),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxCreated,l),l},t.prototype.overlayContent=function(t,n){t.hide();var r=e.proxy(function(){this.removeTakingLongMsg(!0),this.getAjaxLoader(n).remove(),t.show()},this);this.shouldWaitForReady(t)?t.ready(r):t.load(r),"VIDEO"==o.get("ElementUtils").getElementTagName(t[0])&&t.bind("loadeddata",r)},t.prototype.appendContent=function(e){this._lightBoxDiv.append(e)},t.prototype.reloadButtonTimerFunction=function(n){e("#"+t.RELOAD_LIGTHBOX_DIV_ID).css("display","block"),this._reloadButtonTimer.clear(),this.getAjaxLoader(n).hide()},t.prototype.takingLongerTimerFunction=function(n){var r=e("#"+t.WAITING_DIV_ID);this._positionHelper.centerElementInParent(r,n),r.css("left","0"),r.css("display","block"),this._takingLongerTimer.clear()},t.prototype.setTakingLongTimers=function(n){this._takingLongerTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.takingLongerTimerFunction(n)},this),t.TAKING_LONGER_MESSAGE_INTERVAL),this._reloadButtonTimer=this._timerManager.libSetTimeout(e.proxy(function(){this.reloadButtonTimerFunction(n)},this),t.RELOAD_BUTTON_INTERVAL)},t.prototype.removeTakingLongMsg=function(n){this._reloadButtonTimer&&this._reloadButtonTimer.clear(),this._takingLongerTimer&&this._takingLongerTimer.clear();var r=e("#"+t.RELOAD_LIGTHBOX_DIV_ID),i=e("#"+t.WAITING_DIV_ID);n?(r.remove(),i.remove()):(r.css("display","none"),i.css("display","none"))},t.prototype.handleIosIframeScrolling=function(e){var t=/iPhone|iPod|iPad/.test(navigator.userAgent);return t?this.getIframeWrapperDiv(e):e},t.prototype.getIframeWrapperDiv=function(t){var n={width:t.attr("width")||t[0].style.width,height:t.attr("height")||t[0].style.height,overflow:"auto","-webkit-overflow-scrolling":"touch"},r=e("<div />").css(n);return r.append(t),r},t.prototype.bindEscButton=function(n){n.bind(t.KEY_UP_EVENT,e.proxy(function(e){27==e.keyCode&&this.remove()},this))},t.prototype.handleCreatingOverlay=function(){var n=this._uiUtils.canDisplayOverlay();if(n){var r=this._uiUtils.displayOverlay(this._consts.POPUP_BALLOON_Z_INDEX,!1,t.OVERLAY_ID);r.click(e.proxy(function(){this.remove()},this))}},t.prototype.handleCreatingOpenInNewTabButton=function(t,n,r,i){if(i){var o="walkme-open-in-new-tab-button",a=e(this.newTabHtml(o));a.click(e.proxy(function(){this.remove(n),this._activateContentInNewTab(t)},this)),a.mouseover(e.proxy(function(){this.contentMouseOver(a,!0)},this)),a.mouseout(e.proxy(function(){this.contentMouseOver(a,!1)},this)),r.append(a)}},t.prototype.newTabHtml=function(e){throw""},t.prototype.addCssClasses=function(e,t,n){var r=this._commonUtils.formatString("walkme-{0}-light-box-{1}",n,e.Id);t.addClass(r),t.addClass("walkme-to-remove"),t.addClass("walkme-to-destroy")},t.prototype.createXButtonElement=function(){var t="walkme-light-box-x-button",n=this._siteConfigManager.get().ContentCloseTooltip,r=e(this.xButtonHtml(t,n));return r.click(e.proxy(this.closeLightBoxClicked,this)),r.mouseover(e.proxy(function(){this.contentMouseOver(r,!0)},this)),r.mouseout(e.proxy(function(){this.contentMouseOver(r,!1)},this)),r},t.prototype.xButtonHtml=function(e,t){throw""},t.prototype.contentMouseOver=function(e,t){throw""},t.prototype.closeLightBoxClicked=function(){this.remove(),this._commonEvents.raiseEvent(this._consts.EVENTS.LightBoxClosed)},t.prototype.getHtml=function(e,t){return this._mustache.to_html(this.getTemplate(),this.getConfig(e,t))},t.prototype.getConfig=function(e,n){var r=this.getDimensionSize("width",e,n),i=this.getDimensionSize("height",e,n),o=this.getToolbarWidth(r);return{lightboxDivId:t.LIGHTBOX_DIV_ID,lightboxWidth:r,lightboxHeight:i,zIndex:this._consts.POPUP_BALLOON_Z_INDEX,lightboxTopbarDivId:t.LIGHTBOX_TOPBAR_DIV_ID,topbarWidth:o,ajaxLoaderDivId:t.AJAX_LOADER_DIV_ID,waitingDivId:t.WAITING_DIV_ID,reloadDivId:t.RELOAD_LIGTHBOX_DIV_ID,cdnServer:this._cdnServer}},t.prototype.shouldWaitForReady=function(e){return(this._hostData.isIE()||"Chrome"==this._hostData.browser.name)&&e[0]&&e[0].src&&e[0].src.indexOf(".pdf")>-1},t.prototype.getTemplate=function(){throw""},t.prototype.getDimensionSize=function(e,t,n){throw""},t.prototype.getToolbarWidth=function(e){throw""},t.prototype.getSize=function(){throw""},t.LIGHTBOX_DIV_ID="walkme-content-light-box",t.LIGHTBOX_TOPBAR_DIV_ID="walkme-content-light-box-top-bar",t.AJAX_LOADER_DIV_ID="walkme-ajax-loader",t.WAITING_DIV_ID="walkme-ajax-taking-long",t.RELOAD_LIGTHBOX_DIV_ID="walkme-ligth-box-reload",t.OVERLAY_ID="walkme-content-background",t.KEY_UP_EVENT="keyup.walkme",t.TAKING_LONGER_MESSAGE_INTERVAL=8e3,t.RELOAD_BUTTON_INTERVAL=15e3,t}(),is=function(e){r(t,e);function t(){e.apply(this,arguments)}return t.prototype.activate=function(t,n,r,i,o,a){e.prototype.activate.call(this,t,n,r,i,o,a),this._lib.centerElementInPage(this._lightBoxDiv,!1)},t.prototype.createLightBox=function(n,r,i,o,a){e.prototype.createLightBox.call(this,n,r,i,o,a);var s=this.getAjaxLoader(this._lightBoxDiv);this._positionHelper.centerElementInParent(s,this._lightBoxDiv),s.css("left","0"),this._positionHelper.registerResizeAndScrollEvents({element:this._lightBoxDiv,eventNameSuffix:t.WALKME_LIGHTBOX_EVENTS})},t.prototype.removeLightBox=function(n){e.prototype.removeLightBox.call(this,n),this._positionHelper.removeScrollAndResizeEvents(t.WALKME_LIGHTBOX_EVENTS)},t.prototype.getDimensionSize=function(e,t,n){var r=this.getSizeUnitSettingKey(e),i=this.getSizeUnit(t,r),o=this.getDimensionSettingKey(e),a=this._commonUtils.getSettingsValue(t.Settings,o,n[e]);if("%"==i){var s=this._positionHelper.getWindowSize();a=s[e]*a/100}return a+"px"},t.prototype.getSizeUnitSettingKey=function(e){return e+"Unit"},t.prototype.getSizeUnit=function(e,t){return this._commonUtils.getSettingsValue(e.Settings,t,"px")},t.prototype.getDimensionSettingKey=function(e){return"height"==e?t.LIGHTBOX_HEIGHT_KEY:t.LIGHTBOX_WIDTH_KEY},t.prototype.getToolbarWidth=function(e){return parseFloat(e)+4+"px"},t.prototype.getSize=function(){return{width:this._lightBoxDiv.css("width").replace("px","")+"px",height:this._lightBoxDiv.css("height").replace("px","")+"px"}},t.prototype.contentMouseOver=function(e,t){var n=t?"#404040":"#646464";e.css("backgroundColor",n)},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position:absolute; height: 17px; width: 17px; right: 5px; top: -19px; cursor: pointer; z-index: 2147483632; vertical-align: top;'><img src='{2}/player/resources/images/blue-x-button.png' style='margin: 4px;' /></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute;height:17px; width:17px; right:25px; top:-19px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/open-in-new-tab.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='float:left; width:{{lightboxWidth}}; height:{{lightboxHeight}}; padding: 2px; z-index:{{zIndex}}; background-color:white; box-shadow:4px -4px 19px -1px #494949;'><div id='{{lightboxTopbarDivId}}' style='position: absolute; top: -23px; left: 0px; height: 25px; width: {{topbarWidth}}; background-color:#646464;'></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v2.gif) no-repeat center; width:100%; height:100px; position:relative; text-align:center; vertical-align: bottom; margin-top: -30px;'><span style='display: inline-block; color: #99d3fe; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t.WALKME_LIGHTBOX_EVENTS="walkmeLightBox",t}(rs),os=function(e){r(t,e);function t(){e.apply(this,arguments)}return t.prototype.createLightBox=function(t,n,r,i,o){e.prototype.createLightBox.call(this,t,n,r,i,o),this._lightBoxDiv.css({position:"fixed",top:0,left:0})},t.prototype.getDimensionSize=function(e,t,n){return"100%"},t.prototype.getToolbarWidth=function(e){return"100%"},t.prototype.getSize=function(){return{width:"100%",height:"100%"}},t.prototype.contentMouseOver=function(e,t){},t.prototype.getConfig=function(t,n){var r=e.prototype.getConfig.call(this,t,n);return r.padding="10px",r.title=t.Name,r},t.prototype.xButtonHtml=function(e,t){return this._commonUtils.formatString("<div id={0} title='{1}' style='position: absolute; right: 19px; top: 17px; cursor: pointer; z-index: 2147483632; vertical-align: top; height: 15px; width: 15px; background-image: url(\"{2}/player/resources/images/x-btn-resources.png\"); background-position: -5px -5px;'></div>",e,t,this._cdnServer)},t.prototype.newTabHtml=function(e){return this._commonUtils.formatString("<div id={0} title='Open in a new tab' style='position:absolute; height:11px; width:11px; right:50px; top:15px; cursor:pointer; z-index:2147483632; vertical-align: top;'><img src='{1}/player/resources/images/mobile_full_screen.png' style='margin: 4px;'></div>",e,this._cdnServer)},t.prototype.getTemplate=function(){return"<div id='{{lightboxDivId}}' class='wm-lightbox-web' style='width:{{lightboxWidth}}; height:{{lightboxHeight}}; box-sizing: border-box; z-index:{{zIndex}}; background-color: black; padding-top: 50px; padding-right: 10px;'><div style='width: 100%; box-sizing: border-box; padding: 0 15px; position: absolute; top: 0; left: 0px; line-height: 50px; background-color: #3393d1; color: white; text-align: left; font-size: 15px;'>{{title}}<div id='{{lightboxTopbarDivId}}' style='height: 100%; width: 100%;'></div></div><div id='{{ajaxLoaderDivId}}' style='background:url({{{cdnServer}}}/player/resources/images/ajax-loader_v3.gif) no-repeat center; width:100%; height:100px; position:absolute; text-align:center; vertical-align: bottom; top: 50%; margin-top: -50px;'><span style='display: inline-block; color: white; font-size: 14px; font-family: Arial; font-weight: bold; margin-top: 108px;'>Loading</span></div><div id='{{reloadDivId}}' style='display: none; direction: ltr; cursor: pointer; position: relative; text-align: center; margin-top: -20px; color: #168dce; font-size: 14px; font-family: Arial;'><img style='vertical-align: -11px; margin-right: 3px' src='{{{cdnServer}}}/player/resources/images/reload.png' />Reload Page</div><div id='{{waitingDivId}}' style='display: none; font-size: 14px; font-family: Arial; color: #464646; text-align: center; position: relative; font-weight: bold;'>This is taking longer than expected</div></div>"},t.LIGHTBOX_WIDTH_KEY="LightboxWidth",t.LIGHTBOX_HEIGHT_KEY="LightboxHeight",t}(rs);!function(){var e="Mustache,CommonUtils,PositionHelper,CommonEvents,CdnServer,UiUtils,SiteConfigManager,TimerManager,getTopContainer,Lib,HostData,Consts";R.register(L.PLATFORM.Web,function(){o.register("LightboxDisplayer").asProto().asCtor(is).dependencies(e)}),R.register(L.PLATFORM.MobileWeb,function(){o.register("LightboxDisplayer").asProto().asCtor(os).dependencies(e)})}();function as(){var e,t,n,r,i,a,s=this,u=o.get("Consts"),l="ContentPlayMode",c=u.PLAY_MODE;function d(r){e=r.lib,t=r.cdnServer,n=r.clickAuditManager,a=o.get("Logger").wrapCustomerLog(h),i=o.get("CommonEvents")}s.getContentTypeName=Va.WM_PURE_VIRTUAL(),s.createContentElement=Va.WM_PURE_VIRTUAL(),s.needsNewTabButton=Va.WM_PURE_VIRTUAL(),s.defaultLightboxSize=Va.WM_PURE_VIRTUAL(),s.cannotPlayInLightbox=function(e){var t=0==window.location.href.indexOf("https://")&&0!=e.indexOf("/")&&0!=e.indexOf("https://");return t&&a("Can't play content in lightbox"),t},s.activateContent=function(e,t,r){var d=parseInt(o.get("SettingsValuesRetriever").getSettingsValue(e.Settings,l,c.NewTab));switch(a(Nf("Started playing content, play mode is :{0}",d)),n.SendClickAudit(u.DEPLOYABLE_TYPE.Content,e.Id,{type:t,id:r},{contentType:e.Type}),e.Url=o.get("HtmlDecoder").decodeHtml(e.Url,["&"]),a(Nf("Content url is :{0}",e.Url)),i.deprecatedRaiseEvent(u.EVENTS.LoadingContent,e),d){case c.Widget:f(e);break;case c.LightBox:s.cannotPlayInLightbox(e.Url)?(a("Falling back to playing content in a new tab instead"),g(e)):p(e);break;case c.NewTab:g(e)}},s.removeContent=function(e){r&&r.remove()};function p(e){r=o.create("LightboxDisplayer"),r.activate(e,s.defaultLightboxSize(),s.getContentTypeName(),s.needsNewTabButton(),s.createContentElement,g)}function g(e){o.get("CommonUtils").isValidUrl(e.Url)?(i.deprecatedRaiseEvent(u.EVENTS.LoadingContentInNewTab),a(Nf("Opening content in new tab. Url: {0}",e.Url)),window.open(e.Url,"_blank")):a(Nf("Content url is invalid: {0}",e.Url))}function f(e){throw"activateContentInWidget is unimplemented"}s.getLightboxSize=function(){return r.getSize()},d.apply(null,arguments)}function ss(){var e,t,n,r,i=this,a=null,s="VideoParameters",u=420,l=315;function c(s){Va.extend(i,as,s),a=s.lib,e=s.vendorName,t=s.videoId,r=s.content,n=o.get("Logger").wrapCustomerLog(h)}i.getContentTypeName=function(){return"video"},i.createContentElement=function(e){return d(e)},i.needsNewTabButton=function(){return!1},i.defaultLightboxSize=function(){return{width:u,height:l}};function d(n){var i=p(n);if("html5video"==e){var a="";a+=f();var s=mtjQuery("<video controls "+a+' src="'+r.Url+'"></video>');return i.indexOf("autoplay")>-1&&s.attr("autoplay",1),s}var u=Nf("[{0} {1}]{2}[/{3}]",e,i,t,e),l=o.get("BBCodeParser").parse(u),c=mtjQuery(l);return c}function p(e){var t=o.get("SettingsValuesRetriever").getSettingsValue(e.Settings,s,"");return t=g(t,e),t+=' wmode="opaque"'}function g(e,t){e=e.replace(/&quot;/gi,'"'),e=e.replace(/((width|height)="[^\\"]+)"/gi,"");var n=f();return e+=" "+n}function f(){var e=i.getLightboxSize(),t=Nf('width="{0}" height="{1}"',e.width,e.height);return t}c.apply(null,arguments)}function us(){var e,t=this,n=null,r=900,i=500;function a(r){Va.extend(t,as,r),n=r.lib,e=o.get("Logger").wrapCustomerLog(h)}t.getContentTypeName=function(){return"article"},t.createContentElement=function(e){return s(e)},t.needsNewTabButton=function(){return!0},t.defaultLightboxSize=function(){return{width:r,height:i}};function s(e){if(!o.get("CommonUtils").isValidUrl(e.Url))return;var n=t.getLightboxSize(),r='<iframe frameborder="0" src="{{{url}}}" style="width: {{{width}}}; height: {{{height}}};"></iframe>',i=yf.to_html(r,{width:n.width,height:n.height,url:encodeURI(e.Url)}),a=mtjQuery(i);return a}a.apply(null,arguments)}o.register("AbPermutationManager").asCtor(ls).dependencies("ClientStorageManager,EndUsersManager,AbPermutationManagerServerCaller, AbTestingEventCollectorCaller, AbCurrentPermutationProvider, LibDestroyer, Logger");function ls(t,n,r,i,o,a,s){var u,l,c,d=this,p="ABTesting",g="wm-ABPer",f="wm-frcd",h="wm-force-permutation",m=!1,v=31536e4;function S(){u=s.wrapCustomerLog(p)}d.setPermutations=function(e,t){l=e,c=t},d.getPermutations=function(){return l},d.initGetPermutation=function(e,t){T(l,c,e,function(e){o.setCurrentPermutation(e),t(e)})},d.getPermutation=function(){return o.getCurrentPermutation()},d.getPermutationById=function(e){for(var t=0;t<l.length;t++)if(l[t].PermutationId==e)return l[t];return!1};function y(e,t){return f+"-"+e+"-"+t}function E(e){return g+"-"+e}function T(e,r,s,l){var c=parseInt(t.getData(h));if(!isNaN(c))return o.setCurrentPermutation(c),u("Using debug permutation from 'wm-force-permutation' key: "+c,1),void l(c);if(!e)return void l(-1);var d=n.getEndUserGuid(!0);if(d===!1)return u("WalkMe ABTesting - Cannot retrieve end user. Stopping execution",1),void a.removeWalkMe("AbTesting - Cannot fetch EndUser",{sendLog:!0});var p,g=E(d),f=null!=s,S=_(e,r),T=b(g,S);if(void 0!=T&&!f)return o.setCurrentPermutation(T),u("using permutation from storage: "+T,1),void l(T);if(f){m=!0;var w=C(d,s,T);if(!w)return u("using permutation from activation rule: "+s,1),o.setCurrentPermutation(s),void l(s);u("got permutation from activation rule: "+s,2),p=s}else p=P(e),u("permutation was drawn: "+p,1);u("sending permutation id to server: "+p,2);var A=r?r.PermutationId:void 0;I(d,p,S,A,f,function(e){u("server returned permutation id : "+e,2),u("saving permutation in storage : "+e,3),t.saveData(g,e,v);var n;if(f){u("Activation rule was used.",2);var r=y(d,s);t.saveData(r,1,v),n=p}else n=e;o.setCurrentPermutation(n),u("Final permutation: "+n,1),i.postEvent(f),l(n)})}function C(e,n,r){if(r==n)return!1;var i=y(e,n);return 1!=t.getData(i)}function b(n,r){var i=parseInt(t.getData(n));if(!isNaN(i)){if(e.inArray(i,r)>-1)return u("permutation exists in storage: "+i,1),i;u("permutation exists in storage but was out of date: "+i,1)}return void u("no valid permutation exists in storage",2)}function I(e,t,n,i,o,a){r.sendPermutationToServer(e,t,n,i,o,a,w)}function w(){u("WalkMe ABTesting - Error when saving end-user permutation. Removing WalkMe",1),a.removeWalkMe("AbTesting - Cannot fetch EndUser Permutation",{sendLog:!0})}function _(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].PermutationId);return t&&n.push(t.PermutationId),n}function P(e){for(var t=0,n=Math.random(),r=0;r<e.length;r++)if(t+=e[r].Percentage,t>=n)return e[r].PermutationId;return e[e.length-1].PermutationId}S.apply(null,arguments)}o.register("AbCurrentPermutationProvider").asCtor(cs);function cs(){var e=this;e.setCurrentPermutation=r,e.getCurrentPermutation=n;var t=-1;function n(){return t}function r(e){t=e}}o.register("AbPermutationManagerServerCaller").asCtor(ds).dependencies("RecorderServerManager, WmAjax, HostData, AuditSourceManager, UserGuidContainer");function ds(e,t,n,r,i){var o=this,a=1e4;function s(){}o.sendPermutationToServer=function(o,s,u,l,c,d,p){var g=t.execute({url:e.get()+"/AbTesting/SaveEndUserPermutation",dataType:"jsonp",data:{endUser:o,walkmeUserGuid:i.getUserGuid(),source:r.get(),permutationId:s,isForcedPermutation:c,availablePermutationsSerialized:wf(u),browser:n.browser.string,os:n.os.name,timeout:a,defaultPermutation:l}});g.success(function(e){"error"===e?p():d(e)}),g.error(function(e,t,n){p()})},s.apply(null,arguments)}o.register("AbTestingEventCollectorCaller").asCtor(ps).dependencies("Consts, EventCollectorEventSender, Logger");function ps(e,t,n){var r=this;r.postEvent=i;function i(r){try{var i={type:e.EVENT_SENDER_EVENT_APPS.AbTesting,reason:o(r)};t.postEvent(e.EVENT_SENDER_EVENT_TYPES.Draw,i)}catch(a){n.error(a)}}function o(t){var n=t?e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.ActivationRule:e.EVENT_SENDER_AB_TESTING_DRAW_REASONS.Draw;return n}}o.register("UserAgent").asFunction(function(e){return e.navigator.userAgent}).asProto(),o.register("HostData").asFunction(gs).dependencies("win");function gs(t){var n=o.create("UserAgent",t),r=t.document,i="Firefox",a="Edge",s=function(e){var t=n.substring(e).indexOf(".");return n.substring(e,e+t)},u=function(){var e,t,o,u;if((u=n.indexOf("MSIE"))!=-1)e="IE",t=s(u+5);else if(n.indexOf("Trident")!=-1&&(u=n.indexOf("rv:"))!=-1)e="IE",t=s(u+3);else if((u=n.indexOf("Edge/"))!=-1)e=a,t=s(u+5);else if((u=n.indexOf("Chrome"))!=-1)e="Chrome",t=n.substring(u+7,n.lastIndexOf(" "));else if(/Firefox\/(\S+)/.test(n))e=i,t=RegExp.$1;else if(u=n.indexOf("Safari")!=-1)e="Safari",/Version\/(\S+)/.test(n)&&(t=RegExp.$1);else if((u=n.indexOf("Opera"))!=-1)if(e="Opera",/Version\/(\S+)/.test(n))t=RegExp.$1;else{var l=Math.max(n.lastIndexOf(" "),n.lastIndexOf("/"));t=n.substring(l+1)}else(o=n.lastIndexOf(" ")+1)<(u=n.lastIndexOf("/"))&&(e=n.substring(o,u),t=n.substring(u+1));return{name:e,version:t,string:e+" "+t,documentMode:r.documentMode}},l=function(e,t,n){switch(e){case"lt":return t<n;case"lte":return t<=n;case"gt":return t>n;case"gte":return t>=n;default:return t==n}},c=function(e,t){var n=u();if("IE"!=n.name)return!1;if(!e)return!0;return l(t,n.version,e)},d=function(e,t){if("android"!=E().name.toLowerCase())return!1;if(!e)return!0;var n=p();if(!n)return!1;return l(t,n,e)};function p(){var e=n.match(/android\s([0-9\.]*)/i);return!!e&&e[1]}var g=function(e,t,n){var i=u();if("IE"!=i.name)return!1;if(!e)return!0;var o=n&&n.ownerDocument||r,a=o.documentMode;return a||("BackCompat"==o.compatMode?a=5:"7"==i.version&&(a=7)),l(t,a,e)},f=function(e,t,n,r){return r?c(e,t)&&g(e,t,n):c(e,t)||g(e,t,n)},h=function(e){return f(e,"lt")},m=function(e){return g(5,null,e)},v=function(){return u().name==i};function S(){return u().name==a}var y=[{n:"Android",os:"Android"},{n:"Linux",os:"Linux"},{n:"X11",os:"UNIX"},{n:"iPad",os:"iOS"},{n:"iPod",os:"iOS"},{n:"iPhone",os:"iOS"},{n:"Mac",os:"MacOS"},{n:"Win",os:"Windows"}],E=function(){for(var e,t=0;t<y.length;t++){var r=y[t].n;if(n.indexOf(r)!=-1){e=y[t].os;break}}return e||(e="Unknown"),{name:e}},T=function(){try{var n=e(t);return{height:n.height(),width:n.width()}}catch(r){return null}};function C(){return t.location.href}function b(){var e=[t.location.protocol,"//",t.location.host,t.location.pathname].join("");return e}function I(){return r.title}function w(){return/android|ipad|android.+mobile|blackberry|iemobile|ip(hone|od)|phone|symbian|windows (ce|phone)/i.test(n||t.navigator.vendor||t.opera)}return{browser:u(),getUrl:C,getUrlWithoutQueryString:b,getPageTitle:I,os:E(),isIE:f,isIEOlderThan:h,isIEDoc:g,isIEBrowser:c,isQuirksMode:m,getWinSize:T,isMobile:w,isAndroid:d,isFirefox:v(),isEdge:S}}function fs(){var e,t,n,r,i,a,s,u,l,c=this,d="ABTesting",p={};function g(c){t=c.deployablesGoalManager,r=c.experiments,e=c.lib,a=c.getEndUserGuid,i=o.get("Logger").wrapCustomerLog(d),u=c.commonEvents,n=new ba({lib:e,serverAddress:c.serverAddress,getPermutationId:c.getPermutationId,getEndUserGuid:c.getEndUserGuid,getAuditSource:c.getAuditSource,storageManager:c.storageManager,userGuidContainer:c.userGuidContainer}),s=o.get("Consts"),l=o.get("ArrayUtils")}var f=function(e){var t=e.GoalType==s.DEPLOYABLE_TYPE.AbExperiment,r=m(e.Id),o=t||r;if(!o)return;var u=a(),c=n.syncRetrieveCompletedGoals(u),d=l.inArray(e.Id,c)==-1;if(!d)return;i("Experiment Goal was completed! Goal ID:"+e.Id+", Goal Name : "+e.Name,1),h(u,e);var p=t;p||v(e)};function h(e,t){n.updateGoalCompleted(e,t.Id)}function m(e){return void 0!=p[e]}function v(e){var t=p[e.Id],n={goal:{Id:e.Id,GoalType:s.DEPLOYABLE_TYPE.AbExperiment,RelatedObjectId:t,Name:e.Name},identifier:e.identifier,interactionGuid:e.interactionGuid};u.raiseEvent(s.EVENTS.AbExperimentLinkedGoalReached,n)}function S(e,t){for(var n=[],r=[],i=0;i<e.Goals.length;i++){var o=e.Goals[i];l.inArray(o.Id,t)>-1?n.push(o):r.push(o)}e.Goals=r,e.CompletedGoals=n}function y(e){for(var t=0;t<r.length;t++){var n=r[t];S(n,e)}}function E(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.Goals.length;i++){var o=r.Goals[i];t.push(o.Id),1==o.IsLinkedGoal&&(p[o.Id]=r.Id)}}var T=!1;this.startWatching=function(e){if(T)return;T=!0;var s=[];if(E(r,s),0==s.length)return i("No AbTesting goals were defined"),void(e&&e());t.onGoalCompleted(f);var l=a(),c=n.syncRetrieveCompletedGoals(l);c?(i("Completed goals data exists. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(c,e)):(i("No completed goals data exists locally. Fetching from server"),n.asyncRetrieveCompletedGoals(l,s,function(t){i("Completed goals data recieved. Starting goals watch"),u.raiseEvent("ABTestingGoalsFetched"),C(t,e)},function(){i("WalkMe ABTesting - Error when fetching end-user goals. Removing WalkMe",1),o.get("LibDestroyer").removeWalkMe("AbTesting - Cannot fetch EndUser Goals",{sendLog:!0})}))},c.isGoalReached=function(e){for(var t=n.syncRetrieveCompletedGoals(a()),r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};function C(e,n){y(e);for(var o=0;o<r.length;o++){var a=r[o];i("Start watching Experiment goals. ExperimentID : "+a.Id,2),t.startWatchingDeployable(a,void 0)}n&&n()}g.apply(null,arguments)}o.register("PopupNotificationsService").asCtor(hs).dependencies("SiteConfigManager, OldBalloonNotifier, WalkthrusModule, PopupBalloonDisplayer, LibDestroyer, SettingsValuesRetriever, BBCodeParser");function hs(t,n,r,i,o,a,s){var u=this;u.showFlowFailedToStartPopup=l,u.showWalkthruFailedToStartPopup=c;function l(e){var n=t.get(),r=n.TutorialCantPlayText;d(n,r,!0)}function c(e){var t=r.getSiteConfigByTutorialId(e.Id),n=a.getSettingsValue(e.Settings,"cantPlayAlert",t.TutorialCantPlayText);d(t,n,!1)}function d(e,t,r){
var i=e.BalloonSettings,o=r||g(i),a=p(i,t,o,!0);o?f(a):n.showPopupOldBalloon(e,i,tutorial,a)}function p(e,t,n,r){var i=n?"14px":"21px";return t=s.parse(t),"<h1 class='walkme-custom-first-step-not-available-text mt-custom-first-step-not-available-text CUSTOM-TUTORIAL-ID' style='CSS-RESET font-family: "+e.Font+";color: "+e.HeaderColor+"; font-size: "+i+"; border: none; margin: 10px; word-wrap: break-word;'>"+t+"</h1>"}function g(e){return"v3"==e.BalloonVersion||"vm1"==e.BalloonVersion}function f(t){var n={popupStepButtons:[{id:0,name:"OK",action:7}]},r=e("<div></div>");r.append(t);var a=!0;i.showSpecialPopupBalloon({htmlContent:r},446,n,function(e){mtjQuery(".walkme-action-ok",e).click(function(){o.releaseBalloons()})},a)}}o.register("OldBalloonNotifier").asCtor(ms).dependencies("BalloonUtils, Consts, CommonUtils, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder, TopContainerProvider");function ms(e,t,n,r,i,o,a,s,u){var l=this;l.showPopupOldBalloon=h,l.closePopup=f;var c,d,p="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function g(){}function f(e){d&&d.clear(),r.removeOverlay(),r.destroyDivWithIframes(c,e),c=null}function h(e,t,n,r){r+="<div style='float: right'>",r+=v(e,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",t),r+="</div>",m(e,t,"first-step-not-available",r,420,n.Id,S)}function m(n,a,l,g,f,h,m){var v='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+l+" mt-custom-popup-"+l+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+f+'px">'+g+"</div>";v=v.replace(/CSS-RESET/g,p),v=v.replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+h);var S=u.getTopContainer();S.append(v),c=mtjQuery("#walkme-popup-body",S),c.css({position:"fixed","z-index":t.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),e.setStyleForBalloon(c,a,!1);var y=0;mtjQuery.each(mtjQuery("[width], [style*=width]",c),function(e,t){mtjQuery(t).width()>y&&(y=mtjQuery(t).width())}),c.width()<y&&c.css("width",y+"px"),o.centerElementInPage(c,!1),d=i.playSetInterval(function(){o.centerElementInPage(c,!0)},1e3),host.isQuirksMode()||framesetsUtils.shouldHandlePageAsFramesets()||r.displayOverlay(2147483630,!0),c.fadeIn("slow"),s.addButtonEventsToBalloon(c,{objectId:h,type:t.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),m&&m(c)}function v(t,n,r,i){i=e.fixConfiguration(i),i.ButtonBorderColor=i.ButtonBorderColor||"#6c84a6";var o="rtl"==t.Direction?"right":"left";e.fixGradientColorsInConfiguration(i,"ButtonBgColor"),e.fixGradientColorsInConfiguration(i,"ButtonBgColor2");var s=i.ButtonBgColor,u=i.ButtonBgColor2,l=i.ButtonShadowWidth,c=i.BalloonButtonRadius,d=s!=u,g="CSS-RESET "+(d?"background:-moz-linear-gradient(top, "+s+", "+u+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+s+"), color-stop(100%,"+u+"));background:-webkit-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:-o-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:-ms-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:linear-gradient(to bottom, "+s+" 0%,"+u+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+s+'", endColorstr="'+u+'",GradientType=0 );':"background-color:"+s+";")+"border: 1px solid "+i.ButtonBorderColor+";color:"+i.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+o+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+c+"px;-webkit-border-radius:"+c+"px;border-radius:"+c+"px;";return s!=u&&host.isIE()&&(g+="border-radius: 0px;"),d&&Ir.isGradientUsingFilter(g)&&(g+="background: url("+a.get()+"/player/resources/images/spacer.gif) repeat;"),g=g.replace(/CSS-RESET/g,p),"<button class='"+n+"' type='button' style='"+g+"'>"+r+"</button>"}function S(e){mtjQuery(".walkme-custom-first-step-not-available-ok-button",e).click(function(){f()})}g()}o.register("ClickAuditEventSender").asCtor(vs).dependencies("DeployablesManagerFactory, EventSender,Logger, ReportInitiatorMapper");function vs(e,t,n,r){var i=this;i.send=a;function o(){}function a(e){try{var r=t.getEventAppByDeployable(e.auditType),i={type:e.initiatorType,objectId:e.initiatorId},o=u(r,e.auditType,e.objectId,i,e.additionalParams),a=s(r);t.postEvent(a,o)}catch(l){n.error(l)}}function s(e){switch(e){case t.EVENT_APPS.Launcher:return t.EVENT_TYPES.Click;default:return t.EVENT_TYPES.Play}}function u(n,r,i,o,a){var s,u,p=e.get(r),g={};if(p){var f=p.getById(i);f&&(s=f.Name,g=p.getActionData(f),u=p.isWithAction(f))}switch(n){case t.EVENT_APPS.Launcher:return l(n,i,s,g);case t.EVENT_APPS.Content:return d(n,i,s,o,u,a);default:return c(n,i,s,o,u)}}function l(e,t,n,r){return{type:e,oId:t,oName:n,aType:r.Type,aAppType:r.aAppType,aoId:r.ItemId,aoName:r.Name,pId:"-1"}}function c(e,t,n,i,o){return{type:e,oId:t,oName:n,pInit:r.map(i),pId:"-1",oIsWithAction:o}}function d(e,t,r,i,o,a){var s=c(e,t,r,i,o,a);return a&&null!=a.contentType?s.oType=a.contentType:n.error(null,"No contentType was not provided for resouce params"),s}o.apply(null,arguments)}o.register("HtmlElementsDataProvider").asCtor(Ss).dependencies("Consts, inArrayFunc");function Ss(t,n){var r=this;r.isInput=a,r.isSelectInput=s;var i;function o(){i=["input","textarea","select"]}function a(e){return u(e,i)}function s(e){return u(e,["select"])}function u(t,r){var i=e(t),o=i.prop("nodeName");return o&&n(o.toLowerCase(),r)!=-1}o.apply(null,arguments)}function ys(e,t,n,r,i){var o=this;function a(e,t){var n=r.timing.map,i=n[t]-n[e];return i}o.run=function(){if(!n.isFeatureEnabled("addLoadingTime"))return;var r=a("snippetStartInit","walkmeReadyEnd");t.raiseEvent(e.EVENTS.WalkMeTotalLoadingTime,{totalLoadTime:r});var o="WalkMe total loading time was "+r+" ms";i.customerLog(o,3,e.EVENTS.WalkMeTotalLoadingTime)}}o.register("LoadingTimeInformer").asCtor(ys).dependencies("Consts, CommonEvents, FeaturesManager, WmInternals, Logger"),o.register("FindElementDebugFlags").asInstance({color:!1,print_scores:!1,print_find:!1}),o.register("FindElementDebugger").asCtor(Es).dependencies("FindElementDebugFlags, ArrayUtils, Logger, Consts");function Es(e,t,n,r){}var Ts=function(){function e(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n}var t;!function(e){function t(r,i){i=i||[],r=r||document;for(var o=e.$("iframe,frame",r).toArray(),a=0;a<o.length;a++){var s=n(e.$(o[a]))[0];i.push(s),s&&(i=t(s,i))}return i}function n(t){if(void 0!=t){if(t=t[0],void 0==t)return e.$();var n;try{n=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:[],n=e.$(n)}catch(r){return Ir.handleCrossDomainError(r),e.$()}return n}}e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t},e.Va=function(e){return e=e.tagName,e.toUpperCase&&(e=e.toUpperCase()),e},e.ca=function(e,t){for(var n=e[0].parentNode,r=t&&t[0]&&t[0].parentNode,i=[];n&&1==n.nodeType&&n!=r;n=n.parentNode)i.push(n);return i},e.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]==t)return n;return-1},e.reduce=function(e,t,n){for(var r=0;r<e.length;r++)n=t(n,e[r]);return n},e.Ub=function(e){var t={};e=e.prop("attributes");for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}return t},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.filter=function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.qa=function(t,n,r){t=e.filter(t.split(n),function(t){return e.$.trim(t)}),t=e.map(t,function(e){return e.split(r)}),n={};for(var i=0;i<t.length;i++){var o=t[i],a=e.$.trim(o[0]),s="";o[1]&&(s=e.$.trim(o[1])),n[a]=s}return n};var r=function(){function e(){this.start=this.now()}return e.prototype.now=function(){return(new Date).getTime()},e.prototype.C=function(){return this.now()-this.start},e}();e.Ob=r,e.B=function(){return new r},e.Vb=function(){for(var e=0;e<arguments.length;e++);for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(new RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},e.Xb=function(e){return void 0!=e&&0<e.length},e.getAllElements=function(n,r){n=n||document,r=r||"*";var i=t(n,[n]);return e.$(r,i)},e.Wb=t,e.r=n,e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.min=function(e,t){var n=null;if(0<e.length)for(var r=t(e[0]),n=e[0],i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}return n},e.ha=function(){return(new Date).getTime()%1e9}}(t||(t={}));var n,r=function(){function e(e,t){this.wb=t,this.hasData=!1,this.context=e}return e.prototype.get=function(){return this.hasData||(this.data=this.wb.apply(this.context),this.hasData=!0),this.data},e.prototype.clear=function(){this.hasData=!1},e}(),i=function(){function e(){}return e.prototype.u=function(e,t){return f.J(e,t,f.l)},e.prototype.N=function(e){return new a.ScoredElement(e,this.c)},e.prototype.n=function(e){this.c=e},e.prototype.L=function(e,t){return t(e)},e.prototype.Db=function(e){e.D=this.c&&e&&this.c.ignoreWalkmeElementsSelector===e.ignoreWalkmeElementsSelector?this.c.D:e&&e.ignoreWalkmeElementsSelector?t.getAllElements(document,e.ignoreWalkmeElementsSelector).toArray():[]},e}(),o=function(n){function r(){n.apply(this,arguments),this.R={},this.A=[],this.ea={},this.h={}}return e(r,n),r.prototype.n=function(e){this.Na(e),n.prototype.n.call(this,e)},r.prototype.ob=function(e,t){return(e&&e[0]||null)===(t&&t[0]||null)},r.prototype.Na=function(e){if(this.h={},0<this.A.length){var t=!1;this.c&&(t=!this.ob(this.c.m,e.m));for(var n=0;n<this.A.length;n++){var r=this.R[this.A[n]];r.totalScore=0,r.details=[],r.ba=!1,r.n(e,t)}}},r.prototype.t=function(e){return e&&e[0]&&e[0][r.U]||null},r.prototype.w=function(e,t){e&&e[0]&&(e[0][r.U]=t)},r.prototype.v=function(){return++r.Q},r.prototype.N=function(e){var t=null,r=this.t(e);return void 0!==r&&(t=this.R[r]),t||(t=n.prototype.N.call(this,e),r=this.v(),this.w(e,r),this.R[r]=t,this.A.push(r)),t},r.prototype.u=function(e,t){var r,i=f.Kb(e);return this.h.hasOwnProperty(i)||(r=n.prototype.u.call(this,e,t),this.h[i]=r),this.h[i]},r.prototype.eb=function(e){var t=this.c.m;if(t&&0<t.length){var n=this.t(t);n||(n=this.v(),this.w(t,n)),n&&(e+="__"+n)}return e},r.prototype.L=function(e,t){var r=this.eb(e),i=this.ea[r]||null;return i||(i=n.prototype.L.call(this,e,t),this.ea[r]=i),i},r.Q=t.ha(),r.U="__WM_SUSPECT_KEY__",r}(i);!function(e){function n(){for(var e=0;e<arguments.length;e++);return a.$.apply(a.$,arguments)}function r(e){if(1==e.count())return e;var t=f.O(e,1,i,!0);return-1==t?e:e.slice(t+1)}function i(e){return-1!=t.inArray(e,s)}function o(r,a,s,u,l,c){var d=f.O(r,0,i,!1);if(0>d)return s;var p=r.slice(0,d+1);if(r=r.slice(d+1),d=n(e.Jb,l||s),0==d.length)return null;return d=1==d.length?d[0]:t.min(d,function(e){return e=f.La(n(e),a,n(s),u),f.J(e,p,f.l).o()}),(c||s&&0<s.length&&l&&0<l.length)&&n(d).data("iframe",c||s),o(r,a,n(d),u,t.r(n(d)))}var s=["IFRAME","FRAME"];e.Jb=s.join(":mt_visible,")+":mt_visible",e.ga=s.join(","),e.getXpathUpToIframe=r,e.vb=function(a){var s,u=a.a,l=f.Ja(u.customContext,u.h,u.D),c=f.Fb(u.xpathArrayOriginal,l),d=u.xpathArrayOriginal.slice(c);s=u.h;var p=u.customContext,g=u.D,h=u.ignoreWalkmeElementsSelector;if(1==d.count())s=p;else{var m=f.O(d,1,i,!0);if(-1==m)s=p;else{var v=t.r(p),S=(v=v&&0<v.length?v:null)?p:p?p.data("iframe"):null,m=d.slice(0,m+1);(h=f.da(m,v||p,S,h))&&h.is(":mt_visible")||(h=null),h||(h=o(d,s,p,g,v,S)),s=h}}g=(p=(s=s||u.customContext)&&s.is(e.ga))?t.r(s):s&&0<s.length?s:void 0,s={context:s,nb:p,contents:g},u.m=s.contents,a.setSearchOptions(a.f&-257),l&&l.count()&&u.m==u.customContext&&(0>=c&&a.setSearchOptions(256|a.f),u.xpathArrayToIframe=f.removeHtmlAndBodyFromXpathArray(r(d)));var y;return s&&(y=s.nb?s.context:n(s.context).data("iframe")),y}}(n||(n={}));var a;!function(e){function a(){}e.$,e.p,e.setJQuery=function(n){e.$=n,e.p=n,t.setJQuery(n),l.setJQuery(n)},e.setLogFunc=function(e){a=e};var g=function(){function e(e,n){var i=this;this.totalScore=0,this.width=new r(this,function(){return i.element.width()}),this.height=new r(this,function(){return i.element.height()}),this.parents=new r(this,function(){return t.ca(i.element,i.c.m)}),this.Ga=new r(this,function(){return t.ca(i.element)}),this.text=new r(this,function(){return p.extractFirstOccuringText(i.element)}),this.F=function(e){return this.G.hasOwnProperty(e)||(this.G[e]=this.element.attr(e)),this.G[e]},this.xpath=new r(this,function(){return f.Ma(i.element,i.parents.get(),i.c.h,i.c.D)}),this.element=e,this.details=[],this.G={},this.n(n)}return e.prototype.n=function(e,t){this.c&&t&&(this.parents.clear(),this.xpath.clear()),this.c=e},e}();e.ScoredElement=g;var h=function(){return function(){this.elements=[],this.losers=void 0}}();e.RecognitionResult=h,g=function(){function e(e){this.attributes={},this.complexAttributes={},this.Y("style",";",":"),this.Y("class"," ",null),e&&(this.h=new f.Da)}return e.prototype.Y=function(e,n,i){var o=this;this.complexAttributes[e]=new r(this,function(){return t.qa(o.attributes[e],n,i)})},e}(),e.ElementDescription=g,function(e){e[e.Efficient=0]="Efficient",e[e.Verbouse=1]="Verbouse",e[e.Fast=2]="Fast",e[e.VerbouseDebug=3]="VerbouseDebug"}(e.sa||(e.sa={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low"}(e.AlgorithmSensitivity||(e.AlgorithmSensitivity={})),function(e){e[e.IGNORE_ALL=4294967295]="IGNORE_ALL",e[e.IGNORE_NOTHING=0]="IGNORE_NOTHING",e[e.IGNORE_ID=1]="IGNORE_ID",e[e.IGNORE_POSITION=2]="IGNORE_POSITION",e[e.IGNORE_NAME=4]="IGNORE_NAME",e[e.IGNORE_TEXT=8]="IGNORE_TEXT",e[e.IDENTIFY_TEXT=32]="IDENTIFY_TEXT",e[e.IDENTIFY_ID_AND_NAME=64]="IDENTIFY_ID_AND_NAME",e[e.IDENTIFY_WALKME_ID=128]="IDENTIFY_WALKME_ID",e[e.IGNORE_XPATH=256]="IGNORE_XPATH",e[e.IGNORE_SHAPE_PROPORTION=512]="IGNORE_SHAPE_PROPORTION",e[e.IGNORE_CLASS=1024]="IGNORE_CLASS",e[e.IGNORE_STYLE=2048]="IGNORE_STYLE",e[e.IGNORE_HREF=4096]="IGNORE_HREF",e[e.USE_AUTO_SELECTOR=8192]="USE_AUTO_SELECTOR"}(e.SearchOptions||(e.SearchOptions={}));var m=function(){function e(e){this.list=[],this.f=e}return e.prototype.Ha=function(e){return this.list.push(e),this},e.prototype.i=function(e,t,n){var r=!1;return void 0!==n&&(r=0<(this.f&n)),r||this.list.push(new c.Ca(e,t)),this},e.prototype.sort=function(){return this.list.sort(function(e,t){return t.weight-e.weight}),this},e}(),g=function(){function r(e,t){this.f=0,this.Z=1,this.mode=e,this.g=t?new o:new i}return r.prototype.Cb=function(e){this.a=e},r.prototype.setSearchOptions=function(e){this.f=e},r.prototype.setAlgorithmSensitivity=function(e){this.Z=e},r.prototype.recognize=function(e){var r,i=new h;3==this.mode&&(i.debug={minimumScore:this.M(),screeners:null,measurements:[],eliminationDetails:[]}),this.Cb(e),this.g.Db(e);var o=n.vb(this);return this.g.n(e),i.debug&&(r=t.B()),e=this.Ta(),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Find Suspects",timeTaken:r}),r=t.B()),e=this.Bb(e,i),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Screen Suspects",timeTaken:r}),r=t.B()),e=this.xb(e),i.debug&&(r=r.C(),i.debug.measurements.push({name:"Score Suspects",timeTaken:r})),i.elements=this.Sa(e),i.losers=this.Ra(i,e),i.context=o,i},r.prototype.Ta=function(){var t,n=this;if(this.a.preDefinedSuspects&&this.a.preDefinedSuspects[0])return this.a.preDefinedSuspects;return t=this.a.customSelector?this.a.customSelector:this.e(8192)&&this.a.autoQuery?this.a.autoQuery:this.a.elementType.replace(":","\\:"),this.a.visibilityFilter&&(t+=this.a.visibilityFilter),this.a.ignoreWalkmeElementsSelector&&(t+=":not("+this.a.ignoreWalkmeElementsSelector+")"),a("Finding suspects using : "+t),this.g.L(t,function(t){return e.$(t,n.a.m)})},r.prototype.Pa=function(t){for(var n=new u(t.length),r=0;r<t.length;r++){var i=e.$(t[r]),i=this.g.N(i);n.push(i)}return n},r.prototype.Bb=function(e,t){var n=this.Pa(e),r=this.cb(e.length);t.debug&&(t.debug.screeners=r);for(var i=new u(e.length),o=0;o<n.count;o++){var a=n.getItem(o),s=this.Ab(a,r,t),l=1&s;2&s||!l||i.push(a)}return i},r.prototype.fb=function(){var e,t={32:function(){return[new d.V(1,2)]},64:function(){return[new d.q("id",1,0),new d.q("name",1,0)]},128:function(){return[new d.q("data-walkmeid",1,0)]}};for(e in t)if(this.e(e))return t[e]();return null},r.prototype.Ya=function(e){var t=[],n=new d.q("src",1,0);return t.push(n),n=new d.V(1,0),!this.e(8)&&t.push(n),void 0!=this.a.attributes.id&&(n=new d.va(!this.e(1)&&0<this.a.attributes.id.length,(!this.e(161))),t.push(n)),n=new d.q("name",1,0),!this.e(4)&&t.push(n),n=new d.Fa(1,0,this.g),2e3>e&&!this.e(256)&&t.push(n),n=new d.ua(this.a,1,0),2e3<=e&&!this.e(256)&&t.push(n),t},r.prototype.cb=function(e){var t=this.fb();return t||(t=this.Ya(e)),t},r.prototype.Ab=function(e,t,n){for(var r=0,i=0;i<t.length;i++){var o=t[i].screen(e,this.a),r=r|o;if(2==o){n.debug&&n.debug.eliminationDetails.push({element:e.element,screenerName:t[i].name});break}}return r},r.prototype.xb=function(e){var n=this.bb(),r=t.reduce(n,function(e,t){return e+t.weight},0),i=e,o=new u(e.count);e=new u(e.count);for(var a=0,s=this.M(),l=0;l<n.length&&!(2==this.mode&&1==i.count&&a>s);l++){for(var c=n[l],d=0;d<i.count;d++){var p=i.getItem(d);if(r+p.totalScore<a&&0==this.mode?(p.ba=!0,o.push(p)):e.push(p),!p.ba||0!=this.mode){var g=t.B(),f=c.d(p,this.a),g=g.C();p.totalScore+=f,p.details.push({scorerName:c.name,scorerWeight:c.weight,relativeScore:f/c.weight,absoluteScore:f,timeTaken:g}),p.totalScore>a&&(a=p.totalScore)}}r-=c.weight,r=Math.max(r,0),c=i,i=e,e=c,e.clear()}return i.$a()},r.prototype.e=function(e){return!!(this.f&e)},r.prototype.bb=function(){var e=new m(this.f);return e.Ha(new s.ya(this.a,this.f)).i(new c.Ba,3,8).i(new c.Ea(this.g),1,256).i(new c.Aa,.7,512).i(new c.T("class"," ",null),.7,1024).i(new c.T("style",";",":"),.5,2048).i(new c.ta("href","#"),3,4096).sort().i(new l.xa,1,2),e.list},r.prototype.Sa=function(e){for(var t=0,n=0;n<e.length;n++)var r=e[n].totalScore,t=r<=t?t:r;if(r=[],t>this.M())for(n=0;n<e.length;n++)e[n].totalScore==t&&r.push(e[n]);return r},r.prototype.qb=function(){return 1==this.mode||3==this.mode},r.prototype.Ra=function(e,t){if(this.qb()){var n=[];if(0<e.elements.length)for(var r=e.elements[0].totalScore,i=0;i<t.length;i++)t[i].totalScore<r&&n.push(t[i]);else n=t;return n}},r.prototype.M=function(){var e={2:0,1:1.45,0:3},t=e[this.Z];return void 0==t&&(t=e[1]),t},r}();e.ElementRecognizerSession=g}(a||(a={}));var s,u=function(){function e(e){this.data=Array(e),this.size=e,this.count=0}return e.prototype.getItem=function(e){if(0>e||e>=this.count)throw"Out of range exception";return this.data[e]},e.prototype.clear=function(){this.count=0},e.prototype.push=function(e){if(this.count==this.size)throw"FastArray exceeded it's limits";this.data[this.count]=e,this.count++},e.prototype.$a=function(){return this.data.splice(0,this.count)},e}();!function(e){var t={value:10,src:3,title:3,colspan:.3,cellpadding:.3,cellspacing:.3,border:.3,dir:.3,width:.3,placeholder:3,"data-walkmeid":1e3,id:10,name:8,alt:1},n={id:1,name:4,title:8},r=function(){function e(e,t){this.S=[],this.name="Multiple attributes",this.options=t,this.description=e,this.weight=this.Ka()}return e.prototype.Ka=function(){var e,t=0;for(e in this.description.attributes)this.description.attributes.hasOwnProperty(e)&&this.Eb(e)&&this.P(this.description.attributes[e])&&(t+=this.K(e),this.S.push(e));return t},e.prototype.Eb=function(e){var t=0!==this.K(e);return!(n.hasOwnProperty(e)&&n[e]&this.options)&&t},e.prototype.d=function(e,t){for(var n=0,r=0;r<this.S.length;r++){var i=this.S[r],o=t.attributes[i],a=e.F(i);this.P(a)&&this.P(o)&&a==o&&(n+=this.K(i))}return n},e.prototype.P=function(e){return void 0!=e&&null!=e&&""!=e},e.prototype.K=function(e){return t.hasOwnProperty(e)?t[e]:0},e}();e.ya=r}(s||(s={}));var l;!function(e){e.$,e.p,e.setJQuery=function(t){e.$=t,e.p=t};var t=function(){function t(){this.name="PositionScorer"}return t.prototype.d=function(e,t){return this.yb(e,t)},t.prototype.yb=function(e,t){var n=t.centeredElementWidth,r=0;if(n){var r=t.relativeLeft,i=this.ab(e),r=Math.abs(r-i),n=n/5;if(r>(30>n?30:n))return 0;n=1-r/20,r=t.absY,i=e.element.offset().top,r=1-Math.abs(r-i)/20,i=.3,.9<n&&(i=.9),r=n*(1-i)+r*i,r=0>r?0:r}return r},t.prototype.ab=function(e){var t=this.Ua(e),t=t?t.offset().left:0;return e.element.offset().left-t},t.prototype.Ua=function(t){t=t.Ga.get();for(var n=null,r=t.length-1;0<=r;r--)try{if(this.jb(t[r])){var i=e.$(t[r]),o=e.$(window).width(),a=i.width(),s=i.offset().left,u=o-a;if(0<u&&u/2==s){n=i;break}if(0>u&&u==s){n=i;break}if(this.lb(i)){n=e.$(i);break}}}catch(l){}return n},t.prototype.jb=function(t){var n=e.$(t),r=n.data("mt_isElementFixedWidth");if(1==r)return!0;if(0==r)return!1;return t=this.ib(t),n.data("mt_isElementFixedWidth",t),t},t.prototype.lb=function(t){var n=e.$(t),r=n.data("mt_isElementMarginAuto");if(1==r)return!0;if(0==r)return!1;return t=this.kb(t),n.data("mt_isElementMarginAuto",t),t},t.prototype.ja=function(t,n){for(var r=!1,i=0;i<n.length&&(r=n[i],!(r=e.$(t).is(e.$(r))));i++);return r},t.prototype.ib=function(e){return!!this.ka(e.style)||this.ja(e,this.Xa())},t.prototype.Gb=function(e){return 0==e.indexOf("0")},t.prototype.Qa=function(e){return 4<=e.length&&e.lastIndexOf("auto")+4==e.length},t.prototype.la=function(t){if(t){var n=e.$.trim(t.margin),r=e.$.trim(t.marginLeft);if(t=e.$.trim(t.marginRight),(n=this.Gb(n)&&this.Qa(n))||"auto"==r&&"auto"==t)return!0}return!1},t.prototype.kb=function(e){return!!this.la(e.style)||this.ja(e,this.Za())},t.prototype.Za=function(){return void 0==this.H&&(this.H=[],this.fa(this.pa)),this.H},t.prototype.pa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.pa(n.styleSheet):this.la(n.style)&&this.H.push(n.selectorText)}}catch(r){}},t.prototype.fa=function(e){for(var t=document.styleSheets,n=0;n<t.length;n++)e.call(this,t[n])},t.prototype.oa=function(e){try{var t=e.cssRules||e.rules;for(e=0;e<t.length;e++){var n=t[e];n.type&&n.type==window.CSSRule.IMPORT_RULE?this.oa(n.styleSheet):this.ka(n.style)&&this.I.push(n.selectorText)}}catch(r){}},t.prototype.Xa=function(){return void 0==this.I&&(this.I=[],this.fa(this.oa)),this.I},t.prototype.ka=function(e){if(e=e.width){for(var t="",n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n]);if(t&&700<parseInt(t)&&(-1!=e.indexOf("p")||-1!=e.indexOf("e")||-1!=e.indexOf("m")||-1!=e.indexOf("i")))return!0}},t}();e.xa=t}(l||(l={}));var c;!function(n){var r=function(){function e(e,t){this.zb=e,this.weight=t,this.name=e.name}return e.prototype.d=function(e,t){var n=this.zb.d(e,t);return this.weight*n},e}();n.Ca=r,r=function(){function e(e){this.attributeName=e,this.name="Attribute Scorer : "+e}return e.prototype.d=function(e,t){var n=e.element.attr(this.attributeName),r=t.attributes[this.attributeName];return n&&r&&n.toLowerCase()===r.toLowerCase()?1:0},e}(),n.Lb=r,r=function(t){function n(e,n){t.call(this,e),this.Ib=n}return e(n,t),n.prototype.d=function(e,n){return n.attributes[this.attributeName]==this.Ib?0:t.prototype.d.call(this,e,n)},n}(r),n.ta=r,r=function(){function e(e){this.name="XpathScorer",this.g=e}return e.prototype.d=function(e,t){var n=e.xpath.get(),n=this.g.u(n,t.xpathArrayToIframe);if(n.b>f.l)return 0;return n=1-.1*(n.b+n.k/10),0>n?0:n},e}(),n.Ea=r,r=function(){function e(){this.name="ShapeProportionScorer"}return e.prototype.d=function(e,t){if(!this.mb(e.element))return 0;var n=e.width.get(),r=e.height.get();return 0!=n*r?(n=this.ia(n,t.width)/2+this.ia(r,t.height)/2,.6<=n?n:0):0},e.prototype.ia=function(e,t){var n=e/t;return 1<n&&(n=1/n),Math.pow(n,4)},e.prototype.mb=function(n){return n=n.prop("tagName"),-1!==t.indexOf(e.Hb,n)},e.Hb="DIV TABLE TR TD TBODY TH".split(" "),e}(),n.Aa=r,r=function(){function e(e,t,n){this.name="ComplexAttributeScorer",this.name=this.name+" : "+e,this.attributeName=e,this.ub=t,this.gb=n}return e.prototype.d=function(e,n){if(!n.attributes[this.attributeName]||!e.element.attr(this.attributeName))return 0;var r=n.complexAttributes[this.attributeName].get(),i=t.qa(e.element.attr(this.attributeName),this.ub,this.gb);return 1==this.Oa(r,i)?1:0},e.prototype.Oa=function(e,t){var n,r=0,i=0;for(n in e)e.hasOwnProperty(n)&&(i++,e[n]==t[n]&&r++);return n=0,0<i&&(n=r/i),n},e}(),n.T=r,r=function(){function e(){this.name="TextScorer"}return e.prototype.d=function(e,t){return t.text&&e.text.get()==t.text?1:0},e}(),n.Ba=r}(c||(c={}));var d;!function(t){!function(e){e[e.Indifferent=0]="Indifferent",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"}(t.za||(t.za={}));var n=function(){function e(e,t){this.ma=e,this.tb=t,this.isEqual=e===t}return e.prototype.j=function(){throw"childScreen must be overriden by subclass"},e.prototype.screen=function(e,t){return this.isEqual?this.ma:this.j(e,t)?this.ma:this.tb},e}();t.Nb=n;var i=function(){function e(){}return e.prototype.na=function(){throw"rejectFn must be overriden by subclass"},e.prototype.X=function(){throw"acceptFn must be overriden by subclass"},e.prototype.screen=function(e,t){return this.na(e,t)?2:this.X(e,t)?1:0},e}();t.Mb=i,i=function(t){function n(e,n){t.call(this),this.name="IdScreen",this.hb=e,this.pb=n,this.aa=new o("id",0,0)}return e(n,t),n.prototype.na=function(e,t){if(this.pb){var n=e.F("id");return!(!n||30<=n.length)&&!this.aa.j(e,t)}},n.prototype.X=function(e,t){if(this.hb)return this.aa.j(e,t)},n}(i),t.va=i;var o=function(t){function n(e,n,r){t.call(this,n,r),this.attrName=e,this.name="AttributeScreen["+this.attrName+"]"}return e(n,t),n.prototype.j=function(e,t){var n=e.F(this.attrName),r=t.attributes[this.attrName];return!(!r||!n)&&n===r},n}(n);t.q=o,i=function(t){function n(e,n,r){t.call(this,e,n),this.Ia=r,this.name="XpathScreen"}return e(n,t),n.prototype.j=function(e,t){var n=e.xpath.get(),r=f.l;return this.Ia.u(n,t.xpathArrayToIframe).b<=r},n}(n),t.Fa=i,i=function(t){function n(e,n,i){t.call(this,n,i);var o=e.xpathArrayOriginal;this.rb=new r(this,function(){return f.da(o,void 0,void 0,e.ignoreWalkmeElementsSelector)}),this.name="ExactXpathScreen"}return e(n,t),n.prototype.j=function(e){var t=this.rb.get();return t&&t[0]==e.element[0]},n}(n),t.ua=i,n=function(t){function n(e,n){t.call(this,e,n),this.name="TextScreen"}return e(n,t),n.prototype.j=function(e,t){return!(!t.text||0===t.text.length)&&e.text.get()===t.text},n}(n),t.V=n}(d||(d={}));var p,g=function(){function e(){this.buffer=[]}return e.prototype.append=function(e){this.buffer.push(e)},e.prototype.toString=function(){return this.buffer.join("")},e}();!function(e){function n(i){var o="";if(3===i.nodeType||4===i.nodeType){o=i.nodeValue,i=[160,10,13,9];for(var s=new g,u=0;u<o.length;u++)0>t.indexOf(i,o.charCodeAt(u))&&s.append(o.charAt(u).toLowerCase());if(o=s.toString().replace(/ /g,""),o=a.$.trim(o),o=o.substring(0,e.sb),null!=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.exec(o)){for(i=-1,s=o.length,u=new g;++i<s;){var l=o.charAt(i);/[\uD800-\uDBFF]/.test(l)||/[\uDC00-\uDFFF]/.test(l)?u.append(r(l)):u.append(l)}o=u}}else if(1===i.nodeType&&!i.tagName.match(/^(script|style)$/i))for(i=i.childNodes,s=0,u=i.length;s<u&&!(o=n(i[s]));s++);return o}function r(e){e=e.charCodeAt(0).toString(16).toUpperCase();var t=2<e.length;return"\\"+(t?"u":"x")+("0000"+e).slice(t?-4:-2)}e.sb=70;var i;!function(e){e[e.ElementNode=1]="ElementNode",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection"}(i||(i={})),e.extractFirstOccuringText=function(e){return n(e[0])},e.Tb=n}(p||(p={}));var f;return function(e){function i(e,t){function n(n){return o(t,n,function(t){return t==e},!1)}for(var r=n(0),i=[];0<=r&&r<t.count()-1;)i.push(t.slice(0,r+1)),r=n(r+1);return i}function o(e,t,n,r){var i=e.count();if(r){for(t=i-1-t;0<=t;t--)if(n(e.get(t).tag))return t}else for(;t<=i-1;t++)if(n(e.get(t).tag))return t;return-1}function s(e,t,n,r){for(var i,o=[],a=0;a<t.length;a++)i=t[a],o.push(c(e,i,n,r)),e=i;return o=o.reverse(),l(o,n)}function u(e,t,n,r){e=e[0],n=n&&n[0];for(var i=[];e&&1==e.nodeType&&e!=n;e=e.parentNode)i.push(c(e,e.parentNode,t,r));return i=i.reverse(),l(i,t)}function l(e,t){return t?new S(e):new v(e)}function c(e,t,n,r){return n?n.Wa(e,t,r):p(e,t,r)}function d(e,t,n){return new r(null,function(){return p(e,t,n)})}function p(e,n,r){var i=1;if("HTML"!=t.Va(e)){n=n.childNodes;for(var o=0;o<n.length&&n[o]!=e;o++){var a=n[o];a.tagName==e.tagName&&0>t.inArray(a,r)&&i++}}return{tag:e.tagName.toUpperCase(),index:i}}function f(e){return!e||0>=e.length?null:1==e.get(0).nodeType?e:(e=e.find(":first"))&&e.length&&1==e.get(0).nodeType?e:null}function h(e,r,i,o){if(o=o||[],r=r||a.$(document),0<r.find(e).length)e.data("iframe",i),o.unshift(r);else{i=o.length,r=r.find(n.ga);for(var s=0;s<r.length;s++){var u=r.eq(s);if(o=h(e,t.r(u),u,o),o.length>i){a.$(o[0]).data("iframe",u),o.unshift(u);break}}}return o}function m(e){for(var n=["HTML","BODY"],r=0;r<e.count()&&-1<t.inArray(e.get(r).tag,n);r++);return e.slice(r)}var v=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e]},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Pb=v;var S=function(){function e(e){this.xpathArray=e}return e.prototype.count=function(){return this.xpathArray.length},e.prototype.get=function(e){return this.xpathArray[e].get()},e.prototype.slice=function(t,n){return new e(this.xpathArray.slice.apply(this.xpathArray,arguments))},e}();e.Qb=S,e.l=1,e.wa=1;var y=function(){function e(e,t,n){this.k=this.s=this.b=0,this.b=e,this.s=t,this.k=n}return e.prototype.clone=function(){return new e(this.b,this.s,this.k)},e.prototype.o=function(){return this.b+this.s/4+this.k/10},e.max=function(){return new e(1e4,0,0)},e.o=function(e){return e.o()},e}();e.Rb=y,e.J=function(n,r,i){function o(n,r,a,s,u){if(Math.abs(r-s)>i||u.b>i)return y.max();if(0==r||0==s)return u=u.clone(),u.b+=Math.max(r,s,0),u.b>i?y.max():u;var l,c=n.get(r-1),d=a.get(s-1),p=0;if(c.tag!==d.tag)p=e.l,l=y.max();else{if(c.index===d.index)return o(n,r-1,a,s-1,u);p=e.wa}var g=u.clone();g.b+=p;var p=o(n,r-1,a,s,g),f=o(n,r,a,s-1,g);return l||(c=Math.abs(c.index-d.index),g=u.clone(),0<c&&(g.s++,g.k+=c),l=o(n,r-1,a,s-1,g)),t.min([p,f,l],y.o)}return o(n,n.count(),r,r.count(),new y(0,0,0))},e.da=function(e,n,r,i){var o=e.count();if(0>=o)return null;n=a.$(n||document),i=i?":not("+i+")":"";for(var s=0;s<o;s++){var u=e.get(s);if(n=n.children(u.tag+i).eq(u.index-1),-1!=t.inArray(u.tag,["IFRAME","FRAME"])&&o>s+1&&(0<n.length&&(r&&n.data("iframe",r),r=n),n=t.r(n)),!n||0==n.length||!n.get(0)){n=null;break}}return n&&0<n.length&&r&&n.data("iframe",r),n},e.Fb=function(n,r){if(!r||0>=r.count())return 0;for(var o=r.get(r.count()-1).tag,a=i(o,n),o=y.max().o(),s=2*e.l,u=o,l=[],c=0;c<a.length;c++){var d=a[c],p=e.J(d,r,s).o();p<u?(u=p,l=[d]):p==u&&l.push(d)}return a=0,u<o&&(a=t.min(l,function(e){return Math.abs(r.count()-e.count())}).count()),a},e.O=o,e.Sb=s,e.La=u;var E=function(){function e(){this.ra={}}return e.prototype.Wa=function(e,t,n){var r=null,i=this.t(e);return void 0!==i&&(r=this.ra[i]),r||(r=d(e,t,n),t=this.v(),this.w(e,t),this.ra[t]=r),r},e.prototype.t=function(t){return t&&t[e.W]||void 0},e.prototype.w=function(t,n){t&&(t[e.W]=n)},e.prototype.v=function(){return++e.Q},e.Q=t.ha(),e.W="__WM_XPATH_ENTRY_KEY__",e}();e.Da=E,e.Ma=function(e,t,n,r){return e=s(e[0],t,n,r),e=m(e)},e.Ja=function(e,n,r){
var i=f(e);if(!i||0>=i.length)return new v([]);return i=h(i),i=t.reduce(i,function(e,t){return e.concat(u(t,n,null,r).xpathArray)},[]),l(i.concat(u(e,n,null,r).xpathArray),n)},e.removeHtmlAndBodyFromXpathArray=m,e.Kb=function(e){for(var t=new g,n=0;n<e.count();n++){var r=e.get(n);t.append(r.tag),t.append(r.index)}return t.toString()},e.xpathStringToArray=function(e){var t=[];return a.$.each(e.split("/"),function(e,n){if(0!=e){var r=n.indexOf("[");t[e-1]={tag:n.substring(0,r),index:parseInt(n.substring(r+1,n.length-1))}}}),new v(t)}}(f||(f={})),{GitCommit:"$GitCommit: $",GitTag:"$GitTag: $",GitNumber:"$GitNumber: $",ElementRecognition:a,TempUtils:t,ContextUtils:n,TextUtils:p,XpathLib:f}}();o.register("ElementFinder").asCtor(Cs).dependencies("JQueryElementFinder, StepUtils, PositionHelper, HtmlDecoder, FindElementPluginManager,FESessionManager, Logger, Consts, FindElementDebugFlags, FindElementDebugger,PageComparerCacheManager, PopupStepElementProvider, WalkthrusModule, CommonUtils, DOMSessionManager");function Cs(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h){var m,v=this;function S(){Ts.ElementRecognition.setJQuery(e),m=s.wrapCustomerLog(u.FEATURES_LOGS.ElementFinder)}function y(e){var t={0:Ts.ElementRecognition.AlgorithmSensitivity.Low,1:Ts.ElementRecognition.AlgorithmSensitivity.Medium,2:Ts.ElementRecognition.AlgorithmSensitivity.High};return t[e]}function E(e,t){var n=Ts.ElementRecognition.SearchOptions.IGNORE_NOTHING,r=[],i=a.isFeatureEnabled("forceIgnorePosition");e.IsIdentifyByText&&r.push("IDENTIFY_TEXT"),e.IsIgnoreText&&r.push("IGNORE_TEXT"),e.IsIgnoreId&&(r.push("IGNORE_ID"),r.push("IGNORE_NAME")),(i||0!=e.IgnorePosition)&&r.push("IGNORE_POSITION"),e.IsIdentifyById&&r.push("IDENTIFY_ID_AND_NAME"),e.IgnoreShapeProportion&&r.push("IGNORE_SHAPE_PROPORTION"),e.IgnoreClass&&r.push("IGNORE_CLASS"),e.IgnoreStyle&&r.push("IGNORE_STYLE"),e.IgnoreHref&&r.push("IGNORE_HREF"),t["data-walkmeid"]&&r.push("IDENTIFY_WALKME_ID"),a.isFeatureEnabled("noAutoQuery")||r.push("USE_AUTO_SELECTOR");for(var o=0;o<r.length;o++)n|=Ts.ElementRecognition.SearchOptions[r[o]];return n}v.getFindElementLib=function(){return Ts};function T(e,t,n,o){var s=!a.isFeatureEnabled("fe_no_xpath_cache"),u=new Ts.ElementRecognition.ElementDescription(s);u.preDefinedSuspects=o,u.elementType=C(t.elementXpath.toLowerCase()),u.width=t.elementWidth,u.height=t.elementHeight,u.relativeLeft=t.relativeLeft,u.absY=t.elementAbsY,u.centeredElementWidth=t.centeredElementWidth,u.xpathArrayOriginal=Ts.XpathLib.xpathStringToArray(t.elementXpath.toUpperCase()),u.xpathArray=Ts.XpathLib.removeHtmlAndBodyFromXpathArray(u.xpathArrayOriginal),u.xpathArrayToIframe=Ts.XpathLib.removeHtmlAndBodyFromXpathArray(Ts.ContextUtils.getXpathUpToIframe(u.xpathArrayOriginal)),u.text=t.textArray&&t.textArray.length>0?i.decodeHtml(t.textArray[0],["&",'"',"'",">","<"]):"",u.autoQuery=t.autoQuery?i.decodeHtml(t.autoQuery,['"']):null,t["data-walkmeid"]?u.customSelector="[data-walkmeid='"+t["data-walkmeid"]+"']":(void 0==n||n)&&(u.visibilityFilter=r.getVisibleFilter(e));var l={elementClass:"class",elementId:"id",elementName:"name"};u.attributes={};for(var c in l)u.attributes[l[c]]=t[c];for(var d in t)!t.hasOwnProperty(d)||u.attributes.hasOwnProperty(d)||l[d]||(u.attributes[d]=t[d]);return u}function C(e){var t=e.split("/"),n=t[t.length-1],r=n.split("[")[0];return r}v.wrapSession=function(e,t){return a.wrapSession(e,t)},v.startSessionForEditor=function(e,t){return a.startSessionForEditor(e,t)},v.endSessionForEditor=function(){return a.endSessionForEditor()},v.recognizeElement=function(e,t,n,r,i){var s=a.getSession(r);f.isDefined(e.StepSensitivity)&&s.setAlgorithmSensitivity(y(e.StepSensitivity)),s.setSearchOptions(E(e,t));var u=T(e,t,n,i);o.extendAdaptedSettings(e,u);var l=s.recognize(u);return l},v.getWinner=function(e){var t=e&&e.elements&&e.elements.length&&e.elements[0];return t};function b(t,n,r,i,o,a){var s=v.recognizeElement(t,n,r,o,a),u=v.getWinner(s),l=u&&u.element&&u.element.length&&u.element[0];return u&&i&&(i.score=u.totalScore,i.details=u.details,i.losers=s.losers),l&&e(l).data("iframe",s.context),l}v.findElement=function(r,i,a,s,u){var l;if(n.isPopupStep(r))return p.get();if(n.isActionStep(r))return g.getAction(r).isValid();if(!1===o.extendOriginalSettings(r))return!1;if(m(r,5),d.isEnabled()&&d.getPageKey(r)){var c=d.compareCurrent(r);if(!c.match)return!1}if(r.IsJquerySelector){r.ElementDescription.extended=r.ElementDescription.extended||{},r.ElementDescription.extended.elementIframe=null;var f=t.findElements(r,i);if(l=f&&f.length&&f[0])return l=e(l),r.ElementDescription.extended&&l.data("iframe",r.ElementDescription.extended.elementIframe),l;return!1}if(l=o.findElement(r,a),void 0!==l)return l?e(l):l;return l=b(r,r.ElementDescription,i,a,s,u),!!l&&e(l)},v.findElementAsync=function(e,t,n,r,i){return h.measure(function(){return v.findElement(e,t,n,r,i)})},S.apply(this,arguments)}o.register("FindElementPlugins").asFunction(function(){return[]}),o.register("FindElementPluginManager").asCtor(bs).dependencies("FindElementPlugins");function bs(e){this.registerPlugin=function(t){e.push(t),t&&t.init&&t.init(o.get("ElementFinder"))},this.findElement=function(e,n){var r;return t(function(t){return r=t.findElement&&t.findElement(e,n),void 0!==r}),r},this.extendDescription=function(e,n){var r=_f(n);return t(function(t){t.extendDescription&&t.extendDescription(e,r)}),wf(r)},this.extendOriginalSettings=function(e){try{t(function(t){t.extendOriginalSettings&&t.extendOriginalSettings(e)})}catch(n){return!1}return!0},this.extendAdaptedSettings=function(e,n){t(function(t){t.extendAdaptedSettings&&t.extendAdaptedSettings(e,n)})};function t(t){for(var n=!1,r=0;!n&&r<e.length;r++)n=t(e[r])}}o.register("FESessionManager").asCtor(Is).dependencies("TimerManager,FeaturesManager");function Is(e,n){var r,i,o,a,s=this;function u(){d()}s.isFeatureEnabled=function(e){if(n.isReady())return n.isFeatureEnabled(e);if(t.findElementFeatures)return!!t.findElementFeatures[e];return!1},s.getSession=function(e){return p()||c(e),r},s.wrapSession=function(e,t){var n=l();h(t,n);var r=e&&e();return m(n),r},s.startSessionForEditor=function(e,t){var n=l();return s.setAutoCloseSessionFlag(t),h(e,n)},s.endSessionForEditor=function(){var e=l();if(e)return;return d(),!0},s.setAutoCloseSessionFlag=function(e){void 0!==e&&null!==e&&(a=e)};function l(){return s.isFeatureEnabled("fe_no_session_cache")}function c(e){e=e||0,r=new Ts.ElementRecognition.ElementRecognizerSession(e,o),o=!1,f()}function d(){i=0,r=null,o=!1,a=!0}function p(){return r&&i>0}function g(){i<0&&(i=0)}function f(){a&&e.libSetTimeout(d,0)}function h(e,t){if(t)return;return p()||o||(o=!0),g(),i+=1,!0}function m(e){if(e)return;i-=1,r&&i<=0&&d()}u.apply(this,arguments)}o.register("PageComparerCacheManager").asCtor(ws).dependencies("SimpleNLP,win,FeaturesManager");function ws(e,t,n){var r,i,a,s,u,l,c=this,d=!1;function p(){}function g(){return!r&&o.has("PlatformPageIdentifier")&&(r=o.get("PlatformPageIdentifier")),r}c.init=function(){if(d||!g())return d;d=!0;var n=function(){return t.location},i=function(t){return e.isPhraseHuman(t)},o=[new r.GeneralCapture(i),new r.SFPlatformCapture(n)];return a=new r.PlatformPageCapture(o),s=r.ComparersFactory.createSalesForce(),c.resetCollection(),d},c.isEnabled=function(){return d},c.captureCurrentPage=function(){return a.capture()},c.resetCollection=function(){u=new r.PageDescriptionCollection(s)},c.addSerializedPage=function(e,t){var n=r.PageDescription.deserialize(e);u.add(n,t)},c.updateCurrentPage=function(){l={},i=a.capture()},c.getPageKey=function(e){var t=e.ElementDescription.pageKey;if(c.getPageDesc(t))return t},c.getPageDesc=function(e){return u.getPage(e)},c.getComparer=function(){return s},c.compareCurrent=function(e){var t=c.getPageKey(e);return l[t]||(l[t]=s.compareCurrent(i,c.getPageDesc(t),u)),l[t]},c.editorApi={isEnabled:c.isEnabled,updateCurrentPage:c.updateCurrentPage,addSerializedPage:c.addSerializedPage,resetCollection:c.resetCollection,captureCurrentPage:function(){var e=c.captureCurrentPage(),t=s.compareDescriptions(e,e);if(t&&t.match)return e.serialize()}},p.apply(this,arguments)}o.register("ElementTextExtractor").asCtor(_s);function _s(){var e=this,t=70;e.getElementTextArray=function(e,t){var r=[];return n(e,r,[3],t),r};function n(e,t,o,a){if(o[0]>0){var s=!0;if(a&&a(e)===!1&&(s=!1),s)if(!e||3!==e.nodeType&&4!==e.nodeType){if(e&&1===e.nodeType&&!e.tagName.match(/^(script|style)$/i))for(var u=e.childNodes,l=0,c=u.length;l<c;l++)n(u[l],t,o,a)}else{var d=r(e.nodeValue);d=d.toLowerCase(),d=i(d),d&&(t.push(d),o[0]--)}}}function r(e){return e=e.replace(new RegExp(String.fromCharCode(160),"g")," "),e=e.replace(new RegExp(String.fromCharCode(10),"g"),""),e=e.replace(new RegExp(String.fromCharCode(13),"g"),""),e=e.replace(new RegExp(String.fromCharCode(9),"g"),""),e=e.replace(new RegExp(" ","g"),""),e=mtjQuery.trim(e),e=e.substring(0,t)}function i(e){if(!o(e))return e;for(var t=-1,n=e.length,r="";++t<n;){var i=e.charAt(t);if(!/[\uD800-\uDBFF]/.test(i)&&!/[\uDC00-\uDFFF]/.test(i)){r+=i;continue}r+=a(i)}return r}function o(e){var t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return null!=t.exec(e)}function a(e){var t=e.charCodeAt(0),n=t.toString(16).toUpperCase(),r=n.length>2,i="\\"+(r?"u":"x")+("0000"+n).slice(r?-4:-2);return i}}o.register("ElementLastKeeper").asCtor(Ps).asSingleton().dependencies("TimerManager, FeaturesManager, CommonEvents, Consts");function Ps(t,n,r,i){var o=this,a=".ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front:visible",s=!0,u=[];function l(){}function c(){if(s){for(var e=[],n=0;n<u.length;n++)try{p(u[n],n)}catch(r){e.push(n)}for(var n=e.length-1;n>=0;n--)u.splice(n,1)}u.length&&t.libSetTimeout(c,3e3)}function d(e){return e.nextAll(a).length>0}function p(e,t){var n=e.parent(),o=n.contents().length;if(!d(e)&&g(e[0])+t+1!=o){var a=document.activeElement;e.appendTo(n),r.raiseEvent(i.EVENTS.ElementLocationChanged,{activeElement:a,element:e})}}function g(e){for(var t=0;e=e.previousSibling;)t++;return t}o.addElement=function(e){if(n.isFeatureEnabled("noElk"))return;u.length||t.libSetTimeout(c,3e3),u.push(e)},o.removeElement=function(t){if(n.isFeatureEnabled("noElk"))return;var r=e.inArray(t,u);r!=-1&&u.splice(r,1)},o.setState=function(e){if(n.isFeatureEnabled("noElk"))return;s=e},l.apply(null,arguments)}o.register("AnalyticsManager").asCtor(As).dependencies("ClientStorageManager, Logger, WmAjax, EventSender, PetaServerNameManager, AuditingEnabledIndicator");function As(e,t,n,r,i,o){var a,s="wm-ueuT",u="uniqueEndUser",l=this;function c(){a=t.error,t.customerLog("Analytics manager was created",3,u)}l.auditUniqueEndUser=function(n,r,i){try{var o=e.getData(s)!=i;o&&(p(n,r,i),t.customerLog("auditUniqueEndUser: sent unique user request. userGuid="+n+" permutationId="+r+"endUserGuid="+i,3,u),e.saveData(s,i,d()))}catch(l){a(l,"Failed while auditing unique end users")}};function d(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0),n=Math.floor((t.getTime()-e.getTime())/1e3);return 0==n&&(n=1),n}function p(e,a,s){if(!o.isEnabled())return!0;try{r.postEvent(r.EVENT_TYPES.Loaded,{type:r.EVENT_APPS.Walkme})}catch(u){t.error(u)}var l=i.get();if(!l)return!0;var c=l+"/Analytics/UniqueEndUser",d={userId:e,permutationId:a,endUserGuid:s};n.execute({url:c,data:d})}c.apply(null,arguments)}o.register("ClickAuditManager").asCtor(ks).dependencies("DeployablesManagerFactory, ServerDataSenderManager, Logger, HostData, GuidGenerator, DeployableTypes, EventSender, WalkMeInfo, ClickAuditEventSender, ReportInitiatorMapper, AuditingEnabledIndicator, Consts, CommonUtils");function ks(e,t,n,r,i,o,a,s,l,c,d,p,g){var f=this;f.SendClickAudit=T,f.SendWidgetOpen=C,f.SendShoutOutAudit=b,f.SendInteractionAudit=I,f.init=A;var h,m,v,S,y;function E(){y=n.wrapCustomerLog(u)}function T(e,t,n,r){t=g.isDefined(t)?t:-1;var i,o;if(n?(i=n.type,o=n.hasOwnProperty("objectId")?n.objectId:n.id):i=p.STEP_PLAY_INITIATOR_ENUM.NONE,void 0===e||!d.isEnabled())return!0;var a=P(),s={auditType:e,objectId:t,auditGuid:a,playInitiator:i,initiatorId:o};return h.sendData(s),l.send({auditType:e,objectId:t,initiatorType:i,initiatorId:o,additionalParams:r}),a}function C(e){if(!d.isEnabled())return!0;var t={userId:s.getUserGuid(),fullUrl:r.getUrl(),source:s.getEnvironmentId(),browser:r.browser.string,os:r.os.name,permutationId:s.getPermutationId(),endUserGuid:s.getEndUserGuid(),auditGuid:P()};m.sendData(t);try{var i;return e&&(i=c.map(e)),a.postEvent(a.EVENT_TYPES.Open,{type:a.EVENT_APPS.Player,pInit:i})}catch(o){return n.error(o),!0}}function b(t,r,i,s){if(!d.isEnabled())return!0;var u={shoutOutId:t,deployableType:r,clickType:i,auditGuid:P(),relatedClickAuditGuid:s};v.sendData(u);try{var l=e.get(o.ShoutOut),c=l.getById(t);if(w(i)){var p=l.getActionData(c);return a.postEvent(a.EVENT_TYPES.Click,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,aType:p.Type,aAppType:p.aAppType,aoId:p.ItemId,aoName:p.Name,pId:"-1"})}if(_(i))return a.postEvent(a.EVENT_TYPES.Close,{type:a.getEventAppByDeployable(r),oId:t,oName:c.Name,pId:"-1",reason:i})}catch(g){return n.error(g),!0}}function I(e,t,n,r){if(!d.isEnabled())return!0;var i={deployableId:e,deployableType:t,interactionType:n,auditGuid:P(),relatedClickAuditGuid:r};S.sendData(i)}function w(e){return e===p.SHOUTOUT_CLICK_TYPE.Action}function _(e){return e===p.SHOUTOUT_CLICK_TYPE.Close||e===p.SHOUTOUT_CLICK_TYPE.XButton||e===p.SHOUTOUT_CLICK_TYPE.RemindMeLater}function P(){return(new Date).getTime()+"-"+i.generateGuid()}function A(){h=t.register("ca",{actionUrl:"/Statistics/AddClickAudits",prefixForStorage:"ca",sendingThreshold:1,dataType:"click audit",dataIdFieldName:"Id",requestParamsFunc:O}),m=t.register("wo",{actionUrl:"/Statistics/AddWidgetOpens",prefixForStorage:"wo",sendingThreshold:1,dataType:"widget open",dataIdFieldName:"Id",requestParamsFunc:function(e){return{serizlizedWidgetOpens:wf(e)}}}),v=t.register("ac",{actionUrl:"/Statistics/AddShoutOutAudits",prefixForStorage:"ac",sendingThreshold:1,dataType:"shoutOut click",dataIdFieldName:"Id",requestParamsFunc:O}),S=t.register("di",{actionUrl:"/Statistics/AddInteractionAudits",prefixForStorage:"di",sendingThreshold:1,dataType:"deployable interaction",dataIdFieldName:"Id",requestParamsFunc:D})}function k(t){var n,r,i=t[0],a=i.auditType,u=i.objectId;if(void 0!=a&&void 0!=u&&(n=e.get(a),n&&n.getById&&(r=n.getById(u),r&&r.userGuid)))return r.userGuid;var l=t[0].shoutOutId;if(void 0!=l&&(n=e.get(o.ShoutOut),n&&n.getById&&(r=n.getById(l),r&&r.userGuid)))return r.userGuid;return s.getUserGuid()}function O(e){var t=k(e),n=r.browser.string,i=r.os.name,o=s.getEnvironmentId(),a=s.getEndUserGuid(),u=s.getPermutationId(),l=r.getUrl();return{serizlizedClickAudits:wf(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:u,endUserGuid:a}}function D(e){var t=k(e),n=r.browser.string,i=r.os.name,o=s.getEnvironmentId(),a=s.getEndUserGuid(),u=s.getPermutationId(),l=r.getUrl();return{serizlizedInteractionAudits:wf(e),userGuid:t,fullUrl:l,source:o,browser:n,os:i,permutationId:u,endUserGuid:a}}E.apply(null,arguments)}o.register("JQueryElementFinder").asCtor(Os).dependencies("CommonUtils, PositionHelper, IsInEditor, FrameContentsProvider, ElementUtils, HtmlDecoder, Logger, StringUtils, JQuerySelectorRunner");function Os(t,n,r,i,o,a,s,u,l){var c=this,d=["parent","children","next"];function p(e){return"object"==typeof e&&null!==e}function g(e,t,n){var r;return r=p(e)?S(e,t,n):l.run(e,n)}function f(e,t,n){var r=void 0;if(void 0!=e&&(r=g(e,t,n),r.length>0)){var a=o.getElementTagName(r[0]);"IFRAME"==a||"FRAME"==a?(t&&(t.ElementDescription.extended.elementIframe&&r.data("iframe",t.ElementDescription.extended.elementIframe),t.ElementDescription.extended.elementIframe=r),r=i.getFrameContents(r)):t&&(t.ElementDescription.extended.elementIframe=!1)}return r}function h(e){if(void 0!=e&&mtjQuery.inArray(e,d)>-1)return!0;return!1}function m(t,n){var r;try{r=t[n]().eq(0)}catch(i){s.error(i,"runJqueryMethod : element has no method named '"+n+"'"),r=e()}return r}function v(t,n){if(void 0!=t.method){var r;r=p(t.method)?t.method.name:t.method,h(r)?n=m(n.eq(0),r):(s.customerLog("Unknown jQuery Selector Method : '"+r+"'"),n=e())}return n}function S(t,n,r){try{var i=f(t.context,n,r),o=g(t.element,n,i);return o=v(t,o)}catch(a){return s.customerLog("jQuery Element Finder: Could not parse input"),e()}}function y(t){if(t=e.trim(t),!u.startsWith(t,"{")){var n=new Object;return n.element=t,n}try{return _f(t)}catch(r){return null}return null}c.findElementsByjQueryComplexSelector=function(e){e=a.decodeHtml(e,["&",'"',"'",">"]);var t=y(e),n=S(t);return n},c.getjQueryElementText=function(e){var n=c.findElementsByjQueryComplexSelector(e);return t.checkElementText(n)},c.findElements=function(e,t){if(!e.JquerySelector)return[];var i=e.JquerySelector;i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"),i=i.replace(/&gt;/gi,">");var a,c="context:",d=",element:",p="func:";if(u.startsWith(i,c)){var g=i.substr(c.length),f=g.substr(g.indexOf(d)+d.length);g=g.substr(0,g.indexOf(d));var h=l.run(g);if(!(h.length>0))return[];"IFRAME"==o.getElementTagName(h[0])?e.ElementDescription.extended.elementIframe=h:e.ElementDescription.extended.elementIframe=!1,h=h.contents(),a=l.run(f,h),s.customerLog("jQuery selector found these elements:",5),s.customerLog(C,5)}else if(u.startsWith(i,p))try{var m=i.substr(p.length),v=mtjQuery.parseJSON(m),T=E(v);T.iframe&&(e.ElementDescription.extended.elementIframe=mtjQuery(T.iframe));var C=mtjQuery(T.result);return(void 0==t||t)&&(C=C.filter(n.getVisibleFilter(e))),s.customerLog("func selector found these elements:",5),s.customerLog(C,5),C}catch(b){return r.get()?(console.log("Using jQuery selector with function raised an exception:"),console.log(b)):(s.customerLog("Using jQuery selector with function raised an exception:"),s.customerLog(b)),[]}else{var I=y(i);a=S(I,e)}return a.length>0&&(void 0==t||t)&&(a=a.filter(n.getVisibleFilter(e))),s.customerLog("jQuery selector found these elements:",5),s.customerLog(a,5),a};function E(e){function t(e,t){for(var n=e.split("."),r=t,i=0;i<n.length;i++)r=r[n[i]];return r}var n={result:null,iframe:null},r=new Array;if(e.params)for(var i=0;i<e.params.length;i++)r.push(e.params[i].value);var o=window;if(e.iframe){if(o=mtjQuery(e.iframe),0==o.length)throw"Iframe not found: "+e.iframe;o=o.contents()[0],o=o.parentWindow||o.defaultView,n.iframe=mtjQuery(e.iframe)}var a=t(e["function"],o);if(!a)throw"Function not found: "+e["function"];var s;if(e["this"]){if(s=t(e["this"],o),!s)throw"'This' not found: "+e["this"]}else s=e["function"].indexOf(".")==-1?null:t(e["function"].substring(0,e["function"].lastIndexOf(".")),o);var u=a.apply(s,r);return n.result=u,n}}o.register("JQuerySelectorRunner").asCtor(Ds).dependencies("");function Ds(){var e=this;e.run=t;function t(e,t){return mtjQuery(e,t)}}o.register("AbTasksValidator").asCtor(Ns).dependencies("SiteConfigManager, HostData, TodoListManager, UiDataProvider, FeaturesManager");function Ns(e,t,n,r,i){var o=this;function a(){}o.shouldTrackAbTasks=function(){var t=parseInt(e.get().TodoListSettings.isActive);if(t&&s())return!0;if(n.hasTaskGoalCompletionCondition())return!0;if(i.isFeatureEnabled("untrack_tasks")&&!t)return!1;return l()};function s(){for(var e=r.uiTasksTree(),t=0;t<e.length;t++)if(u(e[t]))return!0;return!1}function u(e){if("task"==e.type())return!0;var t=e.children();if(!t||0===t.length)return!1;for(var n=0;n<t.length;n++)if(u(t[n]))return!0;return!1}function l(){if(!t.isIEBrowser(9,"lte"))return!0;var e="abTasksIE"+t.browser.version;if(i.isFeatureEnabled(e))return!0;return!1}a.apply(null,arguments)}o.register("ResourceInjector").asCtor(xs);function xs(){var e=this;e.inject=t;function t(e,t){e.append(t)}}o.register("ResourceManager").asCtor(Ls).dependencies("Logger, CommonUtils, HostData, win, IsInEditor, CdnServer, ResourceInjector, FeaturesManager, wmjQuerySafe");function Ls(t,n,r,i,a,s,u,l,c){var p,g,f=this,h=[],m="walkme-framesets-fix-id",v="Comic Sans MS",S="QW@HhsXJ",y=50,E=2500,T=function(e,t,n){var r=this;return r.b(n=n||""),r.b("@font-face {"),r.b("\n"+n),r.b("font-family: '"),r.b(r.v(r.f("family",e,t,0))),r.b("';"),r.b("\n"+n),r.b("src: url("),r.b(r.v(r.f("src",e,t,0))),r.b(") "),r.s(r.f("format",e,t,1),e,t,0,69,89,"{{ }}")&&(r.rs(e,t,function(e,t,n){n.b("format('"),n.b(n.v(n.f("format",e,t,0))),n.b("')")}),e.pop()),r.b(";"),r.b("\n"+n),r.b("font-weight: "),r.b(r.v(r.f("weight",e,t,0))),r.b(";"),r.b("\n"+n),r.b("font-style: "),r.b(r.v(r.f("style",e,t,0))),r.b(";"),r.b("\n"+n),r.b("}"),r.fl()},C=o.get("TimerManager");function b(){p=t.wrapCustomerLog(d),"Edge"==r.browser.name&&(v="Arial"),g={}}f.font=function(i,o,a,s){if(l.isFeatureEnabled("noFonts")||n.isMobileNative())return void(a&&a());if(o&&o.length||(o=e("head")),!o.length)return t.error(null,"cannot inject font - head element does not exist"),void(s&&s());var u=o[0].ownerDocument;if(r.isIEDoc(8,"lte",o[0])&&"widget-font"!=i.name&&!l.isFeatureEnabled("loadAllFonts"))return p("Not loading font '"+i.name+"' (IE7/8), to load all fonts enable the loadAllFonts feature",4),void(a&&a());p("Start loading font '"+i.name+"'",4);var c="wm-font-"+i.id,d=e("#"+c,o);if(d&&d.length)return void x(i,u,a,s);if(g["walkme-"+i.name])return void s();var h=f.getResourcePath(i.url);if(r.isIEDoc(8,"lte",o[0])){if(P(o,i.name))return void x(i,u,a,s);O(i,c,o,h)}else I(i)&&(h=h.concat("_svg")),A(i,c,o,h);var m;m=r.isIEDoc(8,null,o[0])?function(){l.isFeatureEnabled("highPerf")||D(5),a&&a()}:a,x(i,u,m,s)};function I(e){return w(e)&&_()}function w(e){return"widget-font"==e.name||"lib-font"==e.name}function _(){return r.isAndroid("4.3","lt")&&"Chrome"!=r.browser.name}function P(e,t){for(var n=0;n<e[0].ownerDocument.styleSheets.length;n++)if(e[0].ownerDocument.styleSheets[n][t])return!0;return!1}f.preloadResources=function(t,n){var i;t=t||e("head");for(var o=0;o<n.length;o++){var i=f.getResourcePath(n[o].url);i+=r.isIEDoc(8,null,t[0])?".eot":".js";var a=new Image;a.src=i,a.onload=function(){}}},f.fonts=function(e,t,n,r){var i=e.length,o=!1;if(i||n&&n(),n||r)for(var a=0;a<e.length;a++)f.font(e[a],t,function(){0==--i&&(o?r&&r():n&&n())},function(){o=!0,0==--i&&r&&r()});else for(var a=0;a<e.length;a++)f.font(e[a],t)};function A(t,n,r,i){p("Start loading embeded file for font '"+t.name+"'",4),h.push({name:"walkme-"+t.name,tagId:n,head:r}),e.ajax({type:"GET",url:i+".js",dataType:"script",cache:!0})}f.finishFontLoad=function(e,t){p("finish loading font '"+e+"'",4);for(var n="",r=0;r<t.length;r++)n+=yf.to_html(T,{family:e,src:t[r].src,format:t[r].format,weight:t[r].weight,style:t[r].style});var i=k(e);f.injectCss(n,i.tagId,i.head,e,null,!0)};function k(e){for(var t=0;t<h.length;t++)if(h[t].name==e){var n=h[t];return h.splice(t,1),n}}function O(e,t,i,o){p("Start loading eot file for font '"+e.name+"'",4),o+=".eot",r.isIEBrowser(8)&&l.isFeatureEnabled("fixFontsCompatibility")&&(o+="?frame="+n.getFrameIndex(i[0].ownerDocument.parentWindow));var a=yf.to_html(T,{family:"walkme-"+e.name,src:o,weight:"normal",style:"normal"});r.isIEBrowser(8)?U(a,t,i):F(a,i,e.name,t)}function D(e){if(!e)return;N(top),C.libSetTimeout(function(){D(e-1)},100)}function N(t){try{var n=e("head",t.document);U("",m,n),C.libSetTimeout(function(){n.find("#"+m).remove()},100)}catch(r){}for(var i=t.frames,o=0;o<i.length;o++)N(i[o])}function x(t,n,r,i){if(!r&&!i)return void p("Stop Tracking font '"+t.name+"' because we don't have success/fail Callback",4);p("Start tracking font '"+t.name+"'",4);var o=e(n.createElement("span")).addClass("walkme-font-tester").important({position:"absolute",top:"-9999px",left:"-9999px",visibility:"hidden","font-family":v,"font-size":"250px","line-height":"normal"}).html((t.dummeyText||S)+"a").appendTo(e("body",n).or("html",n)),a=o[0].offsetWidth,s=o[0].offsetHeight,u="walkme-"+t.name;o.important("font-family",u+","+v),L(o,a,s,E,u,r,i)}function L(e,t,n,r,i,o,a){if(!c(e).isSafe())return;var s=5;p("================================================================================",s),p("Tracking font '"+i+"'",s),p("Comparison tester width: "+t+" === "+e[0].offsetWidth,s),p("Comparison tester height: "+n+" === "+e[0].offsetHeight,s),p("================================================================================",s),t===e[0].offsetWidth&&n===e[0].offsetHeight?r<0?(p("Finished with failure tracking font '"+i+"'",4),e.remove(),g[i]=!0,a&&a()):C.libSetTimeout(function(){L(e,t,n,r-y,i,o,a)},y):(p("Finished successfully tracking font '"+i+"'",4),e.remove(),g[i]=!1,o&&o())}f.getResourcePath=function(e){if(e&&e.indexOf("/"))return e;var t=s.get();return e=t+e},f.injectCss=function(e,t,n,r,i,o){M()?F(e,n,r,t,i):U(e,t,n,i,o)},f.refreshContentCss=function(e,t){var n=U(t+" :before,"+t+" :after{content:none !important;}",null,e);C.libSetTimeout(function(){n.remove()},0)},f.emptyStyleSheets=function(){if(!M())return;for(var e=document.styleSheets,t=0;t<e.length;t++)e[t].walkmeToRemove&&(e[t].disabled=!0)};function M(){return!!document.createStyleSheet}function F(e,t,n,r,i){try{R(e,t,n,r,i)||B(e,t,n,r,i)}catch(o){throw p("Cannot inject style sheet"),o}}function R(e,t,n,r,o){var a=i._walkmeInternals;if(a&&a.customInjectStyleSheetFuncs){p("Attempting to use custom CSS Injector");for(var s=0;s<a.customInjectStyleSheetFuncs.length;s++){var u=a.customInjectStyleSheetFuncs[s];"function"==typeof u&&u(e,t,n,r,o)}return!0}return!1}function B(t,n,r,i,o){var a,s=n?n[0].ownerDocument:e("body")[0].ownerDocument;o&&(a=W(o,s));var u=void 0===a?s.createStyleSheet(""):s.createStyleSheet("",a);u.cssText=t,u.owningElement.id=i,u.walkmeToRemove=!0,u[r]=!0}function U(t,n,r,i,o){var s,l=r||e("head");a.get()&&mtjQuery("#"+n,l).remove();var c=e('<style type="text/css" class="walkme-to-remove">'+(o?"":t)+"</style>");if(n&&c.attr("id",n),i&&(s=l.find("#"+i)),s&&s.length>0?s.first().before(c):u.inject(l,c),o){var d=c.prop("styleSheet");d?d.cssText=t:c.append(t)}return c}function W(e,t){for(var n=t.styleSheets,r=0;r<n.length;r++)if(n[r].owningElement.id==e)return r}b.apply(null,arguments)}o.register("IFramesManager").asCtor(Ms).dependencies("Logger, TimerManager, FeaturesManager");function Ms(t,n,r){var i=this;i.remapTopIframes=f;var o,a,s,u="iframe:not(#walkme-hidden-iframe),frame",l=-1,c=!1,d=[],p=t.wrapCustomerLog("IFramesManager");i.mapIframes=function(){if(E())return void S();c||(S(),g(document,void 0)),c=!0};function g(t,n,r){var i=(new Date).getMilliseconds();if(e(t).find(u).each(function(){var t=h(this,n);t.documentAccessible&&g(e(t.iframe.contentWindow.document),t),r&&v(t)}),void 0==n){var o=(new Date).getMilliseconds(),a=o-i;p("Mapping iframes took "+a+" ms",5)}}function f(){if(E())return;s&&s.clear();var t=(new Date).getMilliseconds();l++;var r=[];e(document).find(u).each(function(){for(var e=!1,t=0;t<o.length;t++)if(o[t].iframe==this){o[t].foundInRemap=l,e=!0;break}e||r.push(this)});for(var i=0;i<o.length;i++)if(o[i].foundInRemap!=l){var a=o[i];m(a.iframe),o.splice(i,1)}for(var i=r.length-1;i>=0;i--)h(r[i],void 0);var c=(new Date).getMilliseconds(),d=c-t;p("Remapping top iframes took "+d+" ms",5),s=n.libSetTimeout(f,1e4)}i.getAll=function(){return o},i.foreachIframe=function(e,t){n(a);function n(r){for(var i=0;i<r.children.length;i++){var o=r.children[i];t&&!o.documentAccessible||(e(o),n(o))}}},i.onIframeLoad=function(e){d.push(e)},i.releaseEvents=function(){if(!o)return;for(var e=0;e<o.length;e++)m(o[e].iframe)};function h(t,n){var r={iframe:t,documentAccessible:y(t),children:[]};return n?n.children.push(r):o.push(r),v(r),e(t).on("load.wmIframeManager",function(){r.children=[],y(t)&&(g(e(t.contentWindow.document),r,!0),v(r))}),r.documentAccessible||p("Cross domain iframe detected: "+t.src,4),r}function m(t){try{e(t).off("load.wmIframeManager")}catch(n){}}function v(e){for(var t=d.length-1;t>=0;t--)d[t](e)}function S(){o=[],a={children:o}}function y(e){try{e.contentWindow.document}catch(t){return!1}return!0}function E(){return r.isFeatureEnabled("dontMapIframes")}}o.register("UIChangeTracker").asCtor(Fs).dependencies("Lib, SiteConfigManager, HashChangeNotifier, HistoryChangeNotifier, IFrameLoadChangeNotifier,ClickChangeNotifier, AjaxCallsChangeNotifier, UserInputChangeNotifier, ElementsRedrawer,Logger, IFramesManager, TimerManager, WalkMeVisibilityChecker, SettingsValuesRetriever"),o.register("UICT_DEFAULT_THROTTLE_TIME_WINDOW").asInstance(2e3),o.register("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW").asInstance(250);function Fs(e,t,n,r,i,a,s,u,l,c,d,p,g,f){var h=this;h.init=_,h.isEnabled=A,h.stop=k,h.bind=D,h.bindPreListener=O,h.unbind=N,h.callListeners=L,h.triggerUIChange=F,h.triggerThrottledUIChange=B,h.isActivated=H,h.getElementRedrawerType=j,h.getSpaConfigValue=Y,h.getSpaConfigIntValue=z,h.getCurrentIndex=P;var m,v,S=[],y=[],E=!1,C=!1,b=0,I={};function w(){m=[n,r,i,a,s,u],v=c.wrapCustomerLog(T)}function _(){if(C&&k(),C=!0,!h.isEnabled())return;d.mapIframes();for(var e=[],t=0;t<m.length;t++)m[t].start(),m[t].isActivated()&&e.push(m[t].getSpaTypeName());e.length>0?(E=!0,v("UIChangeTracker - Creating UIChangeTracker for types: "+e.join(", ")+". Using the following redrawer: "+l.getRedrawerName(),2)):v("UIChangeTracker - Did not activate",2)}function P(){return b}function A(){return g.isWalkMeVisible()}function k(){if(C=!1,!h.isEnabled())return;for(var e=0;e<m.length;e++)m[e].isActivated()&&m[e].stop()}function O(e){y.push(e)}function D(e){S.push(e)}function N(e){x(y,e),x(S,e)}function x(e,t){for(var n=0;n<e.length;n++)if(e[n]===t){e.splice(n,1);break}}function L(){b++,M(y),M(S),I={}}function M(e){for(var t=e.length-1;t>=0;t--)try{e[t]({uiChangeIndex:b,notifiers:I})}catch(n){}}function F(e){e&&(I[e]=!0),R()}function R(){l.redrawElements()}function B(e){e&&(I[e]=!0),G()}var U=!1,W=!1,V=!1;function G(e){U?V||(W=!0):(R(),U=!0,V=!0,p.libSetTimeout(t,o.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW")),p.libSetTimeout(function(){V=!1},o.get("UICT_THROTTLE_FIRST_EVENT_BLOCK_TIME_WINDOW")));function t(){W&&(R(),p.libSetTimeout(t,o.get("UICT_DEFAULT_THROTTLE_TIME_WINDOW"))),U=W,W=!1}}function H(){return E}function j(){return"ElementsRedrawer"}function Y(e,n){var r=n;return t.get()&&t.get().Settings&&t.get().Settings.spaConfig&&(r=f.getSettingsValue(t.get().Settings.spaConfig,e,n)),r}function z(e,t){return t=void 0===t?0:t,parseInt(h.getSpaConfigValue(e,t))}w()}o.register("PageChangeTracker").asCtor(Rs).dependencies("UIChangeTracker, WalkMeVisibilityChecker, Consts");function Rs(e,t,n){var r=this;r.init=c,r.stop=d,r.bind=p,r.unbind=g,r.triggerPageChange=f,r.getCurrentIndex=h,r.isActivated=v;var i,o=[],a=!1,s=0,u=!1;function l(){i=[n.UI_CHANGE_NOTIFIERS.HASH,n.UI_CHANGE_NOTIFIERS.HISTORY,n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR,n.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR]}function c(){if(a)return;if(a=!0,!m())return;e.bindPreListener(S),u=!0}function d(){if(a=!1,!m())return;e.unbind(S)}function p(e){o.push(e)}function g(e){for(var t=0;t<o.length;t++)if(o[t]===e){o.splice(t,1);break}}function f(){y()}function h(){return s}function m(){return t.isWalkMeVisible()}function v(){return u}function S(e){if(E(e.notifiers))return;y()}function y(){s++;for(var e=o.length-1;e>=0;e--)try{o[e]({uiChangeIndex:s})}catch(t){}}function E(e){if(!e)return!0;for(var t=0;t<i.length;t++)if(e[i[t]])return!1;return!0}l()}o.register("HashChangeNotifier").asCtor(Bs).injectToReady().dependencies("UIChangeTracker, Consts");function Bs(){var e,t,n=this,r=null,i=!1;n.ready=function(n,r){e=n,t=r},n.start=function(){e.getSpaConfigValue(t.UI_CHANGE_NOTIFIERS.HASH)&&(o(),i=!0)},n.stop=function(){i&&(window.onhashchange=r,r=null,i=!1)},n.isActivated=function(){return i},n.getSpaTypeName=function(){return"Hash"};function o(){r=window.onhashchange,window.onhashchange=function(){r&&r.apply(null,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HASH)}}}o.register("HistoryChangeNotifier").asCtor(Us).injectToReady().dependencies("UIChangeTracker, Consts");function Us(){var e,t,n=this,r=null,i=null,o=!1;n.ready=function(n,r){e=n,t=r},n.start=function(){e.getSpaConfigValue(t.UI_CHANGE_NOTIFIERS.HISTORY)&&(a(),
o=!0)},n.stop=function(){o&&(window.onpopstate=r,r=null,window.history.pushState=i,i=null,o=!1)},n.isActivated=function(){return o},n.getSpaTypeName=function(){return"History"};function a(){if(!window.history||!window.history.pushState)return;r=window.onpopstate,window.onpopstate=function(){r&&r.apply(null,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HISTORY)},i||(i=window.history.pushState,window.history.pushState=function(){i.apply(window.history,arguments),e.triggerUIChange(t.UI_CHANGE_NOTIFIERS.HISTORY)})}}o.register("IFrameLoadChangeNotifier").asCtor(Ws).injectToReady().dependencies("UIChangeTracker, IFramesManager, HtmlDecoder, Logger, Consts");function Ws(){var t,n,r,i,o,a=this,s=!1;a.ready=function(e,a,s,u,l){t=e,r=a,i=s,o=u,n=l},a.start=function(){void 0!=t.getSpaConfigValue(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)&&(u(),s=!0)},a.stop=function(){var t=d();t&&e(t).off("load.wmSpa"),s=!1},a.isActivated=function(){return s},a.getSpaTypeName=function(){return"IFrame load"};function u(){var e=d(),t=!e,n=t?"all iframes/frames":e;o.customerLog("UIChangeTracker - iframeLoadSelector config defined. Listening to iframe load events for "+n,2);var i;t?i=p:(l(document),i=c),r.foreachIframe(i,!0),r.onIframeLoad(function(e){e.iframeLoadListenerSet=!1,i(e)})}function l(r){e(r).find(d()).on("load.wmSpa",function(){t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)})}function c(t){if(!t.iframeLoadListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);l(n),t.iframeLoadListenerSet=!0}}function d(){var e=t.getSpaConfigValue(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR);return i.decodeHtml(e,["&",'"',"'"])}function p(r){r.iframeLoadListenerSet||(e(r.iframe).on("load.wmSpa",function(){t.triggerUIChange(n.UI_CHANGE_NOTIFIERS.IFRAME_LOAD_SELECTOR)}),r.iframeLoadListenerSet=!0)}}o.register("ClickChangeNotifier").asCtor(Vs).injectToReady().dependencies("UIChangeTracker, Logger, Consts");function Vs(){var t,n,r,i=this,o=!1;i.ready=function(e,i,o){t=e,n=i,r=o},i.start=function(){s()&&(a(),o=!0)},i.stop=function(){s()&&(e(document).off("mousedown.wmSpa"),e(document).off("click.wmSpa"),e(document).off("mouseup.wmSpa")),o=!1},i.isActivated=function(){return o},i.getSpaTypeName=function(){return"Click"};function a(){n.customerLog("UIChangeTracker - clickSelector config defined. Listening to click events for "+s(),2),e(document).on("mousedown.wmSpa",s(),u),e(document).on("click.wmSpa",s(),u),e(document).on("mouseup.wmSpa",s(),u)}function s(){return t.getSpaConfigValue(r.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}function u(){t.triggerThrottledUIChange(r.UI_CHANGE_NOTIFIERS.CLICK_SELECTOR)}}o.register("UserInputChangeNotifier").asCtor(Gs).injectToReady().dependencies("UIChangeTracker,IFramesManager, Logger, Consts");function Gs(){var t,n,r,i,o=this,a=!1;o.ready=function(e,o,a,s){t=e,n=o,r=a,i=s},o.start=function(){t.getSpaConfigValue(i.UI_CHANGE_NOTIFIERS.USER_INPUT)&&(s(),a=!0)},o.stop=function(){c(),a=!1},o.isActivated=function(){return a},o.getSpaTypeName=function(){return"User input"};function s(){l(e(document)),n.foreachIframe(u,!0),n.onIframeLoad(function(e){e.userInputListenerSet=!1,u(e)})}function u(t){if(!t.userInputListenerSet&&t.documentAccessible){var n=e(t.iframe.contentWindow.document);l(n),t.userInputListenerSet=!0}}function l(e){e.on("click.wmUITrack",p),e.on("dblclick.wmUITrack",p),e.on("mousedown.wmUITrack",p),e.on("mouseup.wmUITrack",p),t.getSpaConfigValue("userInputHoverOff")||(e.on("hover.wmUITrack",p),e.on("mouseenter.wmUITrack",p),e.on("mouseleave.wmUITrack",p),e.on("mousemove.wmUITrack",p),e.on("mouseout.wmUITrack",p),e.on("mouseover.wmUITrack",p)),e.on("keydown.wmUITrack",p),e.on("keypress.wmUITrack",p),e.on("keyup.wmUITrack",p)}function c(){r.customerLog("UIChangeTracker - Stopped listening to User Input",2),d(e(document))}function d(n){n.off("click.wmUITrack"),n.off("dblclick.wmUITrack"),n.off("mousedown.wmUITrack"),n.off("mouseup.wmUITrack"),t.getSpaConfigValue("userInputHoverOff")||(n.off("hover.wmUITrack"),n.off("mouseenter.wmUITrack"),n.off("mouseleave.wmUITrack"),n.off("mousemove.wmUITrack"),n.off("mouseout.wmUITrack"),n.off("mouseover.wmUITrack")),n.off("keydown.wmUITrack"),n.off("keypress.wmUITrack"),n.off("keyup.wmUITrack"),n.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{d(e(this.contentWindow.document)),e(this).off("load.wmUITrack")}catch(t){r.customerLog("User input change tracker did not stop listening for all iframes.. This can occur for cross-domain iframes ",4)}})}function p(){t.triggerThrottledUIChange(i.UI_CHANGE_NOTIFIERS.USER_INPUT)}}o.register("AjaxCallsChangeNotifier").asCtor(Hs).injectToReady().dependencies("UIChangeTracker,IFramesManager, TimerManager, Logger, AjaxCallsChangeNotifierFilter, Consts");function Hs(){var t,n,r,i,o,a,s,u,l=this,c=!1;l.ready=function(e,r,i,l,c,d){t=e,n=r,o=i,a=l,s=c,u=d},l.start=function(){t.getSpaConfigValue(u.UI_CHANGE_NOTIFIERS.AJAX_CALLS)&&(d(),c=!0)},l.stop=function(){h(),c=!1},l.isActivated=function(){return c},l.getSpaTypeName=function(){return"Ajax Calls"};function d(){p(window),n.foreachIframe(f,!0),n.onIframeLoad(function(e){e.ajaxCallsListenerSet=!1,f(e)})}function p(e){e.XMLHttpRequest&&(r=e.XMLHttpRequest.prototype.send,i=e.XMLHttpRequest.prototype.open,g(e.XMLHttpRequest))}function g(e){var n=e.prototype.send,r=e.prototype.open;e.prototype.open=function(e,t){return this._wmUrl=t,r.apply(this,arguments)};var i=function(){var e=this;o.setWalkmeTimeout(function(){var n=e.onreadystatechange;e.onreadystatechange=function(){n&&n.apply(e,arguments),s.filter(e._wmUrl)&&t.triggerThrottledUIChange(u.UI_CHANGE_NOTIFIERS.AJAX_CALLS)}},0),n.apply(this,arguments)};e.prototype.send=i}function f(e){!e.ajaxCallsListenerSet&&e.documentAccessible&&(p(e.iframe.contentWindow),e.ajaxCallsListenerSet=!0)}function h(){a.customerLog("UIChangeTracker - Stopped listening to Ajax calls",2),m(window),v(e(document))}function m(e){e.XMLHttpRequest&&(e.XMLHttpRequest.prototype.send=r,e.XMLHttpRequest.prototype.open=i)}function v(t){t.find("iframe:not(.walkme-editor-popup):not(#walkme-hidden-iframe),frame").each(function(){try{m(this.contentWindow),v(e(this.contentWindow.document)),e(this).off("load.wmAjaxResposive")}catch(t){a.customerLog("Ajax calls were not overridden for all iframes. (ajax calls ui tracker). This can occur for cross-domain iframes ",4)}})}}o.register("AjaxCallsChangeNotifierFilter").asCtor(js).dependencies("EventServerBaseUrl, RecorderServerManager");function js(e,t){var n=this;n.filter=function(n){if(!n)return!0;var r=e.get();if(0===n.indexOf(r))return!1;var i=t.get();if(0===n.indexOf(i))return!1;return!0}}o.register("ElementsRedrawer").asCtor(Ys).injectToReady().dependencies("Lib,TimerManager,UIChangeTracker, CommonUtils, Logger,IFramesManager");function Ys(){var e,t,n,r,i,o,a,s=this,u=300,l=!1;s.ready=function(r,s,u,l,c,d){e=r,t=s,n=u,i=c.wrapCustomerLog(T),o=l,a=d},s.redrawElements=function(){var e=function(){if(l)return void i("UIChangeTracker - Canceling uiChange, already waiting for redraw",4);i("UIChangeTracker - UI change triggered",2),l=!0;var e=n.getSpaConfigIntValue("redrawTimeout",u);i("UIChangeTracker - redrawing in "+e,4),r&&(r.clear(),r=void 0),r=t.libSetTimeout(c,e)};t.libSetTimeout(e,0)},s.getRedrawerName=function(){return"ElementsRedrawer"};function c(){l=!1,a.remapTopIframes(),n.callListeners()}}o.register("ScrollManager").asCtor(zs).asProto().dependencies("CommonUtils, ElementUtils, FeaturesManager, HostData, Logger, Consts, ScrollUtils, ElementInIframeIndicator, PositionHelper, IFrameScrollManager");function zs(e,t,n,r,i,o,a,s,u,l,c){var d,p,g,f=this;function h(){d=c.element,p=c.balloonDrawer,g=c.settings}f.scrollToElementIfNeeded=function(t,n,r,o,u,l,c,d){try{var p,g=l==a.SCROLL_MODES.Animated&&!s.isInIframe(t)&&1!=e.getSettingsValue(o,"scrollOld","0"),h=!1,y=f.getScrollOptions(o);if(g){p=m(t,u,y,c,d);try{S(p,t,y,u,c,r)&&(h=!0)}catch(E){}}h&&l!=a.SCROLL_MODES.Normal||(p=t,v(p,t,u,y,r))}catch(E){i.error(E)}},f.getScrollOptions=function(t){var n=e.getSettingsValue(t,"endScroll",-1);if(n>=0)return{distance:parseInt(n,10),unit:e.getSettingsValue(t,"scrollUnit","%"),force:e.getSettingsValue(t,"forceScroll",0)}},f.scrollToBalloon=function(e,t,n){var r=f.calculateScrollMargins(e,t);if(!u.isElementInViewport(n,r)){var i=e.offset().top>n.offset().top;y(n,t,i)}};function m(e,n,r,i,o){var a,s=o[0],u=e,l=t.getElementViewport(e),c=f.calculateScrollMargins(e,r),d=e.offset().top<i.offset().top||e.offset().top+e.height()<i.offset().top+i.height(),p=l.top()-0+l.height()-0;!r||1!=n&&3!=n?d?(a=p-c.bottom<=e.offset().top+e.height()+i.height()+s.height()?"down":"up",u="down"==a?i:e):(a=l.top()+c.top>=e.offset().top-i.height()-s.height()?"up":"down",u="down"==a?e:i):u=e.outerHeight()>i.height()?e:i;var g=b(e.height(),i.height(),n,s.height(),l.height()-0);return g&&(u=i),u}this.calculateScrollMargins=function(e,t){if(t&&t.force){var n=E(e,t);return{top:n,bottom:0}}return o.DEFAULT_POSITIONS};function v(e,t,n,r,i){var o=f.calculateScrollMargins(e,r);f.isElementVisibleBeforeScroll(e,o,n)||y(e,r,!0,s.isInIframe(t)),i&&i()}function S(e,t,i,o,a,s){if(r.isQuirksMode(d[0]))return!1;if(u("html"))return!0;if(!f.isElementVisibleBeforeScroll(t,f.calculateScrollMargins(t,i),o))return u("body");return!1;function u(r){var u={duration:"slow",rootElement:r,elementToFindScrollableFor:t,complete:function(){s&&s()},heightLimit:!n.isFeatureEnabled("noHgtLmt")};if(i){var l=a.height();u.endScroll={scrollOptions:i,balloonHeight:C(t,o,l),totalDrawnHeight:T(t,o,l)}}return e.scrollintoview(u)}}f.isElementVisibleBeforeScroll=function(e,t,n){return u.isElementInViewport(e,t)&&a.isBalloonPositionVisibleRelativeToParents(e,n)};function y(e,t,n,r){t&&!r?window.scrollTo(0,e.offset().top-E(e,t)):l.doNormalScroll(e,n,t)}function E(e,n){return"px"==n.unit?n.distance:t.getElementViewport(e).height()*n.distance/100}function T(n,r,i){var o=n.outerHeight(),a=t.getElementViewport(n).height()-0;return b(o,i,r,p.arrowHeight(),a)?i:0==r||2==r?o+i+p.arrowHeight()+1-parseInt(e.getSettingsValue(g,"topOffset",0)):Math.max(o,i)}function C(t,n,r){var i=t.height(),o=parseInt(e.getSettingsValue(g,"topOffset",0));return 0==n?r+p.arrowHeight()+1-o:2==n?i+r+p.arrowHeight()+1-o:r>i?r-o:(i-r)/2+r-o}function b(e,t,n,r,i){return 0==n||2==n?e+t+r>i:e>i}h.apply(null,arguments)}o.register("IFrameScrollManager").asCtor(Qs).dependencies("HostData");function Qs(t){var n=this;function r(){}n.doNormalScroll=function(n,r,i){n[0].scrollIntoView(r);var o="hidden"===e("html").css("overflow"),a="hidden"===e("body").css("overflow");if(t.isQuirksMode(n[0])||o||a){var s=e("html");s[0].scrollIntoView()}},r.apply(null,arguments)}o.register("AutoStartHelper").dependencies("CrossDomainManager").asCtor(Ks);function Ks(e){var t=this;t.get=r;var n;function r(){return n||i(),n}function i(){var t=e.get().enabled()?"PassOwnershipAutoStartHelper":"RegularAutoStartHelper";n=o.get(t)}}R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("RegularAutoStartHelper").asCtor(qs).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")});function qs(e,t,n,r,i){var o=this;o.clearCache=u,o.checkShouldAutoStart=l;var a,s;function u(){a=void 0,s=void 0}function l(t,n,r){if(t!=e.Tutorial)return!0;return c(n,r)}function c(e,r){var o=t.getWalkthruIndexByWalkthruId(e.Id),a=n.checkTutorialSkipFirstStepCondition(o),s=n.checkTutorialRedirectCondition(o,!1),u=e.IsWelcomeStep,l=d(),c=!(l.state==i.WALKTHRU_STATE.RUNNING&&l.step==a)&&p(l,r)&&(s&&u||n.checkIfStepExistsWithSkippables(o,a,void 0,void 0,void 0,i.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=a&&!s);return c}function d(){return a||(a=r.get()),a}function p(e,t){if(void 0!=s)return s;return s=e.state==i.WALKTHRU_STATE.PAUSED||e.state==i.WALKTHRU_STATE.NOT_RUNNING||!t&&n.checkIfStepExistsWithSkippables(e.tutorial,e.step,void 0,void 0,void 0,i.CHECK_STEP_MODE.Sandbox,"- Engagement")<0}}R.register([L.PLATFORM.Android,L.PLATFORM.iOS],function(){o.register("RegularAutoStartHelper").asCtor(Xs).dependencies("DeployableTypes, WmInternals, Consts")});function Xs(e,t,n){var r=this;r.clearCache=s,r.checkShouldAutoStart=u;var i=!1,o=[e.ShoutOut,e.Spotlight,e.Tooltip];function a(){t.bind(n.EVENTS.DeployableCreated,function(e,t){i=!0}),t.bind(n.EVENTS.DeployableDestroyed,function(e,t){i=!1})}function s(){}function u(e,t,n){if(o.indexOf(e)==-1)return!0;return!i}a()}o.register("PassOwnershipAutoStartHelper").asCtor(Js).dependencies("Consts, RegularAutoStartHelper, DeployableTypes, Logger, CrossDomainManager, FlowsContainer");function Js(e,t,n,r,i,o){var a=this;a.clearCache=t.clearCache,a.checkShouldAutoStart=u;var s=r.wrapCustomerLog(S);function u(e,n,r){var o=l(e);if(void 0!=o){var a=c(e,n),u=i.get().isConditionMet(!0,a,o);if(!u)return s(i.get().isOwnerByDefault()?"AutoStartHelper - not top window, not starting":"AutoStartHelper - condition not met, not starting"),!1}return t.checkShouldAutoStart(e,n,r)}function l(t){var r=void 0;return t==n.Tutorial?r=e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru:t==n.BusinessSolution&&(r=e.PASS_OWNERSHIP.PassOwnershipEntity.BizFlow),r}function c(e,t){return e==n.Tutorial?{walkthruId:t.Id,step:t.Steps[0]}:{flowId:t.Flow.Id,node:o.getNodeById(t.Flow.Id,t.Flow.RootFlowNodeId)}}}o.register("AutoStartManager").asCtor($s).dependencies("ClientOrServerStorageManager, Logger, AutoStartHelper, DeployablesManagerFactory, DeployableTypes, ClientStorageManager, TimerManager, CommonUtils,ProfilerAPI,ElementFinder, Consts, CommonEvents, WalkthruStepsLoader, AutoStartDeployablesIterator, AutostartDeployablesOrchestrator, AutoStartConditionParamsProvider, ConditionTreeGetter, ConditionCheckerFactory, WmInternals");function $s(e,t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,y){var E=this,T=t.wrapCustomerLog(S);function C(){u.registerProfilerCallback(function(e){E.run=e.profile("runAutoStart",E.run)})}this.run=function(){f.deployablesChecksStarting(),T("Trying to find a deployable that can auto start",1),n.get().clearCache(),l.wrapSession(function(){var e=function(e,t,n){var r=b(e,n,t);r?P(e,t,n,r):f.deployableCannotAutoplay(t,n)};g.iterate(e)})};function b(e,t,n){if(!_(t))return T("Deployable doesn't support auto start: "+t.Name,4),!1;var r=w(t,n);if(r.forceStart)return T("Deployable can auto start (remind me later): "+t.Name,4),r.startResult;if(r.canStart)return I(e,t,n);return!1}function I(e,t,n){if(e.autoStartEnabled(t.Id)){var r=k(n,t);if(r.shouldStart)return T("Deployable can auto start (storage): "+t.Name,4),r}return!1}function w(t,n){var r={forceStart:!1,canStart:!1},i=n?n+"-":"",o=c.STORAGE_KEYS.remindMeLater+"-"+i+t.Id,a=e.getData(o,void 0,void 0,void 0);if(a){var s=_f(a);s.expiry&&s.expiry<Date.now()&&(r.forceStart=!0,r.startResult={shouldStart:!0,repeatCookieExpiry:-1,store:function(){e.removeData(o)}})}else r.canStart=!0;return r}function _(e){return s.getSettingsValue(e.Settings,"ASEnabled",0)}function P(e,t,n,r){var i=s.getSettingsValue(n.Settings,"ASCTEnabled",0);if(1!=i)return T("Non-conditional autostart, trying to auto start "+n.Name,3),B(t,n,r);T("Autostart is enabled for deployable: "+n.Name,3);var o=m.get(t,n,"ASCT");if(""!=o)try{D(e,t,n,r,o)}catch(a){}}this.checkRepeatCookie=function(n,r,i){var a={shouldStart:!0,repeatCookieExpiry:-1},u=i?o:e;if("always"==r);else{"visit"==r&&(n+="-v");var l=1,c=u.getData(n,void 0,void 0,l);c==l?a.shouldStart=!1:s.isNumber(r)?a.repeatCookieExpiry=r:"visit"==r?a.repeatCookieExpiry=A:"once"==r?a.repeatCookieExpiry=O:t.error(new Error("checkRepeatCookie bad value: "+r))}return a.store=function(){a.repeatCookieExpiry>=0&&u.saveData(n,1,a.repeatCookieExpiry)},a};function k(e,t){var n=L(e,t),r=s.getSettingsValue(t.Settings,"ASRep","visit");return""===r&&(r="visit"),E.checkRepeatCookie(n,r)}function D(e,t,n,r,i){var o=h.get(t,n),a=v.createConditionChecker(i,o);N(t,n,r,i,a),x(e,t,n,r,i,a)}function N(e,t,n,r,i){var o=i.getCurrentEvaluationValueAndStopEvaluating(r);F(o,e,t,n,n,i)}function x(e,t,n,r,i,o){var a=!0;o.onEvaluated(function(i){var s=b(e,n,t);s&&F(i,t,n,s,r,o,a)}),o.evaluateAsyncAndDontEvaluateImmediately(i)}function L(e,t){if(0==e)return"wm-ASRep-"+t.Id;return"wm-ASRep-"+e+"-"+t.Id}function M(e,t,r){return n.get().checkShouldAutoStart(e,t,r)}function F(e,t,n,r,i,o,a){e?(T("Autostart condition met, trying to auto start: "+n.Name,3),R(t,n,r,i,o,a)):T("Condition didn't meet, not starting deployable: "+n.Name,3),d.deprecatedRaiseEvent(c.EVENTS.AutoStart.ConditionEvaluated,n,{result:e})}function R(e,t,r,o,a,s){function u(){n.get().clearCache();var i=B(e,t,r,s);i&&o.repeatCookieExpiry!=-1&&a.cleanResources()}e==i.Tutorial?p.afterStepsLoaded(t.TutorialId,u):u()}function B(e,t,n,r){if(y.bind(c.EVENTS.AutoStart.Activated,o),M(e,t,r)){var i=parseFloat(s.getSettingsValue(t.Settings,"Delay",0));return i?a.libSetTimeout(function(){f.deployableCanAutoplay(e,t)},1e3*i):f.deployableCanAutoplay(e,t),!0}return f.deployableCannotAutoplay(e,t),!1;function o(r,i){y.unbind(c.EVENTS.AutoStart.Activated,o),i.deployableType==e&&i.deployable==t&&n.store()}}C.apply(null,arguments)}o.register("DeployablesRunnerFactory").asCtor(Zs).dependencies("DeployableTypes, ImmediateDeployablesRunner, QueueDeployableRunner");function Zs(e,t,n){var r=this;r.get=a;var i=[];function o(){i[e.ShoutOut]=t,i[e.Tutorial]=n,i[e.BusinessSolution]=n,i[e.Survey]=n}function a(e){return i[e]}o()}o.register("ImmediateDeployablesRunner").asCtor(eu).dependencies("Consts, CommonEvents, DeployablesManagerFactory, Logger");function eu(e,t,n,r){var i=this;i.run=s;var o;function a(){o=r.wrapCustomerLog(S)}function s(r,i){o("Autostarting: "+i.Name,3),t.raiseEvent(e.EVENTS.AutoStart.Activated,{deployableType:r,deployable:i}),n.get(r).activateById(i.Id,{type:e.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})}a()}o.register("QueueDeployableRunner").asCtor(tu).dependencies("ImmediateDeployablesRunner, AutoStartRunningState");function tu(e,t){var n=this;n.run=i;var r=[];function i(e,t){r.push({deployableType:e,deployable:t}),o()}function o(){t.isSomeoneRunning().then(a).fail(function(){var t=r.shift();e.run(t.deployableType,t.deployable)})}function a(){r=[]}}o.register("AutoStartRunningState").asCtor(nu).dependencies("AutoStartTypes");function nu(t){var n=this;n.isSomeoneRunning=r,n.cleanResources=i;function r(){var n=e.Deferred(),r=t.getRunningStateServices();i();function i(){var e=r.shift();if(!e)return void n.reject();e.isRunning().then(n.resolve,i)}return n.promise()}function i(){for(var e=t.getRunningStateServices(),n=0;n<e.length;n++)e[n].cleanResources&&e[n].cleanResources()}}o.register("EventBasedRunningState").asCtor(ru).asProto().dependencies("WmInternals");function ru(t,n){var r=this;r.isRunning=p,r.cleanResources=g;var i,o=[{eventNames:n.resetEvents,method:u},{eventNames:n.startingEvents,method:l},{eventNames:n.resolvingEvents,method:c},{eventNames:n.rejectingEvents,method:d}];function a(){u(),s(!0)}function s(e){for(var n=e?t.bind:t.unbind,r=0;r<o.length;r++)for(var i=o[r],a=0;a<i.eventNames.length;a++){var s=i.eventNames[a];n(s,i.method)}}function u(){i=e.Deferred(),i.reject()}function l(){i=e.Deferred()}function c(){i.resolve()}function d(){i.reject()}function p(){return i.promise()}function g(){s(!1)}a()}o.register("SurveyRunningState").dependencies("Consts").asFunction(function(e){return o.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Surveys.SurveyCompleted],startingEvents:[e.EVENTS.Surveys.StartSurvey],resolvingEvents:[e.EVENTS.Surveys.SurveyPlayed],rejectingEvents:[e.EVENTS.Surveys.SurveyFailedShowing]})}),o.register("BizFlowRunningState").dependencies("Consts").asFunction(function(e){return o.create("EventBasedRunningState",{resetEvents:[e.EVENTS.Flows.FlowStopped,e.EVENTS.Flows.FlowCompleted],startingEvents:[e.EVENTS.Flows.RestoringFlow,e.EVENTS.Flows.FlowStarted],resolvingEvents:[e.EVENTS.Flows.UIFlowStageShown],rejectingEvents:[e.EVENTS.Flows.FailedToStart]})}),o.register("WalkthruRunningState").asCtor(iu).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts");function iu(t,n,r){var i=this;i.isRunning=o;function o(){var i,o=t.get();return i=!(o.state==r.WALKTHRU_STATE.PAUSED||o.state==r.WALKTHRU_STATE.NOT_RUNNING||n.checkIfStepExistsWithSkippables(o.tutorial,o.step,void 0,void 0,void 0,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0),i?e.when():e.Deferred().reject()}}o.register("WalkthruPersistenceDataRetriever").asCtor(ou).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData");function ou(e,t,n){var r=this;r.get=i;function i(){var r=e.getPersistenceData();return n.state==t.WALKTHRU_STATE.PAUSED&&(r.state=n.state),r}}R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("AutostartDeployablesOrchestrator").asCtor(au).dependencies("DeployablesRunnerFactory")});function au(e){var t=this;t.deployableCanAutoplay=n,t.deployableCannotAutoplay=function(){},t.deployablesChecksStarting=function(){};function n(t,n){e.get(t).run(t,n)}}R.register([L.PLATFORM.Android,L.PLATFORM.iOS],function(){o.register("AutostartDeployablesOrchestrator").asCtor(su).dependencies("Logger, DeployablesManagerFactory, Consts, CommonEvents, AutoStartDeployablesIterator, WmInternals, AutoStartHelper")});function su(t,n,r,i,o,a,s){var u=this;u.deployableCanAutoplay=h,u.deployableCannotAutoplay=y,u.deployablesChecksStarting=g;var l,c=[],d={BeforeCondition:0,ConditionFalse:1,ConditionTrue:2,PlayStarted:3,PlayFalse:4,PlayTrue:5};function p(){l=t.wrapCustomerLog(S),a.bind(r.EVENTS.AutoStart.ConditionEvaluated,function(e,t,n){var r=f(t);void 0!==n.result&&r.result==d.BeforeCondition&&(r.result=n.result?d.ConditionTrue:d.ConditionFalse,m())}),a.bind(r.EVENTS.DeployableNotShowing,function(e,t){var n=f(t.deployable);n.result=d.PlayFalse,m()}),a.bind(r.EVENTS.DeployableCreated,function(e,t){var n=f(t.deployable);n.result=d.PlayTrue}),a.bind(r.EVENTS.DeployableHandleStarting,function(e,t){var n=f(t.deployable);n.result=d.PlayStarted})}function g(){c=[];var e=function(e,t,n){c.push({manager:e,deployableType:t,deployable:n,deployableId:n.Id,result:d.BeforeCondition})};o.iterate(e)}function f(t){var n=e.grep(c,function(e,n){return e.deployableId==t.Id});return n.length>0?n[0]:null}function h(e,t){var n=f(t);n.result=d.ConditionTrue;var r=s.get().checkShouldAutoStart(e,t);r&&m()}function m(){for(var e in c){var t=c[e];if(t.result===d.BeforeCondition||t.result===d.PlayStarted)return;if(t.result===d.ConditionTrue)return void v(t.deployableType,t.deployable)}}function v(e,t){l("Autostarting: "+t.Name,3),i.raiseEvent(r.EVENTS.AutoStart.Activated,{deployableType:e,deployable:t}),n.get(e).activateById(t.Id,{type:r.STEP_PLAY_INITIATOR_ENUM.AUTOSTART})}function y(e,t){var n=f(t);n.result=d.PlayFalse}p()}R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("AutoStartConditionParamsProvider").asCtor(uu)});function uu(){var e=this;e.get=t;function t(e,t){var n={trackUIChange:!0,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:S,elementName:t.Name};return n}}R.register([L.PLATFORM.Android,L.PLATFORM.iOS],function(){o.register("AutoStartConditionParamsProvider").asCtor(lu)});function lu(){var e=this;e.get=t;function t(e,t){var n={trackUIChange:!1,stopPollingAfterEvaluateTrue:!1,evaluationPollingIntervalMs:2e3,onlyPollConditionFunctions:!0,featureName:S,elementName:t.Name};return n}}R.register([L.PLATFORM.iOS,L.PLATFORM.Android],function(){o.register("AppletActivationListener").asCtor(du).dependencies("UIChangeTracker, AutoStartManager")}),R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("AppletActivationListener").asCtor(cu)});function cu(){var e=this;e.init=function(){},e.cleanResources=function(){}}function du(e,t){var n=this;n.init=i,n.cleanResources=o;function r(){}function i(){e.bind(t.run)}function o(){e.unbind(t.run)}r()}o.register("AutoStartTypes").asCtor(pu).dependencies("DeployableTypes, BizFlowRunningState, WalkthruRunningState, SurveyRunningState");function pu(e,t,n,r){var i=this;i.getDeployableTypes=o,i.getRunningStateServices=a;function o(){return[e.ShoutOut,e.BusinessSolution,e.Tutorial,e.Survey]}function a(){return[t,n,r]}}R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("AutoStartDeployablesIterator").asCtor(gu).dependencies("DeployableTypes, DeployablesManagerFactory, AutoStartTypes")});function gu(e,t,n){var r=this;r.iterate=o;var i=n.getDeployableTypes();function o(e){for(var n=0;n<i.length;n++)for(var r=i[n],o=t.get(r),a=o.getAll(),s=0;s<a.length;s++){var u=a[s];e(o,r,u)}}}R.register([L.PLATFORM.Android,L.PLATFORM.iOS],function(){o.register("AutoStartDeployablesIterator").asCtor(fu).dependencies("DeployableTypes, DeployablesManagerFactory")});function fu(e,t){var n=this;n.iterate=r;function r(n){var r=e.Category,i=t.get(r),o=i.getAll(),a=o[0];if(!a)return;var s=a.LinkedDeployables;s.sort(function(e,t){return e.OrderIndex-t.OrderIndex});for(var u=0;u<s.length;u++){var l=s[u],c=l.DeployableType,d=t.get(c),p=d.getById(l.DeployableID);p&&n(d,c,p)}}}o.register("PermalinkDeployableProvider").asCtor(hu).dependencies("DeployablesManagerFactory, DeployableTypes, Consts, SiteConfigManager");function hu(e,t,n,r){var i=this;i.getByString=o;function o(e){var n=a(),r=n.exec(e);if(r&&r.length>1){var i=r[2]||r[1],o=r[2]?r[1]:t.Tutorial,u={type:parseInt(o,10),id:parseInt(i,10)};if(s(u))return u}}function a(){var e,t=r.get();return e=t.IsDisplayPoweredBy===n.IS_DISPLAY_POWERED_BY.Hide?/(?:walkme|walkthroughid)=([0-9]+)-?([0-9]*)/:/walkme=([0-9]+)-?([0-9]*)/}function s(t){var n=e.get(t.type);if(!n)return;var r=n.getById(t.id);if(!r)return;return!0}}o.register("PermalinkString").asFunction(function(e){return e.location.href}).asProto(),o.register("PermalinkManager").asCtor(mu).dependencies("CrossDomainManager, DeployablesManagerFactory, Lib, DeployableTypes, CommonUtils, Consts, CommonEvents, TimerManager, PermalinkDeployableProvider");function mu(t,n,r,i,a,s,u,l,c){var d,p=this;p.window=window,p.isTrainingInStartingMode=m;var g=[i.Tutorial,i.BusinessSolution];p.run=function(){if(f()){var t=c.getByString(o.create("PermalinkString",p.window));if(t){var r=e.inArray(t.type,g)!=-1,i=n.get(t.type),a=i.getById(t.id),m=h(a,r);l.libSetTimeout(function(){u.raiseEvent(s.EVENTS.PermalinkClicked),i.activateById(t.id,{type:s.STEP_PLAY_INITIATOR_ENUM.PERMALINK}),r&&(d=!1)},m),r&&(d=!0)}}};function f(){return!t.get().enabled()||t.get().isOwnerByDefault()}function h(e,n){var r=1e3*parseFloat(a.getSettingsValue(e.Settings,"Delay",0)),i=n&&t.get().enabled()?2*t.get().crossDomainSampleRate():1;return Math.max(r,i)}function m(){return d}}o.register("RecorderServerManager").asCtor(vu).args([""]),o.register("EventServerBaseUrl").asCtor(vu).args([""]),o.register("PetaServerNameManager").asCtor(vu);function vu(){var e,t=this;function n(t){e=t}t.set=function(t){e=t},t.get=function(){return e},n.apply(t,arguments)}o.register("AuditSourceManager").asCtor(Su).dependencies("Consts");function Su(e){var t=this;t.set=i,t.get=o;var n;function r(){n=e.SOURCES.production}function i(t){var r=e.SOURCES[t];n=void 0!=r?r:parseInt(t)}function o(){return n}r()}o.register("IsInEditor").asCtor(vu).args([!1]),o.register("IconTemplates").asInstance({customImages:[],htmlImages:[]}),o.register("FeaturesManager").asCtor(yu).dependencies("SiteConfigManager");function yu(e){var t=this;t.isFeatureEnabled=function(t){var n=e.get();if("undefined"!=n.Features&&n.Features)return n.Features.indexOf(t)>-1;return!1},t.isReady=function(){var t=e.get();return t&&0!==t.length}}o.register("LanguageManager").asCtor(Eu).dependencies("win, Lib, ClientOrServerStorageManager");function Eu(e,t,n){var r=this,i="wm-lang",o=31536e3,a="_default_",s="",u=[],l=[];r.setLanguages=function(e){u.length=l.length=0;for(var t=0;t<e.length;t++)for(var n=e[t].languages,r=0;r<n.length;r++){var i=n[r];u.push(i),i.showInPlayer&&l.push(i)}},r.getMenuLanguages=function(){return l},r.getCurrentLanguage=function(){var e=c();return g(e,u)?e:s};function c(){var t=n.getData(i);if(t==a&&(t=s),!t&&t!==s&&e.walkme_get_language)try{t=e.walkme_get_language()}catch(r){}if(!t||!g(t,u))return s;return t}r.changeLanguage=function(e){var t=e;if(e===s&&(t=a),d(t)||!g(e,u))return!1;return n.saveData(i,t,o),!0};function d(e){var t=c();return t===s&&(t=a),t===e}r.fixLanguageUrlInDataFiles=function(e,t){for(var n=c(),r=0;r<e.length;r++){var i=e[r];i.url=p(i,n,t)}return e};function p(e,t,r){var o=e.url;if(!t)return o;return g(t,e.languages)?(o=o.substring(0,o.length-3),o=o+"_"+t+".js"):r||n.removeData(i),o}function g(e,t){for(var n=0;n<t.length;n++)if(t[n].shortName==e)return!0;return!1}}o.register("OverlayManager").asCtor(Tu).asSingleton().dependencies();function Tu(){var t,n,r=[];this.create=function(l,c,d){var p={element:l,color:d,opacity:c};return{remove:function(){i(p),p==n&&(n=u(),n?a(n):(t.remove(),t=null))},show:function(){p.zIndex=l[0].style.zIndex,p.index=l.index(),e.inArray(p,r)<0&&r.push(p),n&&n!=p&&!s(p,n)||(n=p,a(p))},getOverlayElement:function(){return t||o(p),t}}};function i(t){var n=e.inArray(t,r);n>-1&&r.splice(n,1)}function o(e){t||(t=l()),t.css({zIndex:e.zIndex,backgroundColor:e.color||"#000",opacity:e.opacity||.7})}function a(e){o(e),t.insertBefore(e.element)}function s(e,t){return e.zIndex>t.zIndex||e.zIndex==t.zIndex&&e.index>t.index}function u(){if(!r.length)return;for(var e=r[0],t=1;t<r.length;t++)s(r[t],e)&&(e=r[t]);return e}function l(){var t=e('<div id="walkme-overlay-all" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0;"/>');return t}}o.register("ServerStorageAjaxCaller").asCtor(Cu).dependencies("AuditSourceManager, RecorderServerManager, Logger, WmAjax, EndUsersManager");function Cu(e,t,n,r,i){var o,a,s,u,l=this,c=1e4;function d(){}l.init=function(){o=e.get(),a=i.getEndUserGuid(),s=t.get(),u=s+"/EndUserStorage/Get"},l.get=function(e,t,i,s){var l={walkmeUserGuid:e,source:o,endUserGuid:a,secondsSinceUpdate:t};r.execute({url:u,data:l,success:function(r,u,l){r.Data.ErrorMessage?(n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+r.Data.ErrorMessage+"."),s&&s()):i(r.Data)},error:function(r,i,u){n.error(null,"ServerStorageAjaxCaller: Couldn't fetch for user guid: "+e+", source: "+o+", end user: "+a+", seconds since update: "+t+". Error: "+i+"."),s&&s()},timeout:c})},d.apply(null,arguments)}o.register("ServerStorageManager").asCtor(bu).dependencies("Consts, UserGuidContainer, EndUserStorageDataSender, ClientStorageManager, AuditSourceManager, ServerStorageAjaxCaller, CommonUtils, SettingsFile, EndUsersManager");function bu(t,n,r,i,o,a,s,u,l){var c,d,p,g,f,h,m=this,v=!1,S=!0,y="ss_ii",E=A,T="wm-ceug",C="wm-cenv",b=["wm-c-test","wm-dbg-cnf","wm-dbg","wm-ueug","wm-fgug","wm-gb","wm-load-testme","wm-prsst","wm-sf-lst-usr","wm-sf-users-data","wm-sat","wm-sst","wm-sk","wm-SrvSmt","wm-wtchd","wm-cond-win","wm-prf-stt","wm-prf-snk","wm-cdstop","wm-cdplay","wm-po-pc","wm-po-r","wm-po-q","wm-dt","wm-ne","wm-nx","wm_abg_","wm_ct_","wm-po-p",T,C,"wm-ftr-cnf","wm-ftr","wm-ltm","wm-ct-prv","wm-lg-act"];function I(){c=r,f=!1}m.init=function(e,r){if(f)return void(e&&e());f=!0,c.init(),a.init(),d=n.getUserGuid(),p=l.getEndUserGuid(),g=o.get();var u=i.getData(t.STORAGE_KEYS.lastGetDataTime,null,d);u&&(S=!1),w()&&(_(),u=null),P();var h=s.getDateAtUTC(),m=null==u?null:(h-u)/1e3;D(m)?N(m,h,e,r):e&&e()};function w(){var e=i.getData(T,null,d),t=i.getData(C,null,d);return!S&&(e!=p||t!=g)}function _(){for(var t=i.getInternalKeys(d),n=0;n<b.length;n++)e.each(t,function(e){0==e.indexOf(b[n])&&delete t[e]});for(var r in t)t.hasOwnProperty(r)&&i.removeData(r,d)}function P(){i.saveData(T,p,O,d),i.saveData(C,g,O,d)}function D(e){var t=u.getStorageType(),n=t[y]||E;return null===e||n<=e}function N(e,t,n,r){a.get(d,e,function(e){m.updateLocalStorage(e,t),h=0,n&&n()},function(){h=1,r&&r()})}m.updateLocalStorage=function(e,n){v=!!S,m.updateLocalStorageItems(e),i.saveData(t.STORAGE_KEYS.lastGetDataTime,n,k,d)},m.updateLocalStorageItems=function(e){
for(var t=0;t<e.length;t++){var n=e[t];n.IsDeleted?i.removeData(n.Key,d):i.saveData(n.Key,_f(n.Value),n.SecondsToExpiry,d)}},m.shouldUpdateOldKeys=function(){return v},m.getStorageType=function(){var e=i.getStorageType();return e.mode="server",e},m.refreshGetData=i.refreshGetData,m.saveData=function(e,t,n,r){void 0==r&&(r=d),L(e,n,r)&&c.update(e,t,n,r),i.saveData(e,t,n,r)},m.getData=function(e,t,n,r){return void 0!==r&&x(n)&&(t=r),i.getData(e,t,n)};function x(e){return h}m.addToDictionary=function(e,t,n,r,o){L(e,r,o)&&c.updatePropertyInObject(e,t,n,r,o||d),i.addToDictionary(e,t,n,r,o)},m.addToSet=function(e,t,n,r){void 0==r&&(r=d),L(e,n,r)&&c.addToSet(e,t,n,r),i.addToSet(e,t,n,r)},m.removeData=function(e,t){void 0==t&&(t=d),c.remove(e,t),i.removeData(e,t)},m.addToQueue=i.addToQueue,m.convertOldCookieStorage=i.convertOldCookieStorage,m.increment=i.increment,m.getInternalKeys=i.getInternalKeys,m.removeAllData=i.removeAllData,m.sessionSetData=i.sessionSetData,m.sessionGetData=i.sessionGetData,m.setSyncFlag=i.setSyncFlag;function L(e,n,r){var i=!1;return n>=t.TIME_PERIODS.OneHourSeconds&&(i=!0),i}I.apply(null,arguments)}o.register("EndUserStorageDataSender").asCtor(Iu).dependencies("CommonUtils, AuditSourceManager, ServerDataSenderManager, Logger, EndUsersManager, UserGuidContainer");function Iu(e,t,n,r,i,o){var a,s,u,l,c,d,p,g=this;function f(){c=n.register("up",{actionUrl:"/EndUserStorage/UpdatePropertyInObject",prefixForStorage:"up",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),d=n.register("as",{actionUrl:"/EndUserStorage/AddToSet",prefixForStorage:"as",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),l=n.register("us",{actionUrl:"/EndUserStorage/Update",prefixForStorage:"us",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.updateRequestParamsFunc,shouldTruncateData:!1}),p=n.register("rs",{actionUrl:"/EndUserStorage/Remove",prefixForStorage:"rs",sendingThreshold:1,dataType:"end user storage",requestParamsFunc:g.removeRequestParamsFunc,shouldTruncateData:!1})}g.init=function(){a=o.getUserGuid(),s=i.getEndUserGuid(),u=t.get()},g.updatePropertyInObject=function(e,t,n,r,i){a=i||a;var o={Key:e,FieldKey:t,FieldValue:n,Expiry:r};c.sendData(o)},g.addToSet=function(e,t,n,r){a=r||a,d.sendData(h(e,t,n))},g.update=function(e,t,n,r){a=r||a,l.sendData(h(e,t,n))};function h(t,n,r){return{Key:t,Value:e.toJSON(n),Expiry:r}}g.remove=function(e,t){a=t||a,p.sendData({Key:e})},g.getUpdateTypedDataSender=function(){return l},g.getRemoveTypedDataSender=function(){return p},g.updateRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyValueExpiryListSerialized:e.toJSON(t)}},g.removeRequestParamsFunc=function(t){return{walkmeUserGuid:a,source:u,endUserGuid:s,keyListSerialized:e.toJSON(t)}},f.apply(null,arguments)}o.register("SettingsCacheBusterActivator").asCtor(wu).asSingleton().dependencies("Lib, Logger, CommonUtils");function wu(e,t,n){var r=this;r.activeIfPublishedRecently=c;var i,o,a="wm-settings-cache-bust",s=900,u="jstorage";function l(){i=t.wrapCustomerLog("SettingsCacheBusterActivator"),o=e.getStorageManagerInstance(u)}function c(e){if(!o.isEnabled())return;if(d(e)){var t=new Date(e+1e3*s);p(t)}}function d(e){var t=((new Date).getTime()-e)/1e3,n=t<s;return i("SettingsCacheManager.shouldActivateSettingsCacheBuster - secondsSincePublish: "+t,5),n}function p(e){i(n.formatString("SettingsCacheManager - Will fetch newset settings file until {}",e),3);var t=(e.getTime()-(new Date).getTime())/1e3;if(t<=0)return;o.saveData(a,!0,t)}l.apply(null,arguments)}o.register("SettingsCacheManager").asCtor(_u).asSingleton().dependencies("Lib,SettingsFile,Logger,CommonUtils,WmAjax,TimerManager, SettingsCacheBusterActivator,CommonEvents");function _u(e,t,n,r,i,o,a,s){var u,l,c="jstorage",d=1e3;function p(){u=n.wrapCustomerLog("SettingsCacheManager"),l=e.getStorageManagerInstance(c)}this.start=function(){u("SettingsCacheManager.start - Check if need to fetch settings ",5),l.isEnabled()?g({onSuccess:f,onFailure:v,queryStringParams:"forceUpdate="+(new Date).getTime()}):u("SettingsCacheManager - storage is not enabled , settings file will not be checked",3)};function g(e){var n=t.getUrl()+"?"+e.queryStringParams;u("SettingsCacheManager - Fetching newest settings file from: "+n,3),i.execute({url:n,cache:!1,dataType:"jsonp",jsonpCallback:"fixedCallback",success:e.onSuccess,error:e.onFailure})}function f(e,t,n){if(u("SettingsCacheManager.settingsFileReceived - publishDate: "+new Date(e.PublishDate),5),!e.PublishDate)return;a.activeIfPublishedRecently(e.PublishDate),h(e)&&(s.raiseEvent(L.EVENTS.SettingsFileNewPublish,{settingsData:e}),m())}function h(e){var n=t.getSettingsFile().PublishDate!=e.PublishDate;return u("SettingsCacheManager.shouldActivateSettingsCacheBuster - isNewPublish: "+n,5),n}function m(){o.setWalkmeTimeout(function(){g({onFailure:v,queryStringParams:"b="+(new Date).getTime()})},d)}function v(e,t,n){u(r.formatString("SettingsCacheManager - Error fetching settings file. jqXHR: {0}, textStatus: {1}, errorThrown: {2}",e,t,n))}p.apply(null,arguments)}o.register("EndUserDataConverter").asCtor(Pu).dependencies("ClientOrServerStorageManager, DeployablesManagerFactory, CommonUtils, StepUtils, EndUserDataConverterConfig, SiteConfigManager, UserGuidContainer");function Pu(t,n,r,i,o,a,s){var u,l=this,c=o.get(),d=c.fixedKeys,p=c.keyNamesWithSuffixes,g=c.repeatKeysWithRelatedObject,f=c.keysWithRepeat,h="-",m=c.keysWithThreeParts;function v(){u=s.getUserGuid()}l.convertData=function(){if(t.shouldUpdateOldKeys&&t.shouldUpdateOldKeys()){var e=t.getInternalKeys(u);S(e),I(e)}};function S(e){for(var n in e)if(e.hasOwnProperty(n)){var r=y(n,e);r.Key&&t.saveData(r.Key,r.Value,r.Expiry,u)}}function y(e,t){var n,r={};if(d[e])n=d[e];else if(f[e])n=E(e);else{var i=b(e);if(i){var o=i.KeyWithoutSuffix;p[o]?n=p[o]:g[o]&&(n=T(i))}}return n&&(r.Key=e,r.Value=t[e],r.Expiry=n),r}function E(e){var t=f[e],n=t.SettingsKey,i=t.PropertyForKey,o=r.getSettingsValue(a.get().Settings[n],i,void 0),s=C(o);return s}function T(e){var t=g[e.KeyWithoutSuffix],i=e.SuffixParts;if("v"==i[i.length-1])return A;for(var o=0;o<t.length;o++){var a=t[o];if(a.Parts==i.length){var s,u=a.DeployableTypeIndex,l=void 0!==u?i[u]:a.DeployableType,c=n.get(parseInt(l)),d=c.getById(i[a.DeployableIdIndex]);a.SubSettings?s=r.getSettingsValue(d.Settings,a.SubSettings,void 0):d&&(s=d.Settings);var p;return s&&(p=r.getSettingsValue(s,a.SettingsKey,void 0)),C(p)}}}function C(e){var t;return r.isNumber(e)&&e>=A?t=e:"once"==e&&(t=O),t}function b(t){var n,r,i=t.split(h);if(i.length>1){var o,a=i[0]+h+i[1];i.length>2&&(o=a+h+i[2]),e.inArray(o,m)>-1?(n=o,r=i.slice(3)):(n=a,r=i.slice(2))}var s={KeyWithoutSuffix:n,SuffixParts:r};return s}function I(e){for(var o=n.get(0),a=o.getAll(),s={},l=0;l<a.length;l++)for(var c=a[l].Steps,d=0;d<c.length;d++){var p=c[d];if(i.isActionStep(p)){var g=r.getSettingsValue(p.Settings,"action",null);if(g&&"setWalkMeData"==g.actionType){var f=g.arguments,h=f.dataKey;if(e[h]){var m=f.dataDuration;if(m>=A)if(s[h])m>s[h].Expiry&&(s[h].Expiry=m);else{var v=e[h];if(void 0!==v){var S={Value:v,Expiry:m};s[h]=S}}}}}}for(var h in s)s.hasOwnProperty(h)&&t.saveData(h,s[h].Value,parseInt(s[h].Expiry),u)}v.apply(null,arguments)}o.register("EndUserDataConverterConfig").asCtor(Au).dependencies("Consts");function Au(e){var t=this;t.get=n;function n(){return{fixedKeys:{"wm-lang":k,"wm-ldv":O,"wm-ag-rep-v":A,"wm-ag-d":O},keyNamesWithSuffixes:{"wm-stpcond":O},repeatKeysWithRelatedObject:{"wm-ASRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"ASRep",DeployableType:e.DEPLOYABLE_TYPE.Tutorial},{Parts:2,DeployableTypeIndex:0,DeployableIdIndex:1,SettingsKey:"ASRep"}],"wm-SrvWtRep":[{Parts:2,DeployableIdIndex:0,SubSettings:"survey",SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Tutorial}],"wm-SrvRep":[{Parts:1,DeployableIdIndex:0,SettingsKey:"repeat",DeployableType:e.DEPLOYABLE_TYPE.Survey}]},keysWithRepeat:{"wm-ag-rep":{SettingsKey:"AG",PropertyForKey:"repeat"}},keysWithThreeParts:["wm-ag-rep"]}}}o.register("WalkmeConfigManager").asCtor(ku).dependencies("WmAjax, SettingsFile, PerformanceTimestampAdder");function ku(e,t,n){var r=this;function i(){}r.init=function(i){var o=t.getSettingsFile(),a=o.WalkMeConfigFile;a?(n.addTimeStamp("loadWalkmeConfigStart"),e.loadTextFile(a,"WalkMeConfigCallback",s,void 0,!0)):i&&i();function s(e,t,o){n.addTimeStamp("loadWalkmeConfigEnd"),window._walkmeInternals.walkmeConfig=e,r.Data=e,i&&i()}},i.apply(null,arguments)}o.register("ShoutOutActionDataProvider").asCtor(Ou).dependencies("Consts, DeployablesDataProvider, CommonUtils, ActionsFactory");function Ou(t,n,r,i){var o=this,a="none",s={};s=r.isMobileNative()?{rateApp:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.RateApp},openSettings:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenSettings},browseToPage:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.BrowseToPage},playVideo:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.PlayVideo},sendEmail:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.SendEmail},openApp:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenApp},openAppStore:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.OpenAppStore},none:{eventType:t.EVENT_SENDER_MOBILE_ACTION_TYPES.None}}:{playWt:{idField:"wtId",deployableType:t.DEPLOYABLE_TYPE.Tutorial,eventType:t.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:t.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:t.DEPLOYABLE_TYPE.Content,eventType:t.EVENT_SENDER_ACTIONS.PlayResource,aAppType:t.EVENT_SENDER_EVENT_APPS.Content},playShuttle:{idField:"shuttleId",deployableType:t.DEPLOYABLE_TYPE.Shuttle,eventType:t.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:t.EVENT_SENDER_EVENT_APPS.Shuttle},openMenu:{eventType:t.EVENT_SENDER_ACTIONS.OpenMenu},none:{eventType:t.EVENT_SENDER_ACTIONS.None},playBf:{idField:"bfId",deployableType:t.DEPLOYABLE_TYPE.BusinessSolution,eventType:t.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:t.EVENT_SENDER_EVENT_APPS.BizFlow}},o.fillActionData=l,o.isWithAction=c;function u(){}function l(t,r){var i;if(r=r||{},t.Actions&&(i=e.grep(t.Actions,function(e){return d(e)})[0])){var o=s[i.Type];if(o){r.Type=o.eventType;var a=i.Args;a&&a[o.idField]&&(r.ItemId=a[o.idField].toString(),r.Name=n.getDeployableName(o.deployableType,r.ItemId),r.aAppType=o.aAppType)}}return r}function c(e){var t=e.Actions;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(d(r)&&r.Type!=a)return!0}return!1}function d(e){return i.get(e.Type).Type==t.DEPLOYABLE_ACTION_TYPES.Action}u.apply(null,arguments)}o.register("LauncherActionDataProvider").asCtor(Du).dependencies("Consts, DeployablesDataProvider");function Du(e,t){var n=this,r="none",i={playWt:{idField:"wtId",deployableType:e.DEPLOYABLE_TYPE.Tutorial,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayWalkthru,aAppType:e.EVENT_SENDER_EVENT_APPS.Walkthru},playContent:{idField:"contentId",deployableType:e.DEPLOYABLE_TYPE.Content,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayResource,aAppType:e.EVENT_SENDER_EVENT_APPS.Content},playSurvey:{idField:"surveyId",deployableType:e.DEPLOYABLE_TYPE.Survey,actionEntityType:e.EVENT_SENDER_ACTIONS.PlaySurvey,aAppType:e.EVENT_SENDER_EVENT_APPS.Survey},playShuttle:{idField:"shuttleId",deployableType:e.DEPLOYABLE_TYPE.Shuttle,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShuttle,aAppType:e.EVENT_SENDER_EVENT_APPS.Shuttle},shoutOut:{idField:"id",deployableType:e.DEPLOYABLE_TYPE.ShoutOut,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayShoutOut,aAppType:e.EVENT_SENDER_EVENT_APPS.ShoutOut},openMenu:{actionEntityType:e.EVENT_SENDER_ACTIONS.OpenMenu},playBf:{idField:"bfId",deployableType:e.DEPLOYABLE_TYPE.BusinessSolution,actionEntityType:e.EVENT_SENDER_ACTIONS.PlayBizFlow,aAppType:e.EVENT_SENDER_EVENT_APPS.BizFlow}};n.fillActionData=a,n.isWithAction=s;function o(){}function a(e,n){if(n=n||{},null==e)return n;var r=e.Settings;if(r&&r.action){var o=r.action,a=i[o.actionType];if(a){n.Type=a.actionEntityType;var s=o.arguments;s&&s[a.idField]&&(n.ItemId=s[a.idField].toString(),n.Name=t.getDeployableName(a.deployableType,n.ItemId),n.aAppType=a.aAppType)}}return n}function s(e){var t=e.Settings;if(t&&t.action){var n=t.action.actionType;if(n&&n!=r)return!0}return!1}o.apply(null,arguments)}o.register("DeployablesDataProvider").asCtor(Nu).dependencies("DeployablesManagerFactory");function Nu(e){var t=this;t.getDeployableName=r;function n(){}function r(t,n){if(null==t||null==n)return;var r=e.get(t);if(!r)return;var i=r.getById(n);if(i)return i.Name;return}n.apply(null,arguments)}function xu(e,t){var n=this;n.run=function(){e.start(),t.start()}}R.register(L.PLATFORM.iOS,function(){o.register("PlatformInitializer").asCtor(xu).dependencies("VisitsManager, VersionsManager")}),R.register(L.PLATFORM.Android,function(){o.register("PlatformInitializer").asCtor(xu).dependencies("VisitsManager, VersionsManager")});function Lu(){var e=this;e.run=function(){}}R.register(L.PLATFORM.Web,function(){o.register("PlatformInitializer").asCtor(Lu)}),R.register(L.PLATFORM.MobileWeb,function(){o.register("PlatformInitializer").asCtor(Lu)});function Mu(e){var t,n=this,r="wm-nov",i="wm-lv";function o(){}function a(){var t=e.getData(r,0);e.saveData(r,t+1,k)}function s(){t=n.getLastVisitDate(),e.saveData(i,Date.now(),k)}n.start=function(){a(),s()},n.getVisitsNumber=function(){return e.getData(r,0)},n.getLastVisitDate=function(){return t||(t=e.getData(i,0),t=new Date(t).setHours(0,0,0,0),t=new Date(t)),t},o.apply(null,arguments)}o.register("VisitsManager").asCtor(Mu).dependencies("ClientStorageManager");function Fu(e){var t=this,n="wm-av",r="wm-awu";function i(){}function a(){var i=o.get("MobileUtils"),a=i.getAppVersionCode(),s=t.getAppVersion();void 0!==s&&s<a?e.saveData(r,!0,k):e.saveData(r,!1,k),e.saveData(n,a,k)}t.start=function(){a()},t.wasAppUpdated=function(){return e.getData(r,!1)},t.getAppVersion=function(){return e.getData(n,void 0)},i.apply(null,arguments)}o.register("VersionsManager").asCtor(Fu).dependencies("ClientStorageManager"),o.register("WindowBeforeUnloadHandler").asCtor(Ru).dependencies("win");function Ru(t){var n=this;n.init=o,n.register=c,n.cleanResources=d;var r,i;function o(){d(),a(),s()}function a(){r=[]}function s(){i=t.onbeforeunload,t.onbeforeunload=u}function u(){if(l(),i)return i.apply(t,arguments)}function l(){e.each(r,t);function t(e,t){t()}}function c(e){r.push(e)}function d(){t.onbeforeunload===u&&(t.onbeforeunload=i)}}o.register("CrossDomainManager").dependencies("Logger, FeaturesManager, ClientStorageManager, AuditSourceProvider, UserGuidContainer").asCtor(Bu);function Bu(e,t,n,r,i){var a=this;a.isReady=l,a.get=u;var s;function u(){return l()||c(),s}function l(){return!!s}function c(){var a;a=t.isFeatureEnabled("po_frames")||t.isFeatureEnabled("passOwnership")?"FramedOwnershipManager":t.isFeatureEnabled("po_tabs")?"TabbedOwnershipManager":"PassOwnershipManager",o.entry(a).args({storageManager:n,errorHandler:e.error,userGuid:i.getUserGuid(),owner:window,isFeatureEnabled:t.isFeatureEnabled,allUserGuids:i.getAllUserGuids(),topWindow:top,isPlayMode:r.isInPlayMode()}),s=o.get(a)}}o.register("PageIdentifiersAPI").asCtor(Uu).dependencies("PageComparerCacheManager, CommonUtils, UIChangeTracker");function Uu(e,t,n){var r=this;r.setPageIdentifiers=a,r.capture=s;var i=e.editorApi;function o(){if(!i.isEnabled())return;n.bind(u),i.updateCurrentPage()}function a(e){if(!i.isEnabled())return;if(i.resetCollection(),e)for(var t=0;t<e.length;t++){var n=e[t];i.addSerializedPage(n.PageDescription,n.Id)}}function s(){if(!i.isEnabled())return null;var e=i.captureCurrentPage();return t.toJSON(e)}function u(){if(!i.isEnabled())return;i.updateCurrentPage()}o()}o.register("jQueryCacheCleaner").asCtor(Wu).dependencies("HostData, TimerManager");function Wu(t,n){var r=this;r.init=a,r.destroy=s;var i;function o(){}function a(){u()}function s(){i&&(i.clear(),i=null)}function u(){l(),i=n.setWalkmeTimeout(u,1e4)}function l(){try{for(var t in e.cache){var n=e.cache[t],r=c(n);r&&delete e.cache[t]}}catch(i){}}function c(e){try{if(e&&e.handle&&e.handle.elem)return d(e.handle.elem);if(e&&e.data&&e.data.iframe)return d(mtjQuery(e.data.iframe)[0])}catch(t){return!0}return!1}function d(e){var t=e.documentElement;t&&(e=e.documentElement);var n=e.parentNode;if(!n)return!0;var r=e.ownerDocument,i=r.defaultView||r.parentWindow;if(!i)return!0}o()}o.register("wmjQuerySafe").asInstance(Vu);function Vu(e){return o.create("wmjQuerySafeProxy",{element:e})}var Gu=Hu();o.register("wmjQuerySafeProxy").asCtor(Gu).asProto().dependencies("wmjQuery, wmjQuerySafe, EventBinder");function Hu(){e.prototype.isSafe=t,e.prototype.getDocument=n,e.prototype.off=r,e.prototype.stop=i("stop"),e.prototype.remove=i("remove"),e.prototype.find=i("find"),e.prototype.show=i("show");function e(e,t,n,r){this.wmjQuery=e,this.wmjQuerySafe=t,this.eventBinder=n,this._element=e(r.element)}function t(){try{return this._element[0].ownerDocument,!0}catch(e){return!1}}function n(){var e=this,t=this;return this.safeExecute(function(){t=e.wmjQuerySafe(e._element[0].ownerDocument)}),t}function r(e,t){var n=this;return this.safeExecute(function(){n.eventBinder.unbind(n._element,e,t)}),this}function i(e){return function(){var t=this,n=arguments,r=t;return t.safeExecute(function(){var i=t._element[e].apply(t._element,n);r=t.wmjQuerySafe(i)}),r}}return e.prototype.safeExecute=function(e){try{e()}catch(t){this._element=this.wmjQuery()}},e}o.register("PopupStepElementProvider").asCtor(ju).dependencies("TopContainerProvider");function ju(e){var t=this;t.get=n;function n(t){var n=e.getTopContainer();if(0==n.length)return!1;var r=mtjQuery("#walkme-popup-element",n);if(r.length<=0||t){var i="walkme-popup-element";t&&(i+="-"+r.length),r=mtjQuery(n[0].ownerDocument.createElement("div")),r.attr({id:i}),r.css("width","0px;"),r.css("height","0px;"),mtjQuery(n.append(r))}return r}}o.register("UserGuidContainer").asCtor(Yu).dependencies("CommonUtils, ArrayUtils, SettingsFile");function Yu(e,t,n){var r=this;r.getUserGuid=a,r.setUserGuid=s,r.getAllUserGuids=u;var i=null,o=[];function a(){return i}function s(n){n=e.defaultValue(n,"No-User-Guid"),t.inArray(n,o)==-1&&o.push(n),i=n}function u(){return n.getAllUserGuids()||o}}o.register("AnalyticsPropertiesManager").asCtor(zu).dependencies("SiteConfigManager, ValueProviderFactory");function zu(e,t){var n=this;n.setPredefinedPropertyValue=a,n.getPropertyValue=s,n.init=o;var r;function i(){r={}}function o(){var n=e.get().Settings;if(n&&n.analyticsProperties)for(var i=0;i<n.analyticsProperties.length;i++){var o=n.analyticsProperties[i],a=t.get(o);r[o.name]=a}}function a(e,n){var i=t.getPredefinedProvider(n);r[e]=i}function s(e){if(r[e])return r[e].get();return}i.apply(this,arguments)}o.register("ValueProviderFactory").asCtor(Qu).dependencies("FeaturesManager, Consts, ValueCalculatorFactory");function Qu(e,t,n){var r=this;r.get=a,r.getPredefinedProvider=u;function i(){}function a(n){var r=s(n);if(e.isFeatureEnabled(t.FEATURES.StickyCustomVars)){var i={calculateValueFunc:r};return o.create("StickyValueProvider",i)}if(e.isFeatureEnabled(t.FEATURES.StrongStickyCustomVars)){var i={calculateValueFunc:r};return o.create("StrongStickyValueProvider",i)}var a=r();return u(a)}function s(e){var t=n.get(e.calculationMethod),r=e.variable,i=function(){return t.calculate(r)};return i}function u(e){var t={value:e};return o.create("PredefinedValueProvider",t)}i.apply(this,arguments)}o.register("StickyValueProvider").asCtor(Ku).asProto();function Ku(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc,a()}function o(){return void 0===n&&a(),n}function a(){n=r()}i.apply(this,[e])}o.register("StrongStickyValueProvider").asCtor(qu).asProto();function qu(e){var t=this;t.get=o;var n,r;function i(e){r=e.calculateValueFunc}function o(){return a(),n}function a(){n=r()}i.apply(this,[e])}o.register("PredefinedValueProvider").asCtor(Xu).asProto();function Xu(e){var t=this;t.get=i;var n;function r(e){n=e.value}function i(){return n}r.apply(this,[e])}o.register("TopMostCssStyleSettter").asCtor(Ju);function Ju(){var e=this;e.setTopMostCssStyle=t;function t(e,t){e.css("position","absolute"),e.css("z-index",t),e.addClass("SkipThisFixedPosition")}}o.register("ElementCenterer").asCtor($u).dependencies("FramesetsUtils, BiggestFrameProvider, PositionHelper, FacebookCanvasIndicator");function $u(e,t,n,r){var i=this;i.centerElementInPage=a;function o(){}function a(i,o,a,l){var c=window;if(e.shouldHandlePageAsFramesets()&&(c=t.getBiggestFrame().contentWindow),r.isInFacebookCanvas())return u(i,o);var d={top:0,left:0};a&&(d.top+=a.top,d.left+=a.left);var p=n.calculateOffset(i.parent()[0],c);return d.top-=p.top,d.left-=p.left,s(i,o,mtjQuery(c).scrollLeft(),mtjQuery(c).scrollTop(),mtjQuery(c).width(),mtjQuery(c).height(),d,l)}function s(e,t,n,r,i,o,a,s){if(void 0==a||null==a)var a={top:0,left:0};n>500&&(n=0);var u=(o-mtjQuery(e).outerHeight())/2+r+a.top,l=(i-mtjQuery(e).outerWidth())/2+n+a.left;if(u=Math.round(u>0?u:0),l=Math.round(l>0?l:0),Math.abs(u-mtjQuery(e).offset().top)<2&&Math.abs(l-mtjQuery(e).offset().left)<2)return;u+="px",l+="px",mtjQuery(e).css({position:"absolute",margin:0}),t?(s=s?s:{duration:400},mtjQuery(e).animate({top:u,left:l},s)):mtjQuery(e).css({top:u,left:l})}function u(e,t){FB.Canvas.getPageInfo(function(n){l(e,t,n)})}function l(e,t,n){s(e,t,n.scrollLeft,n.scrollTop,mtjQuery(window).width(),n.clientHeight)}o()}o.register("PositionHelper").asCtor(Zu).dependencies("Lib, UiUtils, Logger, CommonUtils, Consts, FeaturesManager, ElementUtils, ScrollUtils, DocumentUtils, FindElementCornerFunctions, CommonEvents, HostData, FrameContentsProvider, BiggestFrameProvider, FramesetsUtils, SettingsValuesRetriever");function Zu(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m){var v,S,y,E,T=this,C={ALL_POINTS:0,ANY_POINT:1},b={0:"mt_visible",1:"wm_vsb_st",2:"wm_interact_any_point",3:"wm_interact_all_points"},I=5e3;function w(){v=e.expr.filters.mt_hidden,R()}T.getVisibleFilter=function(e){return":"+b[(e.Settings||e).filter||0]};function _(e){var t=0,n=0,r=mtjQuery(e),o=r.offset();if(t=o.top,n=o.left,a.isFeatureEnabled("iframepadding")&&r.is("iframe")&&(n+=parseFloat(r.css("padding-left")),t+=parseFloat(r.css("padding-top"))),e.ownerDocument){var s=P(i.getBody(e.ownerDocument)),u=P(e.ownerDocument.documentElement);t-=s.top==u.top?s.top:s.top+u.top,n-=s.left==u.left?s.left:s.left+u.left}var l={left:n,top:t};return l}function P(e){if(!e)return{top:0,left:0};return{top:e.scrollTop||0,left:e.scrollLeft||0}}function A(e){var t=0,n=0;do"FRAME"==s.getElementTagName(e)?(t+=mtjQuery(e).offset().top,n+=mtjQuery(e).offset().left):(t+=e.offsetTop||0,n+=e.offsetLeft||0),e=e.offsetParent;while(e);var r={left:n,top:t};return r}this.getPosRelativeToWindow=function(e,t,n){var r,o,a,s,u=0,c=0;for(t=t||top,n&&!window.opera&&e&&e.tagName&&"input"==e.tagName.toLowerCase()&&(u+=e.scrollLeft,c+=e.scrollTop);e;){if(o=e.ownerDocument,a=l.getDocumentWindow(o),n&&a==t){var d=i.getBody(o);u+=o.documentElement.scrollLeft||d.scrollLeft,c+=o.documentElement.scrollTop||d.scrollTop}if(s=!a||a==t,r=n?_(e):A(e),u+=r.left,c+=r.top,s)break;e=a.frameElement}var p={left:u,top:c};return p};function k(e,t){var n={};if(e.left>t.right||t.left>e.right)return null;if(e.bottom<t.top||t.bottom<e.top)return null;return n.left=Math.max(e.left,t.left),n.right=Math.min(e.right,t.right),n.top=Math.max(e.top,t.top),n.bottom=Math.min(e.bottom,t.bottom),n.height=n.bottom-n.top,n.width=n.right-n.left,n}function O(e,t){var n=t.left,r=t.top;e.left+=n,e.right+=n,e.top+=r,e.bottom+=r}function D(e,t){var n=u.getScrollOffset(t);e.left+=n.Left,e.right+=n.Left,e.top+=n.Top,e.bottom+=n.Top}this.getRectRelativeToWindow=function(e,t,n){var r,i,o,a=!1,s={left:0,top:0};for(o=e.length>1?T.getMultipleElementsRect(e):t.getBoundingClientRect(),n=n||top;!a;){r=t.ownerDocument,i=l.getDocumentWindow(r);var u=r.documentElement.getBoundingClientRect();if(o=k(o,u),!o)return o;a=!i||i==n,a||(s=i.frameElement.getBoundingClientRect(),O(o,s),t=i.frameElement)}return D(o,r),o};function N(e){var t=s.getElementViewport(e);return{height:t.height(),width:t.width(),top:t.top(),left:t.left()}}this.getDrawingArea=function(e,t,n){if(!n||T.isElementInViewport(e))return N(t?mtjQuery("body"):e);var r=mtjQuery(document);return{top:0,left:0,height:r.height(),width:r.width()}},this.isElementScrolledOut=function(e,t,n){var r=g.getFrameContents(t),i=e.offset().top,a=e.offset().left,s=e.outerHeight(),u=e.outerWidth(),l=parseInt(n);if(l==o.POSITION_TYPE.Bottom&&(i+=s),l==o.POSITION_TYPE.Right&&(a+=u),r.scrollTop()>i||t.height()+r.scrollTop()<i)return!0;if(r.scrollLeft()>a||t.width()+r.scrollLeft()<a)return!0;return!1},T.getCenterPositionByBounds=function(e){var t=e.left+e.width/2,n=e.top+e.height/2;return{left:t,top:n}},T.getEmbedInElementPosition=function(e,t){var n={},r=parseInt(m.getSettingsValue(t,"leftOffset",0)),i=parseInt(m.getSettingsValue(t,"topOffset",0));return x(e,n,{top:i,left:r}),n},this.getElementBounds=function(e,t,n,r){var o={},a=e[0];if(t){var s=T.getMultipleElementsRect(e),u=i.getElementDocument(e),l=T.getOffsetRect(a,u,n);o=T.getElementBoundsWithRectAndOffset(s,l)}else{var c=T.getPosRelativeToWindow(a,n,!0);x(e,o,c)}return o=J(o,r)},T.getMultipleElementsRect=function(e){for(var t,n,r,i,o,a=0;a<e.length;a++)o=e[a].getBoundingClientRect(),(void 0===t||o.left<t)&&(t=o.left),(void 0===n||o.top<n)&&(n=o.top),(void 0===i||o.bottom>i)&&(i=o.bottom),(void 0===r||o.right>r)&&(r=o.right);return{top:n,left:t,right:r,bottom:i}};function x(e,t,n){t.top=n.top,t.left=n.left;var r=e.outerWidth(),i=e.outerHeight();if(e.length>1){var o=T.getMultipleElementsRect(e);r=o.right-o.left,i=o.bottom-o.top}t.height=i,t.width=r,t.bottom=t.top+t.height,t.right=t.left+t.width}T.isElementVisible=function(t,n){var r=!0;try{t[0].tagName}catch(i){r=!1}if(r){n=n||0;var o=":"+b[n];e(t).filter(o).length!=e(t).length&&(r=!1)}return r},T.registerResizeAndScrollEvents=function(e){var t=e.element,n=e.offset,r=e.eventNameSuffix,i=h.shouldHandlePageAsFramesets()?f.getBiggestFrame().contentWindow:window;L(i,t,n,r)},T.getWindowSize=function(){var t=e(h.shouldHandlePageAsFramesets()?f.getBiggestFrame().contentWindow:window),n={height:t.height(),width:t.width()};return n};function L(e,n,r,i){T.removeScrollAndResizeEvents(i);var o=F(i);mtjQuery(e).bind(o,function(){n.stop(!1,!0),r=M(r,i),t.centerElementInPage(n,!0,r)})}function M(e,t){var n={offset:e,eventName:t,defaultValue:e};return d.raiseEvent(o.EVENTS.Scrolls.ScrollFired,n),n.returnValue}T.removeScrollAndResizeEvents=function(e){var n=window;if(t.shouldHandlePageAsFramesets()){var r=f.getBiggestFrame();null!=r&&(n=r.contentWindow)}var i=F(e);mtjQuery(n).unbind(i)},T.centerElementInParent=function(e,t){var n=t.outerHeight()/2-e.outerHeight()/2,r=t.outerWidth()/2-e.outerWidth()/2;e.css("top",n+"px"),e.css("left",r+"px")};function F(e){return e=e?e:"walkme",Nf("scroll.{0}, resize.{0}, scrollstop.{0}, orientationchange.{0}",e)}function R(){B("wm_hdn_st",function(t){var n=e(t);return n.is(":mt_hidden")||!S&&!H(n)}),B("wm_vsb_st",function(t){return!e.expr.filters.wm_hdn_st(t)}),B("wm_interact_any_point",function(e){return Y(e,C.ANY_POINT)}),B("wm_interact_all_points",function(e){return Y(e,C.ALL_POINTS)})}T.extendVisibilityFilters=function(){S=!1,e.expr.filters.mt_hidden=v;e.expr.filters.mt_hidden;if(a.isFeatureEnabled("strongMtVisible")&&(S=!0,V(function(e){return!H(e)})),a.isFeatureEnabled("anyPointInteractable")&&V(function(e){return!Y(e[0],C.ANY_POINT)}),a.isFeatureEnabled("nonVisibleIframe")){var t=function(e){var t=e.data("iframe");return!(!t||!t.is(":mt_hidden"))};V(t),G(t)}if(a.isFeatureEnabled("visibleOpacity")&&(V(U),G(U)),window._walkmeInternals&&window._walkmeInternals.customMtHiddenFuncs)for(var n=window._walkmeInternals.customMtHiddenFuncs,r=n.length-1;r>=0;r--)V(n[r])};function B(t,n){e.expr.filters[t]=n}function U(t){if(W(t))return!0;var n=!1;return t.parents().each(function(){if(W(e(this)))return n=!0,!1}),n}function W(e){if(0==e.css("opacity"))return!0;var t=e[0].filters;return t&&t.alpha&&0===t.alpha.opacity}function V(t){var n=e.expr.filters.mt_hidden;e.expr.filters.mt_hidden=function(r){return n(r)||t(e(r))}}function G(t){V(t);var n=e.expr.filters.wm_vsb_st,r=e.expr.filters.wm_interact_any_point,i=e.expr.filters.wm_interact_all_points;e.expr.filters.wm_vsb_st=function(r){return n(r)&&!t(e(r))},e.expr.filters.wm_interact_any_point=function(n){return r(n)&&!t(e(n))},e.expr.filters.wm_interact_all_points=function(n){return i(n)&&!t(e(n))}}function H(t){for(var n=t.parents().add(t),r=n.length-1;r>0;r--)if(j(e(n[r]),e(n[r-1])))return!1;return!0}function j(e,t){if("absolute"==e.css("position"))return!1;if("hidden"!=t.css("overflow"))return!1;var n=de(t,"border-top"),r=de(t,"padding-top"),i=t.offset().top,o=n+r+i,a=t.height(),s=o+a,u=t.offset().left,l=u+t.width();if(o==s)return!0;var c=de(e,"border-top"),d=de(e,"padding-top"),p=e.offset().top,g=c+d+p,f=e.height(),h=g+f,m=e.offset().left,v=m+e.width(),S=h<o,y=g>s,E=v<u,T=m>l;return S||y||E||T}function Y(t,n){var r=t.ownerDocument,i=e(t),o=i.parents("html"),a=i.parents("body"),s=a.scrollTop()||o.scrollTop(),u=a.scrollLeft()||o.scrollLeft(),l={element:i,html:o,topScroll:s,leftScroll:u,workingDocument:r};return n==C.ALL_POINTS?z(l):Q(l)}function z(e){for(var t=c.length-1;t>=0;t--)if(!K(c[t],e))return!1;return!0}function Q(e){for(var t=c.length-1;t>=0;t--)if(K(c[t],e))return!0;return!1}function K(t,n){var r=n.element,i=t(r),o=i.x-n.leftScroll,a=i.y-n.topScroll,s=n.workingDocument.elementFromPoint(o,a);return s==r[0]||e.contains(r[0],s)}T.findNearestSelfOrParentByType=function(t,n){var r=t[0];if(!r)return;for(var i=[],o=0;o<n.length;o++)i.push(n[o].toLowerCase());for(var a=r.tagName.toLowerCase();"body"!=a&&"frameset"!=a&&"head"!=a;){if(e.inArray(a,i)>-1)return e(r);r=r.parentNode,a=r.tagName.toLowerCase()}},T.findFirstSelfOrChildByType=function(e,t){if(!e.exist())return;var n=t.join(", ");if(e.is(n))return e.first();var r=e.children(n).first();if(r.exist())return r;if(e.is("table"))return q(e,t)};function q(e,t){var n;if(n=T.findFirstSelfOrChildByType(e.children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("thead").children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("tbody").children("tr"),t),n&&n.exist())return n;if(n=T.findFirstSelfOrChildByType(e.children("tfoot").children("tr"),t),n&&n.exist())return n}T.getColumn=function(t){var n=[],r=T.findNearestSelfOrParentByType(t,["table"]);if(!r)return;var i,o=["td","th"];if(i=t.is(o)?t:t.is("table")||t.is("tr")?T.findFirstSelfOrChildByType(t,o):T.findNearestSelfOrParentByType(t,o),!i)return;var a,s,u=null,l=i.index(),c=e([]);e.merge(c,r.children("tr")),e.merge(c,r.children("thead, tbody, tfoot").children("tr"));for(var d=0;d<c.length;d++)a=c[d].cells[l],a&&(null==u&&(u=a.colSpan),a.colSpan<u&&(n.length=0,u=a.colSpan),a.colSpan==u&&(s=e(a),s.height()&&s.width()&&n.push(a)));return e(n,r)},this.getBodyInheritedMargin=function(){var e={top:0,left:0};if(!a.isFeatureEnabled("calcInheritedMargin"))return e;var t=!1,n=mtjQuery("body").find("div").filter(function(){if(t)return!1;var e=mtjQuery(this);if("relative"!=e.css("position"))return!1;var n=null,r=null,i=parseInt(e.css("margin-top")),o=0!=i&&parseInt((r=e.position()).top)==-1*parseInt((n=e.offset()).top),a=!1;if(!o){var s=parseInt(e.css("margin-left"));a=0!=s&&parseInt(null!=r?r.left:e.position().left)==-1*parseInt(null!=n?n.left:e.offset().left)}return t=(o||a)&&X(e)}).eq(0);return n.length>0&&(e={top:parseInt(n.css("margin-top")),left:parseInt(n.css("margin-left"))}),e};function X(e){var t=!0;return e.parentsUntil("html").each(function(e,n){"relative"!=mtjQuery(n).css("position")&&(t=!1)}),t}function J(e,t){var n=parseInt(m.getSettingsValue(t,"leftOffset",0)),r=parseInt(m.getSettingsValue(t,"topOffset",0));return e.top=e.top+r,e.left=e.left+n,e.right=e.right+n,e.bottom=e.bottom+r,e}T.fixFirefoxAutoMarginBug=function(e,t,r,i){if(p.isFirefox&&$(t,r)){e.top+=T.tryParsingStyleValue(r.marginTop);
var o=n.getStyle(t.parentElement,i),a=(T.tryParsingStyleValue(o.width)-T.tryParsingStyleValue(r.width))/2;if(a<0)return;e.left+=a}};function $(e,t){if("BODY"==e.tagName&&"relative"==t.position&&"auto"==e.style.marginLeft&&"auto"==e.style.marginRight&&0==T.tryParsingStyleValue(t.marginLeft))return!0}T.tryParsingStyleValue=function(e){return"string"==typeof e&&(e=e.replace("px","")),isNaN(e)?0:parseInt(e)};function Z(e,t){return(new Date).getTime()-e<t}T.getCollapsedMargin=function(){return y&&Z(E,I)?y:(y=ee(),E=(new Date).getTime(),y)};function ee(){var t={top:0,left:0};if(!a.isFeatureEnabled("collapsedMargins"))return t;var n=e("body"),r=0;if(te(n)){n.css("margin-top");n.find("> div").each(function(){var t=e(this),n=t.offset().top,i=t.position().top;if(parseInt(t.css("margin-top"),10)>0){var o=n-i;o>r&&(r=o)}})}return t.top+=r,t}function te(e){return e.offset().top<=0&&"relative"==e.css("position")&&(!p.isIE()||"visible"==e.css("overflow-x")&&"visible"==e.css("overflow-y"))&&(!p.isIEBrowser(9)||ne(e))}function ne(t){try{var n=e("<div />");n.important({position:"absolute",top:0,visibility:"hidden"}),t.append(n);var r=n.offset().top;return n.remove(),r>0}catch(i){return!1}}T.getOffsetRect=function(e,t,n){try{var o=i.getBody(t),a=u.getScrollTop(t,o),s=u.getScrollLeft(t,o),l=T.calculateOffset(o,n);return a-=l.top,s-=l.left,{top:Math.round(a),left:Math.round(s)}}catch(c){r.error(c)}},T.calculateOffset=function(e,t){for(var r=e,i=n.getStyle(e,t);i&&"static"==i.position;)r=r.parentNode,i=n.getStyle(r,t);var o=T.getBodyInheritedMargin();o.top=T.tryParsingStyleValue(o.top),o.left=T.tryParsingStyleValue(o.left);var a={top:o.top,left:o.left},s=T.getCollapsedMargin();if(a.top+=s.top,a.left+=s.left,i)for(ie(a,r,i,"margin"),oe(a,r,i),re(a,r,i),T.fixFirefoxAutoMarginBug(a,r,i,t),r=r.parentNode,i=n.getStyle(r,t);i;)ie(a,r,i,"margin"),ie(a,r,i,"padding"),oe(a,r,i),re(a,r,i),r=r.parentNode,i=n.getStyle(r,t);return a};function re(e,t,n){"static"!=n.position&&(e.top+=T.tryParsingStyleValue(n.top),e.left+=T.tryParsingStyleValue(n.left))}function ie(e,t,n,r){e.top+=T.tryParsingStyleValue(n[r+"Top"]),e.left+=T.tryParsingStyleValue(n[r+"Left"])}function oe(e,t,n){if(/(html|body)/i.test(t.tagName))return;e.top+=ae(n.borderTopWidth),e.left+=ae(n.borderLeftWidth)}function ae(e){var t=1,n=3,r=5,i=0;switch(e){case"thin":i=t;break;case"medium":i=n;break;case"thick":i=r;break;default:i=Math.round(parseFloat(e))}return i}T.getElementBoundsWithRectAndOffset=function(e,t){var n=e.left+t.left,r=e.top+t.top,i=e.right-e.left,o=e.bottom-e.top,a=e.right+t.left,s=e.bottom+t.top;return{top:r,left:n,width:i,height:o,right:a,bottom:s}},T.isElementInViewport=function(t,n){n=e.extend({},o.DEFAULT_POSITIONS,n);var r=ue(t),i=t.offset();r.top+=i.top,r.left+=i.left,T.fixOffsetForIE(t,r);var u=a.isFeatureEnabled("fixIframeScroll")?s.getElementViewport(t):s.getWindowViewport(),l=a.isFeatureEnabled("bodyClientHeight")?e("body")[0].clientHeight:u.height(),c=u.top()+n.top,d=u.left()+n.left,p=l-n.bottom+(u.top()-0),g=u.width()-n.right+(u.left()-0),f=ce(r.top,r.left+t.width(),r.top+t.height(),r.left,c,g,p,d);return f};function se(e){try{if("1.7.1"!=e.jquery)return;var t=e[0].ownerDocument.documentMode;if(7==t||8==t){var n=e.data("iframe");if(n&&"FRAME"==n[0].tagName)return!0}}catch(r){}}T.fixOffsetForIE=function(e,t){if(se(e)){var n=e[0].ownerDocument,r=Ir.getBody(n);t.top+=r.scrollTop||n.documentElement.scrollTop,t.left+=r.scrollLeft||n.documentElement.scrollLeft}};function ue(e){for(var t=le(e),n={top:0,left:0},r=0;r<t.length;r++){var o=t[r].offset(),a=i.getBody(t[r][0].contentWindow.document);n.top+=o.top,n.top-=a.scrollTop||t[r][0].contentWindow.document.documentElement.scrollTop,n.left+=o.left,n.left-=a.scrollLeft||t[r][0].contentWindow.document.documentElement.scrollLeft}return n}function le(e,t){var n=e.data("iframe");return t||(t=[]),n&&(t.push(n),le(n,t)),t}function ce(e,t,n,r,i,o,a,s){return n<=a&&e>=i&&r>=s&&t<=o}function de(e,t){var n=e.css(t);return n?parseFloat(n):0}w.apply(null,arguments)}var el=function(){function e(e,t){this.PLACE_HOLDER="%@",this.LocalSVNRevision="$Rev: 4206 $",this._win=e,this._mobileCallbacksHandler=t}return e.prototype.message=function(e,t,n,r){this.registerHandler(n,e,t,r)},e.prototype.getParams=function(e,t,n){var r={actionId:t,success:this._mobileCallbacksHandler.getSuccessCallback(e,t),fail:this._mobileCallbacksHandler.getFailCallback(e,t),close:this._mobileCallbacksHandler.getCloseCallback(e,t)};return n&&(r.data=n),r},e.prototype.registerHandler=function(e,t,n,r){this._mobileCallbacksHandler.registerMobileCallbacks(e,t,r),this.postMessage(this.getParams(t,e,n))},e}(),tl=function(e){r(t,e);function t(){e.apply(this,arguments)}return t.prototype.getSdkVersion=function(){return this._win.iOS&&this._win.iOS.SDKVersionName},t.prototype.getAppVersionCode=function(){return this._win.iOS&&this._win.iOS.appVersionCode},t.prototype.postMessage=function(e){this._win.webkit&&this._win.webkit.messageHandlers[L.MOBILE_COMMAND_NAME].postMessage(e)},t}(el);R.register(L.PLATFORM.iOS,function(){o.register("MobileUtils").asCtor(tl).dependencies("win,MobileCallbacksHandler")});var nl=function(e){r(t,e);function t(){e.apply(this,arguments)}return t.prototype.getSdkVersion=function(){return this._win.android&&this._win.android.SDKVersionName},t.prototype.getAppVersionCode=function(){return this._win.android&&this._win.android.appVersionCode},t.prototype.postMessage=function(e){this._win.NativeBridge&&this._win.NativeBridge.call(L.MOBILE_COMMAND_NAME,wf(e))},t}(el);R.register(L.PLATFORM.Android,function(){o.register("MobileUtils").asCtor(nl).dependencies("win,MobileCallbacksHandler")}),o.register("DomEventDispatcher").asCtor(rl).dependencies("HostData");function rl(e){var t,n=this;function r(){if(!e.isIEBrowser())try{o("click");t=!0}catch(n){t=!1}}n.dispatchEvent=function(e,n){if(t){var r=o(n);e.dispatchEvent(r)}else if(window.dispatchEvent){var r=i(n);e.dispatchEvent(r)}else"input"==n&&(n="propertychange"),e.fireEvent("on"+n)};function i(e){var t=document.createEvent("UIEvents");return t.initUIEvent(e,!0,!0,window,1),t}function o(e){return new Event(e,{bubbles:!0})}r.apply(null,arguments)}o.register("InputGenerator").asCtor(il).dependencies("TextInjector, DomEventDispatcher, Logger, TimerManager, CssInjector, HostData, Consts, CommonEvents");function il(t,n,r,i,o,a,s,u){var l=this;l.click=g,l.hover=f,l.focus=h,l.text=m,l.select=v,l.selectByText=S;var c=n.dispatchEvent,d={MouseEnter:"mouseenter",MouseOver:"mouseover"};function p(){}function g(e,t){w(e)&&l.select(e.parent(),e[0].value),_(e),t&&t()}function f(e,t){y(e);var n=o.addElementClass(e,":hover");n||T(e.is("a")&&e.parent().is("li")?e.parent():e),t&&t()}function h(e,t){c(e[0],"focus"),e.focus(),t&&t()}function m(e,n,r,o,s){r=r||0,c(e[0],"focus"),i.setWalkmeTimeout(function(){if(s)var u=s.ElementDescription;t.injectText(e,n,u),a.isIEBrowser()||c(e[0],"paste"),c(e[0],"input"),i.setWalkmeTimeout(function(){c(e[0],"change"),c(e[0],"blur"),o&&o()},r)},r)}function v(e,t,n){e.val()!=t&&(c(e[0],"focus"),e.val(t),c(e[0],"change")),n&&n()}function S(t,n,r){var i=t.find("option:selected");if(i.text()!=n){c(t[0],"focus");for(var o=t[0].options,a=0;a<o.length;a++)if(o[a].text==n){e(o[a]).attr("selected","selected"),c(t[0],"change");break}}r&&r()}function y(t){var n=t.closest("a");t=0!==n.length?n:t,e.each(d,function(n,r){C(t,r,e),window.jQuery&&C(t,r,jQuery),b(t,r)})}function E(e,t){switch(t){case d.MouseOver:e.trigger("mouseover");break;case d.MouseEnter:default:e.trigger("mouseenter")}}function T(t){var n=t.find("*:mt_hidden");n.filter(function(){return"none"==e(this).css("display")}).css("display","block"),n.css("visibility","visible"),n.css("opacity","1")}function C(t,n,r){var i=I(t,!0);e.each(i,function(e,t){t=r(t),E(t,n)})}function b(t,n){var r=I(t,!0);e.each(r,function(e,t){c(t,n)})}function I(e,t){var n=e.find("*:mt_visible");return t&&n.push(e[0]),n}function w(e){return e.is("option")&&e.parent().is("select")}function _(e){if(!e[0])return;c(e[0],"mousedown"),c(e[0],"mouseup"),e.trigger("mouseover"),e[0].click(),u.raiseEvent(s.EVENTS.Walkthrus.InputGeneratedClick,{element:e})}p.apply(null,arguments)}o.register("TextInjector").asCtor(ol);function ol(){var e=this;function t(){}e.injectText=function(e,t){e.val(t)},t()}var al=function(){function e(){this._overlayManager=o.get("OverlayManager"),this._uiUtils=o.get("UiUtils"),this._canDisplayOverlay=this._uiUtils.canDisplayOverlay()}return e.prototype.setUiObject=function(e){this._uiObject=e},e.prototype.setSettings=function(e){this._settings=e},e.prototype.getOverlay=function(){if(this._canDisplayOverlay&&this._settings.overlay){var e=this._settings.overlay.opct,t=this._settings.overlay.color;return this._overlay=this._overlay||this._overlayManager.create(this._uiObject,e,t),this._overlay}},e.prototype.removeOverlay=function(){this._canDisplayOverlay&&this._overlay&&this._overlay.remove()},e}();o.register("PopupUIUtil").asCtor(al).asProto();var sl=function(){function n(e){this._methods={},this._mobileCallbacksHandler=e}return n.prototype.createEventFunction=function(t){var n="",r=e.proxy(function(r,i){var o=this._methods[i.funcName];o=o.slice(0,-2),n+=o;var a=e.extend(!0,{},i.data),s=wf(a)||"",u="";if(i.data&&i.data.libAction){var l="_walkmeInternals.callbacks['"+t+"']['"+L.MOBILE_COMMAND_NAME+"']['"+r+"']['"+i.eventName+"']()";a.action=l,delete a.libAction,s=wf(a)}var c=wf(this._mobileCallbacksHandler.getSuccessCallback(t,i.actionId)),d=wf(this._mobileCallbacksHandler.getFailCallback(t,i.actionId)),p='{ "actionId": '+i.actionId+(s&&', "data": '+s)+(c&&', "success": '+c)+(d&&', "fail": '+d)+"}";u+=this.createCallString(p),n+=u+"};"},this);return e.safeEach(this._events,r),n},n.prototype.registerCallbacks=function(e,t,n,r){this._mobileCallbacksHandler.registerMobileCallbacks(t,e,r)},n.prototype.bindEventsToUI=function(t){e.safeEach(this._events,e.proxy(function(e,n){t.find(e).add(t).filter(e).attr("on"+n.eventName,n.funcName+"()")},this))},n.prototype.registerEvent=function(e,t,n,r,i){this._events=this._events||{},this._events[e]={funcName:i,actionId:n,eventName:t,data:r},this._methods[i]=this._methods[i]||"\nvar "+i+"= function(){ };"},n.prototype.registerScripts=function(t){var n=this;e.safeEach(this._events,function(e,r){r.data.libAction&&n.createEventInLib(t,e,r.eventName,r.data.libAction)})},n.prototype.createEventInLib=function(e,n,r,i){var o=t.callbacks[e]=t.callbacks[e]||{},a=o[L.MOBILE_COMMAND_NAME]=o[L.MOBILE_COMMAND_NAME]||{},s=a[n]=a[n]||{};s[r]=i},n}(),ul=function(){function n(n){this.PLACE_HOLDER="%@",this.createCallback=function(n,r,i,o){var a=function(a,s){delete t.callbacks[i][o+""],e.isEmptyObject(t.callbacks[i])&&delete t.callbacks[i],r[n].callback(a,s)};return a},this._constsDi=o.get("Consts"),t.callbacks=t.callbacks||{},t.callbacks.log=e.proxy(function(e){this.postMessage({actionId:-1,data:{log:e}})},this),t.callbacks.NativeAppUIChange=e.proxy(function(e){n.triggerUIChange()},this)}return n.prototype.getSuccessCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].success('+this.PLACE_HOLDER+")",r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}';return r},n.prototype.getFailCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+t+'"].fail('+this.PLACE_HOLDER+")",r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+t+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+t+" on "+e+'")}';return r},n.prototype.getCloseCallback=function(e,t){var n='_walkmeInternals.callbacks["'+e+'"]["'+L.MOBILE_COMMANDS.VIEW.externalClose+'"].close("'+e+'","'+this.PLACE_HOLDER+'")',r='if (_walkmeInternals.callbacks["'+e+'"] && _walkmeInternals.callbacks["'+e+'"]["'+L.MOBILE_COMMANDS.VIEW.externalClose+'"]) {'+n+'}else {_walkmeInternals.callbacks.log("callback does not exist in _walkmeInternals.callbacks. cannot perform '+L.MOBILE_COMMANDS.VIEW.externalClose+" on "+e+'")}';return r},n.prototype.registerMobileCallbacks=function(e,n,r){var i=t.callbacks[n]=t.callbacks[n]||{};this.setCallbackWrapper(i,e,n,r)},n.prototype.setCallbackWrapper=function(e,t,n,r){var i={success:function(){},fail:function(){}};if(r)for(var o=0;o<r.length;o++)switch(r[o].name){case"success":i.success=this.createCallback(o,r,n,t);break;case"fail":i.fail=this.createCallback(o,r,n,t);break;case"close":e[L.MOBILE_COMMANDS.VIEW.externalClose]={close:this.createCallback(o,r,n,t)}}e[t]=i},n}();o.register("MobileCallbacksHandler").asCtor(ul).asProto().dependencies("UIChangeTracker");var ll=function(e){r(t,e);function t(t){e.call(this,t)}return t.prototype.createCallString=function(e){var t='window.webkit && webkit.messageHandlers["'+L.MOBILE_COMMAND_NAME+'"].postMessage('+e+");";return t},t}(sl);R.register(L.PLATFORM.iOS,function(){o.register("MobileEventsRegistrationsHandler").asCtor(ll).asProto().dependencies("MobileCallbacksHandler")});var cl=function(e){r(t,e);function t(t){e.call(this,t)}return t.prototype.createCallString=function(e){var t='window.NativeBridge && NativeBridge.call("'+L.MOBILE_COMMAND_NAME+'", '+wf(e)+");";return t},t}(sl);R.register(L.PLATFORM.Android,function(){o.register("MobileEventsRegistrationsHandler").asCtor(cl).asProto().dependencies("MobileCallbacksHandler")}),o.register("GuidGenerator").asCtor(dl);function dl(){var e=this;e.generateGuid=t;function t(e){var t=e?"":"-";return n()+n()+t+n()+t+n()+t+n()+t+n()+n()+n()}function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}}o.register("BalloonUtils").asCtor(pl).dependencies("Consts, HostData, CommonUtils, CdnServer");function pl(e,t,n,r){var i=this;i.setStyleForBalloon=function(t,n,o){t.css("border",""+n.BalloonBorderWidth+"px solid "+n.BorderColor),i.fixGradientColorsInConfiguration(n,"Color"),i.fixGradientColorsInConfiguration(n,"BalloonColor2");var a=void 0!=n.BalloonColor2?n.BalloonColor2:n.Color,s=void 0!=n.BalloonRadius?n.BalloonRadius:15,u=""+s+"px";if(t.css("-moz-border-radius",u),t.css("-webkit-border-radius",u),t.css("border-radius",u),n.Color==a?t.css("background",n.Color):(t.css("background","-moz-linear-gradient(top, "+n.Color+", "+a+")"),t.css("background","-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+n.Color+"), color-stop(100%,"+a+"))"),t.css("background","-webkit-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-o-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","-ms-linear-gradient(top, "+n.Color+" 0%,"+a+" 100%)"),t.css("background","linear-gradient(to bottom, "+n.Color+" 0%,"+a+" 100%)"),t.css("filter","progid:DXImageTransform.Microsoft.gradient( startColorstr='"+n.Color+"', endColorstr='"+a+"',GradientType=0 )"),t.css("background-image").indexOf("gradient")==-1&&(t.css("background-image","url('"+r.get()+"/player/resources/images/spacer.gif')"),t.css("background-repeat","repeat")),i.isGradientWithBorderRadiusCompatible()||t.css("border-radius","0px")),!o){var l="0px 0px";switch(parseInt(n.Position)){case e.POSITION_TYPE.Top:l="-3px -3px";break;case e.POSITION_TYPE.Right:l="4px -4px";break;case e.POSITION_TYPE.Bottom:l="4px 4px";break;case e.POSITION_TYPE.Left:l="-4px 4px"}var c=" 3px rgba(0, 0, 0, 0.2)";t.css("-moz-box-shadow",l+c),t.css("-webkit-box-shadow",l+c),t.css("box-shadow",l+c)}},i.fixGradientColorsInConfiguration=function(e,n){e[n]&&"transparent"!=e[n]||(e[n]=t.isIE()?"#00000000":"transparent")},i.isGradientWithBorderRadiusCompatible=function(){return!t.isIE(9,"lte")},i.fixConfiguration=function(e){return e.BalloonColor2=n.isDefined(e.BalloonColor2)?e.BalloonColor2:e.Color,e.ButtonBgColor2=n.isDefined(e.ButtonBgColor2)?e.ButtonBgColor2:e.ButtonBgColor,e.BalloonBorderWidth=n.isDefined(e.BalloonBorderWidth)?parseInt(e.BalloonBorderWidth):1,e.BalloonButtonRadius=n.isDefined(e.BalloonButtonRadius)?parseInt(e.BalloonButtonRadius):15,e.ButtonShadowWidth=n.isDefined(e.ButtonShadowWidth)?parseInt(e.ButtonShadowWidth):0,e.BalloonRadius=n.isDefined(e.BalloonRadius)?parseInt(e.BalloonRadius):15,e.FooterTextColor=n.isDefined(e.FooterTextColor)?e.FooterTextColor:e.HeaderColor,e}}function gl(e,t,n){var r=this;r.getElementTagName=i,r.getElementViewport=o,r.getWindowViewport=a;function i(e){var t=e.tagName;return t.toUpperCase&&(t=t.toUpperCase()),t}function o(t){var r=e.getElementDocument(t),i=n.getDocumentWindow(r),o=s(i);return o}function a(){var e=s(window);return e}function s(e){var n=e.document,r=mtjQuery(e);return r.left=function(){return t.getScrollOffset(n).Left},r.top=function(){return t.getScrollOffset(n).Top},r}}o.register("ElementUtils").asCtor(gl).dependencies("CommonUtils, ScrollUtils, DocumentUtils");function fl(){var e=this;e.getDocumentWindow=t;function t(e){return e.parentWindow||e.defaultView}}o.register("DocumentUtils").asCtor(fl);function hl(e,t,n){var r=this;r.SCROLL_MODES={Animated:0,Normal:1,None:2},r.getScrollOffset=function(t){var n=e.getBody(t),i=r.getScrollTop(t,n),o=r.getScrollLeft(t,n);return{Top:i,Left:o}},r.getScrollTop=function(e,t){return t.scrollTop||e.documentElement.scrollTop},r.getScrollLeft=function(e,t){return t.scrollLeft||e.documentElement.scrollLeft},r.jspScrollAttempt=function(t){var n=e.getJspParent(t),r=e.getClientjQuery();if(n)return r(n).data("jsp").scrollToElement(t,!0,!1),!0;return!1},r.shouldScroll=function(e,t,i){if(i!=n.STEP_TYPE.Popup&&t!=r.SCROLL_MODES.None&&"fixed"!=e.css("position"))return!0;return!1},r.isBalloonPositionVisibleRelativeToParents=function(e,n){return t.isBalloonPositionVisibleRelativeToParents(e,n)}}o.register("ScrollUtils").asCtor(hl).dependencies("CommonUtils, BalloonPositionVisibilityChecker, Consts"),o.register("CookieValueCalculator").asCtor(ml).dependencies("CookiesManager");function ml(e){var t=this;t.calculate=n;function n(t){var n=e.getCookie(t);if(n===!1)return;return n}}o.register("JQueryValueCalculator").asCtor(vl).dependencies("JQueryElementFinder");function vl(e){var t=this;t.calculate=n;function n(t){var n=e.getjQueryElementText(t);if(""===n)return;return n}}o.register("VariableValueCalculator").asCtor(Sl).dependencies("CommonUtils");function Sl(e){var t=this;t.calculate=n;function n(t){var n=e.getWindowVar(t);return n}}o.register("LocalStorageValueCalculator").asCtor(yl).dependencies("LocalStorageService");function yl(e){var t=this;t.calculate=n;function n(t){return e?e.getItem(t):void 0}}o.register("ValueCalculatorFactory").asCtor(El).dependencies("Logger, Consts, CookieValueCalculator, JQueryValueCalculator, VariableValueCalculator, LocalStorageValueCalculator");function El(e,t,n,r,i,o){var a=this;a.get=s;function s(a){switch(a){case t.VALUE_CALCULATOR_TYPE.JQuery:return r;case t.VALUE_CALCULATOR_TYPE.Cookie:return n;case t.VALUE_CALCULATOR_TYPE.Variable:return i;case t.VALUE_CALCULATOR_TYPE.LocalStorage:return o;default:e.error(new Error("Unknown calculation method"))}}}o.register("CssClassesAppender").asCtor(Tl);function Tl(){var e=this;e.appendClasses=t;function t(e,t){if(t)for(var n=0;n<t.length;n++)e.addClass(t[n])}}o.register("ImageLoader").asCtor(Cl).dependencies("TimerManager");function Cl(t){var n=this;n.getImageSize=i;var r=100;function i(n,i){var o,a=e("<img />");a.load(s),a.attr("src",n),o=t.setWalkmeInterval(u,r);function s(){var e={width:a[0].width,height:a[0].height};i(e),clearInterval(o),a.unbind("load")}function u(){a[0].width&&a[0].height&&s()}}}function bl(n,r,i,o){var a,s=this,u="alt",l="accessibility",c="body",d="walkme-accessibility",p=1,g=27,f=32,h=800,m={TITLE:".wm-title",CONTENT:".wm-template-text",ACTION_BUTTON:".wm-blue-btn",CLOSE_LINK:".wm-close-link",CLOSE_BUTTON:".wm-close-button"},v={TITLE:1,CONTENT:2,ACTION_BUTTON:3,CLOSE_LINK:7,CLOSE_BUTTON:8};function S(){}s.init=function(){n.isFeatureEnabled(l)&&y()};function y(){t.bind("LauncherIsShown",w),t.bind("NewStepShown",P),t.bind("StepCompleted",D),t.bind("TutorialStopped",D),t.bind("show-end",A),E()}function E(){var e=window.walkme_event;window.walkme_event=function(t){if(e&&e(t),"BalloonCreated"==t.Type){var n=t.ExtraData.Element;T(n)}}}function T(t){var n=C(o,t);k(t,n.selectors,v);var r=e(n.elemWithContent);r.on("focus",function(){e(this).addClass(d)}),r.on("blur",function(){e(this).removeClass(d)});var i=e(o.CLOSE_LINK,t);I(t,i),r.keyup(b),s.setFocus(r.first())}s.setFocus=function(e){i.libSetTimeout(function(){e.focus()},h)};function C(t,n){var r={};r.elemWithContent=[],r.selectors={};for(var i in t)if(t.hasOwnProperty(i)){var o=e(t[i]+":visible",n);o.each(function(){var n=e(this);n.text()&&(r.selectors[i]=t[i],r.elemWithContent.push(n[0]))})}return r}function b(e){if(e.keyCode===f){var t=e.srcElement?e.srcElement:e.target;t.click()}}function I(t,n){n.length>0&&e(t).keyup(function(e){e.keyCode===g&&n.click()})}function w(e,t,n){var r=n.launcherDiv,i=r.attr("title"),o=n.customText?n.customText:n.name;_(r,o,i)}function _(e,t,n){var r=t;n&&(t?r+=". "+n:r=n),r&&e&&e.attr(u,r)}function P(e,t,n){if(r.isPopupStep(t)){a=document.activeElement;var i=n.Balloon.find(".walkme-custom-balloon-title");i.focus()}}function A(t,n){if(n&&n._uiComponent&&n._uiComponent.UiComponentId==p){var r=n.getUI(),i=C(m,r),o=e(i.elemWithContent);k(r,i.selectors,v);var a=e(m.CLOSE_BUTTON,r);I(r,a),o.keyup(b),s.setFocus(o.first())}}function k(t,n){t=t?t:e(c);for(var r in n)if(n.hasOwnProperty(r)){var i=e(n[r],t);v?O(i,v[r]):O(i)}}function O(e,t){if(void 0===t)for(var n=0;n<e.length;n++)i.addTabIndex(e.eq(n),0);else for(var n=0;n<e.length;n++)i.addTabIndex(e.eq(n),t+n)}function D(e,t){r.isPopupStep(t)&&a&&(a.focus(),a=null)}S.apply(null,arguments)}o.register("focusableBalloonSelectors").asInstance({TITLE:".walkme-custom-balloon-title",CONTENT:".walkme-custom-balloon-content",ACTION_BUTTON:".walkme-custom-balloon-button",CLOSE_LINK:".walkme-custom-balloon-close-button"}),o.register("JawsAccessibilityUtil").asCtor(bl).dependencies("FeaturesManager, StepUtils, CommonUtils,focusableBalloonSelectors"),o.register("Mapper").asCtor(Il);function Il(){var e=this;e.setIfDefined=t;function t(e,t,n){if(void 0===t||null===t)return;e[n]=t}}o.register("PromiseUtils").asCtor(wl);function wl(){var t=this;t.executePromiseChain=r,t.executeParallely=o,t.executeParallelyOnArray=i;function n(){}function r(t,n){for(var r=e.when(n);t.length;){var i=t[0];r=r.pipe(i),t.splice(0,1)}return r}function i(t,n){if(!t||0==t.length)return e.when();for(var r=[],i=0;i<t.length;i++){var a=t[i],s=n(a);r.push(s)}return o(r)}function o(t){return e.when.apply(e,t)}n()}o.register("ConditionTreeUtils").asCtor(_l).dependencies("NewToOldConditionConverter");function _l(e){var t=this;t.anyMatchesCondition=r,t.checkIfTreeContainsSelectedElement=i;var n="SelectedElement";function r(t,n){if(t&&t.Root&&(t=e.convert(t.Root)),!t||!t.nodeType)return!1;var i=n(t);if(i)return!0;var o=!1,a=!1;return t.leftSon&&(a=r(t.leftSon,n)),t.rightSon&&(o=r(t.rightSon,n)),a||o}function i(e){return r(e,function(e){return"Func"==e.nodeType&&0==e.funcName.indexOf(n)})}}o.register("DataFixer").asCtor(Pl).dependencies("SettingsValuesRetriever");function Pl(e){var t=this;t.fixSteps=function(e,n){for(var r=e.Steps,i=0;i<r.length;i++)t.fixStep(r[i],i,n)},t.fixStep=function(t,n,r){if(t.fixed)return;t.StepIndex=n,t.Configuration&&t.Configuration!=-1?(t.End=t.Configuration.End,t.Duration=t.Configuration.Duration,t.Delay=t.Configuration.Delay,t.Position=t.Configuration.Position):t.Configuration=r.BalloonSettings,t.IgnorePosition=void 0!=t.IgnorePosition?t.IgnorePosition:parseInt(e.getSettingsValue(t.Settings,"ignorePosition",0)),t.fixed=!0}}o.register("DictionaryUtils").asCtor(Al);function Al(){var e=this;e.getDictionarySize=n,e.getDictionaryKeys=r,e.getDictionaryValues=i,e.reverseDictionary=o;function t(){}function n(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}function r(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function i(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function o(e){if(!e)return{};var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];n=a(n)?parseFloat(n):n,t[r]=n}return t}function a(e){return!isNaN(e)}t()}o.register("LocationService").asCtor(kl).dependencies("UrlCommonStringsRemover, HtmlDecoder, win");function kl(e,t,n){var r=this;r.getUrlResourceName=i,r.getUrlLocation=s,r.getCurrentLocation=o,r.getCurrentUrlPath=a;function i(){return e.remove(n.location.href)}function o(){return n.location.href}function a(){return n.location.pathname}function s(e){return u(e)}function u(e){if(e=t.decodeHtml(e,["&"]),0==e.length)return e;return"/"==e.charAt(0)?n.location.protocol+"//"+n.location.hostname+(n.location.port?":"+n.location.port:"")+e:e}}o.register("RedirectService").asCtor(Ol).dependencies("CommonUtils, win, LocationService, UrlCommonStringsRemover");function Ol(e,t,n,r){var i=this;i.redirect=o,i.canRedirect=a,i.isUrlDifferentFromCurrentOnlyInHash=u;function o(e){var r=s();t.location=n.getUrlLocation(e);var i=s();return r.url==i.url&&r.hash!=i.hash}function a(t,i){if(!e.isValidUrl(t))return!1;var o=n.getUrlResourceName(),a=n.getUrlLocation(t);return a=r.remove(a),i||o!=a}function s(){var e=t.location.hash,n=t.location.href.replace(e,"");return{url:n,hash:e}}function u(e){var t=n.getUrlResourceName(),i=n.getUrlLocation(e);i=r.remove(i);var o=t.split("#"),a=i.split("#");if(a.length>1)return o.length>1?o[0]==a[0]&&o[1]!=a[1]:o[0]==a[0];return!1}}o.register("WalkthruRedirectService").asCtor(Dl).dependencies("RedirectService, TimerManager, WalkthruStatePersister");function Dl(e,t,n){var r=this;r.redirect=o,r.canRedirect=a,r.clearRedirectTimer=s;var i;function o(r,o){if(!e.canRedirect(r,o))return!1;return n.storeStateInCookie(),i=t.libSetTimeout(function(){e.redirect(r)},200),!e.isUrlDifferentFromCurrentOnlyInHash(r)}function a(t,n){return e.canRedirect(t,n)&&!e.isUrlDifferentFromCurrentOnlyInHash(t)}function s(){i&&i.clear()}}o.register("UrlCommonStringsRemover").asCtor(Nl);function Nl(){var e=this;e.remove=t;function t(e){return e=e.replace("http://",""),e=e.replace("https://",""),e=e.replace("www.",""),"/"==e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e}}o.register("Stack").asCtor(xl).asProto();function xl(){var e=this;e.init=r,e.peek=i,e.pop=o,e.push=a,e.clear=s,e.isEmpty=u,e.length=l,e.getAll=c;var t;function n(){r()}function r(e){t=e||[]}function i(){return u()?null:t[t.length-1]}function o(){return t.pop()}function a(e){t.push(e)}function s(){r()}function u(){return 0==l()}function l(){return t?t.length:0}function c(){return t}n()}o.register("DisabledElementsRemover").asCtor(Ll);function Ll(){var e=this;e.remove=t;function t(e,t){if(!e)return;for(var n=e.length;n-- >0;){var r=e[n];t(r)&&e.splice(n,1)}}}o.register("PlayGuidGenerator").asCtor(Ml).dependencies("GuidGenerator");function Ml(e){var t=this;t.generateNewPlayGuid=n;function n(t){var n=e.generateGuid();return n=(new Date).getTime()+"-"+t+"-"+n}}o.register("AnchorTagsFixer").asCtor(Fl).dependencies("HostData, WalkthruOnBeforeUnloadHandler");function Fl(e,t){var n=this;n.fixAnchorTagsOnBeforeUnload=i;function r(){}function i(){if(e.isIE()){var n=mtjQuery("a[href^='javascript:']"),r="click.walkme.ignoreUnload";n.off(r),n.on(r,function(){t.setIgnoreNextBeforeUnload(!0)})}}r()}o.register("DevModeAlertRaiser").asCtor(Rl).dependencies("Logger, Consts, TopContainerProvider, HostData, Lib");function Rl(e,t,n,r,i){var a=this;a.devModeAlert=u;function s(){}function u(){var t=o.get("ExternalWalkMeConfig").get("platform"),n="Lib on "+walkme_lib_notify_ServerName+": "+i.SVNRevision;if(window.walkme_lib_version&&(n+=", Version: "+walkme_lib_version),window.walkme_lib_upload_date&&(n+=", Uploaded On: "+walkme_lib_upload_date),window.walkme_lib_uploader&&(n+=", By: "+walkme_lib_uploader),r.isQuirksMode())return void e.customerLog(n,5);l(t,n)}function l(e,n){var r=e==t.PLATFORM.MobileWeb?"height: 26px; width:26px; overflow:hidden;":"",i="<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='z-index: {{{popupBalloonZindex}}}; position: fixed; top: 0; left: 30px; background-color: {{{backgroundColor}}}; font-size: 15px;"+r+" padding:0 4px;'>{{{message}}}</div>";e!==t.PLATFORM.MobileWeb?d(i,n):c(n)}function c(e){var t="#walkme-dev-mode-alert {-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}",n="<style type='text/css'>"+t+"</style>",r=n+"<div id='walkme-dev-mode-alert' class='walkme-to-remove' style='z-index: {{{popupBalloonZindex}}}; position: fixed; top: 0; left: 30px; height: 26px; width:26px; background-color: {{{backgroundColor}}}; font-size: 15px; overflow:hidden; padding:0 4px;'>{{{message}}}</div>";d(r,e);var i=mtjQuery("#walkme-dev-mode-alert");i.mouseenter(a),i.mouseleave(o),i.touchstart(a),i.touchend(o);function o(e){e.target.style.overflow="hidden",e.target.style.height="26px",e.target.style.width="26px"}function a(e){e.target.style.overflow="auto",e.target.style.height="auto",e.target.style.width="auto"}}function d(e,r){var i=yf.to_html(e,{popupBalloonZindex:t.POPUP_BALLOON_Z_INDEX,backgroundColor:p(walkme_lib_notify_ServerName),message:r}),o=n.getTopContainer(null,!0);mtjQuery("#walkme-dev-mode-alert",o).remove(),o.append(i)}function p(e){var t,e=e.toLowerCase();switch(e){case"dev":t="lightblue";break;case"qa":t="red";break;case"test":t="yellow";break;case"local":t="lightgreen";break;default:t="pink"}return t}s()}o.register("getTopContainer").dependencies("TopContainerProvider").asFunction(function(e){return e.getTopContainer}),o.register("TopContainerProvider").asCtor(Bl).dependencies("BiggestFrameProvider, FramesetsUtils, FrameContentsProvider, ElementUtils");function Bl(e,t,n,r){var i=this;i.getTopContainer=a;function o(){}function a(r,i){if(window.walkme_get_top_container){var o=window.walkme_get_top_container();if(o)return mtjQuery(o)}var a;return a=r?r.parents("body"):mtjQuery("body"),0!=a.length&&"FRAMESET"!=s(a[0])||(a=r?r.parents("html"):i||!t.shouldHandlePageAsFramesets()?mtjQuery("html"):mtjQuery("body",n.getFrameContents(mtjQuery(e.getBiggestFrame())))),a}function s(e){return r.getElementTagName(e)}o()}o.register("HtmlDecoder").asCtor(Ul).dependencies("ArrayUtils");function Ul(e){var t=this;t.decodeHtml=r;function n(){}function r(t,n){for(var r,i={"&amp;":"&","&apos;":"'","&#39;":"'","&quot;":'"',"&lt;":"<","&gt;":">"},o=[],a=0,s=0,u=0;a<t.length;){if(r=!1,"&"==t.charAt(a)){var l=t.substring(a,a+6).toLowerCase(),c=i[l];u=c?6:u;var d=t.substring(a,a+5).toLowerCase(),p=i[d];u=p?5:u;var g=t.substring(a,a+4).toLowerCase(),f=i[g];u=f?4:u;var h=f||p||c,m=e.inArray(h,n)!=-1;if(h&&m){var v=t.substring(s,a);o.push(v),o.push(h),a+=u,s=a,r=!0}}r||a++}var S=t.substring(s,a);o.push(S);var y=o.join("");return y}n()}o.register("FacebookCanvasIndicator").asCtor(Wl);function Wl(){var e=this;e.isInFacebookCanvas=n;function t(){}function n(){try{if(FB._inCanvas&&FB.Canvas.getPageInfo){if(1==window.walkme_dont_use_fb_scroll)return!1;return!0}}catch(e){return!1}}t()}o.register("LocationMatcher").asCtor(Vl).dependencies("UrlCommonStringsRemover, LocationService, StringUtils");function Vl(e,t,n){var r=this;r.isLocationMatchString=i;function i(r){var i,o,a="regexp:";if(n.startsWith(r,a)){r=r.substr(a.length),o=t.getCurrentLocation();try{i=o.match(r)}catch(s){return!1}}else{r=r.replace(new RegExp("[*]","g"),".*"),r=r.replace(/[-[\]{}()+?,\\^$|#\s]/g,"\\$&"),o=t.getUrlResourceName(),r=e.remove(r),o=o.toLowerCase(),r=r.toLowerCase();try{i=o.match(r)}catch(s){return!1}}if(null==i)return!1;return i[0]==o}}o.register("StringUtils").asCtor(Gl);function Gl(){var e=this;e.startsWith=t,e.endsWith=n;function t(e,t){return 0==e.indexOf(t)}function n(e,t){return e.length>=t.length&&e.lastIndexOf(t)+t.length==e.length}}o.register("ActionsFactory").asCtor(Hl).dependencies("Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, SmartTipSetsManager, BusinessSolutionsManager, InitiatorTypeToDeployableTypeMapper, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, HtmlDecoder, DeployablesManagerFactory, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader");
function Hl(e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,E,T,C,b,I){this.get=function(e,t,n,r){return new w[e](t||{},n,r)};var w={none:F,playBf:D,playWt:N,openMenu:P,playContent:x,playSurvey:L,shoutOut:M,redirect:R,refresh:j,branchWt:B,stopWt:U,playStep:W,openPlayerMenu:V,waitForCond:G,delay:H,passOwnership:Y,setWalkMeData:z,destroy:Q,playShuttle:K,rateApp:q,openSettings:X,browseToPage:J,playVideo:$,checkMyForm:_,sendEmail:Z,openApp:ee,openAppStore:te,remindMeNextDay:ne,remindMeNextTime:re,openTeachMe:A};function _(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var t=i.getSetManagerById(e.businessSolutionId);t?t.turnOnWithImmediateValidations():T.customerLog("Failed to run set's validation. No set for Id : "+e.businessSolutionId)}catch(n){var r="Failed to run set's validations",o=Nf(r,e.businessSolutionId,wf(n));T.customerLog(o)}}}function P(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.WalkMePlayerAPI&&WalkMePlayerAPI.toggleMenu(O(t,r))}catch(e){T.customerLog(Nf("Failed opening menu. Exception: {0}",wf(e)))}}}function A(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{void 0!=window.TeachMePlayerAPI&&TeachMePlayerAPI.toggleMenu(O(t,r))}catch(e){T.customerLog(Nf("Failed opening TeachMe menu. Exception: {0}",wf(e)))}}}function O(e,t){var n={type:e};if(t){n.objectId=t.Id;var r=t.Settings.action;n.collectionId=r&&r.arguments&&r.arguments.collectionId}return n}function D(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.playBfFromBeginning?void 0:e.NodeId;a.activateById(e.bfId,{type:t,objectId:r.Id},n)}catch(i){var o="Failed playing Bizflow with id {0} starting from Start Point {1}. Exception is: {2}",s=Nf(o,e.bfId,e.StartPointId,wf(i));T.customerLog(s)}}}function N(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){I.afterStepsLoaded(e.wtId,i)};function i(){try{var n=e.playWtFromBeginning?0:c.getStepIndex(e.StepId,e.wtId);if(n==-1){var i=Nf("Step with id: {0} was not found in walkthru with id {1}",e.StepId,e.wtId);T.customerLog(i)}else WalkMeAPI.startWalkthruById({id:parseInt(e.wtId),fromStep:n,playInitiator:{type:t,objectId:r.Id}})}catch(o){var a="Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",i=Nf(a,e.wtId,e.StepId,wf(o));T.customerLog(i)}}}function x(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.contentId;WalkMeAPI.startContentById(n,t,r.Id)}catch(i){var o="Failed playing content with id {0}. Exception is: {1}",a=Nf(o,e.wtId,wf(i));T.customerLog(a)}}}function L(e,t,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{var n=e.surveyId,i={type:t,objectId:r?r.Id:void 0};WalkMeAPI.startSurveyById(n,i)}catch(o){var a="Failed playing survey with id {0}. Exception is: {1}",s=Nf(a,e.surveyId,wf(o));T.customerLog(s)}}}function M(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){try{o.get("ShoutOutsManager").activateById(e.id,{type:t,objectId:r.Id})}catch(n){T.customerLog(Nf("Failed playing deployable with id {0}. Exception is: {1}",e.wtId,wf(n)))}}}function F(e){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){}}function R(e){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){f.stepWasCompleted();var t=e.redirectUrl,n=l.redirect(t);n||(f.stepWasCompleted(),f.executeTutorialNextStep())}}function B(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return i(e.wtId)},this.doAction=function(){var t,n=e.wtId;1==e.returnToWt?(t=c.getStepIndex(e.StepId,r.TutorialId),h.makeSplit([n],t,!1,e.startingStepId)):h.makeSplit([n],t,!0,e.startingStepId)},this.getGoToData=function(){var t=d.getWalkthruIndexByWalkthruId(e.wtId);return{tutorialIndex:t,stepIndex:0}};function i(e){return!!d.getWalkthruById(e)}}function U(t){this.type="stopWt",this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),e.stopTutorial()}}function W(e,t,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return i(e.StepId,r.TutorialId)},this.doAction=function(){var t=e.StepId,i=c.getStepIndex(t,r.TutorialId);f.stepWasCompleted(),p.currentStep<i&&f.fillMissingStepAudits(p.currentWalkthru,p.currentStep+1,i,n.STEP_STATUS.SkippedByActionStep),p.currentStep=i,f.executeCurrentStep()},this.getGoToData=function(){var t=e.StepId,n=c.getStepIndex(t,r.TutorialId),i=d.getWalkthruIndexByWalkthruId(r.TutorialId);return{tutorialIndex:i,stepIndex:n}};function i(e,t){return c.getStepIndex(e,t)!=-1}}function V(e,t,r){this.isValid=function(){return void 0!=window.WalkMePlayerAPI},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{f.stepWasCompleted(),WalkMePlayerAPI.toggleMenu(O(t,r))}catch(e){}f.executeTutorialNextStep()}}function G(e){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.state=n.WALKTHRU_STATE.WAITING_FOR_CONDITION,g.storeStateInCookie();var t=p.getCurrentStep(),r={evaluationPollingIntervalMs:500,featureName:y,elementName:"Wait for condition step: "+t.StepTitle},i=C.createOld(r),o=e.condition;i.onValueChanged(function(e){m.isDebuggerOnWindow()&&u.deprecatedRaiseEvent(n.EVENTS.ActionConditionEvaluated,t),e&&(f.stepWasCompleted(),f.executeTutorialNextStep())}),i.evaluateAsync(o),f.addCurrentStepResource(i)}}function H(e){this.isValid=function(){return!0},this.doAction=function(){return g.storeStateInCookie(),E.playSetTimeout(function(){f.stepWasCompleted(),f.executeTutorialNextStep()},1e3*e.duration),!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function j(){this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),g.storeStateInCookie(),E.libSetTimeout(function(){location.reload(!0)},200)},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Y(e,t,i){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action;var o={stepId:i.Id,tutorialId:i.TutorialId};this.doAction=function(){if(r.saveData(n.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY,(new Date).getTime(),3600),!b.get().enabled())return T.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void f.tutorialFinished();b.get().determineOwnership(o)}}function z(e){this.isValid=function(){return!0},this.doAction=function(){t.saveData(e.dataKey,e.dataValue,e.dataDuration),f.stepWasCompleted(),f.executeTutorialNextStep()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Q(e){this.isValid=function(){return!0},this.doAction=function(){e&&e.uiComponent&&e.uiComponent.destroy()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Close}function K(e,t,r){this.isValid=function(){return!0},this.doAction=function(){try{var i={type:t};r&&(i.objectId=r.Id);var o=e.shuttleId;S.get(n.DEPLOYABLE_TYPE.Shuttle).activateById(o,i)}catch(a){var s="Failed playing shuttle with id {0}. Exception is: {1}",u=Nf(s,e.wtId,wf(a));T.customerLog(u)}},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function q(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.rateApp,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function X(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.openSettings,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function J(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.browseToPage,this.args={url:e.URL},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function $(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.playVideo,this.args={url:e.URL},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function Z(e){e.subject=e.subject||"",e.body=e.body||"";var t=["'",'"',"&",">"];this.mobileAction=n.MOBILE_COMMANDS.ACTION.sendEmail,this.args={emailData:{to:[],subject:v.decodeHtml(e.subject,t),body:v.decodeHtml(e.body,t)}},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function ee(e){this.mobileAction=n.MOBILE_COMMANDS.ACTION.openApp,this.args={iOSAppId:e.iOSAppId,iOSAppScheme:e.iOSAppScheme,androidApp:e.androidApp},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function te(e){e.diffApp&&"True"==e.diffApp?(this.mobileAction=n.MOBILE_COMMANDS.ACTION.openAppStore,this.args={iOSAppId:e.iOSAppId,androidApp:e.androidApp}):this.mobileAction=n.MOBILE_COMMANDS.ACTION.rateApp,this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function ne(e,t,r){this.doAction=function(){var e=new Date;e.setDate(e.getDate()+1),ie(e,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function re(e,t,r){this.doAction=function(){ie(new Date,t,r)},this.Type=n.DEPLOYABLE_ACTION_TYPES.RemindMeLater}function ie(e,r,i){var o=s.map(r),a=n.STORAGE_KEYS.remindMeLater+"-"+o+"-"+i.Id,u={expiry:e.getTime()};t.saveData(a,wf(u),k)}}o.register("PropertyUtils").asCtor(jl).dependencies("Lib, Consts, SiteConfigManager, DeployablesManagerFactory");function jl(e,t,n,r){var i=this;i.isGroup=function(e){if(!e)return!1;return void 0!==e.LinkedDeployables},i.isCollection=function(e){return e&&e.deployableType==t.DEPLOYABLE_TYPE.Collection},i.isSearchEnabled=function(){var e=n.get();return e.Settings&&Number(e.Settings.search)},i.hasChildren=function(e){for(var t=e.LinkedDeployables,n=0;n<t.length;n++){var o=r.get(t[n].DeployableType),a=o.getById(t[n].DeployableID),s=i.isGroup(a)?i.hasChildren(a):a;if(s)return!0}return!1},i.hasVisibleChildren=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(o(r))return!0}return!1};function o(e){return e.properties().hasProperty(t.UI_PROPERTIES.Visible)}i.supportsDeployableType=function(e,t){var n=e.Settings,r=n&&n.DeployableTypes;if(r&&mtjQuery.inArray(t+"",e.Settings.DeployableTypes)!=-1)return!0;return!1},i.hasUncompletedChildren=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r._typeId===t.DEPLOYABLE_TYPE.Category){if(i.hasUncompletedChildren(r._children))return!0}else if(o(r)&&!r.properties().hasProperty(t.UI_PROPERTIES.Completed))return!0}return!1},i.isTab=function(e){var t=e.Settings;return t&&t.DeployableTypes},i.isTasksTab=function(e){return i.isGroup(e)&&i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Task)},i.isHelpTab=function(e){return i.isGroup(e)&&i.supportsDeployableType(e,t.DEPLOYABLE_TYPE.Tutorial)}}o.register("PropertiesFactory").asCtor(Yl).dependencies("FeaturesManager, CommonEvents, Consts, ShowInMenuCheckerFactory, SiteConfigManager, DeployablesManagerFactory, Logger");function Yl(e,t,n,r,i,o,a){var s,u=this;function l(){s=a.wrapCustomerLog("showWidget"),Zl._tasksManager=o.get(n.DEPLOYABLE_TYPE.Task)}u.generateAll=function(a){return[new Ql(a,o),new Kl(a,e,t,n,r,i,s),new Zl(a,n,i,o),new ql(a,n,i),new Jl(a,n,o),new Xl(a,n),new $l(a,n)]},l()}var zl=function(){function t(e){this.logger=null,this.lib=null,this.deployable=null,this.isLoaded=!1,this.properties=[],this.propertyNames=[],this.utils=null,this.children=[],this.lib=e.lib,this.deployable=e.deployable,this.utils=e.utils,this.children=e.children}return t.prop=function(e){return e.toLowerCase()},t.prototype.getAll=function(){return this.isLoaded||this.load(),this.properties},t.prototype.hasProperty=function(t,n){return!n&&this.isLoaded||this.load(),e.inArray(t,this.properties)!=-1},t.prototype.load=function(){this.isLoaded=!0},t.prototype.clear=function(){this.properties=[],this.isLoaded=!1},t.prototype.generateSingle=function(e,t){var n=t?[e]:[];this.properties=n},t.prototype.canGenerate=function(t){return e.inArray(t,this.propertyNames)!=-1},t}(),Ql=function(e){r(t,e);function t(t,n){e.call(this,t),this.deployablesManagerFactory=n,this.propertyNames=[]}return t.prototype.load=function(){var t=this.deployable.Settings;if(this.properties=[],!t||!t.DeployableTypes)return;for(var n=0;n<t.DeployableTypes.length;n++){var r=this.deployablesManagerFactory.get(t.DeployableTypes[n]).name();this.properties.push(zl.prop("contains-"+r))}e.prototype.load.call(this)},t}(zl),Kl=function(e){r(t,e);function t(n,r,i,o,a,s,u){e.call(this,n),this.featuresManager=r,this.commonEvents=i,this.consts=o,this.showInMenuCheckerFactory=a,this.siteConfigManager=s,this.customerLog=u,this.propertyNames=[t._visiblePropertyName,t._invisiblePropertyName]}return t.prototype.load=function(){var n=!0;if(this.utils.isGroup(this.deployable)){var r=this.doesSupportSearchProviders(this.deployable),i=this.utils.hasChildren(this.deployable);n=i||r;var o=this.featuresManager.isFeatureEnabled("dontShowTabsWithNoVisibleChildren");o&&(n=n&&this.utils.hasVisibleChildren(this.deployable,this.children)),n||(this.utils.isTasksTab(this.deployable)&&this.customerLog("Show widget - not showing tasks tab because there are no tasks and the tab doesn't support search.",2),this.utils.isHelpTab(this.deployable)&&this.customerLog(Ir.formatString("Show widget - not showing tab named {0} because there are no children and the tab doesn't support search.",this.deployable.Name),2))}n=n&&this.checkTasksCondition(this.deployable),n=n&&this.checkDisplayCondition(this.deployable),n?this.generateSingle(t._visiblePropertyName,!0):this.generateSingle(t._invisiblePropertyName,!0),e.prototype.load.call(this)},t.prototype.doesSupportSearchProviders=function(e){var t=!1,n=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Tutorial);return n&&this.utils.isSearchEnabled()&&(t=!0),t},t.prototype.checkTasksCondition=function(e){var t=!0,n=this.siteConfigManager.get().TodoListSettings,r=this.utils.supportsDeployableType(e,this.consts.DEPLOYABLE_TYPE.Task);return n&&(r?(t=this.hasUncompletedChildren(n)&&1==n.isActive,t&&(t=this.checkCondition(n))):this.utils.isCollection(e)&&1==n.showOnlyTasksTab&&(t=!1)),t},t.prototype.checkCondition=function(e){var t=e.activateCondition,n=!0;return t&&(n=o.get("ConditionTreeEvaluator").evaluate(t),n||this.customerLog("Show widget - not showing tasks tab because it was segmented out by a condition in todo list settings.",2),this.commonEvents.deprecatedRaiseEvent(this.consts.EVENTS.TasksConditionEvaluated,this.siteConfigManager.get())),n},t.prototype.hasUncompletedChildren=function(e){var t=e.hideComplete&&parseInt(e.hideComplete);if(t){var n=this.utils.hasUncompletedChildren(this.children);return n||this.customerLog("Show widget - not showing tasks tab because all tasks are completed",2),n}return!0},t.prototype.checkDisplayCondition=function(e){var t=this.showInMenuCheckerFactory.getDisplayConditionCheckerFunc(e.deployableType);return t(e)},t._visiblePropertyName=zl.prop(o.get("Consts").UI_PROPERTIES.Visible),t._invisiblePropertyName=zl.prop(o.get("Consts").UI_PROPERTIES.Invisible),t}(zl),ql=function(e){r(t,e);function t(t,n,r){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.propertyNames=[n.UI_PROPERTIES.Search,n.UI_PROPERTIES.SearchProviders]}return t.prototype.load=function(){var t=[];this.utils.isTab(this.deployable)&&this.utils.supportsDeployableType(this.deployable,this.consts.DEPLOYABLE_TYPE.Tutorial)&&(t.push(zl.prop(this.consts.UI_PROPERTIES.Search)),this.isSearchEnabled()&&t.push(zl.prop(this.consts.UI_PROPERTIES.SearchProviders))),this.properties=t,e.prototype.load.call(this)},t.prototype.isSearchEnabled=function(){var e=this.siteConfigManager.get();return e.Settings&&Number(e.Settings.search)},t}(zl),Xl=function(e){r(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Default]}return t.prototype.load=function(){var t=Ir.isTrue(this.deployable.Settings,this.consts.UI_PROPERTIES.Default,!1);t&&this.utils.hasUncompletedChildren(this.children)&&this.generateSingle(this.consts.UI_PROPERTIES.Default,!0),e.prototype.load.call(this)},t}(zl),Jl=function(e){r(t,e);function t(n,r,i){e.call(this,n),this.consts=r,this.deployablesManagerFactory=i,this.propertyNames=[t._videoProperty,t._articleProperty]}return t.prototype.load=function(){if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Content){var n=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.Content).types(),r=this.deployable.Type;switch(r){case n.Video:this.generateSingle(t._videoProperty,!0);break;case n.Article:this.generateSingle(t._articleProperty,!0)}}e.prototype.load.call(this)},t._videoProperty=zl.prop(o.get("Consts").UI_PROPERTIES.Video),t._articleProperty=zl.prop(o.get("Consts").UI_PROPERTIES.Article),t}(zl),$l=function(e){r(t,e);function t(t,n){e.call(this,t),this.consts=n,this.propertyNames=[n.UI_PROPERTIES.Accessible]}return t.prototype.load=function(){var t=!this.utils.isTab(this.deployable);this.generateSingle(this.consts.UI_PROPERTIES.Accessible,t),e.prototype.load.call(this)},t}(zl),Zl=function(e){r(t,e);function t(t,n,r,i){e.call(this,t),this.consts=n,this.siteConfigManager=r,this.deployablesManagerFactory=i,this._parentType=t.parentType,this._isLmsDeployable=this._parentType==n.DEPLOYABLE_TYPE.Course||this._parentType==n.DEPLOYABLE_TYPE.Lesson,this._parentId=t.parentId,this.propertyNames=[n.UI_PROPERTIES.Completed,n.UI_PROPERTIES.StrikedOut,n.UI_PROPERTIES.Uncompleted,n.UI_PROPERTIES.Active,n.UI_PROPERTIES.Inactive,n.UI_PROPERTIES.Phantom,n.UI_PROPERTIES.ProgressBar]}return t.prototype.load=function(){this._isLmsDeployable?this.handleLmsCompletion():this.handleTaskCompletion(),e.prototype.load.call(this)},t.prototype.handleLmsCompletion=function(){var e=o.get("LmsCompletionManager"),t=e.isCompleted(this.deployable.deployableType,this.deployable.Id,this._parentType,this._parentId);t?this.generateSingle(this.consts.UI_PROPERTIES.Completed,!0):this.generateSingle(this.consts.UI_PROPERTIES.Uncompleted,!0)},t.prototype.handleTaskCompletion=function(){var e=[];if(this.deployable.deployableType==this.consts.DEPLOYABLE_TYPE.Task){var n=t._tasksManager.isTaskCompleted(this.deployable);this.handleCompletionProperties(e,n),this.handleActiveProperties(e,n),this.handlePhantomTask(e,this.deployable.Settings)}else this.utils.isTasksTab(this.deployable)&&e.push(zl.prop(this.consts.UI_PROPERTIES.ProgressBar));this.properties=e},t.prototype.handleCompletionProperties=function(e,t){if(t){e.push(zl.prop(this.consts.UI_PROPERTIES.Completed));var n=this.siteConfigManager.get();Number(n.TodoListSettings.strikeOutCompletedTasks)&&e.push(zl.prop(this.consts.UI_PROPERTIES.StrikedOut))}else e.push(zl.prop(this.consts.UI_PROPERTIES.Uncompleted))},t.prototype.handleActiveProperties=function(e,t){this.isActive(t)?e.push(zl.prop(this.consts.UI_PROPERTIES.Active)):e.push(zl.prop(this.consts.UI_PROPERTIES.Inactive))},t.prototype.isActive=function(e){var n=t._tasksManager.isTaskActive(this.deployable);return e&&!this.shouldPlayAfterCompletion()&&(n=!1),n},t.prototype.shouldPlayAfterCompletion=function(){var e=this.siteConfigManager.get(),t=Number(e.TodoListSettings.allowPlayAfterCompletion);return t},t.prototype.handlePhantomTask=function(e,t){t.Phantom&&e.push(zl.prop(this.consts.UI_PROPERTIES.Phantom))},t}(zl),ec=function(){function e(e,t,n,r){this._lib=e,this._propertyUtils=t,this._propertiesFactory=n,this._deployable=r.deployable,this._deployableChildren=r.deployableChildren,this._parentType=r.parentType,this._parentId=r.parentId,this.createNewProperties()}return e.prototype.getAll=function(){var e=this,t=[];return this._lib.wrapFESession(function(){for(var n=0;n<e._properties.length;n++)t=t.concat(e._properties[n].getAll())}),t},e.prototype.clearCache=function(){for(var e=0;e<this._properties.length;e++)this._properties[e].clear()},e.prototype.hasProperty=function(e,t){for(var n=0;n<this._properties.length;n++)if(this._properties[n].canGenerate(e)&&this._properties[n].hasProperty(e,t))return!0;return!1},e.prototype.createNewProperties=function(){var e={lib:this._lib,deployable:this._deployable,logger:{},children:this._deployableChildren,utils:this._propertyUtils,parentType:this._parentType,parentId:this._parentId};this._properties=this._propertiesFactory.generateAll(e)},e}();function tc(e,t,n){this.create=function(r){return new ec(e,t,n,r)}}o.register("PropertiesGeneratorFactory").asCtor(tc).dependencies("Lib,PropertyUtils,PropertiesFactory");var nc=function(){function e(e){var t=e.id;this._type=e.type,this._typeId=e.typeId,this._id=t,this._description=e.description,this._children=e.childNodes,this._name=e.name,this._propertiesGenerator=e.propertiesGenerator,this._keywords=e.keywords?e.keywords:[];var n=e.activateFunction;this.activate=function(e){n(t,e)}}return e.prototype.children=function(){return this._children},e.prototype.properties=function(e){return e&&this._propertiesGenerator.clearCache(),this._propertiesGenerator},e.prototype.type=function(){return this._type.toLowerCase()},e.prototype.typeId=function(){return this._typeId},e.prototype.name=function(){return this._name},e.prototype.id=function(){return this._id},e.prototype.description=function(){return this._description||""},e.prototype.keywords=function(){return this._keywords},e}();o.register("DeployableTreeNodeCreator").asInstance(function(e){return new nc(e)}),o.register("DeployableTreeNodeFactory").asCtor(rc).dependencies("Consts,CommonUtils,DeployableTreeNodeCreator");function rc(e,t,n){var r=this;r.create=i;function i(e){return n({typeId:e.deployable.deployableType,type:e.deployableManager.name(),id:e.deployable.Id,activateFunction:t,description:e.deployable.Description,childNodes:e.children,name:e.deployable.Name,propertiesGenerator:e.propertiesGenerator,keywords:o(e.deployable)});function t(t,n){e.deployableManager.activateById(t,n)}}function o(n){switch(n.deployableType){case e.DEPLOYABLE_TYPE.BusinessSolution:var r=t.getSettingsValue(n.Settings,"Keywords",void 0);return r;default:return n.Keywords}}}o.register("UiDataProvider").asCtor(ic).dependencies("Consts, ObjectsTreeGenerator, DeployablesManagerFactory, ArrayUtils, PropertyUtils, CommonEvents");function ic(e,t,n,r,i,o){this.uiObjectsTree=s,this.uiTasksTree=u;var a=e.DEPLOYABLE_TYPE.Collection;function s(){var t=l(d(a));return o.raiseEvent(e.EVENTS.UIObjectsTreeCreated,{uiObjectsTree:t}),t}function u(){return l(r.filter(d(a),c))}function l(e){return t.generate(e)}function c(t){return i.supportsDeployableType(t,e.DEPLOYABLE_TYPE.Task)}function d(e){for(var t=n.get(e).getAll(),r=0;r<t.length;r++)t[r].deployableType=e;return t}}o.register("ObjectsTreeGenerator").asCtor(oc).dependencies("PropertiesGeneratorFactory,DeployableTreeNodeFactory, DeployablesManagerFactory");function oc(e,t,n){var r=this;r.generate=i;function i(e){return o(e),a(e,null)}function o(e){if(!e)return;e.sort(function(e,t){return e.OrderIndex-t.OrderIndex})}function a(e,t){if(!e)return;for(var n=[],r=0;r<e.length;r++){var i=u(e[r]),o=a(i,e[r]);n.push(s(e[r],o,t))}return n}function s(r,i,o){var a=n.get(r.deployableType),s={deployable:r,deployableChildren:i};o&&(s.parentType=o.deployableType,s.parentId=o.Id);var u=e.create(s);return t.create({deployable:r,deployableManager:a,children:i,propertiesGenerator:u})}function u(e){if(!e.LinkedDeployables)return null;for(var t=[],n=e.LinkedDeployables,r=0;r<n.length;r++){var i=l(n[r].DeployableType,n[r].DeployableID);i&&t.push(i)}return t}function l(e,t){var r=n.get(e),i=r.getById(t);return i&&(i.deployableType=e),i}}o.register("ObjectTreePercentageCalculator").asCtor(ac).asProto().dependencies("Lib, FeaturesManager");function ac(t,n){var r=this;r.calculate=i;function i(e,t){var n=o(e,t),r=Math.round(100*n.completed/n.total);return r}function o(t,n){var r={total:0,completed:0},i=t.children();return i&&e.each(i,function(e,t){var i=o(t,n);r.total+=i.total,r.completed+=i.completed,a(t,n)&&(r.total++,t.properties().hasProperty("completed")&&r.completed++)}),r}function a(e,t){return e.type()==t&&!e.properties().hasProperty("phantom")&&e.properties().hasProperty("visible")}}var sc=function(){function e(e,t){this.storageManager=e,this.endUsersManager=t}return e.register=function(){o.register("DeployableViewsCounter").asCtor(e).dependencies("ClientOrServerStorageManager,EndUsersManager")},e.registerDummy=function(){o.register("DeployableViewsCounter").asInstance({get:function(){return 0},update:function(){},register:e.register})},e.prototype.update=function(e,t){var n=this.generateViewsCountKey(e,t);this.storageManager.increment(n,null,O)},e.prototype.get=function(e,t){var n=this.generateViewsCountKey(e,t);return this.storageManager.getData(n,0)},e.prototype.generateViewsCountKey=function(t,n){var r=this.endUsersManager.getEndUserGuid();return e.VIEWS_COUNT_KEY+r+"-"+t+"-"+n},e.VIEWS_COUNT_KEY="wm-views-",e}();R.register(L.PLATFORM.Android,sc.register),R.register(L.PLATFORM.iOS,sc.register),R.register(L.PLATFORM.Web,sc.registerDummy),R.register(L.PLATFORM.MobileWeb,sc.registerDummy),o.register("WalkthruStepsLoader").asCtor(uc).dependencies("SettingsFile,WmAjax,DataFixer,CommonUtils,StepUtils,Logger,LanguageManager,CommonEvents,SiteConfigManager,WalkthrusContainer");function uc(e,t,n,r,i,o,a,s,u,l){var c=this;c.afterStepsLoaded=function(e,t){var n=l.getWalkthrus(),r=v(e);return n[r]&&0==n[r].Steps.length?(p(r,e,t),!0):t()},c.LoadStepsForWT=function(e){return c.afterStepsLoaded(e,function(){})};function d(e,t){var n="data_"+e+"_wt_"+t,r=a.getCurrentLanguage();return r&&(n+="_"+r),n+".js"}function p(n,r,i){var a=e.getPublishDirectory(),s=e.getPublishVersion(),u=a+d(s,r);o.customerLog("Retriving steps for Walkthtu: "+r,3),t.execute({url:u,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_steps_"+r,success:function(e,t,r){m(n,e),g(e,i)},error:function(){o.customerLog("Error: unable to receive data for Walkthtu: "+r,3),i()}})}function g(e,t){for(var n=[],o=0;o<e.length;o++){var a=e[o];if(i.isBranchStep(a)){var s=a.Settings.action.arguments.wtId;n.push(f(s))}n=n.concat(h(a))}r.executeParallel({functionsToExecute:n,successCallback:t})}function f(e){return function(t){c.afterStepsLoaded(e,t)}}function h(e){var t=[];if(e.LinkedTutorialIds)for(var n=e.LinkedTutorialIds.split(";"),r=0;r<n.length;r++)n[r]&&t.push(f(n[r]));return t}function m(e,t){var r=l.getWalkthrus();r[e].Steps=t,n.fixSteps(r[e],u.get())}function v(e){for(var t=l.getWalkthrus(),n=0;n<t.length;n++)if(t[n].TutorialId==e)return n;return-1}}var lc=function(e){r(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Category};e.call(this,r),this._name="Category"}return t}(yi);o.register("CategoriesManager").asCtor(lc).dependencies("Lib, Consts");var cc=function(e){r(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Tutorial}),this.permalinkManager=r,this._name="Walkthru"}return t.prototype.activateById=function(e,t){WalkMeAPI.startWalkthruById({id:e,fromStep:0,playInitiator:t})},t.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},t}(yi);o.register("TutorialsManager").asCtor(cc).dependencies("Lib, Consts, PermalinkManager");var dc=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p,g,h,m,v,S,y,E,T,C,b,I){var w=this;e.call(this,{lib:t,type:n.DEPLOYABLE_TYPE.Task}),this.consts=n,this.siteConfigManager=r,this.recorderServerManager=i,this.clientStorageManager=o,this.serverDataSenderManager=a,this.logger=s,this.walkMeInfo=u,this.contentsManager=l,this.tutorialsManager=c,this.eventSender=d,this.commonEvents=p,this.commonUtils=g,this.auditTasksManager=h,this.walkthrusContainer=m,this.auditingEnabledIndicator=v,this.deployablesManagerFactory=S,this.dictionaryUtils=y,this.conditionCheckerFactory=E,this.settingsValuesRetriever=T,this.arrayUtils=C,this.conditionTreeEvaluator=b,this.businessSolutionsManager=I,this._name="Task",this.customerLog=_makeTutorial.Logger.wrapCustomerLog(f),this._isPreviewMode=u.getEnvironmentId()==n.SOURCES.preview,this._isPlayMode=u.getEnvironmentId()==n.SOURCES.play,this._siteConfig=r.get();var _=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition),P=i.get();this._endUserId=t.getEndUserId(),this._logError=s.error,this.setDeployables([]),this.customerLog('Initializing TodoListManager (isActive: "'+_+'", serverAddress: "'+P+'", userGuid: "'+u.getUserGuid()+'", endUserId: "'+this._endUserId+'")',3),this._todoListDataSynchronizer=new Ca(P,o,a,this._logError,u,d,t,this._siteConfig,g),window.walkMeRemoveTasksData&&(o.removeData(this._todoListDataSynchronizer.getEndUserUniqueDataKey(this._endUserId)),window.walkMeRemoveTasksData=!1),l.onActivated(function(e,t){w.updateDeployableCompleted(e,t)})}return t.prototype.init=function(){this._todoListDataSynchronizer.init()},t.prototype.setDeployables=function(t){if(!t)return;e.prototype.setDeployables.call(this,t);var n=parseInt(this._siteConfig.TodoListSettings.isActive)&&this.conditionTreeEvaluator.evaluate(this._siteConfig.TodoListSettings.activateCondition);n=n&&t&&t.length>0,this.setActiveState(n),this.removeInvalidTasks()},t.prototype.activateById=function(e,t){var n=this.getById(e),r=this.deployablesManagerFactory.get(n.RelatedDeployableType);try{t=t||{type:this.consts.STEP_PLAY_INITIATOR_ENUM.NONE},t.objectId=void 0==t.id?t.objectId:t.id,this.auditTasksManager.auditTaskPlayed(n,t)}catch(i){this._logError(i)}var o={type:this.consts.STEP_PLAY_INITIATOR_ENUM.TASK,objectId:e};r.activateById(n.RelatedDeployableId,o)},t.prototype.getById=function(t){var n=e.prototype.getById.call(this,t);if(!n||!this.validateTask(n))return;return n},t.prototype.isTaskCompleted=function(e){var t=this.getCompletedTasks(),n=!!t&&this.arrayUtils.inArray(e.Id,t)>-1;return n},t.prototype.isTaskConditionsPassed=function(e){var t=!0;switch(e.RelatedDeployableType){case this.consts.DEPLOYABLE_TYPE.Tutorial:if(e.RelatedDeployableId){var n=this.walkthrusContainer.getWalkthruById(e.RelatedDeployableId);t=_makeTutorial.canShowTutorial(n)}}return t},t.prototype.isTaskActive=function(e){var t=e.Settings;if(!parseInt(t.ActivateConditionEnabled))return!0;return this.conditionTreeEvaluator.evaluate(t.ActivateCondition)},t.prototype.isTaskDisplayed=function(e){var t=e.Settings;if(!parseInt(t.DisplayConditionEnabled))return!0;var n=this.conditionCheckerFactory.createOld({bypassUIChange:!0,featureName:f,elementName:e.Name}),r=n.getCurrentEvaluationValueAndStopEvaluating(t.DisplayCondition);return r},t.prototype.compareTasks=function(e,t){if(e.Index<t.Index)return-1;if(e.Index>t.Index)return 1;return 0},t.prototype.areAllTaskGoalsCompleted=function(e,t){for(var n=0;n<e.Goals.length;n++){var r=e.Goals[n];if(!r.Id)continue;if(this.arrayUtils.inArray(r.Id,t.CompletedGoals)===-1)return 0}return 1},t.prototype.deactivateIfAllTasksCompleted=function(e,t){this.areAllTasksCompleted(e,t)&&this.deactivate()},t.prototype.areAllTasksCompleted=function(e,t){for(var n in e){var r=e[n];if(this.validateTask(r)){var i=t[r.Id];if(!i)return!1;if(!i.IsCompleted)return!1}}return!0},t.prototype.validateTask=function(e){if(!e.Id)return!1;if(e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Tutorial&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.Content&&e.RelatedDeployableType!==this.consts.DEPLOYABLE_TYPE.BusinessSolution)return this.customerLog("Task (id: "+e.Id+") is of unknown type: "+e.RelatedDeployableType),!1;if(!e.RelatedDeployableId)return this.customerLog("Task (id: "+e.Id+") does not have any related Walk-Thru id"),!1;var t;if(t=e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Tutorial?this.tutorialsManager:e.RelatedDeployableType===this.consts.DEPLOYABLE_TYPE.Content?this.contentsManager:this.businessSolutionsManager,!t.getById(e.RelatedDeployableId))return this.customerLog("Task (id: "+e.Id+") related deployable ("+e.RelatedDeployableType+") (id: "+e.RelatedDeployableId+") does not exist"),!1;return!0},t.prototype.syncTaskCompletionWithLocalData=function(e){this.customerLog("syncing local tasks completion data",3),this.customerLog(e,5);for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(n.IsCompleted)continue;var r=n.CompletedGoals,i=this.getById(t);if(i&&i.Goals){var o=i.Goals;if(o&&r&&r.length>0&&o.length>0){var a=this.areAllTaskGoalsCompleted(i,n);a&&(n.IsCompleted=1,this.completeTask(i,e))}}}},t.prototype.getGoalFromTask=function(e,t){for(var n=0;n<e.Goals.length;n++)if(e.Goals[n].Id==t)return e.Goals[n];
},t.prototype.hasTaskGoalCompletionCondition=function(){return void 0===this._hasTaskGoalCompletionConditionCache&&(this._hasTaskGoalCompletionConditionCache=this.hasTaskGoalCompletionConditionInner()),this._hasTaskGoalCompletionConditionCache},t.prototype.hasTaskGoalCompletionConditionInner=function(){return this.checkForDeployablesAutostartConditions()||this.checkForWidgetConditions()||this.checkForAbExpermintesGoalsConditions()},t.prototype.checkForDeployablesAutostartConditions=function(){var e,t,n,r,i,o,a;for(var s in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(s)&&(o=this.consts.DEPLOYABLE_TYPE[s],n=this.deployablesManagerFactory.get(o),t=n&&n.getAll()))for(var u=0;u<t.length;u++)if(e=t[u],r=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCTEnabled",0),r&&(i=this.settingsValuesRetriever.getSettingsValue(e.Settings,"ASCT",""),a=this.isTaskGoalFunctions(i)))return!0;return!1},t.prototype.checkForWidgetConditions=function(){var e=this.settingsValuesRetriever.getSettingsValue(this._siteConfig.Settings,this.consts.DISPLAY_WIDGET_CONDITION,"");return this.isTaskGoalFunctions(e)},t.prototype.checkForAbExpermintesGoalsConditions=function(){var e=this.deployablesManagerFactory.get(this.consts.DEPLOYABLE_TYPE.AbExperiment);if(!e)return!1;for(var t,n,r,i,o=e.getAll(),a=0;a<o.length;a++){t=o[a],r=t.Goals;for(var s=0;s<r.length;s++)if(n=r[s],i=this.settingsValuesRetriever.getSettingsValue(n.Settings,"Conditions",""),this.isTaskGoalFunctions(i))return!0}},t.prototype.isTaskGoalFunctions=function(e){function t(e){return"Func"==e.nodeType?"TaskGoalReached"==e.funcName||"TaskGoalNotReached"==e.funcName:("And"==e.nodeType||"Or"==e.nodeType)&&(t(e.leftSon)||t(e.rightSon))}return null!=e&&t(e)},t.prototype.completeGoal=function(e,t,n){var r=t[e];r.CompletedGoals.push(n);var i=this.deployablesDict[e];r.IsCompleted=this.areAllTaskGoalsCompleted(i,r);var o=this.getGoalFromTask(i,n);r.IsCompleted?this.completeTask(i,t,o):(t[r.TaskId]=r,this.customerLog("Server update completed GOAL (taskId: "+e+", goalId: "+n+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,null,o,t,this.deployablesDict,this.isAuditEnabled()))},t.prototype.isAuditEnabled=function(){return this.auditingEnabledIndicator.isEnabled()&&!this._isPreviewMode},t.prototype.completeTask=function(e,t,n){try{var r=n?n.Id:-1;t[e.Id]={TaskId:e.Id,IsCompleted:1,CompletedGoals:[]},this.commonEvents.raiseEvent(this.consts.EVENTS.TaskCompleted,{TaskId:e.Id}),this.deactivateIfAllTasksCompleted(this.deployablesDict,t),this.customerLog("Server update completed TASK (taskId: "+e.Id+", goalId: "+r+")",3),this._todoListDataSynchronizer.updateTaskCompleted(this._endUserId,e,n,t,this.deployablesDict,this.isAuditEnabled())}catch(i){this.deactivate(),this._logError(i,"An error occurred while trying to complete a Task")}},t.prototype.didTasksFinishLoading=function(){return this._tasksFinishedLoading},t.prototype.setTasksFinishedLoadingCallback=function(e){this._tasksFinishedLoadingCallback=e},t.prototype.raiseTasksFinishedCallback=function(e){this._tasksFinishedLoading=!0,this._tasksFinishedLoadingCallback&&this._tasksFinishedLoadingCallback(e),this._tasksFinishedLoadingCallback=null},t.prototype.loadTasks=function(e,t){var n=this;if(this.customerLog("loadTasks - start loading completion data",3),this._isPlayMode)return this.customerLog("loadTasks - Play mode - returning empty tasks completion data",3),this.deactivateIfAllTasksCompleted(this.deployablesDict,{}),void e({});if(!this._endUserId)return this.customerLog("loadTasks - No end user - Deactivating",3),void this.deactivate();try{var r=function(t){n.syncTaskCompletionWithLocalData(t),n.customerLog("Tasks completion data loaded successfully",3),n.commonEvents.raiseEvent(n.consts.EVENTS.TasksLoaded,{completedTasks:t}),n.deactivateIfAllTasksCompleted(n.deployablesDict,t),e&&e(t),n.raiseTasksFinishedCallback()},i=function(e){n.customerLog("Tasks completion data failed loading",3),n.deactivate(),t&&t(e)};this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),r,i)}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to load completed tasks to the local storage")}},t.prototype.getTaskGoalsIds=function(e){var t={};return mtjQuery.each(e,function(e,n){t[e]=n.Goals?mtjQuery.map(n.Goals,function(e){return e.Id}):[]}),t},t.prototype.getTaskIdByGoalId=function(e){for(var t=this.dictionaryUtils.getDictionaryKeys(this.deployablesDict),n=t.length-1;n>=0;n--){var r=this.deployablesDict[t[n]];if(this.hasWantedGoal(r,e))return r.Id}},t.prototype.hasWantedGoal=function(e,t){for(var n=e.Goals.length-1;n>=0;n--)if(e.Goals[n].Id==t)return t},t.prototype.getCompletedTasks=function(){if(this.customerLog("Getting completed tasks",3),this._isPlayMode)return this.customerLog("Play mode - returning empty array of completed tasks",3),[];if(!this._endUserId)return this.deactivate(),null;try{var e=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!e)return null;var t=[];return mtjQuery.each(e,function(e,n){if(!n.TaskId)return;n.IsCompleted&&t.push(n.TaskId)}),this.customerLog("Returning completed tasks ("+t+")",3),t}catch(n){this.deactivate(),this._logError(n,"An error occurred while trying to retrieve completed tasks")}return null},t.prototype.updateGoalCompleted=function(e){var t=this,n=e.RelatedObjectId,r=e.Id,i=e.Name;if(this.customerLog("Updating completed goal (taskId: "+n+", goalId: "+r+", goalName: "+i+")",3),this.commonEvents.sendAutomationEvent(this.consts.EVENTS.Goals.GoalReached,{GoalId:r,GoalName:i}),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();try{this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(e){var i=e[n];if(i||(i={TaskId:n,IsCompleted:0,CompletedGoals:[]},e[n]=i),i.IsCompleted)return;if(t.arrayUtils.inArray(r,i.CompletedGoals)>-1)return;t.completeGoal(i.TaskId,e,r)})}catch(o){this.deactivate(),this._logError(o,"An error occurred while trying to update task completed")}},t.prototype.updateDeployableCompleted=function(e,t){var n=this;if(this.customerLog("Updating completed deployable ("+t+") deployableId: "+e+")",3),this._isPlayMode)return void this.customerLog("Play mode - exiting without updating",3);if(!this._endUserId)return void this.deactivate();mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;if(i.RelatedDeployableType!==t)return;if(parseInt(i.RelatedDeployableId)!==e)return;if(i.Goals&&i.Goals.length>0)return;n._todoListDataSynchronizer.asyncRetrieveCompletedTasks(n._endUserId,n.getTaskGoalsIds(n.deployablesDict),function(e){if(e[i.Id]&&e[i.Id].IsCompleted)return;n.completeTask(i,e)})})},t.prototype.getTasksGoalsNotCompleted=function(){var e=this;if(this._isPlayMode)return this.customerLog("Play mode - not getting tasks not completed goals",3),[];this.customerLog("Getting tasks uncompleted goals",3);var t=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));t||(t=[]);var n=[];return mtjQuery.each(this.deployablesDict,function(r,i){if(!i.Id)return;var o=t[i.Id];if(o&&o.IsCompleted)return;var a={TaskId:i.Id,Name:i.Name,GoalsNotCompleted:[]};mtjQuery.each(i.Goals,function(t,n){if(!n.Id)return;var r=o&&o.CompletedGoals?o.CompletedGoals:[];if(e.arrayUtils.inArray(n.Id,r)===-1){var i=mtjQuery.extend(!0,{},n);a.GoalsNotCompleted.push(i)}}),n.push(a)}),n},t.prototype.getApiTasks=function(e){var t=this;this.customerLog("Getting tasks fot the API",3);var n=this.getCompletedTasks();n||(n=[]);var r=[];return mtjQuery.each(this.deployablesDict,function(i,o){if(!t.validateTask(o))return;var a=n&&t.arrayUtils.inArray(o.Id,n)>-1?1:0,s={Index:o.OrderIndex,Name:o.Name,Id:o.Id,IsCompleted:a,Settings:Df(o.Settings),Description:o.Description,RelatedDeployableType:o.RelatedDeployableType,RelatedDeployableId:o.RelatedDeployableId};s.TaskProperties=s.Settings,e&&(s.ConditionsPassed=t.isTaskConditionsPassed(o),s.IsActive=t.isTaskActive(o),s.IsDisplayed=t.isTaskDisplayed(o)),delete s.Settings.ActivateConditionEnabled,delete s.Settings.ActivateCondition,r.push(s)}),r.sort(this.compareTasks),r},t.prototype.isTaskGoalReached=function(e,t){var n=this._todoListDataSynchronizer.syncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict));if(!n)return!1;var r=n[e];if(!r)return!1;if(r.IsCompleted)return!0;return this.arrayUtils.inArray(t,r.CompletedGoals)!==-1},t.prototype.isActive=function(){return this._isActive},t.prototype.setActiveState=function(e){this.customerLog("Setting todo list active state to: "+e,3),this._isActive=e},t.prototype.activate=function(){var e=this;this._todoListDataSynchronizer.asyncRetrieveCompletedTasks(this._endUserId,this.getTaskGoalsIds(this.deployablesDict),function(t){if(e.areAllTasksCompleted(e.deployablesDict,t))return;e.setActiveState(!0)})},t.prototype.deactivate=function(){this.raiseTasksFinishedCallback(!1),this.setActiveState(!1)},t.prototype.toggleActiveState=function(){this.setActiveState(!this.isActive())},t.prototype.removeInvalidTasks=function(){for(var e=this.getAll(),t=0;t<e.length;t++)this.validateTask(e[t])||delete this.deployablesDict[e[t].Id]},t}(yi);o.register("TodoListManager").asCtor(dc).dependencies("Lib, Consts, SiteConfigManager, RecorderServerManager, ClientStorageManager, ServerDataSenderManager, Logger, WalkMeInfo, ContentsManager, TutorialsManager, EventSender, CommonEvents, CommonUtils, AuditTasksManager, WalkthrusContainer, AuditingEnabledIndicator, DeployablesManagerFactory, DictionaryUtils,ConditionCheckerFactory, SettingsValuesRetriever, ArrayUtils, ConditionTreeEvaluator, BusinessSolutionsManager");var pc=function(e){r(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Launcher}),this._name="Launcher",this._launcherActionDataProvider=r}return t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this._launcherActionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this._launcherActionDataProvider.isWithAction(e)},t}(yi);o.register("LaunchersManager").asCtor(pc).dependencies("Lib, Consts, LauncherActionDataProvider");var gc=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Shuttle}),this.Consts=n,this.win=r,this.TimerManager=i,this.WalkMeGoalsManager=o,this.ClickAuditManager=a,this.CommonUtils=s,this.playGuidGenerator=u,this.walkmeVisibleReporter=l,this.htmlDecoder=c,this.logger=d,this._name="Shuttle"}return t.prototype.activateById=function(e,n){var r=this;try{n=n||{};var i=this.deployablesDict[e];if(!i)return void this.logger.customerLog(Nf("Shuttle with id {0} doesn't exist",e),3);this.ClickAuditManager.SendClickAudit(this.Consts.DEPLOYABLE_TYPE.Shuttle,i.Id,{type:n.type,id:n.objectId});var o=parseInt(this.CommonUtils.getSettingsValue(i.Settings,t.PLAY_MODE_SETTING_KEY,this.Consts.PLAY_MODE.SameTab)),a=this.getShuttleUrl(i.DestinationUrl);this.CommonUtils.isValidUrl(a)&&(this.WalkMeGoalsManager.startWatchingDeployable(i,this.playGuidGenerator.generateNewPlayGuid(i.Id)),this.walkmeVisibleReporter.report(),o==this.Consts.PLAY_MODE.NewTab&&this.win.open(a,"_blank"),o==this.Consts.PLAY_MODE.SameTab&&this.TimerManager.libSetTimeout(function(){r.win.location.href=a},t.TIME_BEFORE_REDIRECTING))}catch(s){this.logger.customerLog(Nf("Failed playing shuttle with id {0}. Exception is {1}",e,s),3)}},t.prototype.getShuttleUrl=function(e){if(e=this.htmlDecoder.decodeHtml(e,["&"]),this.win._walkmeInternals.customShuttleUrl){var t=this.win._walkmeInternals.customShuttleUrl(e);return t}return e},t.PLAY_MODE_SETTING_KEY="ShuttlePlayMode",t.TIME_BEFORE_REDIRECTING=100,t}(yi);o.register("ShuttlesManager").asCtor(gc).dependencies("Lib, Consts, win, TimerManager, WalkMeGoalsManager, ClickAuditManager, CommonUtils, PlayGuidGenerator, WalkmeVisibleReporter, HtmlDecoder, Logger");var fc=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.Content}),this.consts=n,this.logger=l,this._cdnServer=null,this._currentContentActivator=null,this._activateCallbacks=[],this._name="Content",this._cdnServer=r.get(),this._clickAuditManager=o,this._walkMeGoalsManager=i,this._featuresManager=a,this._playGuidGenerator=s,this._walkmeVisibleReporter=u}return n.prototype.onActivated=function(e){this._activateCallbacks.push(e)},n.prototype.activateById=function(e,t){try{t=t||{};var n=this.deployablesDict[e];if(!n)return void this.logger.customerLog(Nf("Content with id {0} doesn't exist",e),3);var r={lib:this.lib,cdnServer:this._cdnServer,clickAuditManager:this._clickAuditManager,content:n};this.removeContent(),this._currentContentActivator=this.getContentActivator(n.Type,r),this._currentContentActivator.activateContent(n,t.type,t.objectId),this._walkmeVisibleReporter.report(),this._walkMeGoalsManager.startWatchingDeployable(n,this._playGuidGenerator.generateNewPlayGuid(n.Id));for(var i=0;i<this._activateCallbacks.length;i++)this._activateCallbacks[i](n.Id,this.consts.DEPLOYABLE_TYPE.Content)}catch(o){this.logger.customerLog(Nf("Failed playing content with id {0}. Exception is {1}",e,o),3)}},n.prototype.getContentActivator=function(e,t){var r=null;switch(e){case n.CONTENT_TYPES.Video:var i=this.getVideoIdAndVendor(t.content.Url);i?(t.videoId=i.videoId,t.vendorName=i.vendorName,r=new ss(t)):r=new us(t);break;case n.CONTENT_TYPES.Article:r=new us(t);break;default:throw Nf("Invalid content type : {0}",e)}return r},n.prototype.getVideoIdAndVendor=function(t){var n,r=/^(?:http|https):\/\/.*youtube\..*v=([\w-]+)/i,i=/^(?:http|https):\/\/.*youtu.be\/([\w-]+)/i,o=/^(?:http|https):\/\/.*youtube.*\/embed\/([\w-]+)/i,a=/^(?:http:\/\/|https:\/\/).*vimeo.*\/([\w-]+)/i,s=[{regex:r,vendorName:"youtube"},{regex:i,vendorName:"youtube"},{regex:o,vendorName:"youtube"},{regex:a,vendorName:"vimeo"}];return e.each(s,function(e,r){var i=t.match(r.regex);if(i&&i.length>1)return n={videoId:i[1],vendorName:r.vendorName},!1}),!n&&this._featuresManager.isFeatureEnabled("html5video")&&(n={vendorName:"html5video"}),n},n.prototype.removeContent=function(){this._currentContentActivator&&this._currentContentActivator.removeContent()},n.prototype.types=function(){return n.CONTENT_TYPES},n.CONTENT_TYPES={Article:0,Video:1},n}(yi);o.register("ContentsManager").asCtor(fc).dependencies("Lib, Consts, CdnServer, WalkMeGoalsManager, ClickAuditManager, FeaturesManager, PlayGuidGenerator, WalkmeVisibleReporter, Logger");var hc=function(e){r(t,e);function t(t,n){var r={deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Collection};e.call(this,r),this._name="Tab"}return t}(yi);o.register("CollectionsManager").asCtor(hc).dependencies("Lib, Consts");var mc=function(e){r(t,e);function t(t,n,r,i){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Course}),this.consts=n,this.quizPlayer=r,this.initiatorManager=i,this._name="Course"}return t.prototype.activateQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;if(!n)return;var r=this.quizPlayer;this.initiatorManager.setForScope({type:this.consts.STEP_PLAY_INITIATOR_ENUM.COURSE,objectId:e,appType:this.consts.EVENT_SENDER_EVENT_APPS.Course},function(){r.playQuiz(n)})},t.prototype.getCourseByQuizId=function(e){for(var t in this.deployablesDict)if(this.deployablesDict.hasOwnProperty(t)){var n=this.deployablesDict[t];if(n.Quiz&&n.Quiz.Id==e)return n}},t.prototype.getQuizByCourseId=function(e){var t=this.deployablesDict[e],n=t&&t.Quiz;return n},t.prototype.releaseAll=function(e){this.quizPlayer.releaseAll(e)},t}(yi);o.register("CoursesManager").asCtor(mc).dependencies("Lib, Consts, QuizPlayer, InitiatorManager");var vc=function(e){r(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Lesson}),this._name="Lesson"}return t}(yi);o.register("LessonsManager").asCtor(vc).dependencies("Lib, Consts");var Sc=function(e){r(t,e);function t(t,n){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.AbExperiment}),this._name="Experiments"}return t}(yi);o.register("ExperimentsManager").asCtor(Sc).dependencies("Lib, Consts");var yc=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ShoutOut}),this.Consts=n,this.UIComponentsFactory=r,this.WalkMeGoalsManager=i,this.ClickAuditManager=o,this.ClientOrServerStorageManager=a,this.actionDataProvider=s,this.DeployableViewsCounter=u,this.commonEvents=l,this.playGuidGenerator=c,this.walkmeVisibleReporter=d,this.logger=p,this._appendChain=[],this._activeComponents=[],this._name="ShoutOut",this.type=n.DEPLOYABLE_TYPE.ShoutOut}return t.prototype.getStopConditionKey=function(e,n){return t.STOP_CONDITION_KEY+this.type+"-"+e.Id+"-"+n},t.prototype.activateById=function(e,n,r){var i=this;try{if(this.handleActiveComponent(e,n))return;var o=this.deployablesDict[e];if(!o)return void this.logger.customerLog(Nf("ShoutOut with id {0} doesn't exist",e),3);var a=this.UIComponentsFactory.get(o.UiComponentId,[o]);this.pushActiveComponent(a);var s=this.auditActivation(o,n);a.once("show-end",function(){i.WalkMeGoalsManager.startWatchingDeployable(o,i.playGuidGenerator.generateNewPlayGuid(o.Id)),i.DeployableViewsCounter.update(i.type,o.Id),a.once("action-start",function(e,n){var r;n==i.Consts.DEPLOYABLE_ACTION_TYPES.RemindMeLater?r=i.Consts.SHOUTOUT_CLICK_TYPE.RemindMeLater:n==i.Consts.DEPLOYABLE_ACTION_TYPES.Action?(i.setStopCondition(o,t.STOP_CONDITIONS.Action),r=i.Consts.SHOUTOUT_CLICK_TYPE.Action):n==i.Consts.DEPLOYABLE_ACTION_TYPES.Close&&(i.setStopCondition(o,t.STOP_CONDITIONS.Cancel),r=i.Consts.SHOUTOUT_CLICK_TYPE.Close),i.auditClick(o,i.type,r,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:r})}),a.once("x-clicked",function(){i.setStopCondition(o,t.STOP_CONDITIONS.XButton),i.auditClick(o,i.type,i.Consts.SHOUTOUT_CLICK_TYPE.XButton,s),i.commonEvents.raiseEvent(i.Consts.EVENTS.ShoutOutClosed,{shoutOut:o,clickType:i.Consts.SHOUTOUT_CLICK_TYPE.XButton})}),a.once("destroy-end",function(){i.commonEvents.raiseEvent(i.Consts.EVENTS.UIComponentDestroyed),i.commonEvents.raiseEvent(i.Consts.EVENTS.DeployableDestroyed)})}),this.appendComponent(a,o),this.walkmeVisibleReporter.report();var u={deployable:o,uiComponent:a,deployableType:this.type};return this.commonEvents.raiseEvent(this.Consts.EVENTS.DeployableCreated,u),a}catch(l){this.logger.customerLog(Nf("Failed playing shoutOut with id {0}. Exception is {1}",e,l),3)}},t.prototype.getActionData=function(t){var n=e.prototype.getActionData.call(this,t);return this.actionDataProvider.fillActionData(t,n)},t.prototype.isWithAction=function(e){return this.actionDataProvider.isWithAction(e)},t.prototype.handleActiveComponent=function(e,t){var n=this.getActiveComponent(e);return n&&this.isLauncherInitiation(t)&&this.flickerActiveComponent(n),!!n},t.prototype.isLauncherInitiation=function(e){return e&&e.type==this.Consts.STEP_PLAY_INITIATOR_ENUM.LAUNCHER},t.prototype.flickerActiveComponent=function(e){e.unbind("hide-end."+t.ACTIVE_COMPONENT_SUFFIX),e.once("hide-end."+t.ACTIVE_COMPONENT_SUFFIX,function(){e.show()}),e.hide()},t.prototype.getActiveComponent=function(e){for(var t=this._activeComponents.length-1;t>=0;t--)if(this._activeComponents[t].getComponent().Id==e)return this._activeComponents[t]},t.prototype.appendComponent=function(e,t){var n=this;e.once("append-end",function(){e.show(),n.handleNextShoutOut()}),this._isAppending?this._appendChain.push(e):(this._isAppending=!0,e.append())},t.prototype.handleNextShoutOut=function(){var e=this._appendChain.splice(0,1)[0];e?e.append():this._isAppending=!1},t.prototype.setStopCondition=function(e,t){if(!e.Settings.stopOn||!e.Settings.stopOn[t])return;var n=this.getStopConditionKey(e,t);this.ClientOrServerStorageManager.saveData(n,1,O)},t.prototype.auditActivation=function(e,t){return t=t||{},this.ClickAuditManager.SendClickAudit(this.type,e.Id,{type:t.type,id:t.objectId})},t.prototype.auditClick=function(e,t,n,r){this.ClickAuditManager.SendShoutOutAudit(e.Id,t,n,r)},t.prototype.pushActiveComponent=function(e){var n=this,r=this._activeComponents.length;this._activeComponents.push(e),e.bind(t.EVENT_DESTROY_BEGIN,function(){e.unbind(t.EVENT_DESTROY_BEGIN),n._activeComponents.splice(r,1)})},t.prototype.releaseAll=function(e){try{for(var n=0;n<this._activeComponents.length;n++){var r=this._activeComponents[n];r.unbind(t.EVENT_DESTROY_BEGIN),r.destroy()}this._activeComponents.length=0}catch(i){}e&&e()},t.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&this.checkStopCondition(t,r,n[r]))return!1;return!0},t.prototype.checkStopCondition=function(e,t,n){if(!n)return!1;switch(t){case"views":return this.DeployableViewsCounter.get(this.type,e.Id)>=n;default:var r=this.getStopConditionKey(e,t);if(this.ClientOrServerStorageManager.getData(r,!1))return!0}},t.EVENT_DESTROY_BEGIN="destroy-begin.manager",t.ACTION_NAME_DESTROY="destroy",t.STOP_CONDITION_KEY="wm-stpcond-",t.ACTIVE_COMPONENT_SUFFIX="acs",t.COOKIE_LIFE_10_YEARS=31536e4,t.STOP_CONDITIONS={XButton:"x",Cancel:"close",Action:"action"},t}(yi);o.register("ShoutOutsManager").asCtor(yc).dependencies("Lib, Consts, UIComponentsFactory, WalkMeGoalsManager, ClickAuditManager, ClientOrServerStorageManager, ShoutOutActionDataProvider, DeployableViewsCounter, CommonEvents, PlayGuidGenerator, WalkmeVisibleReporter, Logger");var Ec=function(e){r(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n}),this._type=n,this._commonEvents=r,this._deployableViewsCounter=o.get("DeployableViewsCounter"),this._storageManager=o.get("ClientOrServerStorageManager"),this._clickAuditManager=o.get("ClickAuditManager"),this._consts=o.get("Consts"),this._logger=o.get("Logger")}return t.prototype.activateById=function(e,t){var n=this,r=this.deployablesDict[e];if(!r)return this._logger.customerLog(Nf(this._name+" with id {0} doesn't exist",e),3),!1;var i=this.getAppletObj(r),o=this.auditActivation(i,t);i.once("close",function(e,t){t.isInteracted?(n.setStopCondition(r,Tc.STOP_CONDITIONS.Interacted),n.auditClick(i,n._consts.APPLET_INTERACTION_TYPES.Element,o)):n.auditClick(i,n._consts.APPLET_INTERACTION_TYPES.Overlay,o),n._commonEvents.raiseEvent(L.EVENTS.DeployableDestroyed)}),i.once("show-ended",function(t,i){n._deployableViewsCounter.update(n._type,e);var o={deployable:r,deployableType:n._type};n._commonEvents.raiseEvent(L.EVENTS.DeployableCreated,o)}),i.once("show-fail",function(e,t){var i={deployable:r};n._commonEvents.raiseEvent(L.EVENTS.DeployableNotShowing,i)}),i.show();var a={deployable:r};this._commonEvents.raiseEvent(L.EVENTS.DeployableHandleStarting,a)},t.prototype.autoStartEnabled=function(e){var t=this.deployablesDict[e],n=t.Settings.stopOn;for(var r in n)if(n.hasOwnProperty(r)&&this.checkStopCondition(t,r,n[r]))return!1;return!0},t.prototype.getStopConditionKey=function(e,n){return t.STOP_CONDITION_KEY+this._type+"-"+e.Id+"-"+n},t.prototype.checkStopCondition=function(e,t,n){if(!n)return!1;switch(t){case"views":return this._deployableViewsCounter.get(this._type,e.Id)>=n;default:var r=this.getStopConditionKey(e,t);if(this._storageManager.getData(r,!1))return!0;return!1}},t.prototype.setStopCondition=function(e,n){if(!e.Settings.stopOn||!e.Settings.stopOn[n])return;var r=this.getStopConditionKey(e,n);this._storageManager.saveData(r,1,t.COOKIE_LIFE_10_YEARS)},t.prototype.auditActivation=function(e,t){return t=t||{},this._clickAuditManager.SendClickAudit(this._type,e.getId(),{type:t.type,id:t.objectId})},t.prototype.auditClick=function(e,t,n){this._clickAuditManager.SendInteractionAudit(e.getId(),this._type,t,n)},t.STOP_CONDITION_KEY="wm-stpcond-",t.COOKIE_LIFE_10_YEARS=31536e4,t}(yi),Tc=function(e){r(t,e);function t(t,n,r){e.call(this,t,n.DEPLOYABLE_TYPE.Spotlight,r),this._consts=n,this._name="Spotlight"}return t.prototype.getAppletObj=function(e){return o.create("Spotlight",e)},t.STOP_CONDITIONS={Interacted:"interacted"},t}(Ec);o.register("SpotlightsManager").asCtor(Tc).dependencies("Lib, Consts, CommonEvents");var Cc=function(e){r(t,e);function t(t,n,r){e.call(this,t,n.DEPLOYABLE_TYPE.Tooltip,r),this._consts=n,this._name="Tooltip"}return t.prototype.getAppletObj=function(e){return o.create("MobileNativeTooltip",e)},t.STOP_CONDITIONS={Interacted:"interacted"},t}(Ec);o.register("TooltipsManager").asCtor(Cc).dependencies("Lib, Consts, CommonEvents");var bc=function(t){r(n,t);function n(e,n,r){t.call(this,{deployables:[],lib:e,type:n.DEPLOYABLE_TYPE.SearchProviderUrl}),this._consts=n,this._conditionCheckerFactory=r,this._name="SearchProviderUrl",this.segmentedProvidersUrls=[]}return n.prototype.getAllSegmented=function(){return this.segmentedProvidersUrls},n.prototype.setSegmentedProviders=function(){this.segmentedProvidersUrls=[];var t=this.getAll();if(t.length>0){var n=this._conditionCheckerFactory.createConditionChecker(t[0].Settings.DisplayCondition);this.segmentedProvidersUrls=e(t).filter(function(e,t){return n.getCurrentEvaluationValueAndStopEvaluating(t.Settings.DisplayCondition)}).map(function(e,t){return t.Id}).toArray()}},n.STOP_CONDITIONS={Interacted:"interacted"},n}(yi);o.register("SearchProviderUrlsManager").asCtor(bc).dependencies("Lib, Consts, ConditionCheckerFactory");var Ic=function(e){r(t,e);function t(t,n,r,i,o,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C){var b=e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Survey})||this;return b.consts=n,b.recorderServerManager=i,b.permalinkManager=o,b.guidGenerator=a,b.auditStepsManager=s,b.commonUtils=u,b.commonEvents=l,b.hostData=d,b.eventSender=p,b.logger=g,b.reportInitiatorMapper=f,b.endUsersManager=h,b.popupBalloonDisplayer=m,b.wmAjax=v,b.clientStorageManager=S,b.walkmeVisibleReporter=y,b.auditingEnabledIndicator=E,b.currentWalkthruData=T,b.questionToEventMapper=C,b._surveyStartedInCurrentPage=!1,b._surveyIsShown=!1,b._name="Survey",b._auditSource=c.get(),b._getPermutationId=r.getCurrentPermutation(),b}return t.prototype.submitResults=function(e){if(this._surveyIsShown=!1,e.answers.length>0)return this.sendResultsArrayToServer("SurveyCompleted",e),this.addSubmitCookie(e.surveyGuid),this.sendSurveyCompletedEvent(e,"CompletedWithAnswers"),!0;return this.sendSurveyCompletedEvent(e,"CompletedWithNoAnswers"),!1},t.prototype.submitExit=function(e){this._surveyIsShown=!1,this.sendResultsArrayToServer("SurveyExited",e),this.sendSurveyCompletedEvent(e,"ExitButtonClicked")},t.prototype.sendSurveyCompletedEvent=function(e,t){var n={surveyGuid:e.surveyGuid,status:t};e.answers&&e.answers.length>0&&(n.answers=e.answers),this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyCompleted,n)},t.prototype.sendResultsArrayToServer=function(e,n){if(!this.auditingEnabledIndicator.isEnabled())return;n.permutationId=this._getPermutationId,n.endUserGuid=this.endUsersManager.getEndUserGuid();var r=wf(n),i=this.wmAjax.execute({url:this.recorderServerManager.get()+"/Survey/"+e,data:{surveyDataSerialized:r},timeout:t.SEND_TO_SERVER_TIMEOUT});i.success(function(e){}),i.error(function(e,t,n){})},t.prototype.addSubmitCookie=function(e){var t="wm-SrvSmt-"+e;this.clientStorageManager.saveData(t,1,A)},t.prototype.startSurvey=function(e,t){var n=this,r=!0;this._surveyIsShown=!0;var i=window.walkmeExternalSurvey;if(this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.StartSurvey,e),i&&(e.surveyJson.Settings.isExternal||e.isSurveyExternal)){this.logger.customerLog("Starting external survey"),e.playGuid=this.auditStepsManager._currentPlayGUID,e.source=this._auditSource;var a=i(e,e.callback);a===!1?(r=!1,this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyFailedShowing)):this.sendSurveyPlayedEvent(e.surveyJson)}else{var s,u=e.surveyJson.Settings.shouldShowOneByOne;1==u?(this.logger.customerLog(Nf("Starting one by one survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),s=o.create("OneByOneSurvey",e)):(this.logger.customerLog(Nf("Starting regular survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),s=o.create("AllQuestionsSurvey",e)),s.show().then(function(){return n.commonEvents.raiseEvent("SurveyOnScreen")}),this.sendSurveyPlayedEvent(e.surveyJson)}return this.reportSurveyStarted(e,t,e.surveyJson.Questions),r},t.prototype.sendSurveyPlayedEvent=function(e){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyPlayed,{surveyId:e.Id})},t.prototype.surveyIsShown=function(){return this._surveyIsShown},t.prototype.submitSurvey=function(e,t,n,r){var i=this.buildAnswersObjectForServer(e,n);e.submitResults(i),this.logger.customerLog(Nf("Submitting answers for survey with id {0} and name {1}",e.surveyJson.Id,e.surveyJson.Name)),this.reportSurveySubmitted(e,t,n),r&&r()},t.prototype.surveyExited=function(e,t,n,r){this.commonEvents.raiseEvent(this.consts.EVENTS.Surveys.SurveyExited,{surveyParams:e,questions:t,answers:r,callback:n}),this.logger.customerLog(Nf("Survey with id {0} and name {1} exited",e.surveyJson.Id,e.surveyJson.Name));var i=this.buildAnswersObjectForServer(e,[]);e.submitExit(i),this.reportSurveyExited(e,t),n&&n()},t.prototype.buildAnswersObjectForServer=function(e,t){var n={};return n.playGuid=e.surveyPlayGUID,n.surveyGuid=e.surveyJson.Guid,n.tutorialId=e.tutorialId,n.source=this._auditSource,n.customVarsData=this.commonUtils.getWindowData(N.Var,e.surveyJson.Settings.customVar),n.customCookiesData=this.commonUtils.getWindowData(N.Cookie,e.surveyJson.Settings.customCookie),n.answers=[].concat.apply([],t),n.fullUrl=this.hostData.getUrl(),n},t.prototype.activateById=function(e,t,n){var r=this;n=n||{};var i=this.deployablesDict[e];if(!i)return this.logger.customerLog(Nf("Survey with id {0} doesn't exist",e),3),!1;n.surveyJson=i,n.submitResults=function(e){r.submitResults(e)},n.submitExit=function(e){r.submitExit(e)},n.drawBalloonFunc=this.popupBalloonDisplayer.showSpecialPopupBalloon,n.surveyPlayGUID=n.surveyPlayGUID||this.guidGenerator.generateGuid();var o=this.startSurvey(n,t);return this._surveyStartedInCurrentPage=o||this._surveyStartedInCurrentPage,o},t.prototype.autoStartEnabled=function(e){return!(this._surveyStartedInCurrentPage||this.permalinkManager.isTrainingInStartingMode()||this.currentWalkthruData.state!=this.consts.WALKTHRU_STATE.NOT_RUNNING&&this.currentWalkthruData.state!=this.consts.WALKTHRU_STATE.PAUSED)},t.prototype.reportSurveyExited=function(e,t){try{var n=this.mapSurveyParamsToEvent(e,t);n.reason=this.eventSender.CANCEL_REASONS.Xclick,this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Close,n)}catch(r){this.logger.error(r,"reportSurveyExited")}},t.prototype.reportSurveyStarted=function(e,t,n){try{this.walkmeVisibleReporter.report();var r=mtjQuery.extend(this.mapSurveyParamsToEvent(e,n),this.mapEventSource(e),this.reportInitiatorMapper.mapForExtend(t));this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Play,r)}catch(i){this.logger.error(i,"reportSurveyStarted")}},t.prototype.reportSurveySubmitted=function(e,t,n){try{var r=this.mapSurveyParamsToEvent(e,t);this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,r);for(var i=0;i<t.length;i++)for(var o=t[i],a=this.questionToEventMapper.map(o,e),s=n[i],u=0;u<s.length;u++){var l=mtjQuery.extend({},r,a,this.mapAnswerToProps(s[u],e.surveyJson),{indx:i+1});this.eventSender.postEvent(this.eventSender.EVENT_TYPES.Submitted,l)}}catch(c){this.logger.error(c,"reportSurveySubmitted")}},t.prototype.mapEventSource=function(e){if(!e.eventSource)return{};return{reason:e.eventSource}},t.prototype.mapSurveyParamsToEvent=function(e,t){var n=this.eventSender.EVENT_APPS.Survey,r={type:n,oId:e.surveyJson.Id,oName:e.surveyJson.Name,pId:e.surveyPlayGUID,total:0};return t&&t.length&&(r.total=t.length),r},t.prototype.mapAnswerToProps=function(e,t){var n={};n.oId=e.questionId;var r=this.getQuestionAndAnswerTextFromSurvey(t,e.questionId,e.answerId);return n.oName=r.questionText,
e.answerId&&(n.aoId=e.answerId,n.value=r.answerText),e.answerText&&(n.value=e.answerText),n.aType=this.consts.EVENT_SENDER_ACTIONS.SurveyQuestionAnswered,n.aAppType=this.consts.EVENT_SENDER_EVENT_APPS.SurveyQuestionAnswer,n},t.prototype.getQuestionAndAnswerTextFromSurvey=function(e,t,n){for(var r={},i=0;i<e.Questions.length;i++)if(e.Questions[i].Id==t){var o=e.Questions[i];if(r.questionText=o.Title,void 0===n)return r;for(var a=0;a<o.Answers.length;a++)if(o.Answers[a].Id==n){var s=o.Answers[a];return r.answerText=s.Title,r}}},t}(yi);Ic.SEND_TO_SERVER_TIMEOUT=1e4,o.register("SurveysManager").asCtor(Ic).dependencies("Lib, Consts, AbCurrentPermutationProvider, RecorderServerManager, PermalinkManager, GuidGenerator, AuditStepsManager, CommonUtils, CommonEvents, AuditSourceManager, HostData, EventSender, Logger, ReportInitiatorMapper, EndUsersManager, PopupBalloonDisplayer, WmAjax, ClientStorageManager, WalkmeVisibleReporter, AuditingEnabledIndicator, CurrentWalkthruData, QuestionToEventMapper");var wc=function(e){r(t,e);function t(t,n,r){e.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.ConditionBlock}),this.timerManager=r,this._resultsCache={}}return t.prototype.activateById=function(e,n){var r=this;if(void 0!=this._resultsCache[e])return this._resultsCache[e];var i={elementName:"conditionBlock"+e},a=o.get("ConditionCheckerFactory").createOld(i);a.onValueChanged(function(e){n&&n(e)});var s=this.getById(e);return a.evaluateAsync(s.ConditionsTree),this._resultsCache[e]=a.getCachedValue(),a.cleanResources(),this.timerManager.libSetTimeout(function(){r._resultsCache[e]=void 0},t.RESULT_CACHE_TIME),this._resultsCache[e]},t.RESULT_CACHE_TIME=500,t}(yi);o.register("ConditionBlocksManager").asCtor(wc).dependencies("Lib,Consts,TimerManager");var _c=function(e){r(t,e);function t(t,n,r,i,o,a){e.call(this,{deployables:[],lib:t}),this.oldConditionsCombiner=n,this.tagsInjector=r,this.tagsSegmentationProperties=i,this.deployablesManagerFactory=o,this.consts=a,this._name="Tag"}return t.prototype.injectTagsToDeployables=function(){var e=this.getAll();this.injectConditionsToDeployable(e)},t.prototype.injectConditionsToDeployable=function(e){var t=this.getCombinedDeployableTagsConditions(e,"Or");for(var n in this.consts.DEPLOYABLE_TYPE)if(this.consts.DEPLOYABLE_TYPE.hasOwnProperty(n)){var r=this.consts.DEPLOYABLE_TYPE[n],i=this.deployablesManagerFactory.get(r);if(i)for(var o=i.getAll(),a=0;a<o.length;a++){var s=o[a],u=t[r]&&t[r][s.Id],l=this.tagsSegmentationProperties.properties[r];s.Settings||(s.Settings={});var c=u;l&&(c=this.tagsInjector.inject(s,u,l)),s.Settings.ASEnabled&&this.injectConditionTreeToDeployableAutostart(s,c,"And")}}},t.prototype.injectConditionTreeToDeployableAutostart=function(e,t,n){var r=e.Settings.ASCT;e.Settings.ASCT=this.oldConditionsCombiner.combine(n,t,r),e.Settings.ASCT&&(e.Settings.ASCTEnabled=1)},t.prototype.getCombinedDeployableTagsConditions=function(e,t){for(var n={},r=0;r<e.length;r++){var i=e[r];if(i.Settings&&i.Settings.Condition)for(var o=i.LinkedDeployables.length-1;o>=0;o--){var a=i.LinkedDeployables[o],s=this.deployablesManagerFactory.get(a.DeployableType),u=s.getById(a.DeployableID);u&&this.updateTagsConditionDictionary(n,i,u,a.DeployableType,t)}}return n},t.prototype.updateTagsConditionDictionary=function(e,t,n,r,i){e[r]||(e[r]={});var o=e[r][n.Id];e[r][n.Id]=this.oldConditionsCombiner.combine(i,t.Settings.Condition,o)},t}(yi);o.register("TagsManager").asCtor(_c).dependencies("Lib, OldConditionsCombiner, TagsInjector, TagsSegmentationProperties, DeployablesManagerFactory, Consts");function Pc(e){var t;this.concat=function(n){if(e&&e.adapt(n),t)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);else t=n},this.get=function(e){for(var n=t,r=0;r<arguments.length;r++)n=n[arguments[r]];return n}}o.register("Positions").asInstance({Top:0,Right:1,Bottom:2,Left:3,TopLeft:4,TopRight:5,BottomRight:6,BottomLeft:7,Center:8}),o.register("FontsData").asFunction(function(){var e=new Pc;return e.concat({"walkme-opensans":{id:"opensans",name:"opensans",url:"/player/resources/fonts/opensans"}}),e.concat({"lib-font":{id:"libFont",name:"lib-font",url:"/player/resources/fonts/lib-font_v1",dummeyText:"&#xed50;"}}),e}),o.register("LocalStorageService").dependencies("CommonUtils, Logger").asFunction(function(e,t){if(e.isLocalStorageEnabled())return window.localStorage;return t.customerLog("localStorage is not enabled"),!1}),o.register("DesignTemplates").asCtor(Ac).dependencies("ArrayUtils");function Ac(e){var t=this;t.reset=r,t.set=i;function n(){r()}function r(){i([])}function i(n){if(!n)return;t.value=e.filter(n,function(e){return e}),o()}function o(){t.defaults={};var n=e.filter(t.value,function(e){return e.isDefault});e.foreach(n,function(e){t.defaults[e.entityType]=e.id})}n()}o.register("DesignTemplatesCalculatedCssGetter").asCtor(kc).dependencies("DesignTemplates, ArrayUtils");function kc(e,t){var n=this;n.get=r;function r(){var n=t.map(e.value,function(e){return e.css});return n.join(" ")}}o.register("SpecificEntityDesignTemplateCssClassGetter").asCtor(Oc).dependencies("SharedConsts, DesignTemplates");function Oc(e,t){var n=this;n.get=r;function r(n,r){if(!n)return;var i=n.DesignTemplateId||t.defaults[r];return i?e.designTemplateCssClassPrefix+i:void 0}}o.register("BBCodeDeployables").asFunction(Dc).dependencies("Consts");function Dc(e){return[{linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Walkthru},{linkSelector:".walkme-action-start-resource",idDataKey:"data-resource-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Resource},{linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Survey},{linkSelector:".walkme-action-start-bf",idDataKey:"data-bizflow-id",clickEvent:e.EVENTS.BBCodeStartActionClicked.Bizflow}]}o.register("BBCodeEventsBinder").asCtor(Nc).dependencies("BBCodeActivatorsFactory, CommonEvents, BBCodeDeployables, Consts");function Nc(e,t,n,r){var i=this;i.bind=o;function o(e,i,o){mtjQuery(n).each(function(n,s){mtjQuery(s.linkSelector,e).each(function(e){mtjQuery(this).click(function(e){var t=parseInt(mtjQuery(this).attr(s.idDataKey));a(s.clickEvent,t,o,i)}),t.raiseEvent(r.EVENTS.RegisterBBCodeDeployableClick,{element:mtjQuery(this)})})})}function a(n,r,i,o){var a=e.get(n);t.raiseEvent(n,{id:r,asyncCallback:function(){a(r,i),o&&o()}})}}o.register("BBCodeActivatorsFactory").asCtor(xc).dependencies("BBCodeDeployableActivators, Consts");function xc(e,t){var n=this,r=t.EVENTS.BBCodeStartActionClicked;n.get=i;function i(t){switch(t){case r.Walkthru:return e.walkthruActivator;case r.Bizflow:return e.bizflowActivator;case r.Resource:return e.resourceActivator;case r.Survey:return e.surveyActivator}}}o.register("BBCodeDeployableActivators").asCtor(Lc).dependencies("InitiatorTypeToAppTypeMapper, BusinessSolutionsManager, CommonEvents, ContentsManager, Consts, WalkthrusModule, CurrentWalkthruData, WalkthruStepsLoader, FlowsPlayer, FlowEventRaiser");function Lc(e,t,n,r,i,a,s,u,l,c){var d=this;d.walkthruActivator=p,d.bizflowActivator=g,d.resourceActivator=f,d.surveyActivator=h;function p(t,r){var i=e.mapBbcodeInitiator(r);n.deprecatedRaiseEvent("switchToWalkthru",t),u.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:i})})}function g(n,r){var i=e.mapBbcodeInitiator(r);t.activateById(n,i)}function f(t,n){var i=e.mapBbcodeInitiator(n);m(),r.activateById(t,i)}function h(t,n){var r=e.mapBbcodeInitiator(n),a=s.getCurrentWalkthru();if(m(),t==-1){if(a){var u=i.SURVEY_START_EVENTS.BbCodeClicked,l=a.Settings.survey&&a.Settings.survey.surveyId;o.get("WalkthruSurveyActivator").activateSurvey(a,u,r,l,"always")}}else WalkMeAPI.startSurveyById(t,r)}function m(){a.stopTutorial(!1,!0),c.raiseEventOnCurrentFlow(i.EVENTS.Flows.FlowStopped),l.stop()}}o.register("BBCodeAttributeState").asCtor(Mc).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeNestedTagParser");function Mc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:n.parse(r,e.ATTRIBUTE_STATE);break;case e.CLOSE_TAG:return t.go(r);default:r[e.ATTRIBUTE_STATE]+=i}}}}o.register("BBCodeCloseTagState").asCtor(Fc).dependencies("BBCodeParserConsts, BBCodeTagTranslator");function Fc(e,t){var n=this;n.go=r;function r(n){for(n.currentIndex=n.currentIndex+1;n.currentIndex<n.exp.length;n.currentIndex++){var r=n.exp.charAt(n.currentIndex);switch(r){case e.CLOSE_TAG:return t.translateTag(n);default:n[e.CLOSE_TAG_STATE]+=r}}}}o.register("BBCodeDataState").asCtor(Rc).dependencies("BBCodeParserConsts, BBCodeCloseTagState, BBCodeNestedTagParser");function Rc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.currentIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:if("/"==r.exp.charAt(r.currentIndex+1))return t.go(r);n.parse(r,e.DATA_STATE);break;default:r[e.DATA_STATE]+=i}}}}o.register("BBCodeOpenTagState").asCtor(Bc).dependencies("BBCodeParserConsts, BBCodeDataState, BBCodeAttributeState");function Bc(e,t,n){var r=this;r.go=i;function i(r){for(r.currentIndex=r.startIndex+1;r.currentIndex<r.exp.length;r.currentIndex++){var i=r.exp.charAt(r.currentIndex);switch(i){case e.OPEN_TAG:r.startIndex=r.currentIndex;break;case e.CLOSE_TAG:return t.go(r);case"=":case" ":return n.go(r);default:r[e.OPEN_TAG_STATE]+=i}}}}o.register("BBCodeNestedTagParser").asCtor(Uc);function Uc(){var e=this;e.parse=t;function t(e,t){var n=o.get("BBCodeSingleTagParser").parseSingleTag(e.exp,e.currentIndex);e[t]+=n.parsedExpPart||"",e.exp!=n.exp?(e.currentIndex=n.startIndex,e.exp=n.exp):e[t]+=e.exp.charAt(e.currentIndex)}}o.register("BBCodeParser").asCtor(Wc).dependencies("CommonUtils, BBCodeSingleTagParser");function Wc(e,t){var n=this,r={font:"font-family:$1",size:"font-size:$1px",color:"color:$1"},i=["onblur","onchange","onclick","oncontextmenu","oncopy","oncut","ondblclick","onerror","onfocus","onfocusin","onfocusout","onhashchange","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpaste","onreset","onresize","onscroll","onselect","onsubmit","ontextinput","onunload","onwheel"],o={};function a(){for(var e in r)o["\\["+e+"=([^\\]]+)]"]='<span style="'+r[e]+'">',o["\\[/"+e+"]"]="</span>"}n.parse=function(e){if(!e)return"";for(var n=0,r={exp:s(e),length:e.length};n<r.exp.length-1;)r=t.parseSingleTag(r.exp,n),n=r.startIndex;return r.exp};function s(e){if(e=u(e),e=l(e),e.replace)for(var t in o)e=e.replace(new RegExp(t,"g"),o[t]);return e}function u(e){return e.replace?e.replace(/javascript:/gi,""):e}function l(e){if(!e.indexOf)return e;if(e.indexOf("on")<0)return e;for(var t=0;t<i.length;t++)e=e.replace(new RegExp(i[t]+"\\s*=","gi"),"^");return e}a.apply(null,arguments)}o.register("BBCodeSingleTagParser").asCtor(Vc).dependencies("BBCodeParserConsts, BBCodeOpenTagState");function Vc(e,t){var n=this;n.parseSingleTag=r;function r(n,r){var o=n.indexOf(e.OPEN_TAG,r);if(o>-1){var a=i(n,o),s=t.go(a);if(s)return s}return{exp:n,startIndex:n.length}}function i(t,n){var r={startIndex:n,currentIndex:n,exp:t};return r[e.OPEN_TAG_STATE]="",r[e.ATTRIBUTE_STATE]="",r[e.DATA_STATE]="",r[e.CLOSE_TAG_STATE]="",r}}o.register("BBCodeTagTranslator").asCtor(Gc).dependencies("BBTagHandlerProvider");function Gc(e){var t=this;t.translateTag=n;function n(e){var t=e.exp.substring(e.startIndex,e.currentIndex+1),n=r(e,t),i=void 0!=n?n:t;return i!=t&&(e.exp=e.exp.replace(t,i)),{startIndex:e.currentIndex+(i.length-t.length),exp:e.exp,parsedExpPart:i}}function r(t,n){if("/"+t.openTag!=t.closeTag)return n;t.attr.indexOf("javascript:")>-1&&(t.attr="");var r=e.get(t.openTag);return r.getHTML(n,t.openTag,t.attr,t.data)}}o.register("BBCodeParserConsts").asCtor(Hc);function Hc(){var e=this;e.ATTRIBUTE_STATE="attr",e.DATA_STATE="data",e.OPEN_TAG_STATE="openTag",e.CLOSE_TAG_STATE="closeTag",e.OPEN_TAG="[",e.CLOSE_TAG="]"}o.register("BBCodeUtils").asCtor(jc).dependencies("CommonUtils");function jc(t){var n=this;this.generateCustomTagAttributes=function(e){var t="";if(mtjQuery.each(e,function(e,n){t+=e+'="'+n+'" '}),t=t.replace(/\s+$/,""))return" "+t;return t},this.getStrictProperties=function(e,t,r){var i=n.getProperties(e,t,r);return a(i,e),i},this.getProperties=function(e,t,n){void 0!=t&&(t=t.replace(/&quot;/gi,'"'));var i=o(t);return s(n,e,i),r(i),i};function r(e){for(var t=["width","height"],n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=i(e[r]))}}function i(e){if(e&&(t.isNumber(e)||e.match(/^\d+$/)))return e+"px";return e}function o(e){for(var t,n={},r=new RegExp('([^\\s]+)="([^\\"]*)"',"g");t=r.exec(e);){var i=t[1],o=t[2];n[i]=o}return n}function a(t,n){e.each(t,function(r,i){var o=e.inArray(r,n)==-1;o&&delete t[r]})}function s(e,t,n){if(void 0==e)return;for(var r=0;r<t.length;r++){var i=t[r],o=n[i],a=void 0==o,s=void 0!=e[i],u=a&&s;u&&(n[i]=e[i])}}}o.register("BBCodePropertiesConfig").asFunction(Yc);function Yc(){var e=["title"],t=["alt"].concat(e),n=["style","class","id","tabindex","aria-label","aria-live","role"].concat(e),r=["width","height"].concat(n),i=["channelmode","directories","fullscreen","left","top","target","location","menubar","resizable","scrollbars","status","titlebar","toolbar"].concat(r),o=["border","cellspacing","cellpadding"].concat(n),a=["autoplay"].concat(r),s=["href"].concat(n),u={table:o,tr:n,th:n,td:n,tbody:n,p:n,div:r,span:r,iframe:r,youtube:a,vimeo:a,wistia:a,brightcove:a,wt:s,bf:s,flow:s,url:i,flash:r,img:t,b:e,u:e,i:e,ul:e,li:e,survey:s,trg:n,resource:s};return u}o.register("BBCodeVideoVendorsConfig").asCtor(zc).dependencies("RecorderServerManager,Logger");function zc(e,t){var n={youtube:{url:r("http://www.youtube.com/embed/"),name:"youtube",allowFullScreen:"allowfullscreen"},vimeo:{url:r("http://player.vimeo.com/video/"),name:"vimeo",allowFullScreen:"webkitAllowFullScreen mozallowfullscreen allowFullScreen"},wistia:{url:r("http://fast.wistia.net/embed/iframe/"),name:"wistia",allowFullScreen:"allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen",additionalParams:' allowtransparency="true" scrolling="no" class="wistia_embed" name="wistia_embed"'}};this.get=function(e){var r=n[e];if(r)return r;t.error(new Error("Unsupported video vendor "+e))};function r(e){return i()?e.replace("http:","https:"):e}function i(){return e.get()&&e.get().indexOf("https:")!=-1}}o.register("BBCodeUrlTagHandler").asCtor(Qc).dependencies("BBCodePropertiesConfig,BBCodeUtils, CommonUtils, SiteConfigManager");function Qc(e,t,n,r){var i=0,o={url:'href="',anchor:'name="',email:'href="mailto: '};this.getHTML=function(n,r,i,s){var l=i;if(l){var p=l.split(" ");if(!d(p[0],e[r])){var g=p[0];l=p.splice(1,p.length-1).join(" ")}}var f,h=t.getStrictProperties(e[r],l,{"class":"",style:"",target:"_blank"}),m={classes:h["class"],target:h.target,src:c(g||s),label:s,style:h.style,title:h.title,data:l.replace(new RegExp("^"+g||s),"")};f=h.height&&h.width?a(h,m):u(h,m,o[r]);var v=yf.to_html(f,m);return v};function a(e,t){var n='<span id="walkme-new-window-link-{{{spanId}}}"'+(t.title?' title="{{{title}}}"':"")+"><a class=\"walkme-custom-bbcode-link {{{classes}}}\" style=\"color: inherit; text-decoration:underline; {{{style}}}\" href=# onclick=\"event.preventDefault ? event.preventDefault() : event.returnValue = false;_walkmeInternals.ctx.get('CommonEvents').raiseEvent('BBCodeLinkClicked', {Src : '{{{src}}}' });window.open({{{srcForOpen}}},'{{{target}}}',{{{specs}}});\" data-url='"+t.data+"'>{{{label}}}</a></span>",r=i++;t.spanId=r;var o=s(e);return t.specs="'"+o+"'",t.srcForOpen="'"+t.src.replace(/\'/g,"")+"'",n}function s(e){for(var t=["width","height","channelmode","directories","fullscreen","left","top","location","menubar","resizable","scrollbars","status","titlebar","toolbar"],n="",r=t.length-1;r>=0;r--){var i=t[r];e[i]&&(n+=Nf("{0}={1},",i,e[i].replace(/\'/g,"").replace(/px$/,"")))}return n.length>0&&(n=n.substring(0,n.length-1)),n}function u(e,t,n){var r="<a"+(t.title?' title="{{{title}}}"':"")+' target="{{{target}}}" class="walkme-custom-bbcode-link {{{classes}}}" onclick="_walkmeInternals.ctx.get(\'CommonEvents\').raiseEvent(\'BBCodeLinkClicked\', {Src : \'{{{src}}} \'});" style="color: inherit; text-decoration:underline; {{{style}}}" {{{linkTypes}}}{{{src}}}" data-url=\''+t.data+"'>{{{label}}}</a>";return t.linkTypes=n,r}var l=function(){var e=r.get().Settings;return e&&e.UrlWl};function c(e){var t=l();if(void 0==t)return e;for(var r=0;r<t.length;r++)if(n.isLike(e,t[r]))return e;return""}function d(e,t){for(var n=0;n<t.length;n++){var r=e.indexOf("=");if(r>-1&&(e=e.substring(0,r)),t[n]==e)return!0}return!1}}o.register("BBCodeWTTagHandler").asCtor(Kc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function Kc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],p=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+p+'" class="walkme-custom-bbcode-wt-link walkme-action-start-wt '+d+'" data-walkthru-id="'+s+'"'+t.generateCustomTagAttributes(c)+">"+a+"</a>"}}o.register("BBCodeBFTagHandler").asCtor(qc).dependencies("BBCodePropertiesConfig, BBCodeUtils, CommonUtils");function qc(e,t,n){this.getHTML=function(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=l[0],s=n.isNumber(s)?s:-1,u=l.splice(1,l.length-1).join(" ")}var c=t.getStrictProperties(e[i],u,{"class":"",style:""}),d=c["class"],p=c.style;return delete c["class"],delete c.style,'<a style="cursor: pointer; '+p+'" class="walkme-custom-bbcode-bf-link walkme-action-start-bf '+d+'" data-bizflow-id="'+s+'"'+t.generateCustomTagAttributes(c)+">"+a+"</a>"}}o.register("BBCodeImgTagHandler").asCtor(Xc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Xc(e,t){this.getHTML=function(r,i,o,a){var s=e.getStrictProperties(t[i],o);return'<img src="'+a+'"'+n(o)+e.generateCustomTagAttributes(s)+"/>"};function n(e){var t=r(e);return t.toTagAttributes()}function r(e){var t=new RegExp("^(\\d+)x(\\d+)[^\\]]*"),n=o(e,t);return{height:n[0],width:n[1],toTagAttributes:i}}function i(){return this.height&&this.width?' width="'+this.height+'px" height="'+this.width+'px" style="width:'+this.height+"px; height:"+this.width+'px"':""}function o(e,t){var n=t.exec(e);return null!=n&&n.length>2?n.splice(0,1):n=[void 0,void 0],n}}o.register("BBCodeVideoTagHandler").asCtor(Jc).dependencies("BBCodePropertiesConfig, BBCodeUtils, BBCodeVideoVendorsConfig");function Jc(t,n,r){this.getHTML=function(e,o,a,s){var u=n.getProperties(t[o],a,{width:420,height:315}),l=i(u),c=r.get(o),d=c.url+s+"?"+l,p='<iframe data-{{{vendorName}}}-id="{{{videoId}}}" src="{{{src}}}" frameborder="0" {{{allowFullScreen}}} style="position:relative; width: {{{width}}}; height: {{{height}}};"{{{additionalParams}}}></iframe>',g=yf.to_html(p,{vendorName:c.name,videoId:s,width:u.width,height:u.height,src:d,allowFullScreen:c.allowFullScreen,additionalParams:c.additionalParams});return g};function i(t){var n="",r=Df(t);return delete r.height,delete r.width,e.each(r,function(e,t){n+=Nf("{0}={1}&",e,t)}),n}}o.register("BBCodeIframeTagHandler").asCtor($c).dependencies("BBCodeUtils, BBCodePropertiesConfig");function $c(e,t){this.getHTML=function(n,r,i,o){var a=e.getProperties(t[r],i,{width:420,height:315}),s=o,u='<iframe src="{{{src}}}" frameborder="0" style="width: {{{width}}}; height: {{{height}}};"></iframe>',l=yf.to_html(u,{src:s,width:a.width,height:a.height});return l}}o.register("BBCodeHTMLTagHandler").asCtor(Zc).dependencies("BBCodeUtils, BBCodePropertiesConfig");function Zc(e,t){this.getHTML=function(n,r,i,o){return"p"==r&&(i=" "+i),"<"+r+e.generateCustomTagAttributes(e.getStrictProperties(t[r],i))+" data-"+r+"='"+i+"'>"+o+"</"+r+">"}}o.register("BBCodeSurveyTagHandler").asCtor(ed).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function ed(e,t,n){var r=this;r.getHTML=i;function i(r,i,o,a){var s=-1,u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:-1}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-survey-id="'+s+'" class="walkme-custom-bbcode-survey walkme-action-start-survey" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}o.register("BBCodeResourceTagHandler").asCtor(td).dependencies("BBCodeUtils, BBCodePropertiesConfig, CommonUtils");function td(e,t,n){this.getHTML=function(r,i,o,a){var s="",u=o;if(u){var l=u.split(" ");s=n.isNumber(l[0])?l[0]:""}var c=e.getStrictProperties(t[i],u);return delete c["class"],delete c.style,'<a data-resource-id="'+s+'" class="walkme-action-start-resource" style="cursor: pointer;"'+e.generateCustomTagAttributes(c)+">"+a+"</a>"}}o.register("BBCodeFlashTagHandler").asCtor(nd).dependencies("BBCodeUtils, BBCodePropertiesConfig");function nd(e,t){this.getHTML=function(n,r,i,o){var a=e.getStrictProperties(t[r],i,{width:420,height:315}),s='<div class="walkme-custom-flash-wrapper" style="width: {{{width}}}; height: {{{height}}};"><object type="application/x-shockwave-flash" data="{{{swf}}}" allowNetworking="none" allowFullScreen="false" width="{{{width}}}" height="{{{height}}}"><param name="SRC" value="{{{swf}}}"/><param name="allowNetworking" value="none"/><param name="allowFullScreen" value="false"/></object></div>',u=yf.to_html(s,{swf:o,width:a.width,height:a.height});return u}}o.register("BBCodeJQueryTagHandler").asCtor(rd).dependencies("CommonUtils,JQueryElementFinder");function rd(e,t){this.getHTML=function(n,r,i,a){var s=e.encodeText(t.getjQueryElementText(a));return o.get("BBCodeParser").parse(s)}}o.register("BBCodeCookieTagHandler").asCtor(id).dependencies("CommonUtils");function id(e){this.getHTML=function(t,n,r,i){var a=e.getWindowCookie(i);return null!=a&&a!==!1||(a=""),o.get("BBCodeParser").parse(e.encodeText(a))}}o.register("BBCodeVarTagHandler").asCtor(od).dependencies("CommonUtils");function od(e){this.getHTML=function(t,n,r,i){var a=e.getWindowVar(i);return null!=a&&a!==!1||(a=""),o.get("BBCodeParser").parse(e.encodeText(a))}}o.register("BBCodeCustomTagHandler").asCtor(ad);function ad(){var e=this;e.getHTML=t;function t(e,t,n,r){var i=window.walkme_custom_bbcode_parser;if("function"==typeof i)return i(e,t,n,r)}}o.register("BBCodeTriggerTagHandler").asCtor(sd).dependencies("CommonUtils");function sd(e){var t=this;t.getHTML=n;function n(t,n,r,i){var o=-1;return r&&e.isNumber(r)&&(o=r),'<a style="cursor: pointer;" class="trg-'+o+'">'+i+"</a>"}}o.register("BBTagHandlerProvider").asCtor(ud).dependencies("BBCodeUrlTagHandler, BBCodeWTTagHandler, BBCodeBFTagHandler, BBCodeImgTagHandler, BBCodeVideoTagHandler,BBCodeIframeTagHandler, BBCodeHTMLTagHandler, BBCodeSurveyTagHandler, BBCodeFlashTagHandler,BBCodeJQueryTagHandler, BBCodeCookieTagHandler, BBCodeVarTagHandler, BBCodeCustomTagHandler,BBCodeTriggerTagHandler, BBCodeResourceTagHandler");function ud(e,t,n,r,i,o,a,s,u,l,c,d,p,g,f){var h=this;h.get=m;function m(h){switch(h){case"url":return e;case"wt":return t;case"bf":case"flow":return n;case"img":return r;case"youtube":case"vimeo":case"wistia":return i;case"iframe":return o;case"b":case"u":case"i":case"table":case"tr":case"th":case"td":case"tbody":case"div":case"span":case"ul":case"li":case"p":return a;case"survey":return s;case"resource":return f;case"flash":return u;case"jquery":return l;case"cookie":return c;case"var":return d;case"trg":return g;default:return p}}}o.register("UIVariationsAdapter").asCtor(cd).dependencies("ResourceManager"),o.register("UITemplatesAdapter").asCtor(dd).dependencies("ResourceManager");function ld(e,t,n){if(!e)return n;n=n||{};var r=e.attributes;if(r)for(var i in r)if(r.hasOwnProperty(i)&&"string"==typeof r[i]&&(r[i]=r[i].replace("###ResourcesDir###",t),"font-family"==i)){n.fonts=n.fonts||[];var o=r[i].split(",");n.fonts.push(mtjQuery.trim(o[0]))}var a=e.children;if(a)for(var s in a)a.hasOwnProperty(s)&&ld(a[s],t,n);return n}function cd(e){this.adapt=function(t){if(!t)return;for(var n in t){var r=e.getResourcePath("/player/resources/templates/"+n),i=ld(t[n],r);t[n].metaData=i}}}function dd(e){this.adapt=function(t){if(!t)return;for(var n in t)if(t[n])for(var r in t[n]){var i=t[n][r];if(i&&i.Css){var o=e.getResourcePath("/player/resources/templates/"+n+"/"+r),a=ld(i.Css,o);i.Css.metaData=a}}}}o.register("UITemplates").asCtor(Pc).dependencies("UITemplatesAdapter"),o.register("UIVariations").asCtor(Pc).dependencies("UIVariationsAdapter"),o.register("UIDisplayers").asFunction(function(){var e=new Pc;return e.concat({1:"PopupDisplayer"}),e}).asSingleton(),o.register("UIComponents").asFunction(function(){var e=new Pc;return e.concat({1:"ShoutOut",2:"ShoutOut",3:"Quiz",4:"QuizAnnouncement"}),e}).asSingleton();var r=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},pd=function(t){r(n,t);function n(e,n,r,i,o,a,s,u,l){t.call(this,e,n,i,a,l),this._bbCodeEventsBinder=o,this._consts=a,this._commonEvents=r,this._specificEntityDesignTemplateCssClassGetter=s,this._sharedConsts=u,this.createUi()}return n.prototype.registerEvents=function(){t.prototype.registerEvents.call(this),this.registerBBCodeEvents()},n.prototype.registerBBCodeEvents=function(){var e=this.getBBcodeEventCallback(),t={objectId:this._uiComponent.Id,type:L.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT};this._bbCodeEventsBinder.bind(this._uiCreator.ui,e,t)},n.prototype.getBBcodeEventCallback=function(){var t=e.proxy(function(){this.destroy()},this),n={uiCreator:this._uiCreator,defaultt:t,defaultValue:t,returnValue:null};this._commonEvents.raiseEvent("shoutoutBBCodeClickCallback",n);var r=n.returnValue;return r},n.prototype.createConfig=function(){var e=t.prototype.createConfig.call(this),n=this._specificEntityDesignTemplateCssClassGetter.get(this._uiComponent,this._sharedConsts.ENTITY_TYPE.shoutout);return n&&(e.designTemplateCssClass=n),e},n.prototype.getInitiatorType=function(){return L.STEP_PLAY_INITIATOR_ENUM.SHOUTOUT},n}(K);o.register("ShoutOut").asCtor(pd).asProto().dependencies("ActionsFactory, CommonUtils, CommonEvents, BBCodeParser, BBCodeEventsBinder, Consts, SpecificEntityDesignTemplateCssClassGetter, SharedConsts");var gd=function(){function t(){this.events={}}return t.prototype.setUI=function(t,n,r,i){var a=t.Actions?e(t.Actions).filter(function(e,t){return t.IsActive}).length:0,s="wm-one-button";2==a?s="wm-two-buttons":0==a&&(s="wm-no-buttons"),r.ButtonsClass=s,this.ui=o.get("TemplatesFactory").get(t.UITemplateId,t.UITemplateVersion,n,r,i)},t.prototype.registerEvents=function(e,t,n,r,i){this.events[e]={name:t,actionId:n,body:r.libAction}},t.prototype.getUI=function(){return this.bindEvents(),this.ui},t.prototype.bindEvents=function(){},t}(),fd=function(t){r(n,t);function n(){t.apply(this,arguments)}return n.prototype.bindEvents=function(){var t=this;e.safeEach(this.events,function(e,n){t.ui.find(e).on(n.name,n.body)})},n}(gd);R.register(L.PLATFORM.Web,function(){o.register("UICreator").asCtor(fd).asProto()}),R.register(L.PLATFORM.MobileWeb,function(){o.register("UICreator").asCtor(fd).asProto()});var hd=function(t){r(n,t);function n(){t.apply(this,arguments),this._resourceManager=o.get("ResourceManager"),this._eventsRegistrator=o.get("MobileEventsRegistrationsHandler"),this._customCssSetter=o.get("CustomCssSetter")}return n.prototype.getUI=function(){t.prototype.getUI.call(this),this.buildHTML(),this.setID();var n=e("head",this._uiHTML);return this.appendMetaTag(),this.appendCustomCSS(n),this.appendScriptTag(),this.appendUIObjectToBody(),this.registerScripts(),this._uiHTML},n.prototype.registerEvents=function(e,t,n,r,i){this._eventsRegistrator.registerEvent(e,t,n,r,i),this._eventsRegistrator.registerCallbacks(this.ui.attr("id"),n)},n.prototype.bindEvents=function(){this._eventsRegistrator.bindEventsToUI(this.ui)},n.prototype.registerScripts=function(){this._eventsRegistrator.registerScripts(this.ui.attr("id"))},n.prototype.buildHTML=function(){this._uiHTML=e("<html>"),this._head=e("<head>"),this._body=e("<body>"),this._uiHTML.append(this._head),this._uiHTML.append(this._body)},n.prototype.setID=function(){this._uiHTML.attr("id",this.ui.attr("id"))},n.prototype.appendCustomCSS=function(e){var t=this._customCssSetter.getAllCustomCssProp();this._resourceManager.injectCss(t,"walkme-custom-css",e)},n.prototype.appendMetaTag=function(){this._head.append('<meta name="viewport" content= "width=device-width, initial-scale=1.0">')},n.prototype.appendUIObjectToBody=function(){this.ui.show(),this._body.append(this.ui)},n.prototype.getScriptContent=function(){return this._eventsRegistrator.createEventFunction(this.ui.attr("id"))},n.prototype.appendScriptTag=function(){var e=this.getScriptContent();this.addScriptTagWithContent(e)},n.prototype.addScriptTagWithContent=function(e){var t=document.createElement("script");t.type="text/javascript",t.appendChild(document.createTextNode(e)),this._head[0].appendChild(t)},n}(gd);R.register(L.PLATFORM.iOS,function(){o.register("UICreator").asCtor(hd).asProto()}),R.register(L.PLATFORM.Android,function(){o.register("UICreator").asCtor(hd).asProto()});var md=function(t){r(n,t);function n(n){t.call(this),this._isVisible=!1;var r=o.get("Lib"),i=o.get("FramesetsUtils").shouldHandlePageAsFramesets()?o.get("BiggestFrameProvider").getBiggestFrame().contentWindow:window;this._lib=r,this._topWindow=e(i),this._topContainer=e(o.get("CommonUtils").getBody(i.document)),this._settings=n}return n.prototype.setUiObject=function(e){this._uiObject=e},n.prototype.getContainer=function(){return this._topWindow},n.prototype.append=function(e){this._topContainer.append(this._uiObject),e&&e()},n.prototype.remove=function(e){this._uiObject.remove(),this._isVisible=!1,e&&e()},n.prototype.show=function(e){this._uiObject.show(),this._isVisible=!0,e&&e()},n.prototype.hide=function(e){this._uiObject.hide(),this._isVisible=!1,e&&e()},n.prototype.isVisible=function(){return this._isVisible},n}(Q),vd=function(t){r(n,t);function n(e){t.call(this,e),this.DEFAULT_Z_INDEX=2147483631,this._positions=o.get("Positions"),this._popupUtil=o.get("PopupUIUtil"),this._popupUtil.setSettings(e)}return n.prototype.setUiObject=function(e){t.prototype.setUiObject.call(this,e),this._popupUtil.setUiObject(this._uiObject)},n.prototype.show=function(t){if(this._isVisible)return void(t&&t());this.unbindEvents();var n;n=this._settings["z-index"]?this._settings["z-index"]:this.DEFAULT_Z_INDEX,this._uiObject.css("z-index",n);var r=e.proxy(function(){this._isVisible=!0,t&&t()},this);this.pop(r)},n.prototype.pop=function(e){var t=parseInt(this._settings.position,10),n=t==this._positions.Center;n?this.popCenter(e):this.popCorner(t,e)},n.prototype.handleOverlay=function(){var e=Number(this._uiObject[0].style.zIndex),t=this._popupUtil.getOverlay();t&&(e==this.DEFAULT_Z_INDEX&&this._uiObject.css("z-index",e+1),t.show())},n.prototype.popCorner=function(e,t){this._uiObject.css({position:"fixed"}),this.handleOverlay();var r=(this._settings.marginV||0)+"px",i=(this._settings.marginH||0)+"px";switch(e){case this._positions.Top:this._uiObject.addClass(n.POSITION_PREFIX+"top"),this._uiObject.css({top:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginTop:r});break;case this._positions.Right:this._uiObject.addClass(n.POSITION_PREFIX+"right"),this._uiObject.css({right:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginRight:i});break;case this._positions.Bottom:this._uiObject.addClass(n.POSITION_PREFIX+"bottom"),this._uiObject.css({bottom:0,left:"50%",marginLeft:-(this._uiObject.outerWidth()/2),marginBottom:r});break;case this._positions.Left:this._uiObject.addClass(n.POSITION_PREFIX+"left"),this._uiObject.css({left:0,top:"50%",marginTop:-(this._uiObject.outerHeight()/2),marginLeft:i});break;case this._positions.TopLeft:this._uiObject.addClass(n.POSITION_PREFIX+"top-left"),
this._uiObject.css({left:0,top:0,marginTop:r,marginLeft:i});break;case this._positions.TopRight:this._uiObject.addClass(n.POSITION_PREFIX+"top-right"),this._uiObject.css({right:0,top:0,marginTop:r,marginRight:i});break;case this._positions.BottomRight:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-right"),this._uiObject.css({right:0,bottom:0,marginBottom:r,marginRight:i});break;case this._positions.BottomLeft:this._uiObject.addClass(n.POSITION_PREFIX+"bottom-left"),this._uiObject.css({left:0,bottom:0,marginBottom:r,marginLeft:i})}this.fadeIn(t)},n.prototype.popCenter=function(t){this._uiObject.addClass("wm-position-center"),this._lib.centerElementInPage(this._uiObject,!1),this.handleOverlay(),this.fadeIn(t),this._resizeHandler=e.proxy(function(){this._uiObject.stop(!1,!0),this._lib.centerElementInPage(this._uiObject,!0)},this),this._topWindow.bind(n.MOVEMENT_EVENTS,this._resizeHandler)},n.prototype.fadeIn=function(e){this._uiObject.stop(!0,!1).css("opacity",1).hide().fadeIn(400,e)},n.prototype.hide=function(t){if(!this._isVisible)return void(t&&t());this.unbindEvents(),this._popupUtil.removeOverlay(),this._uiObject.stop(!0,!1).css("opacity",1).show().fadeOut(200,e.proxy(function(){this._isVisible=!1,t&&t()},this))},n.prototype.remove=function(t){this.hide(e.proxy(function(){this._uiObject.remove(),t&&t()},this))},n.prototype.unbindEvents=function(){this._resizeHandler&&this._topWindow.unbind(n.MOVEMENT_EVENTS,this._resizeHandler),this._resizeHandler=null},n.EVENT_SUFFIX="walkmeDisplayer",n.MOVEMENT_EVENTS="scroll."+n.EVENT_SUFFIX+", resize."+n.EVENT_SUFFIX,n.POSITION_PREFIX="wm-position-",n}(md);R.register(L.PLATFORM.Web,function(){o.register("PopupDisplayer").asCtor(vd).asProto()});var Sd=function(t){r(n,t);function n(){t.apply(this,arguments),this._css="/* Template 4.3 Only Fallbacks */ /* All */ @media only screen and (max-width: 640px) {   .wm-template-light,   .wm-template-standout-title,   .wm-template-standout-actions {    min-width: 85% !important;   }    } /* Light */ @media only screen and (max-height: 400px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-light .wm-template-text{\t \t\tmax-height: 400px; \t} }  /* Standout Title */ @media only screen and (max-height: 400px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 75px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-title .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-title.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-title.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }  /* Standout Action */ @media only screen and (max-height: 400px) { \t.wm-template-standout-actions .wm-template-text{ \t\tmax-height: 75px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 50px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-button { \t\tpadding-top: 8px; \t\tpadding-bottom: 8px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 100px; \t} }  @media only screen and (min-height: 401px) and (max-height: 500px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 175px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 150px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 200px; \t} }  @media only screen and (min-height: 501px) and (max-height: 600px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 275px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 250px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 300px; \t} }  @media only screen and (min-height: 601px) { \t.wm-template-standout-actions .wm-template-text{\t \t\tmax-height: 375px; \t}  \t.wm-template-standout-actions.wm-two-buttons .wm-template-text{ \t\tmax-height: 350px; \t}  \t.wm-template-standout-actions.wm-no-buttons .wm-template-text{ \t\tmax-height: 400px; \t} }",this._resourceManager=o.get("ResourceManager")}return n.prototype.append=function(n){this._uiObject.css("position","fixed");var r=e("#walkme-mobile-css-old-version");0==r.length&&this._resourceManager.injectCss(this._css,"walkme-mobile-css-old-version"),t.prototype.append.call(this,n)},n.prototype.pop=function(e){this.handleOverlay(),this.fadeIn(e)},n.prototype.handleOverlay=function(){t.prototype.handleOverlay.call(this);var n=this._popupUtil.getOverlay(),r=n&&n.getOverlayElement();if(!r)return;r.on("click.walkme touchend.walkme",e.proxy(function(){this.remove()},this))},n}(vd);R.register(L.PLATFORM.MobileWeb,function(){o.register("PopupDisplayer").asCtor(Sd).asProto()});var yd=function(t){r(n,t);function n(e){t.call(this),this._isVisible=!1,this._popupUtil=o.get("PopupUIUtil"),this._mobileUtils=o.get("MobileUtils"),this._constsDi=o.get("Consts"),this._popupUtil.setSettings(e),this._settings=e}return n.prototype.setUiObject=function(t){this._uiObject=t,this._body=e("body",this._uiObject)},n.prototype.getContainer=function(){return},n.prototype.append=function(e){e&&e()},n.prototype.remove=function(e){this.hide(e)},n.prototype.show=function(t){if(this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!0,t&&t()},this),r=e.proxy(function(e){this._mobileUtils.message(this._uiObject[0].id,{action:"_walkmeInternals.callbacks['"+e+"']['message']['.walkme-x-button']['click']()"},L.MOBILE_COMMANDS.ACTION.libAction)},this),i=this._settings.viewType||this._constsDi.SHOUTOUT_TYPES.customView,o=[{name:"success",callback:n},{name:"close",callback:r}];this.setOverlayInHtml(),this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id,html:this._uiObject.html(),viewType:i},L.MOBILE_COMMANDS.VIEW.show,o)},n.prototype.hide=function(t){if(!this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!1,t&&t()},this),r=[{name:"success",callback:n}];this._mobileUtils.message(this._uiObject[0].id,{id:this._uiObject[0].id},L.MOBILE_COMMANDS.VIEW.hide,r)},n.prototype.isVisible=function(){return this._isVisible},n.prototype.setOverlayInHtml=function(){if(this._overlay=this._popupUtil.getOverlay(),this._overlay){var e=this._overlay.getOverlayElement();e.css("position","absolute"),e.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");var t=o.get("MobileEventsRegistrationsHandler"),n="Close",r="#"+e.attr("id");t.registerEvent(r,"click",L.MOBILE_COMMANDS.ACTION.libAction,null,n),t.bindEventsToUI(e),this._body.prepend(e)}},n}(Q);R.register(L.PLATFORM.iOS,function(){o.register("PopupDisplayer").asCtor(yd).asProto()}),R.register(L.PLATFORM.Android,function(){o.register("PopupDisplayer").asCtor(yd).asProto()});var Ed=function(){function t(e,t,n,r,i,o,a,s){this.CLASSES_PREFIX="wm-",this.STATES_DATA_KEY="templatesFactoryStates",this._logger=e,this._mustache=t,this._uiTemplates=n,this._resourceManager=r,this._fontsData=i,this._siteConfigManager=o,this._hostData=a,this._commonUtils=s}return t.prototype.addResources=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t).Css;this.loadVariationsFonts([o].concat(n),r,i)},t.prototype.get=function(e,t,n,r,i){var o=this._uiTemplates.get(e,t),a=this._commonUtils.createElementInDocument(yf.to_html(o.Html,r||{}),i||window.document);this.addDefaultClasses(a),this.inheritProperties(a);for(var s=a.wrap("<div />").parent(),u=n.length-1;u>=0;u--)this.recursiveApplyStyle(s,n[u]);return this.recursiveApplyStyle(s,o.Css),this.addResetCss(a),this.addStateHandler(a),a.unwrap(),a.addClass(r.designTemplateCssClass),a.hide()},t.prototype.loadVariationsFonts=function(e,t,n){for(var r=[],i=0;i<e.length;i++){var o=e[i].metaData&&e[i].metaData.fonts;if(o)for(var a=0;a<o.length;a++){var s=this._fontsData.get(o[a]);s&&r.push(s)}}this._resourceManager.fonts(r,n||null,t,t)},t.prototype.addDefaultClasses=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.addClass(this.CLASSES_PREFIX+t),e.addClass(this.CLASSES_PREFIX+this._hostData.browser.name.toLowerCase()),"IE"==this._hostData.browser.name&&e.addClass(this.CLASSES_PREFIX+"ie-"+this._hostData.browser.version)},t.prototype.inheritProperties=function(t){var n=this,r=t.allCss();t.children().each(function(t,i){var o=e(i);o.cssReset(r),n.inheritProperties(o)})},t.prototype.addResetCss=function(e){},t.prototype.addStateHandler=function(t){var n=this;t.find("*").andSelf().each(function(t,r){r=e(r);var i=r.data(n.STATES_DATA_KEY);if(!i)return;var o=i.hover;n.addHoverState(r,o);var a=i.click;n.addClickState(r,a),r.removeData(n.STATES_DATA_KEY)})},t.prototype.addHoverState=function(e,t){if(!t)return;var n=e.attr("style");e.hover(function(){e.css(t)},function(){e.attr("style",n)})},t.prototype.addClickState=function(e,t){if(!t)return;var n=e.attr("style");e.mousedown(function(n){e.css(t)}),e.bind("mouseup blur",function(){e.attr("style",n)})},t.prototype.recursiveApplyStyle=function(e,t){if(!t||!t.children)return;for(var n in t.children)if(t.children.hasOwnProperty(n)){var r=n.split(":"),i=e.find(r[0]),o=t.children[n].attributes;for(var a in o)o.hasOwnProperty(a)&&(this._commonUtils.isIe7or8()&&"-ms-filter"==a||this.handleCSS(i,a,o[a],r[1]));this.recursiveApplyStyle(i,t.children[n].children)}},t.prototype.handleCSS=function(e,t,n,r){if(n instanceof Array)for(var i in n)this.appendCSS(e,t,n[i],r);else this.appendCSS(e,t,n,r)},t.prototype.appendCSS=function(e,t,n,r){if(!r)return void e.cssReset(t,n);r=r.toLowerCase(),this.stateCss(r,e,t,n)},t.prototype.stateCss=function(e,t,n,r){var i=t.data(this.STATES_DATA_KEY)||{};i[e]||(i[e]={}),i[e][n]||(i[e][n]=r),t.data(this.STATES_DATA_KEY,i)},t}();R.register(L.PLATFORM.Android,function(){o.register("TemplatesFactory").asCtor(Ed).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils")}),R.register(L.PLATFORM.iOS,function(){o.register("TemplatesFactory").asCtor(Ed).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils")});var Td=function(e){r(t,e);function t(){e.apply(this,arguments)}return t.prototype.addResetCss=function(e){var t=this._siteConfigManager.get().Direction||"ltr";e.find("span,button,input,label,a,b,br,img,i,u").cssReset("display","inline"),e.find("li").cssReset("display","list-item"),e.find("ul").cssReset("padding-left","40px"),e.find("*").andSelf().cssReset(D).cssReset("direction",t)},t}(Ed);R.register(L.PLATFORM.MobileWeb,function(){o.register("TemplatesFactory").asCtor(Td).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils")}),R.register(L.PLATFORM.Web,function(){o.register("TemplatesFactory").asCtor(Td).asSingleton().dependencies("Logger, Mustache, UITemplates, ResourceManager, FontsData, SiteConfigManager, HostData, CommonUtils")}),o.register("UIComponentsFactory").asCtor(Cd).asSingleton().dependencies("Logger, UIComponents, CommonEvents"),o.register("DisplayersFactory").asCtor(Cd).asSingleton().dependencies("Logger, UIDisplayers, CommonEvents");function Cd(e,t,n){this.get=function(r,i){try{var a=t.get(r),s=o.create(a,i);return s.once("show-end",function(){n.deprecatedRaiseEvent("show-end",s)}),s}catch(u){e.error(u,"error generating class")}}}var bd=function(){function e(e){this._logger=e}return e.prototype.show=function(e,t){this.logError()},e.prototype.hide=function(e){this.logError()},e.prototype.isVisible=function(){return this.logError(),!1},e.prototype.logError=function(){this._logger.error("This applet cannot be played on this platform.")},e}();R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("PlatformDisplayer").asCtor(bd).asProto().dependencies("Logger")});var Id=function(){function t(e,t,n){this._consts=e,this.htmlDecoder=t,this._component=n,this._mobileUtils=o.get("MobileUtils"),this._isVisible=!1}return t.prototype.show=function(t,n,r){if(this._isVisible)return void(t&&t());var i=e.proxy(function(){this._isVisible=!0,t&&t()},this),o=e.proxy(function(e,t){this._isVisible=!1,n&&n(e,t)},this),a=e.proxy(function(){r&&r()},this),s=[{name:"success",callback:i},{name:"close",callback:o},{name:"fail",callback:a}],u={deployableType:this._component.getDeployableType(),deployableData:this._component.getDrawInstructions(),IdentifySettings:this._component.getIdentifySettings()};this._mobileUtils.message(this._component.getId(),u,L.MOBILE_COMMANDS.VIEW.show,s)},t.prototype.hide=function(t){if(!this._isVisible)return void(t&&t());var n=e.proxy(function(){this._isVisible=!1,t&&t()},this),r=[{name:"success",callback:n}];this._mobileUtils.message(this._component.getId(),{id:this._component.getId()},L.MOBILE_COMMANDS.VIEW.hide,r)},t.prototype.isVisible=function(){return this._isVisible},t.prototype.decodeEscapedHtml=function(e){var t=["'",'"',"&",">"];return this.htmlDecoder.decodeHtml(e,t)},t}();R.register([L.PLATFORM.iOS,L.PLATFORM.Android],function(){o.register("PlatformDisplayer").asCtor(Id).asProto().dependencies("Consts, HtmlDecoder")});var wd=function(t){r(n,t);function n(e,n){t.call(this),this._consts=e,this._data=n,this._displayer=o.create("PlatformDisplayer",this)}return n.prototype.getId=function(){return this._data.Id},n.prototype.getDeployableType=function(){return this._consts.DEPLOYABLE_TYPE.Spotlight},n.prototype.getDrawInstructions=function(){return{type:this._data.Settings.type,title:this._displayer.decodeEscapedHtml(this._data.Title),description:this._displayer.decodeEscapedHtml(this._data.Description),styling:this._data.Settings.styling,animation:this._data.Settings.animation}},n.prototype.getIdentifySettings=function(){return this._data.IdentifySettings},n.prototype.show=function(){var t=e.proxy(function(){this.trigger("show-ended")},this),n=e.proxy(function(e,t){this.trigger("close",{isInteracted:"true"===t})},this),r=e.proxy(function(){this.trigger("show-fail")},this);this._displayer.show(t,n,r)},n.prototype.hide=function(){var t=e.proxy(function(){this.trigger("close")},this);this._displayer.hide(t)},n}(Q);o.register("Spotlight").asCtor(wd).asProto().dependencies("Consts");var _d=function(t){r(n,t);function n(e,n){t.call(this),this._consts=e,this._data=n,this._displayer=o.create("PlatformDisplayer",this)}return n.prototype.getId=function(){return this._data.Id},n.prototype.getDeployableType=function(){return this._consts.DEPLOYABLE_TYPE.Tooltip},n.prototype.getDrawInstructions=function(){return{title:this._displayer.decodeEscapedHtml(this._data.Title),description:this._displayer.decodeEscapedHtml(this._data.Description),styling:this._data.Settings.styling}},n.prototype.getIdentifySettings=function(){return this._data.IdentifySettings},n.prototype.show=function(){var t=e.proxy(function(){this.trigger("show-ended")},this),n=e.proxy(function(e,t){this.trigger("close",{isInteracted:"true"===t})},this),r=e.proxy(function(){this.trigger("show-fail")},this);this._displayer.show(t,n,r)},n.prototype.hide=function(){var t=e.proxy(function(){this.trigger("close")},this);this._displayer.hide(t)},n}(Q);o.register("MobileNativeTooltip").asCtor(_d).asProto().dependencies("Consts"),o.register("DebuggerManager").asCtor(Pd).dependencies("WmInternals, ClientStorageManager, SiteConfigManager, CommonUtils, Logger, Consts, SettingsFile");function Pd(){var e,t,n,r,i,a,s,u=this,l="wm-ftr-cnf";function c(o,u,l,c,d,p,g){e=o,t=u,n=l,r=c,i=d,a=p,s=g}u.launchDebuggerIfEnabled=function(e,t){d()&&u.launchDebugger(e,t)},u.launchDebugger=function(n,i){u.isDebuggerOnWindow()||(n?t.saveData(l,n,k):t.removeData(l),i&&(e.dbgr||(e.dbgr={}),e.dbgr.debuggerWasLoaded=i),g(!0),r.postMessageToFrameAndDescendants(window.top,wf({requestType:"DEBUGGER_LOADED"})))},u.closeDebugger=function(){if(u.isDebuggerOnWindow()){var t=e.dbgr.close;t&&t()}delete e.dbgr},u.loadDebuggerFromStorage=function(){p(),g()},u.isDebuggerOnWindow=function(){return!!e.dbgr},u.loadDebuggerForEditor=function(e){u.closeDebugger(),t.saveData(l,{uiState:"wmd-minimize"},k),t.saveData(a.DEBUGGER_STATE_NAME,P.ActiveAndReset,k),t.refreshGetData(void 0,e)},u.clearDebuggerState=function(){t.removeData(a.DEBUGGER_STATE_NAME),t.removeData(l)};function d(){return n.get().DebuggerSettings&&"1"==n.get().DebuggerSettings.IsInPublish}function p(){o.get("PostMessageListener").listen(function(e){try{var t=_f(e.data);"DEBUGGER_LOADED"==t.requestType&&g()}catch(n){i.customerLog("Error loading debugger from post message: "+n,4)}})}function g(t){h(t),e.dbgr.shouldClear=t;var n;n||(n=s.getPlayerRelatedPath()+"debugger/"+o.get("WalkMeInfo").getLibVersion()+"/"),e.dbgr||(e.dbgr={}),e.dbgr.rootPath=n,r.addScript(n+"walkme_debugger.js",null,f)}function f(){i.customerLog("Failed loading the Flow Tracker!",1);var t=e.dbgr;t&&t.debuggerWasLoaded&&t.debuggerWasLoaded()}function h(t){e.dbgr||(e.dbgr={})}c.apply(null,arguments)}o.register("LoggerManager").asCtor(Ad).asSingleton().dependencies("SettingsFile");function Ad(t){var n=this,r="wmLogger.js",i="logger/"+r;function o(){}n.launchLogger=function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t.getPlayerRelatedPath()+i),document.getElementsByTagName("head")[0].appendChild(e)},n.isLoggerActivated=function(){return e("script[src*='"+r+"']").length>0},o.apply(null,arguments)}function kd(){this.isEnabled=e,this.registerProfilerCallback=e,this.startProfile=e;function e(){}}o.register("ProfilerAPI").asCtor(kd),o.register("PerformanceTimestampAdder").asCtor(Od).dependencies("CommonEvents");function Od(e){var n=this;n.addTimeStamp=r;function r(n){try{t.addTimeStamp(n),e.deprecatedRaiseEvent("PerfTimestamp",n)}catch(r){}}}o.register("PerformanceTracker").asCtor(Dd).dependencies("Logger");function Dd(t){var n,r=this,i=[],a=100;function s(e){return 0===Math.floor(Math.random()*e)}r.startSending=function(){n=o.get("EventCollectorLogger");try{for(;i.length;){var e=i.pop();r.track(e.type,e.data)}}catch(a){t.error(a)}},r.track=function(t,r){n?n.log.info("performance log",e.extend({performanceType:t,testName:window.perf_test_name||"undefined"},r)):i.push({type:t,data:r})},r.trackFunctionExecutionTime=function(e,n,i){try{if(!n||"function"!=typeof e)return;i=i||{};var o=e,a=0,s=i.maxTracks||3;return function(){var e=(new Date).getTime(),u=o.apply(i.context||void 0,arguments),l=(new Date).getTime()-e;try{(a<s&&!i.threshold||l>=i.threshold)&&(a++,r.track("executionTime",{funcName:n,execTime:l,args:"function"==typeof i.trackedArgs?i.trackedArgs(arguments):void 0}))}catch(c){t.error(c)}return u}}catch(u){t.error(u)}},r.init=function(){try{s(a)&&o.decorate("JQueryElementFinder",function(e){try{e.findElements=r.trackFunctionExecutionTime(e.findElements,"JQueryElementFinder.findElements",{threshold:200,trackedArgs:function(e){if(!e)return;return{jQuerySelector:"undefined"!=typeof e[0]?e[0].JquerySelector:void 0,isVisible:"undefined"!=typeof e[1]?!!e[1]:void 0}}})}catch(n){t.error(n)}return e})}catch(e){t.error(e)}}}var Nd=xd();o.register("UIVisibilityManagerType").asInstance(Nd),o.register("UIVisibilityManager").asCtor(Nd).asProto().dependencies("Logger, ConditionCheckerFactory, ConditionTreeUtils, Consts, UIChecksTriggerer, DOMSessionManager");function xd(){var t=function(n,r,i,a,s,u,l){var c=this;this.watchForVisibility=b,this.getVisibilityState=I,this.shouldShow=O,this.cleanResources=w;var d,p,g,f,h,m,v=3,S=a.FEATURES_LOGS.Flows;function y(){E(),T(),g=a.VISIBILITY_STATE.HIDDEN,f=i.checkIfTreeContainsSelectedElement(l.conditionTree),t.registerInstance(c)}function E(){l.elementVisibilityParams&&(l.elementVisibilityParams.logContext=l.logContext,p=o.create("ElementVisibilityEvaluator",l.elementVisibilityParams))}function T(){l.conditionCheckerParams&&(l.conditionCheckerParams.evaluationPollingIntervalMs=2e3,l.conditionCheckerParams.onlyPollConditionFunctions=!0,l.conditionCheckerParams.evaluateSonar=!1,l.conditionCheckerParams.stopPollingAfterEvaluateTrue=!1,l.conditionCheckerParams.getSelectedElement=C,d=r.createConditionChecker(l.conditionTree,l.conditionCheckerParams))}function C(){return p&&p.getElement()}function b(){m=!1,n.customerLog(Nf("UIVisibilityManager watchForVisibility for {0} with stickyType {1}, with condition {2}, isRemoveByCondition {3}",l.logContext,l.stickyType,!!d,l.isRemoveByCondition),v,S),s.bindCheckByState(_),s.bindCheckIfShouldHideOrReposition(M),V()&&s.bindCheckIfShouldShow(A),d&&(d.evaluateAsyncAndDontEvaluateImmediately(l.conditionTree),d.onSonar(A)),A()}function I(){return g}function w(){g=a.VISIBILITY_STATE.HIDDEN,U(),s.unbindCheckByState(_),s.unbindCheckIfShouldHideOrReposition(M),s.unbindCheckIfShouldShow(A),u.remove(O),p&&p.cleanResources(),d&&d.cleanResources(),t.unregisterInstance(c),m=!0}function _(){I()==a.VISIBILITY_STATE.HIDDEN?k():P()}function P(){N()&&x()||B()}function A(){I()==a.VISIBILITY_STATE.HIDDEN&&k()}function k(){u.measure(O).then(D)}function O(){var t=f?[N,x]:[x,N],n=!0;return e.each(t,function(e,t){n=n&&t()}),n}function D(e){if(m)return;e?F():V()||l.trackUIChanges||w()}function N(){if(!p)return!0;return p.evaluateElementVisibility()==a.VISIBILITY_STATE.VISIBLE}function x(){if(!d)return!0;return d.getValue()}function L(){N()||B()}function M(){I()==a.VISIBILITY_STATE.VISIBLE&&l.isRemoveByCondition&&!x()&&B()}function F(){if(m)return;g=a.VISIBILITY_STATE.VISIBLE,p&&(h=s.bindCheckRemoveForElement(C(),L)),R(),l.stickyType!=a.STICKY_TYPE.STRONG&&s.unbindCheckIfShouldShow(A)}function R(){l.onShow&&(n.customerLog(Nf("UIVisibilityManager elementIsShown for {0}",l.logContext),v,S),l.onShow(C()))}function B(){U(),g=a.VISIBILITY_STATE.HIDDEN,W(),l.stickyType==a.STICKY_TYPE.STRONG||l.trackUIChanges||w()}function U(){h&&(h.unbind(),h=null)}function W(){l.onRemove&&(n.customerLog(Nf("UIVisibilityManager elementWasRemoved for {0}",l.logContext),v,S),l.onRemove())}function V(){return l.stickyType==a.STICKY_TYPE.SOFT||l.stickyType==a.STICKY_TYPE.STRONG}y.apply(null,arguments)};return t.instances={},t.sequence=0,t.registerInstance=function(e){e._id=t.sequence,++t.sequence,t.instances[e._id]=e},t.unregisterInstance=function(e){delete t.instances[e._id]},t.cleanResources=function(){for(var e in t.instances)t.instances.hasOwnProperty(e)&&t.instances[e].cleanResources();t.instances={}},t}o.register("UIChecksTriggerer").asCtor(Ld).dependencies("UIChangeTracker, TimerManager, ElementFinder, MutationObserverWrapper");function Ld(t,n,r,i){var o=this;o.bindCheckByState=v,o.bindCheckIfShouldShow=S,o.bindCheckIfShouldHideOrReposition=y,o.unbindCheckByState=E,o.unbindCheckIfShouldShow=T,o.unbindCheckIfShouldHideOrReposition=C,o.bindCheckRemoveForElement=m;var a="CheckByState",s="CheckIfShouldShow",u="CheckIfShouldHideOrReposition",l=2e3,c=800;function d(){t.bind(p),g(),f()}function p(){h(a)}function g(){h(s),n.setWalkmeTimeout(g,l)}function f(){h(u),n.setWalkmeTimeout(f,c)}function h(t){r.wrapSession(function(){e(o).trigger(t)})}function m(e,t){if(i.isEnabled())return i.watchElement(e,t);return y(t),{unbind:function(){C(t)}}}function v(t){e(o).on(a,t)}function S(t){e(o).on(s,t)}function y(t){e(o).on(u,t)}function E(t){e(o).off(a,t)}function T(t){e(o).off(s,t)}function C(t){e(o).off(u,t)}d()}o.register("ElementInteractionEvents").asFunction(Md).dependencies("Consts, FeaturesManager");function Md(e,t){var n=[e.EVENT_SENDER_EVENT_TYPES.Click,e.EVENT_SENDER_EVENT_TYPES.Blur];return t.isFeatureEnabled("extendedEvents")&&(n.push(e.EVENT_SENDER_EVENT_TYPES.MouseEnter),n.push(e.EVENT_SENDER_EVENT_TYPES.Focus)),n}o.register("ElementInteractionEventsBinder").asCtor(Fd).asProto().dependencies("wmjQuerySafe, ElementInteractionEvents");function Fd(t,n){var r=this;r.bind=i,r.unbind=o;function i(t,r,i){var o=e(t);e(n).each(function(e,t){o.off(t+r),o.on(t+r,{eventName:t},a)});function a(e){i(e.data.eventName)}}function o(r,i){var o=t(r);e(n).each(function(e,t){o.off(t+i)})}}var Rd=function(){function e(t,n,r,i,o,a,s,u){this.logger=t,this.consts=n,this.elementFinder=r,this.positionHelper=i,this.timerManager=o,this.uiChangeTracker=a,this.elementIframesAttachedIndicator=s,this._log=t.wrapCustomerLog(e.LOG_FEATURE),this._logContext=u.logContext,this._findElementParams=u.findElementParams,this._watchElementTimeoutTime=u.elementEvaluationIntervalMs||e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._trackUIChanges=u.trackUIChanges,u.element?(this._element=u.element,this._state=this.consts.VISIBILITY_STATE.VISIBLE):this._state=this.consts.VISIBILITY_STATE.HIDDEN}return e.prototype.evaluateElementVisibilityAsynch=function(t){this._log(Nf("ElementVisibilityEvaluator evaluateElementVisibility for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._isStopEvaluate=!1,this.handleUIChangeTracking(),this._watchElementTimeoutTime<0?t||this.evaluateElementVisibility():this.evaluateElementVisibilityAsynchLoop()},e.prototype.handleUIChangeTracking=function(){var e=this;this._trackUIChanges&&(this._onUIChange=function(){e._isStopEvaluate||e.evaluateElementVisibility()},this.uiChangeTracker.bind(this._onUIChange))},e.prototype.evaluateElementVisibility=function(){var t=this.findByState();return this._log(Nf("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} new state is {1}",this._logContext,t),e.DEFAULT_LOG_LEVEL),t!=this._state&&(this._log(Nf("ElementVisibilityEvaluator evaluateElementVisibilityLoop {0} state changed from {1} to {2}",this._logContext,this._state,t),e.DEFAULT_LOG_LEVEL),this.callOnValueChangeIfExist(t)),this._state=t,this.getElementVisibility()},e.prototype.getElementVisibility=function(){return this._state},e.prototype.calculateElementVisibility=function(){return this.findIfVisible()},e.prototype.getElement=function(){return this._element},e.prototype.setOnVisibilityChanged=function(e){this._onVisibilityChanged=e},e.prototype.cleanResources=function(){this._log(Nf("ElementVisibilityEvaluator cleanResources for {0}",this._logContext),e.DEFAULT_LOG_LEVEL),this._elementTimeoutObject&&(this._elementTimeoutObject.clear(),this._elementTimeoutObject=void 0),this._state=this.consts.VISIBILITY_STATE.HIDDEN,this._isStopEvaluate=!0,this._watchElementTimeoutTime=e.WATCH_ELEMENT_DEFAULT_TIMEOUT,this._element=void 0,this._onVisibilityChanged=void 0,this.uiChangeTracker.unbind(this._onUIChange)},e.prototype.findByState=function(){var e;switch(this._state){case this.consts.VISIBILITY_STATE.VISIBLE:e=this.findIfHidden();break;case this.consts.VISIBILITY_STATE.HIDDEN:e=this.findIfVisible();break;default:this._log(Nf("ElementVisibilityEvaluator findByState unknown state {0} for {1}",this._state,this._logContext),1)}return e},e.prototype.evaluateElementVisibilityAsynchLoop=function(){this.evaluateElementVisibility(),this.scheduleEvaluateElementVisibilityAsynchLoop()},e.prototype.scheduleEvaluateElementVisibilityAsynchLoop=function(){var e=this;this._isStopEvaluate||(this._elementTimeoutObject=this.timerManager.setWalkmeTimeout(function(){e.evaluateElementVisibilityAsynchLoop()},this._watchElementTimeoutTime))},e.prototype.findIfVisible=function(){var e=this,t=this.consts.VISIBILITY_STATE.HIDDEN;return this.elementFinder.wrapSession(function(){e._element=e.findElementByParams()}),this._element&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.findIfHidden=function(){var e,t=this.consts.VISIBILITY_STATE.HIDDEN;e=this._findElementParams.IdentifySettings?this._findElementParams.IdentifySettings.filter:void 0;var n=this.positionHelper.isElementVisible(this._element,e);return n&&this.elementIframesAttachedIndicator.areIframesAttached(this._element)&&(t=this.consts.VISIBILITY_STATE.VISIBLE),t},e.prototype.callOnValueChangeIfExist=function(e){this._onVisibilityChanged&&(this._log(Nf("ElementVisibilityEvaluator callOnValueChangeIfExist calling onValueChange for {0}",this._logContext),5),this._onVisibilityChanged(e))},e.prototype.findElementByParams=function(){return this.elementFinder.findElement(this._findElementParams.IdentifySettings,this._findElementParams.isVisible,this._findElementParams.score,this._findElementParams.mode)},e.WATCH_ELEMENT_DEFAULT_TIMEOUT=-1,e.DEFAULT_LOG_LEVEL=3,e.LOG_FEATURE="elementVisibility",e}();o.register("ElementVisibilityEvaluator").asCtor(Rd).asProto().dependencies("Logger, Consts, ElementFinder, PositionHelper, TimerManager, UIChangeTracker, ElementIframesAttachedIndicator"),o.register("ElementIframesAttachedIndicator").asCtor(Bd);function Bd(){var e=this;e.areIframesAttached=t;function t(e){try{for(var t=!0,n=e.data("iframe");n&&t;)t=t&&n&&n.parents("html").length>0,n=n.data("iframe");return t}catch(r){return!1}}}o.register("UIElementVisibilityAttributes").asCtor(Ud).dependencies("Consts, CommonUtils");function Ud(e,t){var n=this;n.getStickyType=r,n.getIsRemoveByCondition=i;function r(n){var r=t.getSettingsValue(n,e.IS_STICKY_SETTING_KEY,!1),i=e.STICKY_TYPE.ONCE;if(r){var o=parseInt(t.getSettingsValue(n,e.STICKINESS_TYPE_SETTING_KEY,null));i=o==e.OLD_STICKIES.STICKINESS_TYPES.soft?e.STICKY_TYPE.SOFT:e.STICKY_TYPE.STRONG}return i}function i(e){return void 0==e.condHide?!!e.isEvaluationFrequency:!!e.condHide}}o.register("UiElementPositionTracker").asCtor(Wd).asProto().dependencies("ElementPositionCalculator, UIChecksTriggerer");function Wd(e,t,n){var r=this;r.track=l,r.destroy=p;var i,o,a,s;function u(){i=n.element,o=n.positionChangedCallback,a=n.embedmentType}function l(){s=e.getElementPosition(a,i),t.bindCheckIfShouldHideOrReposition(c)}function c(){var t=e.getElementPosition(a,i);d(t)&&(s=t,o&&o())}function d(e){return s.top!=e.top||s.left!=e.left||s.height!=e.height||s.width!=e.width}function p(){t.unbindCheckIfShouldHideOrReposition(c)}u()}o.register("UiElementPositionTrackerCreator").asCtor(Vd).dependencies("EmbedmentTypeProvider");function Vd(e){var t=this;t.create=r;function n(){}function r(t,n){var r=!1,i=e.get(r,t),a={element:t,positionChangedCallback:n,embedmentType:i};return o.create("UiElementPositionTracker",a)}n()}o.register("UiWindowSizeTracker").asCtor(Gd).asProto().dependencies("win, Consts, CommonUtils, wmjQuery");function Gd(e,t,n,r,i){var o=this;o.track=d,o.destroy=p;var a,s,u,l;function c(){a=i.callback}function d(){l=n.registerEventHandler(t.WINDOW_EVENTS.Resize,g,!1,e)}function p(){l&&l()}function g(e){if(!f())return;a.apply(void 0,arguments)}function f(){var t=r(e),n=t.width(),i=t.height(),o=s!=n||u!=i;return s=n,u=i,o}c()}o.register("UiChangesTrackerWrapper").asCtor(Hd).asProto().dependencies("EmbedmentTypeProvider");function Hd(e){var t,n,r=this;r.trackChanges=i,r.stopTrackingChanges=a;function i(e){s(e),t.track(),e.isEmbedInElement||(u(e),n.track())}function a(){t&&t.destroy(),n&&n.destroy(),n=null}function s(e){var e={callback:e.callback};t=o.create("UiWindowSizeTracker",e)}function u(t){var t={embedmentType:e.get(!1,t.element),element:t.element,positionChangedCallback:t.callback};n=o.create("UiElementPositionTracker",t)}}function jd(e){var t=this;t.createUIElement=a;var n={};function r(){
i()}function i(){n[e.FLOW_UIELEMENT_TYPE.Popup]=s,n[e.FLOW_UIELEMENT_TYPE.Element]=u}function a(e){return n[e.Type](e)}function s(e){return o.create("UIPopUpBalloon",e)}function u(e){return o.create("UIElementBalloon",e)}r.apply(null,arguments)}o.register("UIElementFactory").asCtor(jd).dependencies("Consts"),o.register("FlowBalloonDisplayer").asCtor(Yd).asProto().dependencies("Logger, SiteConfigManager, Consts, PositionHelper, FlowStack, BalloonDrawerProvider, BBCodeEventsBinder,FlowDataPersister, ComplexHtmlElementsProvider, FlowVisualStepsIndicator, FeaturesManager");function Yd(t,n,r,i,a,s,u,l,c,d,p,g){var f=this;f.showAndWaitForTrigger=N,f.destroy=x;var h,m,v,S,y,E,T,C,b,I,w,_,P,A,k=3,O=r.FEATURES_LOGS.Flows;function D(){E=g.uiElement,C=E.Triggers,T={title:E.Title,content:E.Text,subText:Y()},y=E.Id,b=g.balloonButtons,I=g.stepType,A=!1,j()}function N(e){return j(),t.customerLog(Nf("FlowBalloonDisplayer showUIElement showing balloon {0}",y),k,O),P=e,M(),h.promise()}function x(){return L(function(){S({wasElementShown:A})}),h.promise()}function L(e){V(),G(e)}function M(){var r=n.get(),d=r.BalloonSettings,p=s.getBalloonDrawer(d,E),g=a.peek().flowId;E.Settings.customButtons=e.map(b,function(e){return e.template});var f,h=c.getComplexHtmlElements({Settings:E.Settings},P);h&&(f=h.parentElement,P=h.elements),w=o.create("Balloon",{element:P,parentElement:f,position:E.Settings.Position,stepSettings:E.Settings,logger:t,isFirstStep:l.getIsFirstVisualStep(),text:T,configuration:d,siteConfig:r,data:{balloonEntityId:E.Id,containerEntityId:g,type:I,containerEntityType:"flow",balloonEntityType:"flow-balloon"},positionHelper:i,drawer:p,bindButtonsFunc:function(e,t){F(e,b),u.bind(e,void 0,t)}}),w.Show(!0,function(e,t){A=!0,w.SetTimeoutOn(),m("stageShown",{uiElementId:E.Id,siteElement:P})})}function F(e,t){H(),R(e);for(var n=[],r=0;r<C.length;r++)n.push({element:P,balloonDiv:e,logContext:y,balloonButtons:t,trigger:C[r]});var i={uiElementType:E.Type,triggers:n,uiElement:E};_=o.create("UITriggersManager",i),_.listen().then(U,W)}function R(e){B(e).on("click"+r.FLOW_TRIGGER_WORKSPACE,function(){W(!0)}),e.bind("click mousedown mouseup",function(e){e.stopPropagation()})}function B(t){return e(".walkme-action-close, .walkme-action-cancel",t)}function U(e){v(e),t.customerLog(Nf("FlowBalloonDisplayer OnTrigger was called but no triggers were found for uiElement {0}",y),1,O)}function W(e){S({wasElementShown:A,wasClosedByUser:e})}function V(){if(!w)return;var e=w.getBalloonDiv();B(e).off("click"+r.FLOW_TRIGGER_WORKSPACE),e.unbind("click mousedown mouseup")}function G(e){H(),w?w.destroy(!1,e):e&&e()}function H(){_&&(_.destroy(),_=void 0)}function j(){h=e.Deferred(),m=h.notify,v=h.resolve,S=h.reject}function Y(){var e=d.getTotalVisualSteps(),t=d.getNextVisualStepIndex(E.Id),i=n.get().StepsInfoText;return p.isFeatureEnabled("floatingsubtext")?(i=i.replace("{0}",r.SUBTEXT_CURRENT_START+t+r.SUBTEXT_CURRENT_END),i=i.replace("{1}",r.SUBTEXT_TOTAL_START+e+r.SUBTEXT_TOTAL_END)):(i=i.replace("{0}",t),i=i.replace("{1}",e)),i}D.apply(null,arguments)}o.register("UIPopUpBalloon").asCtor(zd).asProto().dependencies("PopupStepElementProvider, UiUtils, Consts, FlowPopupBalloonButtonsProvider");function zd(e,t,n,r,i){var a=this;a.show=g,a.destroy=f;var s,u,l,c,d="UIPopUpBalloon";function p(){u=i.Id,c=e.get();var t={uiElement:i,balloonButtons:m(),stepType:n.STEP_TYPE.Popup};l=o.create("FlowBalloonDisplayer",t),s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){return s.customerLog("{0}: Show Popup Balloon with id {1} step index {2}",d,u,i.PointIndex),l.showAndWaitForTrigger(c).always(h)}function f(){return s.customerLog("{0}: Destroy Popup Balloon with id {1} step index {2}",d,u,i.PointIndex),l.destroy()}function h(){t.removeOverlay()}function m(){return r.getButtons(i)}p.apply(null,arguments)}o.register("UIElementBalloon").asCtor(Qd).asProto().dependencies("Consts, FlowElementBalloonButtonsProvider");function Qd(t,n,r){var i=this;i.show=v,i.destroy=S;var a,s,u,l,c,d,p,g,f,h="UIElementBalloon";function m(){c=r.Id,d=r.PointIndex,r.score={};var e={uiElement:r,balloonButtons:E(),stepType:t.STEP_TYPE.Normal};p=o.create("FlowBalloonDisplayer",e),f=o.create("UiElementVisibilityManager",{uiElement:r,onShow:T,onRemove:b,onError:S}),l=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function v(){return l.customerLog("{0}: Show Balloon - Calling visibility manager for ui element with id {1} step index {2}",h,c,d),g=e.Deferred(),a=g.resolve,s=g.reject,u=g.notify,f.evaluateAsync(),g.promise().always(y)}function S(){return y(),b().always(s)}function y(){f.cleanResources()}function E(){return n.getButtons(r)}function T(e){l.customerLog("{0}: showUIElement showing balloon with id {1} step index {2}",h,c,d),p.showAndWaitForTrigger(e).then(a).progress(u).fail(C)}function C(e){e.wasClosedByUser&&s(e)}function b(){return l.customerLog("{0}: removeUIElement removing balloon with id {1} step index {2}",h,c,d),p.destroy()}m.apply(null,arguments)}o.register("UiElementVisibilityManager").asCtor(Kd).asProto().dependencies("Consts, FlowDataPersister");function Kd(e,t,n){var r=this;r.evaluateAsync=g,r.cleanResources=p;var i,a,s,u,l,c=500;function d(){a=n.uiElement,s=n.onShow,u=n.onRemove,l=n.onError;var e={logContext:a.Id,findElementParams:{IdentifySettings:a.IdentifySettings,score:a.score},trackUIChanges:!0,elementEvaluationIntervalMs:c};i=o.create("ElementVisibilityEvaluator",e)}function p(){i&&(i.cleanResources(),i=void 0)}function g(){t.getIsFirstVisualStep()?f():h()}function f(){var t=i.calculateElementVisibility();t==e.VISIBILITY_STATE.VISIBLE?h():(p(),l())}function h(){i.setOnVisibilityChanged(m),i.evaluateElementVisibilityAsynch()}function m(t){switch(t){case e.VISIBILITY_STATE.VISIBLE:s(i.getElement());break;case e.VISIBILITY_STATE.HIDDEN:u()}}d()}o.register("FlowElementBalloonButtonsProvider").asCtor(qd).dependencies("UiFlowNodesExecutionStack, FlowBackBalloonButton, FlowContinueBalloonButtonProvider");function qd(e,t,n){var r=this;r.getButtons=i;function i(e){var r=[],i=n.getContinueButton(e);return i&&(r.push(i),o()&&r.unshift(t)),r}function o(){return!e.isEmpty()}}o.register("FlowPopupBalloonButtonsConfigProvider").asCtor(Xd).dependencies("Consts, UiFlowNodesExecutionStack, FlowBackBalloonButton, FlowContinueBalloonButtonProvider, FlowStartBalloonButton, FlowCancelBalloonButton");function Xd(e,t,n,r,i,o){var a=this;a.get=u;var s={Cancel:{getButton:function(){return o},order:1},Back:{getButton:function(){return n},canAdd:l,order:2},"Next/Done":{getButton:function(e){return r.getContinueButton(e)},order:3},Start:{getButton:function(){return i},order:4}};function u(){return s}function l(){return!t.isEmpty()}}o.register("FlowPopupBalloonButtonsProvider").asCtor(Jd).dependencies("FlowPopupBalloonButtonsConfigProvider");function Jd(e){var t=this;t.getButtons=i;var n;function r(){n=e.get()}function i(e){for(var t=[],n=o(e),r=0;r<n.length;r++){var i=n[r];i.canAdd&&!i.canAdd()||t.push(i.getButton(e))}return t}function o(e){for(var t=[],r=e.Settings.popupStepButtons,i=0;i<r.length;i++){var o=n[r[i].name];t.push(o)}return t.sort(function(e,t){return e.order-t.order})}r()}o.register("FlowBackBalloonButton").asFunction($d).dependencies("Consts, UiFlowNodesExecutionStack, BalloonButtonDataGenerator");function $d(e,t,n){var r={selector:".walkme-action-back",template:n.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Back),action:i};return r;function i(e,n){n.resolve({nextStageId:t.pop(),isFlowGoingBack:!0})}}o.register("FlowCancelBalloonButton").asFunction(Zd).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function Zd(e,t){var n={selector:".walkme-action-cancel",template:t.generateWithoutBackground(e.BALLOON_BUTTON_TYPE.Cancel),action:r};return n;function r(e,t){t.reject({wasElementShown:!0,wasClosedByUser:!0})}}o.register("ButtonTriggersProvider").asCtor(ep).dependencies("Consts");function ep(t){var n=this;n.get=r;function r(n){return e(n.Triggers).filter(function(e,n){return n.Type==t.FLOW_TRIGGER_TYPE.Button})}}o.register("FlowContinueBalloonButtonProvider").asCtor(tp).dependencies("ButtonTriggersProvider, FlowNodePlayIndicator, FlowNextBalloonButton, FlowDoneBalloonButton, CommonUtils, FlowGroupLastStageIndicator, FlowStack");function tp(e,t,n,r,i,o,a){var s=this;s.getContinueButton=l;function u(){}function l(t){var i=a.peek().flowId,s=e.get(t);if(0==s.length)return;var u=o.isPreviousGroupHasNextStage(),l=c(i,s);return u||l?n:r}function c(e,t){return i.doesAnyMeetCondition(t,function(t){return d(e,t)})}function d(e,n){if(!n.TargetFlowNodeId)return!1;var r=t.isPlayable(e,n.TargetFlowNodeId);return r}u()}o.register("FlowContinueBalloonButton").asFunction(np).asProto().dependencies("");function np(e){var t={selector:e.selector,template:e.template,action:n};return t;function n(e,t){t.resolve({nextStageId:e.TargetFlowNodeId})}}o.register("FlowDoneBalloonButton").asFunction(rp).dependencies("Consts, BalloonButtonDataGenerator");function rp(e,t){var n={selector:".walkme-action-done",template:t.generate(e.BALLOON_BUTTON_TYPE.Done)};return o.create("FlowContinueBalloonButton",n)}o.register("FlowNextBalloonButton").asFunction(ip).dependencies("Consts, BalloonButtonDataGenerator");function ip(e,t){var n={selector:".walkme-action-next, .walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Next)};return o.create("FlowContinueBalloonButton",n)}o.register("FlowStartBalloonButton").asFunction(op).dependencies("Consts, WelcomeBalloonButtonDataGenerator");function op(e,t){var n={selector:".walkme-action-start",template:t.generate(e.BALLOON_BUTTON_TYPE.Start)};return o.create("FlowContinueBalloonButton",n)}o.register("ClickTriggersListCreator").asCtor(ap).dependencies("FeaturesManager");function ap(e){var t=this;t.get=n;function n(){var t=["click","mousedown","mouseup"];return e.isFeatureEnabled("ipad_touch_as_click")&&t.push("touchstart"),e.isFeatureEnabled("noFocusTrigger")||t.push("focus"),t}}o.register("UITriggersManager").asCtor(sp).asProto().dependencies("UITriggersFactory, FlowPlayerMetadata, Consts, MockDelayTriggerProvider");function sp(t,n,r,i,o){var a=this,s=[];a.listen=f,a.destroy=h;var u={},l=[r.FLOW_TRIGGER_TYPE.Button];function c(){u[r.FLOW_TRIGGER_TYPE.PeerStep]=!0;for(var e=0;e<o.triggers.length;e++)u[o.triggers[e].trigger.Type]||(s=s.concat(d(o.triggers[e])))}function d(e){var t=[];return p(t,e),g(e.trigger)&&p(t,i.createMockDelayTriggerParams(e)),t}function p(e,n){e.push({trigger:t.createUITrigger(n),data:n.trigger})}function g(t){return e.inArray(t.Type,l)>-1&&o.uiElementType==r.FLOW_UIELEMENT_TYPE.Popup&&t.Settings&&t.Settings.Duration>=0}function f(){for(var t=e.Deferred(),n=0;n<s.length;n++){var r=s[n].trigger,i=s[n].data;m(r,i,t)}return t.promise()}function h(){for(var e=0;e<s.length;e++)s[e].trigger.destroy()}function m(t,n,r){t.listen().then(v(n)).then(function(t){t=e.extend({firedTrigger:n,uiElementId:o.uiElement.Id},t),r.resolve(t)})}function v(e){return function(t){return n.lastTriggerFired=e,t}}c.apply(null,arguments)}o.register("UITriggersFactory").asCtor(up).dependencies("Consts, UITriggerTransitionDelayer");function up(t,n){var r=this;r.createUITrigger=c;var i={},a=[{triggerName:t.FLOW_TRIGGER_TYPE.Click,className:"ClickUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Hover,className:"HoverUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Text,className:"TextUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Delay,className:"DelayUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.PageChanged,className:"PageChangedUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Button,className:"ButtonUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectAny,className:"SelectAnyUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.SelectValue,className:"SelectValueUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.BbCode,className:"BBCodeUITrigger"},{triggerName:t.FLOW_TRIGGER_TYPE.Custom,className:"CustomUITrigger"}];function s(){u()}function u(){e.each(a,function(e,t){i[t.triggerName]=l(t)})}function l(e){return function(t){var r=o.create(e.className,t);return n.addDelay(r,e.triggerName),r}}function c(e){return i[e.trigger.Type](e)}s.apply(null,arguments)}o.register("UITriggerTransitionDelayer").asCtor(lp).dependencies("FlowTransitionDelayer");function lp(e){var t=this;t.addDelay=n;function n(e,t){e.listen=r(e.listen,t)}function r(t,n){return function(){return t().then(function(t){return e.setDelayByTrigger(n),t})}}}o.register("UITriggerEventBindingService").asCtor(cp).dependencies("Consts");function cp(e){var t=this;t.getFullEventNames=n,t.bindEventsToElement=r,t.unbindEventsFromElement=i;function n(t){for(var n=[],r=0;r<t.length;r++)n.push(t[r]+e.FLOW_TRIGGER_WORKSPACE);return n}function r(e,t,n){for(var r=0;r<t.length;r++)e.on(t[r],function(e){n(e)})}function i(e,t){for(var n=0;n<t.length;n++)e.off(t[n])}}o.register("TriggerTimeoutService").asCtor(dp).dependencies("TimerManager");function dp(e){var t=this;t.createTimeout=r,t.cleanTimeout=i;var n={};function r(t,r,i,o){var a=e.setWalkmeTimeout(function(){i.customerLog("{0}: Executing {1} trigger with id {2} for {3} seconds to target node id {4}",o,r.Name,r.Id,r.Settings.Duration,r.TargetFlowNodeId),t.resolve({nextStageId:r.TargetFlowNodeId})},1e3*r.Settings.Duration);n[r.Id]=a}function i(e){var t=n[e.Id];t&&(t.clear(),t=null,delete n[e.Id])}}o.register("MockDelayTriggerProvider").asCtor(pp).dependencies("Consts");function pp(t){var n=this;n.createMockDelayTriggerParams=r;function r(n){var r=e.extend(!0,{},n),i=n.trigger;return r.trigger={Type:t.FLOW_TRIGGER_TYPE.Delay,Id:"mock_delay_"+i.Id,Name:i.Name,TargetFlowNodeId:i.TargetFlowNodeId,Settings:{Duration:i.Settings.Duration}},r}}o.register("ClickUITrigger").asCtor(gp).asProto().dependencies("UITriggerEventBindingService, ClickTriggersListCreator, Consts");function gp(t,n,r,i){var a,s,u,l,c=this,d=[],p="ClickUITrigger";c.listen=f,c.destroy=h;function g(){a=i.element,s=i.trigger,u=n.get(),d=t.getFullEventNames(u),l=o.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function f(){var n=e.Deferred();return l.customerLog("{0}: Listening to Click trigger with id {1}",p,s.Id),t.bindEventsToElement(a,d,r),n.promise();function r(){l.customerLog("{0}: Executing Click trigger with id {1} to target node id {2}",p,s.Id,s.TargetFlowNodeId),n.resolve({nextStageId:s.TargetFlowNodeId})}}function h(){l.customerLog("{0}: Destroying Click trigger with id {1}",p,s.Id),t.unbindEventsFromElement(a,d)}g.apply(null,arguments)}o.register("HoverUITrigger").asCtor(fp).asProto().dependencies("UITriggerEventBindingService, Consts");function fp(t,n,r){var i,a,s,u=this,l=[],c="HoverUITrigger",d=["mouseenter"];u.listen=g,u.destroy=f;function p(){i=r.element,a=r.trigger,l=t.getFullEventNames(d),s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();s.customerLog("{0}: Listening to Hover trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Hover trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(i,l,r),n.promise()}function f(){s.customerLog("{0}: Destroying Hover trigger with id {1}",c,a.Id),t.unbindEventsFromElement(i,l)}p.apply(null,arguments)}o.register("TextUITrigger").asCtor(hp).asProto().dependencies("UITriggerEventBindingService, TimerManager, Consts");function hp(t,n,r,i){var a,s,u,l,c=this,d=[],p=[],g="TextUITrigger",f=["keydown","change"],h=["paste"],m=800;c.listen=S,c.destroy=y;function v(){a=i.element,s=i.trigger,d=t.getFullEventNames(f),p=t.getFullEventNames(h),l=o.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function S(){var n=e.Deferred();return l.customerLog("{0}: Listening to Text trigger with id {1}",g,s.Id),t.bindEventsToElement(a,d,function(){E(n)}),t.bindEventsToElement(a,p,function(){T(n)}),n.promise()}function y(){l.customerLog("{0}: Destroying Text trigger with id {1}",g,s.Id),C(),t.unbindEventsFromElement(a,d),t.unbindEventsFromElement(a,p)}function E(e){C(),u=n.libSetTimeout(function(){T(e)},m)}function T(e){l.customerLog("{0}: Executing Text trigger with id {1} to target node id {2}",g,s.Id,s.TargetFlowNodeId),e.resolve({nextStageId:s.TargetFlowNodeId})}function C(){u&&u.clear()}v.apply(null,arguments)}o.register("DelayUITrigger").asCtor(mp).asProto().dependencies("TriggerTimeoutService, Consts");function mp(t,n,r){var i,a,s,u=this,l="DelayUITrigger";u.listen=d,u.destroy=p;function c(){i=r.element,a=r.trigger,s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred();return s.customerLog("{0}: Listening to Delay trigger with id {1}",l,a.Id),t.createTimeout(n,a,s,l),n.promise()}function p(){s.customerLog("{0}: Destroying bbCode trigger with id {1}",l,a.Id),t.cleanTimeout(a)}c.apply(null,arguments)}o.register("PageChangedUITrigger").asCtor(vp).dependencies("Consts, FlowDataPersister").asProto();function vp(t,n,r){var i=this;i.listen=c,i.destroy=d;var a,s,u;function l(){a=r.element,s=r.trigger,u=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){var t=e.Deferred();return n.saveWaitingForRefreshTrigger({refreshTrigger:s.TargetFlowNodeId,firedTrigger:s}),t.promise()}function d(){n.clearWaitingForRefreshTrigger()}l.apply(null,arguments)}o.register("ButtonUITrigger").asCtor(Sp).asProto().dependencies("Consts");function Sp(t,n){var r=this;r.listen=c,r.destroy=d;var i,a,s,u="ButtonUITrigger";function l(){i=n.balloonButtons,a=n.trigger;for(var e=0;e<i.length;e++)i[e].buttonElement=h(i[e].selector,n.balloonDiv);s=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){return s.customerLog("{0}: Listening to Next trigger with id {1}",u,a.Id),p()}function d(){s.customerLog("{0}: Destroying Next trigger with id {1}",u,a.Id),f()}function p(){for(var t=e.Deferred(),n=0;n<i.length;n++){var r=i[n];g(r,t)}return t.promise()}function g(e,n){e.buttonElement.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){s.customerLog("{0}: Executing Next trigger with id {1} to target node id {2}",u,a.Id,a.TargetFlowNodeId),e.action(a,n)})}function f(){for(var e=0;e<i.length;e++)i[e].buttonElement&&(i[e].buttonElement.off("click"+t.FLOW_TRIGGER_WORKSPACE),i[e].buttonElement=void 0)}function h(t,n){var r=e(t,n);return r}l.apply(null,arguments)}o.register("SelectAnyUITrigger").asCtor(yp).asProto().dependencies("UITriggerEventBindingService, Consts");function yp(t,n,r){var i,a,s,u=this,l=[],c="SelectAnyUITrigger",d=["change"];u.listen=g,u.destroy=f;function p(){i=r.element,a=r.trigger,l=t.getFullEventNames(d),s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function g(){var n=e.Deferred();s.customerLog("{0}: Listening to Select Any trigger with id {1}",c,a.Id);var r=function(){s.customerLog("{0}: Executing Select Any trigger with id {1} to target node id {2}",c,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId})};return t.bindEventsToElement(i,l,r),n.promise()}function f(){s.customerLog("{0}: Destroying Select Any trigger with id {1}",c,a.Id),t.unbindEventsFromElement(i,l)}p.apply(null,arguments)}o.register("SelectValueUITrigger").asCtor(Ep).asProto().dependencies("UITriggerEventBindingService, Consts");function Ep(t,n,r){var i,a,s,u,l=this,c=[],d="SelectValueUITrigger",p=["change"];l.listen=f,l.destroy=h;function g(){i=r.element,a=r.trigger,s=a.Settings.complexHtml,c=t.getFullEventNames(p),u=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function f(){var n=e.Deferred();u.customerLog("{0}: Listening to Select Value trigger with id {1}",d,a.Id);var r=function(e){var t;t="option"==e.target.tagName.toLowerCase()?e.target:e.target.options[e.target.selectedIndex],t.value!=s.val&&t.text!=s.txt||(u.customerLog("{0}: Executing Select Value trigger with id {1} to target node id {2}",d,a.Id,a.TargetFlowNodeId),n.resolve({nextStageId:a.TargetFlowNodeId}))};return t.bindEventsToElement(i,c,r),n.promise()}function h(){u.customerLog("{0}: Destroying Select Value trigger with id {1}",d,a.Id),t.unbindEventsFromElement(i,c)}g.apply(null,arguments)}o.register("BBCodeUITrigger").asCtor(Tp).asProto().dependencies("Consts");function Tp(t,n){var r,i,a,s,u,l=this,c="BBCodeUITrigger";l.listen=p,l.destroy=g;function d(){r=n.element,i=n.trigger,a=n.balloonDiv,u=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred();return u.customerLog("{0}: Listening to BBCode trigger with id {1}",c,i.Id),f(t),t.promise()}function g(){u.customerLog("{0}: Destroying BBCode trigger with id {1}",c,i.Id),h()}function f(n){var r=i.Settings.bbCodeId;s=e(".trg-"+r,a),s.on("click"+t.FLOW_TRIGGER_WORKSPACE,function(){u.customerLog("{0}: Executing BBCode trigger with id {1} and bbCode id {2} to target node id {3}",c,i.Id,i.Settings.bbCodeId,i.TargetFlowNodeId),n.resolve({nextStageId:i.TargetFlowNodeId})})}function h(){s.off("click"+t.FLOW_TRIGGER_WORKSPACE)}d.apply(null,arguments)}o.register("CustomUITrigger").asCtor(Cp).asProto().dependencies("Consts,ConditionCheckerFactory");function Cp(t,n,r){var i,a,s,u=this,l="CustomUITrigger";u.listen=d,u.destroy=p;function c(){i=r.trigger,s=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function d(){var t=e.Deferred();s.customerLog("{0}: Listening to Custom trigger with id {1}",l,i.Id);var r=i.ConditionTrees.CustomTrigger,o={evaluationPollingIntervalMs:500,featureName:"Custom Trigger",elementName:"Custom Trigger: "+i.Name};return a=n.createNew(o),a.onValueChanged(function(e){if(e)return s.customerLog("{0}: Executing Custom trigger with id {1} to target node id {2}",l,i.Id,i.TargetFlowNodeId),t.resolve({nextStageId:i.TargetFlowNodeId})}),a.evaluateAsync(r),t.promise()}function p(){s.customerLog("{0}: Destroying Custom trigger with id {1}",l,i.Id),a&&(a.cleanResources(),a=void 0)}c.apply(null,arguments)}o.register("StatesMachine").asCtor(bp).asProto().dependencies("TimerManager, CommonUtils");function bp(e,t,n){var r=this;r.evaluate=h,r.reset=f;var i,o,a,s,u,l,c,d,p;function g(){s=n.initState,o=n.transitions||[],a=n.timedOutTransitions||[],p=n.defaultTransitionValuesToReturn||[],u=n.globalActionFlags||{},c=n.onStateChangedCallback||function(){},f()}function f(){i=s,l={}}function h(e,t){m(e),v(e);var n=b(e);n&&y(n,t)}function m(e){u[e]&&u[e].addFlag&&S(u[e].addFlag,function(e){l[e]=!0})}function v(e){u[e]&&u[e].removeFlag&&S(u[e].removeFlag,function(e){delete l[e]})}function S(e,t){for(var n=0;n<e.length;n++){var r=e[n];t(r)}}function y(e,t){A(),T(e,t);var n=E(e);n&&P(function(){T(n,t)},n.timeout)}function E(e){for(var t=0;t<a.length;t++){var n=a[t];if(n.fromState==e.toState)return n}return null}function T(e,t){i=e.toState;var n=C(e);c(e.toState,n,t)}function C(e){if(e.valueToReturn)return e.valueToReturn;if(p)for(var t=0;t<p.length;t++){var n=p[t],r=!n.fromState||n.fromState==e.fromState,i=!n.toState||n.toState==e.toState;if(r&&i)return n.valueToReturn}return null}function b(e){for(var t=0;t<o.length;t++){var n=o[t],r=I(n,e);if(r)return n}return null}function I(e,t){var n=("*"==e.fromState||e.fromState==i)&&e.onAction==t;if(!n)return!1;var r=!e.ifFlagged||w(e.ifFlagged),o=!e.ifNotFlagged||_(e.ifNotFlagged),a=r&&o;return a}function w(e){return t.doesAnyMeetCondition(e,function(e){return void 0!=l[e]})}function _(e){return t.doAllMeetCondition(e,function(e){return void 0==l[e]})}function P(t,n){d=e.libSetTimeout(t,n)}function A(){d&&d.clear()}g()}o.register("StatesMachineCreator").asCtor(Ip);function Ip(){var e=this;e.create=n;function t(){}function n(e){return o.create("StatesMachine",e)}t.apply(null,arguments)}o.register("StagesFactory").asCtor(wp).dependencies("Logger, ActionStagesFactory, Consts");function wp(e,t,n){var r=this;r.createStage=a;var i=n.FEATURES_LOGS.Flows;function a(r){switch(r.Type){case n.FLOW_STEP_TYPE.UI:return o.create("UIFlowStage",r);case n.FLOW_STEP_TYPE.Action:return t.createActionStage(r);default:e.customerLog(Nf("StagesFactory getStage - Unknown flow node type: {0}",r.FlowNodeType),1,i)}}}o.register("StageCreator").asCtor(_p).dependencies("StagesFactory");function _p(e){var t=this;t.createStage=n;function n(t,n){var r=t.Nodes[n];return r?e.createStage(r):void 0}}o.register("UIFlowStage").asCtor(Pp).asProto().dependencies("UIElementFactory, CommonUtils, FlowDataPersister, Consts, FlowEventRaiser");function Pp(t,n,r,i,a,s){var u=this;u.execute=f,u.destroy=h,u.Id=s.Id;var l,c=0,d=[],p="UIFlowStage";function g(){l=o.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows});for(var e=0;e<s.UIElements.length;e++)d.push(t.createUIElement(s.UIElements[e]))}function f(){l.customerLog("{0}: Executing UI step with id {1}",p,u.Id);var t=e.Deferred();a.raiseEventOnCurrentFlow(i.EVENTS.Flows.LookingForElement,{step:s});for(var n=0;n<d.length;n++)m(t,d[n].show);return t.promise()}function h(){l.customerLog("{0}: Destroying UI step with id {1}",p,u.Id);var t=e.Deferred();return n.executeParallel({objectsArray:d,functionsToExecute:[function(e,t){e.destroy().then(function(){},t)}],successCallback:function(e){t.resolve(e)}}),d.length=0,t.promise()}function m(e,t){t().progress(function(t,n){var r=y(n.uiElementId);a.raiseEventOnCurrentFlow(i.EVENTS.Flows.ElementFound,{step:s,score:r.score});var o={id:u.Id,uiElementId:n.uiElementId,triggers:r.Triggers,siteElement:n.siteElement};e.notify(t,o)}).then(function(t){v(e,t)},function(t){S(e,t)})}function v(e,t){l.customerLog("{0}: UI step - Moving to next step. From step id {1} to step id {2}",p,u.Id,t.nextStageId),r.saveIsFirstVisualStep(!1),e.resolve(t)}function S(e,t){l.customerLog("{0}: Balloon was closed for UI step with id {1}, params {2}",p,u.Id,n.toJSON(t)),c++,(t.wasClosedByUser||c==d.length)&&e.reject(t)}function y(e){for(var t=0;t<s.UIElements.length;t++)if(s.UIElements[t].Id==e)return s.UIElements[t]}g.apply(null,arguments)}o.register("ActionStagesFactory").asCtor(Ap).dependencies("Consts");function Ap(e){var t=this;t.createActionStage=a;var n={};function r(){i()}function i(){n[e.FLOW_ACTION_TYPE.ConnectToBizflow]=s,n[e.FLOW_ACTION_TYPE.Delay]=u,n[e.FLOW_ACTION_TYPE.OpenMenu]=l,n[e.FLOW_ACTION_TYPE.PassOwnership]=c,n[e.FLOW_ACTION_TYPE.Redirect]=d,n[e.FLOW_ACTION_TYPE.Refresh]=p,n[e.FLOW_ACTION_TYPE.Style]=g,n[e.FLOW_ACTION_TYPE.SetData]=f,n[e.FLOW_ACTION_TYPE.Split]=h,n[e.FLOW_ACTION_TYPE.Stop]=m,n[e.FLOW_ACTION_TYPE.WaitForCondition]=v,n[e.FLOW_ACTION_TYPE.OnPageAction]=S,n[e.FLOW_ACTION_TYPE.ErrorHandling]=y}function a(e){return n[e.ActionType](e)}function s(e){return o.create("BranchActionStage",e)}function u(e){return o.create("DelayActionStage",e)}function l(e){return o.create("OpenMenuActionStage",e)}function c(e){return o.create("PassOwnershipActionStage",e)}function d(e){return o.create("RedirectActionStage",e)}function p(e){return o.create("RefreshActionStage",e)}function g(e){return o.create("StyleActionStage",e)}function f(e){return o.create("SetDataActionStage",e)}function h(e){return o.create("SplitActionStage",{node:e})}function m(e){return o.create("StopActionStage",e)}function v(e){return o.create("WaitForConditionActionStage",e)}function S(e){return o.create("OnPageActionStage",e)}function y(e){return o.create("ErrorHandlingActionStage",e)}r.apply(null,arguments)}o.register("BranchActionStage").asCtor(kp).asProto().dependencies("Consts, FlowsContainer, FlowStack, FlowVisualStepsIndicator, TimerManager");function kp(t,n,r,i,a,s){var u=this;u.execute=p,u.destroy=g,u.backFromFlowGroup=f,u.Id=s.Id;var l,c="BranchActionStage";function d(){l=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function p(){var t=e.Deferred(),i=s.Settings.actionArgs;if(l.customerLog("{0}: Executing Connect To Bizflow with step id {1} step index {2}. Branching to flow: {3}, starting from {4}",c,u.Id,s.PointIndex,i.flowId,i.playFromBeginning?"the beginning of the flow":"stage"+i.startingNodeId),!n.getFlowById(i.flowId)){var o={nextStageId:s.Links[0].TargetFlowNodeId,nextFlowId:r.peek().flowId};return h(t,o)}var d=i.playFromBeginning?void 0:i.startingNodeId,o={currentNode:s,nextFlowId:i.flowId,nextStageId:d,shouldCreateFlowGroup:!0,isBranch:!0};return a.playSetTimeout(function(){h(t,o,i.flowId)},500),t}function g(){return l.customerLog("{0}: Destroying Connect To Bizflow with step id {1} step index {2}",c,u.Id,s.PointIndex),e.Deferred().resolve()}function f(){l.customerLog("{0}: Connect To Bizflow - Back from branch - Step id {1} step index {2}",c,u.Id,s.PointIndex);var t=e.Deferred(),n={currentNode:s,nextFlowId:void 0,nextStageId:s.Links[0].TargetFlowNodeId,shouldCreateFlowGroup:void 0};return h(t,n,r.peek().flowId)}function h(e,t,n){return l.customerLog("{0}: Connect To BizFlow - Moving to next stage. From step id {1} step index {2} to step id {3}, from flow id {4} to flow id {5}. (create flow group: {6})",c,u.Id,s.PointIndex,t.nextStageId,t.nextFlowId,r.peek().flowId,t.shouldCreateFlowGroup?t.shouldCreateFlowGroup:"false"),i.init(n),e.resolve(t)}d.apply(null,arguments)}o.register("DelayActionStage").asCtor(Op).asProto().dependencies("TimerManager, Consts, FlowDataPersister");function Op(t,n,r,i){var a=this;a.execute=d,a.destroy=p,a.Id=i.Id;var s,u,l="DelayActionStage";function c(){s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function d(){var n=e.Deferred(),o=i.Settings.actionArgs.Duration;s.customerLog("{0}: Executing Delay with step id {1} step index {2}. Waiting {3} seconds.",l,a.Id,i.PointIndex,o||"0");var c=i.Links[0].TargetFlowNodeId;return r.saveWaitingForRefreshTrigger({refreshTrigger:c}),u=t.playSetTimeout(function(){return g(n,c)},1e3*o),n.promise()}function p(){return s.customerLog("{0}: Destroying Delay with step id {1}",l,a.Id),r.clearWaitingForRefreshTrigger(),e.Deferred().resolve()}function g(e,t){s.customerLog("{0}: Delay - Moving to next step. From step id {0} to step id {1}",l,a.Id,t),r.clearWaitingForRefreshTrigger();var n={nextStageId:t};return e.resolve(n)}c.apply(null,arguments)}o.register("OpenMenuActionStage").asCtor(Dp).asProto().dependencies("Consts, win");function Dp(t,n,r){var i=this;i.execute=l,i.destroy=c,i.Id=r.Id;var a,s="OpenMenuActionStage";function u(){a=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function l(){a.customerLog("{0}: Executing Open Menu with step id {1}",s,i.Id);var o=e.Deferred(),u={appType:t.EVENT_SENDER_EVENT_APPS.BizFlowStep,objectId:r.Id,type:t.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP};return void 0!=n.WalkMePlayerAPI&&n.WalkMePlayerAPI.toggleMenu(u),d(o,r.Links[0].TargetFlowNodeId)}function c(){return a.customerLog("{0}: Destroying Open Menu with step id {1}",s,i.Id),e.Deferred().resolve()}function d(e,t){a.customerLog("{0}: Open Menu - Moving to next step. From step id {0} to step id {1}",s,i.Id,t);var n={nextStageId:t};return e.resolve(n)}u.apply(null,arguments)}o.register("StyleActionStage").asCtor(Np).asProto().dependencies("Consts, WmInternals, SiteConfigManager");function Np(t,n,r,i){var a=this;a.execute=c,a.destroy=d,a.Id=i.Id;var s,u="StyleActionStage";function l(){s=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function c(){s.customerLog("{0}: Executing Style with step id {1}",u,a.Id);var t=e.Deferred();if(!f())return s.customerLog("{0}: Style step not supported, skipping to next step",u),p(t,i.Links[0].TargetFlowNodeId);var r=i.Settings.actionArgs,l=o.create("DynamicCss",{css:r.css,Id:a.Id});return l.add(),n.one(g(),function(){s.customerLog("{0}: Removing Style with step id {1}",u,a.Id),l.remove()}),p(t,i.Links[0].TargetFlowNodeId)}function d(){return s.customerLog("{0}: Destroying Apply Css with step id {1}",u,a.Id),e.Deferred().resolve()}function p(e,t){s.customerLog("{0}: Apply Css - Moving to next step. From step id {0} to step id {1}",u,a.Id,t);var n={nextStageId:t};return e.resolve(n)}function g(){return[t.EVENTS.Flows.FlowStopped,t.EVENTS.Flows.FlowCompleted].join(" ")}function f(){return r.get().Settings&&r.get().Settings.StyleActionStage}l.apply(null,arguments)}o.register("PassOwnershipActionStage").asCtor(xp).asProto().dependencies("Consts, CrossDomainManager, FlowStack, FlowsContainer, ClientStorageManager, FlowEventRaiser");function xp(t,n,r,i,a,s,u){var l=this;l.execute=g,l.destroy=f,l.Id=u.Id;var c,d="PassOwnershipActionStage";
function p(){c=o.create("FeaturedLogger",{feature:t.FEATURES_LOGS.Flows})}function g(){var i=e.Deferred();a.saveData(t.PASS_OWNERSHIP.NEW_WINDOW_TIME_KEY,(new Date).getTime(),3600),c.customerLog("{0}: checking ownership for stage with step id {1}",d,l.Id);var o=n.get().determineOwnership(r.peek());if(!o)return s.raiseEventOnCurrentFlow(t.EVENTS.Flows.AfterCompletingFlowStage,{step:u}),r.updateTopStageId(u.Links[0].TargetFlowNodeId),m(i);return h(i,u.Links[0].TargetFlowNodeId)}function f(){return c.customerLog("{0}: Destroying PassOwnership stage with step id {1}",d,l.Id),e.Deferred().resolve()}function h(e,t){c.customerLog("{0}: Moving to next step. From step id {1} to step id {2}",d,l.Id,t);var n={nextStageId:t};return e.resolve(n)}function m(e){return e.reject({lostOwnership:!0})}p.apply(null,arguments)}o.register("RedirectActionStage").asCtor(Lp).asProto().dependencies("TimerManager, RedirectService, win, Consts, FlowDataPersister");function Lp(t,n,r,i,a,s){var u=this;u.execute=p,u.destroy=g,u.Id=s.Id;var l,c="RedirectActionStage";function d(){l=o.create("FeaturedLogger",{feature:i.FEATURES_LOGS.Flows})}function p(){var r=e.Deferred(),i=s.Settings.actionArgs,o=i.url,d=i.dontRedirectIfIdentical,p=n.canRedirect(o,!d);l.customerLog("{0}: Executing Redirect with step id {1} to url {2}. dontRedirectIfIdentical: {3}, canRedirect: {4}",c,o,u.Id,d,p);var g=s.Links[0].TargetFlowNodeId;if(!p)return f(r,g);return a.saveWaitingForRefreshTrigger({refreshTrigger:g}),t.libSetTimeout(function(){var e=n.redirect(o);e&&f(r,g)},200),r.promise()}function g(){return l.customerLog("{0}: Destroying Redirect with step id {1}",c,u.Id),e.Deferred().resolve()}function f(e,t){l.customerLog("{0}: Redirect - Moving to next step. From step id {1} to step id {2}",c,u.Id,t);var n={nextStageId:t};return e.resolve(n)}d.apply(null,arguments)}o.register("RefreshActionStage").asCtor(Mp).asProto().dependencies("TimerManager, win, Consts, FlowDataPersister");function Mp(t,n,r,i,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l,c="RefreshActionStage";function d(){u=o.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function p(){u.customerLog("{0}: Executing Refresh with step id {1}",c,s.Id);var r=e.Deferred();return i.saveWaitingForRefreshTrigger({refreshTrigger:a.Links[0].TargetFlowNodeId}),l=t.libSetTimeout(function(){n.location.reload(!0)},200),r.promise()}function g(){return u.customerLog("{0}: Destroying Refresh with step id {1}",c,s.Id),l&&l.clear(),e.Deferred().resolve()}d.apply(null,arguments)}o.register("SetDataActionStage").asCtor(Fp).asProto().dependencies("ClientOrServerStorageManager, CookiesManager, JQueryElementFinder, CommonUtils, Consts, Lib");function Fp(t,n,r,i,a,s,u){var l=this;l.execute=f,l.destroy=h,l.Id=u.Id;var c,d="SetDataActionStage",p={Value:"Value",Variable:"Variable",jQuery:"jQuery",Cookie:"Cookie",OnScreenElement:"OnScreenElement"};function g(){c=o.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows})}function f(){var t=e.Deferred(),n=u.Settings.actionArgs;return v(n),m(t,u.Links[0].TargetFlowNodeId)}function h(){return c.customerLog("{0}: Destroying Set WalkMe Data with step id {1} step index {2}",d,l.Id,u.PointIndex),e.Deferred().resolve()}function m(e,t){c.customerLog("{0}: Set WalkMe Data - Moving to next step. From step id {0} to step id {1} step index {2}",d,l.Id,t,u.PointIndex);var n={nextStageId:t};return e.resolve(n)}function v(o){var s,g=o.dataType,f=o.key,h=o.duration,m=o.value,v=o.IdentifySettings;switch(g){case p.Value:s=m;break;case p.Variable:s=i.getWindowData(a.WINDOW_CUSTOM_DATA_TYPE.Var,m);break;case p.jQuery:var y=r.findElementsByjQueryComplexSelector(m);s=i.checkElementText(e(y));break;case p.Cookie:s=n.getCookie(m);break;case p.OnScreenElement:s=v?S(v):""}c.customerLog("{0}: Executing Set WalkMe Data with step id {1} step index {2}. Type {3}, Value {4}, Duration {5}",d,l.Id,u.PointIndex,g,s,h),t.saveData(f,s,h)}function S(t){var n=s.findElement(t);return n?i.checkElementText(e(n)):""}g.apply(null,arguments)}o.register("SplitActionStage").asCtor(Rp).asProto().dependencies("SplitFlowNodePlayableLinkProvider, Consts");function Rp(t,n,r){var i=this;i.execute=c,i.destroy=d;var a,s,u="SplitActionStage";function l(){a=r.node,i.Id=a.Id,s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function c(){var n=e.Deferred();s.customerLog("{0}: Executing Split with step id {1}",u,i.Id);var r=t.getPlayableLink(a);if(r)return s.customerLog("{0}: Split with step id {1} - Found link with id {2}",u,i.Id,r.Id),p(n,r);return s.customerLog("{0}: Split with step id {1} - No link was found"),g(n)}function d(){return s.customerLog("{0}: Destroying Split with step id {1}",u,i.Id),e.when()}function p(e,t){s.customerLog("{0}: Split - Moving to next step. From step id {0} to step id {1}",u,i.Id,t.TargetFlowNodeId);var n={nextStageId:t.TargetFlowNodeId,value:t.Name};return e.resolve(n)}function g(e){return e.reject()}l()}function Bp(t){var n=this;n.execute=i,n.destroy=o,n.Id=t.Id;function r(){}function i(){}function o(){return e.Deferred().resolve()}r.apply(null,arguments)}o.register("StopActionStage").asCtor(Bp).asProto(),o.register("WaitForConditionActionStage").asCtor(Up).asProto().dependencies("DebuggerManager, Consts, ConditionCheckerFactory, FlowEventRaiser");function Up(t,n,r,i,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l,c="WaitForConditionActionStage";function d(){l=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){var o=e.Deferred(),d=a.ConditionTrees.WaitFor;l.customerLog("{0}: Executing Wait For Condition with step id {1}. Evaluating condition with id {2}",c,s.Id,d.Id);var p={evaluationPollingIntervalMs:500,featureName:"Wait For Condition",elementName:"Wait for condition node: "+a.Name};return u=r.createNew(p),u.onValueChanged(function(e){if(l.customerLog("{0}: Condition value changed for Wait For Condition step with id {1}. Result {2}",c,s.Id,e),t.isDebuggerOnWindow()&&i.raiseEventOnCurrentFlow(n.EVENTS.Flows.WaitForConditionEvaluated,{step:a}),e)return f(o,a.Links[0].TargetFlowNodeId)}),u.evaluateAsync(d),o.promise()}function g(){return l.customerLog("{0}: Destroying Wait For Condition with step id {1}",c,s.Id),u&&(u.cleanResources(),u=void 0),e.Deferred().resolve()}function f(e,t){l.customerLog("{0}: Wait For Condition - Moving to next step. From step id {0} to step id {1}",c,s.Id,t);var n={nextStageId:t};return e.resolve(n)}d.apply(null,arguments)}o.register("ErrorHandlingActionStage").asCtor(Wp).asProto().dependencies("ErrorHandlingSegmentationChecker, Consts, TimerManager");function Wp(t,n,r,i){var a=this;a.execute=c,a.destroy=d,a.backFromFlowGroup=p,a.Id=i.Id;var s,u="ErrorHandlingActionStage";function l(){s=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function c(){var n=e.Deferred();s.customerLog("{0}: Executing Error Handling with step id {1} step index {2}",u,a.Id,i.PointIndex);var o=i.Links.length-1;if(t.isSegmented(i)){s.customerLog("{0}: Error Handling condition applies. Step id {1} step index {2}",u,a.Id,i.PointIndex);var l=i.Links[o].TargetFlowNodeId||i.Id;return r.playSetTimeout(function(){g(n,l,!0)},500),n.promise()}return s.customerLog("{0}: Error Handling condition does not apply. Step id {1} step index {2}",u,a.Id,i.PointIndex),g(n,i.Links[0].TargetFlowNodeId)}function d(){return s.customerLog("{0}: Destroying Error Handling with step id {1} step index {2}",u,a.Id,i.PointIndex),e.Deferred().resolve()}function p(){return s.customerLog("{0}: Back from Error Handling group - Step id {1} step index {2}",u,a.Id,i.PointIndex),c()}function g(e,t,n){s.customerLog("{0}: Error Handling - Moving to next step. From step id {1} step index {2} to step id {3}. (create flow group {4})",u,a.Id,i.PointIndex,t,n?n:"false");var r={currentNode:i,nextStageId:t,shouldCreateFlowGroup:n};return e.resolve(r)}l.apply(null,arguments)}o.register("ErrorHandlingSegmentationChecker").asCtor(Vp).dependencies("ObjectJpath, ConditionCheckerFactory");function Vp(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.ErrorHandle");if(!n||!n.Root)return!1;return i(t,n)}function i(e,n){var r={featureName:"evaluate error handling segmentation",elementName:e.Name},i=t.createNew(r);return i.getCurrentEvaluationValueAndStopEvaluating(n)}}o.register("OnPageActionStage").asCtor(Gp).asProto().dependencies("OnElementActionVisibilityEvaluator, OnElementActionExecutor, Consts, OnPageActionStageValueProvider");function Gp(t,n,r,i,a){var s=this;s.execute=p,s.destroy=g,s.Id=a.Id;var u,l="OnPageActionStage",c=!1;function d(){u=o.create("FeaturedLogger",{feature:r.FEATURES_LOGS.Flows})}function p(){var r=e.Deferred(),i=a.Settings.actionArgs;return u.customerLog("{0}: Evaluating visibility for On Page Action with id {1} step index {2}. On element action {3}",l,s.Id,a.PointIndex,i.onElementAction),t.evaluate(a.Id,i.IdentifySettings).then(function(){var e=t.getElement();u.customerLog("{0}: Element found. Executing On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),n.execute(e,i,function(){c||f(r,a)})}),r.promise()}function g(){return c=!0,u.customerLog("{0}: Destroying On Page Action with step id {1} step index {2}",l,s.Id,a.PointIndex),t.cleanResources(),e.Deferred().resolve()}function f(e,t){var n=t.Links[0].TargetFlowNodeId,r=t.Settings.actionArgs;u.customerLog("{0}: On Page Action - Moving to next step. From step id {1} step index {2} to step id {3}",l,s.Id,t.PointIndex,n);var o={nextStageId:n,value:i.getValue(r)};return e.resolve(o)}d.apply(null,arguments)}o.register("OnPageActionStageValueProvider").asCtor(Hp).asProto().dependencies("Consts");function Hp(e){var t=this;t.getValue=i;var n;function r(){n={},n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.FillText]="fillText",n[e.FLOW_ON_PAGE_ACTION_ELEMENT_ACTIONS_TYPE.SelectListValue]="dropdownSelectedValue"}function i(e){var t=e.onElementAction;if(t in n){var r=n[t];return e[r]}}r()}o.register("StartPointSegmentationChecker").asCtor(jp).dependencies("ObjectJpath, Consts");function jp(e,t){var n=this;n.isSegmented=r;function r(t){var n=e.getValue(t,"ConditionTrees.StartPoint");if(!n||!n.Root)return!1;var r=i(t,n);return a(r)}function i(e,n){var r={logContext:e.Id,isRemoveByCondition:!1,stickyType:t.STICKY_TYPE.ONCE,conditionCheckerParams:{featureName:"evaluate start point segmentation",elementName:e.Title},conditionTree:n};return e.IdentifySettings&&(r.elementVisibilityParams={findElementParams:{IdentifySettings:e.IdentifySettings}},r.trackUIChanges=!0),r}function a(e){var t=o.create("UIVisibilityManager",e);t.watchForVisibility();var n=t.shouldShow();return t.cleanResources(),n}}o.register("StartPointProvider").asCtor(Yp).dependencies("BaseGraphDfsService, StartPointSegmentationChecker");function Yp(e,t){var n=this;n.getFlowStartPointId=i;var r;function i(t){return r=void 0,e.runDfs(t,{afterPointDescendantsVisited:o}),r||t.RootFlowNodeId}function o(e){if(r)return;t.isSegmented(e.point)&&(r=e.node.Id)}}o.register("FlowStartPointOrderCreator").asCtor(zp).dependencies("Consts");function zp(t){var n,r,i=this;i.createNodesStack=o;function o(e){n=[],r=[];var t=e.RootFlowNodeId;for(r.push(t);r.length>0;){var i=r.shift(),o=e.Nodes[i];a(o)}return n}function a(e){switch(e.Type){case t.FLOW_STEP_TYPE.UI:l(e);break;case t.FLOW_STEP_TYPE.Action:s(e)}}function s(e){p(e,e.Id),u(e)}function u(e){for(var t=e.Links,n=t.length-1;n>=0;n--)d(t[n])}function l(e){for(var t=e.UIElements,n=t.length-1;n>=0;n--){var r=t[n];p(r,e.Id),c(r)}}function c(e){for(var t=e.Triggers,n=t.length-1;n>=0;n--)d(t[n])}function d(e){var t=e.TargetFlowNodeId;t&&r.push(t)}function p(t,r){var i=t.ConditionTrees&&t.ConditionTrees.StartPoint;i&&!e.isEmptyObject(i)&&n.push({point:t,nodeId:r})}}o.register("OnElementActionVisibilityEvaluator").asCtor(Qp);function Qp(){var t=this;t.evaluate=r,t.cleanResources=a,t.getElement=i;var n;function r(t,r){var i=e.Deferred(),a={logContext:t,findElementParams:{IdentifySettings:r},elementEvaluationIntervalMs:500};return n=o.create("ElementVisibilityEvaluator",a),n.setOnVisibilityChanged(function(){i.resolve()}),n.evaluateElementVisibilityAsynch(),i.promise()}function i(){if(n)return n.getElement()}function a(){n&&n.cleanResources()}}o.register("OnElementActionExecutor").asCtor(Kp).dependencies("InputGenerator");function Kp(e){var t=this;t.execute=i;var n={Click:"Click",Hover:"Hover",Focus:"Focus",FillText:"FillText",SelectListValue:"SelectListValue"};function r(){}function i(t,r,i){var o=r.onElementAction;switch(o){case n.Click:e.click(t,i);break;case n.Hover:e.hover(t,i);break;case n.Focus:e.focus(t,i);break;case n.FillText:var a=r.fillText;e.text(t,a,void 0,i);break;case n.SelectListValue:var s=r.dropdownSelectedValue;e.selectByText(t,s,i)}}r.apply(null,arguments)}o.register("FlowManager").asCtor(qp).asProto().dependencies("Consts, CommonEvents, wmjQuery, WalkMeGoalsManager, PlayGuidGenerator");function qp(e,t,n,r,i,o){var a=this;a.unbindEventPropagation=p;var s;function u(){s=o.businessSolutionModel,l()}function l(){n(s.Flow).on(e.FLOW_INNER_EVENTS.EventPropogationPrefix,function(e,r){var i={businessSolutionId:s.Id,businessSolutionName:s.Name};i=n.extend(i,r),t.raiseEvent(r.eventType,i),c(r.eventType)})}function c(t){t==e.FLOW_INNER_EVENTS.FlowIsPlaying&&d()}function d(){r.startWatchingDeployable(s,i.generateNewPlayGuid(s.Id))}function p(){n(s.Flow).off(e.FLOW_INNER_EVENTS.EventPropogationPrefix)}u()}o.register("FlowManagerCreator").asCtor(Xp);function Xp(){var e=this;e.create=t;function t(e){return o.create("FlowManager",{businessSolutionModel:e})}}o.register("FlowsManager").asCtor(Jp).dependencies("FlowManagerCreator, PromiseUtils, FlowsContainer");function Jp(t,n,r){var i=this;i.init=s,i.stopAllFlowEventsPropagation=l;var o,a;function s(e){o=e;var t=u();r.init(t)}function u(){var e=[];a=[];for(var n=0;n<=o.length-1;n++){var r=o[n];a.push(t.create(r)),e.push(r.Flow)}return e}function l(){if(!a)return e.when();return n.executeParallelyOnArray(a,c)}function c(e){return e.unbindEventPropagation()}}var $p=function(t){r(n,t);function n(e,n,r,i,o,a,s,u){t.call(this,{lib:e,type:n.DEPLOYABLE_TYPE.BusinessSolution}),this.consts=n,this.promiseUtils=r,this.smartTipSetsManager=i,this.flowsManager=o,this.permalinkManager=a,this.initiatorManager=s,this.logger=u,this._name="Flow",this._bizFlowApi=void 0,this.setDeployables([])}return n.prototype.setDeployables=function(n){if(!n)return;var r=e.grep(n,function(e){return e.SmartTips&&e.SmartTips.length>0});this.smartTipSetsManager.init(r);var i=e.grep(n,function(e){return!!e.Flow});this.flowsManager.init(i),t.prototype.setDeployables.call(this,n)},n.prototype.activateById=function(e,n,r){try{var i=t.prototype.getById.call(this,e);if(!i)return this.logger.customerLog(Nf("Failed playing bizflow with id {0} - The Id {0} does not exist.",e),3),!1;if(void 0!=r&&!i.Flow.Nodes[r])return this.logger.customerLog(Nf("Failed playing bizflow with id {0} - The NodeId {1} does not exist.",e,r),3),!1;var o=this.getBizFlowApi();return this.initiatorManager.setForScope(n,function(){o.start(i.Flow.Id,r,i.Name,n)}),!0}catch(a){return this.logger.customerLog(Nf("Failed playing bizflow with id {0}. Exception is {1}",e,a),3),!1}},n.prototype.releaseAll=function(){return this.promiseUtils.executeParallely([this.destroySmartTipSetManagers(),this.destroyFlowPlayer(),this.destroyFlowManagers()])},n.prototype.restore=function(){return this.permalinkManager.isTrainingInStartingMode()?e.when():this.getBizFlowApi().restore()},n.prototype.autoStartEnabled=function(e){if(this.permalinkManager.isTrainingInStartingMode())return!1;return!0},n.prototype.destroyFlowPlayer=function(){return this.getBizFlowApi().pause()},n.prototype.destroySmartTipSetManagers=function(){return this.smartTipSetsManager.turnOffAllSets()},n.prototype.getBizFlowApi=function(){return this._bizFlowApi||(this._bizFlowApi=o.get("BizflowApi")),this._bizFlowApi},n.prototype.destroyFlowManagers=function(){return this.flowsManager.stopAllFlowEventsPropagation()},n}(yi);o.register("BusinessSolutionsManager").asCtor($p).dependencies("Lib, Consts, PromiseUtils, SmartTipSetsManager, FlowsManager, PermalinkManager, InitiatorManager, Logger"),o.register("FlowsPlayer").asCtor(Zp).dependencies("StageCreator, FlowDataPersister, CommonUtils, StartPointProvider, Consts, FlowStack, FlowInnerGroupService, FlowTransitionChecker, FlowsContainer, FlowGroupEventRaiser, FlowEventRaiser, FlowGroupLastStageIndicator,FlowVisualStepsIndicator, DeployableSafeStartExecuter, DeployableTypes, LibDestroyer, FlowPlayerMetadata");function Zp(t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S){var y=this;y.stop=w,y.pause=_,y.restore=P,y.play=k;var E,T,C,b={PLAY:"play",RESTORE:"restore"};function I(){E=void 0,T=o.create("FeaturedLogger",{feature:a.FEATURES_LOGS.Flows})}function w(){return T.customerLog("FlowPlayer stop - Stopping current flow"),s.clear(),N()}function _(){return T.customerLog("FlowPlayer pause - Pausing current flow"),N()}function P(){if(T.customerLog("FlowPlayer restore - restoring current flow"),C=b.RESTORE,s.isEmpty())T.customerLog("FlowPlayer restore - nothing to restore");else{p.raiseEventOnCurrentFlow(a.EVENTS.Flows.RestoringFlow,{});var e=s.peek();f.init(e.flowId);var t=V(e.flowId,e.stageId);A(t),R(e.flowId,t)}}function A(e){s.peek().stageId||s.updateTopStageId(e)}function k(e,t){T.customerLog("FlowPlayer play from flow with id {0} stage id {1}",e,t),C=b.PLAY,v.releaseBalloons(),u.pushInnerGroupIfExists(e,t),s.push(e,t),n.saveIsFirstVisualStep(!0),f.init(e),d.raiseFlowStartedEvent(e,t),p.raiseEventOnCurrentFlow(a.FLOW_INNER_EVENTS.FlowIsPlaying,{}),R(e,t)}function O(t){T.customerLog("FlowPlayer onStageSuccess - next stage id: {0}{1}",t.nextStageId,t.nextFlowId?", next flow id: "+t.nextFlowId:""),N();var n=s.peek();t=e.extend({step:c.getNodeById(n.flowId,n.stageId)},t),p.raiseEventOnCurrentFlow(a.EVENTS.Flows.AfterCompletingFlowStage,t);var r=t.nextStageId;if(t.currentNode&&g.setPreviousGroupHasNextStage(t.shouldCreateFlowGroup,t.currentNode),t.shouldCreateFlowGroup){var i=t.nextFlowId;i||(i=n.flowId),T.customerLog("FlowPlayer new flow group - flow {0} with node {1}",i,r);var o=s.peek();t.isBranch&&!t.currentNode.Links[0].TargetFlowNodeId&&s.pop(),r=W(i,r),s.push(i,r),t.isBranch&&d.raiseFlowBranchedEvent(i,r,o.stageId),p.raiseEventOnCurrentFlow(a.FLOW_INNER_EVENTS.FlowIsPlaying,{}),R(i,r)}else r?x(r):U()}function D(e,t){if(T.customerLog("FlowPlayer onStageError - params: {0}",r.toJSON(e)),e&&e.nextStageId)O(e);else{var i=e&&e.lostOwnership;if(!i){if(e&&!e.wasElementShown&&n.getIsFirstVisualStep()){var o={flowId:t,eventParams:e},s=c.getFlowById(t);C==b.PLAY&&(n.getSafeStartFlowId()||(e.isSafeStartHandling=h.handleSafeStart(m.BusinessSolution,s,o)),p.raiseEventOnCurrentFlow(a.EVENTS.Flows.FailedToStart,e))}else g.removePreviousGroupHasNextStage(),p.raiseEventOnCurrentFlow(a.EVENTS.Flows.FlowStopped,e);w()}}}function N(){if(!E)return e.Deferred().resolve().promise();var t=E.destroy();return E=null,t}function x(e){T.customerLog("FlowPlayer transition - Transitioning to node {0}",e),s.updateTopStageId(e),M().then(F)}function L(){var e=s.peek();M().then(function(){R(e.flowId,e.stageId,"backFromFlowGroup")})}function M(){return l.canContinue()}function F(e){var t=s.peek();R(t.flowId,t.stageId,e)}function R(e,r,i){i||(i="execute"),T.customerLog("FlowPlayer run - Running flow id: {0}, node id: {1} with action: {2}",e,r,i);var o=c.getFlowById(e);if(E=t.createStage(o,r)){p.raiseEventOnCurrentFlow(a.EVENTS.Flows.BeforeExecutingFlowStage,{step:c.getNodeById(e,r)});var s=n.getSafeStartFlowId();E[i]().progress(B).then(O,function(t){D(t,e)}).always(function(){s&&n.saveSafeStartFlowId(void 0)})}else U()}function B(e,t){if("stageShown"!=e)return;p.raiseEventOnCurrentFlow(a.EVENTS.Flows.UIFlowStageShown,t)}function U(){var e=s.pop();if(T.customerLog("FlowPlayer flowGroupCompleted - With previous group settings flowId: {0}, stageId: {1}",e.flowId,e.stageId),!s.isEmpty()){var t=s.peek().flowId;return L(),void(e.flowId!=t&&p.raiseEventOnCurrentFlow(a.EVENTS.Flows.FlowBranchReturned,{flowId:e.flowId}))}w(),p.raiseEventOnCurrentFlow(a.EVENTS.Flows.FlowCompleted,{flowId:e.flowId})}function W(e,t){if(t)return t;var n=c.getFlowById(e);return i.getFlowStartPointId(n)}function V(e,t){var r=n.getWaitingForRefreshTrigger();return r?(T.customerLog("FlowPlayer play - refresh happened, skipping stage id {0} and moving to {1}",t,r.refreshTrigger),p.raiseEventOnCurrentFlow(a.EVENTS.Flows.AfterCompletingFlowStage,{step:c.getCurrentNode(),firedTrigger:r.firedTrigger}),n.clearWaitingForRefreshTrigger(),t=r.refreshTrigger,s.updateTopStageId(t)):t=W(e,t),t}I()}o.register("FlowPlayerMetadata").asInstance({lastTriggerFired:void 0}),o.register("FlowDataValidator").asCtor(eg);function eg(){var t=this;t.isFlowsArrayValid=n;function n(t,n){return e.isArray(t)&&r(t,n)}function r(t,n){var r=e(t).filter(function(e,t){return void 0!=n&&t.flowId==n||void 0!=t.flowId&&void 0!=t.stageId});return r.length==t.length}}o.register("FlowDataPersister").asCtor(tg).dependencies("ClientStorageManager, FlowDataValidator, FlowDataPersisterConsts");function tg(e,t,n){var r=this;r.getPlayGuid=f,r.getFlows=h,r.getIsFirstVisualStep=m,r.getWaitingForRefreshTrigger=v,r.getSafeStartFlowId=S,r.getPlayInitiator=y,r.load=g,r.saveFlows=a,r.savePlayGuid=s,r.saveIsFirstVisualStep=u,r.saveWaitingForRefreshTrigger=l,r.saveSafeStartFlowId=c,r.savePlayInitiator=d,r.clearWaitingForRefreshTrigger=p;var i;function o(){i={}}function a(e){i.flows=e,E()}function s(e){i.playGuid=e,E()}function u(e){i.isFirstVisualStep=e,E()}function l(e){i.isWaitingForRefresh=e,E()}function c(e){i.safeStartFlowId=e,E()}function d(e){i.playInitiator=e,E()}function p(){l(void 0)}function g(){i=T()}function f(){return i.playGuid}function h(){return i.flows}function m(){return i.isFirstVisualStep}function v(){return i.isWaitingForRefresh}function S(){return i.safeStartFlowId}function y(){return i.playInitiator}function E(){e.saveData(n.FLOW_STACK_NAME,i,n.FLOW_STACK_STORE_TIME)}function T(){var r=e.getData(n.FLOW_STACK_NAME);return r&&t.isFlowsArrayValid(r.flows,r.safeStartFlowId)?r:{flows:[]}}o.apply(null,arguments)}o.register("FlowDataPersisterConsts").asInstance({FLOW_STACK_NAME:"wm-flow-stack",FLOW_STACK_STORE_TIME:600}),o.register("FlowStack").asFunction(ng).dependencies("FlowDataPersister");function ng(t){var n=o.create("Stack"),r=n.push;n.push=s,n.updateTopStageId=a,n.load=u;function i(){var t=["push","pop","updateTopStageId","clear"];e(t).each(function(e,t){n[t]=l(n[t])})}function a(e){var t=n.peek();t.stageId=e}function s(e,t){r({flowId:e,stageId:t})}function u(){t.load(),n.init(t.getFlows())}function l(e){return function(){var r=e.apply(n,arguments);return t.saveFlows(n.getAll()),r}}return i(),n}o.register("BizflowApi").asCtor(rg).dependencies("FlowsPlayer, BizflowOwnershipManager, Consts, FlowsContainer, StartPointProvider, WalkthrusModule, FlowStack, FlowDataPersister");function rg(e,t,n,r,i,a,s,u){var l=this;l.start=g,l.restore=p,l.stop=e.stop,l.pause=e.pause;var c;function d(){c=o.create("FeaturedLogger",{feature:n.FEATURES_LOGS.Flows})}function p(){s.load(),e.restore()}function g(n,r,i,o){c.customerLog("BizflowApi start - Starting flow {0} id {1}{2}",i,n,r?" from node "+r:""),e.stop().then(function(){u.savePlayInitiator(o),a.removeCrossUsersState(),t.determineOwner(n,f(n,r))})}function f(e,t){if(t)return t;var n=r.getFlowById(e);return i.getFlowStartPointId(n)}d()}o.register("FlowEventRaiser").asCtor(ig).dependencies("Consts, FlowStack, FlowsContainer, wmjQuery");function ig(e,t,n,r){var i=this;i.raiseEventOnCurrentFlow=o,i.raiseEvent=a;function o(e,t){t=r.extend(s(),t),a(e,t)}function a(t,i){var o=n.getFlowById(i.flowId);i.eventType=t,r(o).trigger(e.FLOW_INNER_EVENTS.EventPropogationPrefix,i)}function s(){var e=t.peek();if(!e)return{};return{flowId:e.flowId,stageId:e.stageId}}}o.register("FlowGroupEventRaiser").asCtor(og).dependencies("Consts, FlowEventRaiser, FlowPlayerMetadata");function og(e,t,n){var r=this;r.raiseFlowStartedEvent=i,r.raiseFlowBranchedEvent=o;function i(n,r){var i=a(n,r);t.raiseEvent(e.EVENTS.Flows.FlowStarted,i)}function o(n,r,i){var o=a(n,r);o.branchOriginStageId=i,s()&&(o.isBbCodeTrigger=!0),t.raiseEvent(e.EVENTS.Flows.FlowBranched,o)}function a(e,t){return{flowId:e,requestedStageId:t,startingStageId:t}}function s(){return n.lastTriggerFired&&n.lastTriggerFired.Type==e.FLOW_TRIGGER_TYPE.BbCode}}o.register("FlowLinkedTaskCompletionHandler").asCtor(ag).dependencies("Consts, TodoListManager, WmInternals");function ag(e,t,n){var r=this;r.init=i;function i(){n.on(e.EVENTS.Flows.FlowCompleted,function(e,t){o(t.businessSolutionId)}),n.on(e.EVENTS.Flows.FlowBranchReturned,function(e,t){o(t.businessSolutionId)})}function o(n){t.updateDeployableCompleted(n,e.DEPLOYABLE_TYPE.BusinessSolution)}}o.register("BizFlowOnBeforeUnloadChecker").asCtor(sg).dependencies("Consts, WindowBeforeUnloadHandler, SiteConfigManager, TimerManager, FlowTransitionChecker, CrossDomainManager, FeaturesManager, FlowStack");function sg(t,n,r,i,o,a,s,u){var l=this;l.init=f,l.destroy=y;var c,d,p,g=3e3;function f(){h(),n.register(m),o.register(t.FLOW_TRANSITION_HANDLER_IDS.ON_BEFORE_UNLOAD,S)}function h(){c=!1,d=null,p=null}function m(){if(u.isEmpty())return;if(c=!0,i.pauseAllTimeouts(),!a.get().enabled()){d=e.Deferred(),p&&p.clear();var t=r.get().Settings.BeforeUnloadTimeout||g;p=i.setWalkmeTimeout(v,t)}}function v(){s.isFeatureEnabled("noUnload")&&i.resumeAllTimeouts(),d.resolve(),h()}function S(){return c?a.get().enabled()?(h(),a.get().loseOwnership(!1,!0),e.Deferred().reject()):d.promise():e.Deferred().resolve()}function y(){p&&p.clear(),h()}}o.register("SplitFlowNodePlayableLinkProvider").asCtor(ug).dependencies("FlowLinkSegmentationChecker, ObjectJpath");function ug(e,t){var n=this;n.getPlayableLink=i;function r(){}function i(t){for(var n=o(t.Links),r=0;r<n.length;r++){var i=n[r];if(!a(i)||e.isSegmented(i))return i}return null}function o(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];a(i)?t.push(i):n.push(i)}return t=t.concat(n)}function a(e){var n=t.getValue(e,"ConditionTrees.Branch.Root");return!!n}r()}o.register("FlowLinkSegmentationChecker").asCtor(lg).dependencies("ConditionCheckerFactory");function lg(e){var t=this;t.isSegmented=r;function n(){}function r(t){var n={featureName:"evaluate split node link segmentation",elementName:t.Name},r=e.createNew(n),i=r.getCurrentEvaluationValueAndStopEvaluating(t.ConditionTrees.Branch);return i}n()}o.register("FlowsContainer").asCtor(cg).dependencies("FlowStack");function cg(e){var t=this;t.init=r,t.getNodeById=o,t.getFlowById=i,t.getCurrentNode=a;var n;function r(e){n={};for(var t=0;t<e.length;t++)n[e[t].Id]=e[t]}function i(e){return n[e]}function o(e,t){return n[e].Nodes[t]}function a(){if(e.isEmpty())return;var t=e.peek();return o(t.flowId,t.stageId)}}o.register("FlowSurveyActivator").asCtor(dg).dependencies("WmInternals, Consts, BusinessSolutionsManager, DeployableSurveyActivator, FlowDataPersister");function dg(t,n,r,i,o){function a(){t.on(n.EVENTS.Flows.FlowCompleted,s),t.on(n.EVENTS.Flows.FlowStopped,u)}function s(e,t){l(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruCompleted)}function u(e,t){l(t.businessSolutionId,n.SURVEY_START_EVENTS.WalkThruExited)}function l(e,t){var a=r.getById(e);if(!a.Surveys||0==a.Surveys.length)return;var s=c(a.Surveys,t);if(!s)return;var u="wm-SrvWtRep-"+n.DEPLOYABLE_TYPE.BusinessSolution+"-"+a.Id,l=n.SURVEY_FREQUENCY[s.Frequency],d={objectId:a.Id,type:n.STEP_PLAY_INITIATOR_ENUM.FLOW_STEP},p={businessSolutionId:a.Id,eventSource:t,surveyPlayGUID:o.getPlayGuid()};i.activateSurvey(s.SurveyId,u,l,d,p)}function c(t,r){var i=n.SURVEY_START_EVENTS.Both,o=void 0;return e.each(t,function(e,t){t.TriggerType!=r&&t.TriggerType!=i||(o=t)}),o}a()}o.register("FlowTransitionChecker").asCtor(pg).dependencies("Consts");function pg(t){var n=this;n.register=s,n.canContinue=u;var r,i,o;function a(){i=[],o=[],r={},r[t.FLOW_TRANSITION_HANDLER_IDS.DELAYER]=!0}function s(e,t){r[e]?i.push(t):o.push(t)}function u(){var t=e.Deferred();return l(i).then(function(){l(o).then(t.resolve,t.reject)},t.reject),t.promise()}function l(t){var n=e.map(t,c);return e.when.apply(e,n)}function c(e){return e()}a()}o.register("FlowTransitionDelayer").asCtor(gg).dependencies("Consts, FlowTransitionChecker, SiteConfigManager, TimerManager, FlowTransitionDelayerDefaultMap");function gg(e,t,n,r,i){var o=this;o.setDelayByTrigger=c,o.destroy=p;var a,s,u;function l(){u=mtjQuery.Deferred().resolve(),a=u,t.register(e.FLOW_TRANSITION_HANDLER_IDS.DELAYER,d)}function c(e){var t=g(e);t&&(a=mtjQuery.Deferred()),s=r.setWalkmeTimeout(a.resolve,t)}function d(){return a.promise()}function p(){s&&(s.clear(),s=null)}function g(e){return f()[e]||i[e]||0}function f(){return n.get().Settings.TriggersDelays||{}}l()}o.register("FlowTransitionDelayerDefaultMap").asCtor(fg).dependencies("Consts");function fg(e){var t={};return t[e.FLOW_TRIGGER_TYPE.Click]=1e3,t}o.register("NextExecutionFlowNodeProvider").asCtor(hg).dependencies("FlowNodeExtensions, SplitFlowNodeDecisionProvider");function hg(e,t){var n=this;n.getNextNodeToExecute=i;function r(){}function i(n){if(e.isSplitNode(n))return t.getNextNodeId(n);var r=e.getNodeConnectors(n);return r[0].TargetFlowNodeId}r()}o.register("SplitFlowNodeDecisionProvider").asCtor(mg).asProto().dependencies("SplitFlowNodePlayableLinkProvider");function mg(e){var t=this;t.getNextNodeId=r;function n(){}function r(t){var n=e.getPlayableLink(t);if(!n)return null;var r=n.TargetFlowNodeId;return r}n()}o.register("FlowExecutionTraverser").asCtor(vg).dependencies("FlowsContainer, NextExecutionFlowNodeProvider");function vg(e,t){var n=this;n.executionTraverse=i;function r(){}function i(n,r,i){var o={};a(r);function a(r){if(o[r])return;var s=e.getNodeById(n,r),u=i(s);if(!u)return;o[r]=1;var l=t.getNextNodeToExecute(s);l&&a(l)}}r()}o.register("FlowGroupLastStageIndicator").asCtor(Sg).dependencies("ClientStorageManager, Consts");function Sg(e,t){var n=this;n.setPreviousGroupHasNextStage=i,n.removePreviousGroupHasNextStage=o,n.isPreviousGroupHasNextStage=a;var r="wm-nls";function i(n,i){var u=a();if(n&&!u&&s(i)){var l=t.TIME_PERIODS.OneHourSeconds/2;e.saveData(r,i.Id,l)}else n||u!=i.Id||o()}function o(){e.removeData(r)}function a(){return e.getData(r,!1)}function s(e){return e.Links[0].TargetFlowNodeId}}o.register("UiFlowNodesExecutionStack").asCtor(yg).dependencies("Consts, FlowsContainer, FlowNodeExtensions, FlowStack, WmInternals, ButtonTriggersProvider");function yg(e,t,n,r,i,a){var s=this,u=o.create("Stack");s.clear=u.clear,s.push=u.push,s.pop=u.pop,s.isEmpty=u.isEmpty;function l(){c()}function c(){i.bind(e.EVENTS.Flows.FlowStarted,u.clear),i.bind(e.EVENTS.Flows.BeforeExecutingFlowStage,d),i.bind(e.EVENTS.Flows.AfterCompletingFlowStage,g)}function d(e,t){p(t)&&!v(t)||u.clear()}function p(e){var r=t.getNodeById(e.flowId,e.stageId),i=r&&n.isUiNode(r);return i}function g(e,t){f(t)&&m(t)&&u.push(r.peek().stageId)}function f(e){return!e.isFlowGoingBack}function h(e){var t=e.step,n=t.UIElements[0],r=a.get(n);return r.length>0}function m(e){return p(e)&&h(e)}function v(e){return p(e)&&!h(e)}l()}o.register("FlowInnerGroupService").asCtor(Eg).dependencies("FlowsContainer, FlowStack, FlowGroupLastStageIndicator");function Eg(e,t,n){var r=this;r.pushInnerGroupIfExists=i;function i(r,i){if(!i)return;var o,a=e.getFlowById(r),s=a.Nodes[i];o=s.ErrorHandlingParentId?s.ErrorHandlingParentId:s.Settings&&s.Settings.ErrorHandlingParentId,o&&(t.push(r,o),n.setPreviousGroupHasNextStage(!0,a.Nodes[o]))}}o.register("FlowVisualStepsIndicator").asCtor(Tg).dependencies("Consts, FlowsContainer");function Tg(t,n){var r=this;r.init=o,r.getTotalVisualSteps=a,r.getNextVisualStepIndex=s;var i;function o(e){u(e)}function a(){return i.length}function s(t){return e.inArray(t,i)+1}function u(e){var r,o=[],a=n.getFlowById(e),s=a.Nodes;for(var u in s)r=s[u],r.Type==t.FLOW_STEP_TYPE.UI&&(o=o.concat(r.UIElements));o.sort(c),i=l(o)}function l(t){return e.map(t,function(e){return e.Id})}function c(e,t){var n=e.PointIndex,r=t.PointIndex;
return n<r?-1:1}}o.register("FlowSafeStartHandler").asCtor(Cg).dependencies("RedirectService, Consts, FlowStack, FlowDataPersister, FlowEventRaiser");function Cg(e,t,n,r,i){var o=this;o.auditSafeStartStatus=u,o.redirect=a,o.auditStayButtonClicked=s,o.auditSafeStartDisabled=l,o.auditSafeStartFirstStatus=u;function a(t,i){n.push(i.flowId),r.saveSafeStartFlowId(i.flowId),e.redirect(t)}function s(e){u(t.SAFESTART_ACTION.StayClicked,e)}function u(e,n){n.eventParams.status=e,n.eventParams.flowId=n.flowId,i.raiseEventOnCurrentFlow(t.EVENTS.Flows.SafeStartStatusChanged,n.eventParams)}function l(e){u(t.SAFESTART_ACTION.ErrorShown,e)}}var bg=function(){function t(e,t,n,r,i,o){var a=this,s=o.css,u=o.Id;this.resourceManager=e,this.uiChangeTracker=t,this.timerManager=n,this.cssUtils=r,this._logger=i,this.uiChangeListener=function(){a.jSelectorsOff(),a.jSelectorsOn()},this.Id=u,this.DYNAMIC_CSS_CLASS="wm-dynamic-css-"+u+"-",this.parseCss(s)}return t.prototype.parseCss=function(e){var t=this.cssUtils.clearComments(e),n=this.secureScreen(t),r=this.replaceJQuerySelectors(n),i=r.pureCss,o=r.jSelectors;this._jSelectors=o,this._css=i},t.prototype.secureScreen=function(e){if(!this.cssUtils.isSecure(e))return this._logger.customerLog("[Dynamic Css] - Forbidden tokens detected - css reset to empty",3),"";return e},t.prototype.add=function(){try{0==this.getStyleSheet().length&&this.resourceManager.injectCss(this._css,this.getStyleSheetId()),this.jSelectorsOn(),this.uiChangeTracker.bind(this.uiChangeListener),this.listenToMutations()}catch(e){this._logger.customerLog("[Dynamic Css] - Faied to add css",3)}},t.prototype.remove=function(){this.getStyleSheet().remove(),this.jSelectorsOff(),this.uiChangeTracker.unbind(this.uiChangeListener),this.observer&&this.observer.disconnect()},t.prototype.replaceJQuerySelectors=function(t){var n=this,r=this.cssUtils.getSelectors(t),i=e.grep(r,function(e){return e&&!n.isCss(e)}).map(function(e,t){return{selector:e,"class":""+n.DYNAMIC_CSS_CLASS+t}}),o=e(i).reduce(function(e,t){return e.replace(t.selector,"."+t["class"])},t);return{pureCss:o,jSelectors:i}},t.prototype.isCss=function(e){try{return document.querySelector(e),!0}catch(t){return!1}},t.prototype.listenToMutations=function(){var e=this;window.MutationObserver&&(this.observer=new MutationObserver(function(){return e.timerManager.libSetTimeout(e.uiChangeListener,0)}),this.observer.observe(document,{childList:!0,subtree:!0}))},t.prototype.jSelectorsOn=function(){e(this._jSelectors).safeEach(function(t,n){var r=e(n.selector);r.addClass(n["class"])})},t.prototype.jSelectorsOff=function(){e(this._jSelectors).safeEach(function(t,n){var r=e("."+n["class"]);r.removeClass(n["class"])})},t.prototype.getStyleSheet=function(){return e("#"+this.getStyleSheetId())},t.prototype.getStyleSheetId=function(){return"wm-dymanic-css-"+this.Id},t}();o.register("DynamicCss").asCtor(bg).asProto().dependencies("ResourceManager, UIChangeTracker, TimerManager, CssUtils, Logger"),o.register("FlowNodePlayIndicator").asCtor(Ig).dependencies("FlowNodeExtensions, FlowExecutionTraverser");function Ig(e,t){var n=this;n.isPlayable=i;function r(){}function i(e,n){var r=!1;return t.executionTraverse(e,n,function(e){var t=!0;return o(e)&&(r=!0,t=!1),t}),r}function o(t){return!e.isSplitNode(t)}r()}o.register("WalkthrusModule").asCtor(wg).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, WalkthruBalloonContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer, AuditSourceProvider,BalloonDrawerProvider, LocationMatcher, DeployableTypes");function wg(t,n,r,i,a,s,u,l,d,p,g,f,h,m,v,S,y,E,T,C,b,I,w,_,P,A,k,O,D,N){var x=this;x.setTutorials=Y,x.isTutorialPackageHidden=$,x.canShowTutorial=ie,x.stopTutorial=ge,x.startNewTutorial=fe,x.tutorialFinished=Te,x.executeTutorialNextStep=be,x.postWelcomeStep=je,x.executeCurrentStep=Ke,x.executePreviousStep=qe,x.getAction=z,x.getSiteConfigByTutorialId=J,x.isTutorialIdsExist=Z,x.isStepTrigger=ee,x.terminateTutorial=pe,x.checkTutorialSkipFirstStepCondition=ae,x.fillMissingStepAudits=ye,x.getNextStepIncludingSplit=Pe,x.releaseEvents=xe,x.stepWasCompleted=Re,x.getPlayConditionMode=Ve,x.checkPlayStepCondition=Ge,x.executeTutorialStep=Oe,x.checkIfStepExistsWithSkippables=Ye,x.isStepPlayable=Qe,x.checkTutorialRedirectCondition=se,x.loadTutorial=le,x.releaseBalloonsTimeouts=de,x.resetState=he,x.cleanCurrentStepResources=Je,x.addCurrentStepResource=Xe,x.setMember=R,x.removeCrossUsersState=me,x.getMatchedSurvey=Se,x.getWalkthruSurveyFrequency=ve;var L={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},M={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},F="PSCTMode";function R(e,t){L[e]=t}var B="stepCheck",U={},W=[],V=!1,G=0,H="wm-wfow",j=[];function Y(e){U={};for(var t=0;t<e.length;t++)e[t].Steps&&n.fixSteps(e[t],r.get());i.setWalkthrus(e)}function z(e){if(void 0!=U[e.Id])return U[e.Id];var t=a.getSettingsValue(e.Settings,"action",null);if(!t)return s.customerLog("No action core. aborting..."),null;return U[e.Id]=o.get("ActionsFactory").get(t.actionType,t.arguments,u.STEP_PLAY_INITIATOR_ENUM.STEP,e),U[e.Id]}function Q(e){if(!W||0==W.length)return!1;for(var t=[],n=void 0,r=!1;W.length>0;){if(n=W.pop(),n.id==e){r=!0;break}t.push(n)}if(t.length>0)for(;t.length>0;)W.push(t.pop());return r}function K(e){for(var t=0;t<W.length;t++){var n=W[t];if(n.id==e)return!0}return!1}function q(e,t){W.push({id:e.Id,mode:t})}function X(e){var t=i.getWalkthruByIndex(e);if(L.tutorialRunSettingsMap[t.TutorialId]){var n=L.tutorialRunSettingsMap[t.TutorialId].siteConfig;n&&r.set(n)}}function J(e){var t;return t=L.tutorialRunSettingsMap[e]?L.tutorialRunSettingsMap[e].siteConfig:r.get()}function $(e){var t=L.tutorialRunSettingsMap[e.TutorialId];if(!t)return!1;return t.isPackageHidden}function Z(e){var t=l.map(e,i.getWalkthruIndexByWalkthruId),n=l.inArray(-1,t);return void 0==n||n==-1}function ee(e,t){if("number"==typeof e)return e==t;for(var n=e.split(","),r=0;r<n.length;r++)if(t+""==n[r])return!0;return!1}function te(e,t,n,r){for(var o=t;o<n;o++)if(r!=u.STEP_STATUS.SkippedByActionStep){var a=i.getWalkthruByIndex(e);d.deprecatedRaiseEvent("NewSkippedStep",a.Steps[o])}}function ne(e,t){var n=Array();if(!e.Conditions)return n;for(var r=0;r<e.Conditions.length;r++)e.Conditions[r].Type==t&&(void 0!=e.Conditions[r].IsEnabled&&1!=e.Conditions[r].IsEnabled||n.push(e.Conditions[r]));return n}function re(e){return ne(e,M.FIRST_STEP_MUST_EXIST).length>0}function ie(e){if(0==e.IsVisible)return!1;for(var n=ne(e,M.URL),r=!1,i=0;i<n.length;i++)if(oe(e,n[i])){r=!0;break}if(n.length>0&&!r)return!1;var s=a.getSettingsValue(e.Settings,"DOCTEnabled",0);if(1==s){var u=a.getSettingsValue(e.Settings,"DOCT","");if(""!=u)try{var l=o.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:e.Name}),c=l.getCurrentEvaluationValueAndStopEvaluating(u);if(d.deprecatedRaiseEvent("WtConditionEvaluated",e),!c)return d.deprecatedRaiseEvent("CannotShowWt",e),!1}catch(p){}}if(re(e)){if(0==e.Steps.length)return!1;var g=e.Steps[0];return t.findElement(g,null,null,'First Step Condition for "'+(g.StepTitle||g.StepText)+', Walk-Thru "'+e.Name+'"')}return d.deprecatedRaiseEvent("CanShowWt",e),!0}function oe(e,t){switch(t.Type){case M.URL:return!!D.isLocationMatchString(t.Content);default:s.error(new Error("Invalid condition type: "+t.Type))}}function ae(e){for(var t=i.getWalkthruByIndex(e),n=ne(t,M.SKIP_FIRST_STEP),r=0;r<n.length;r++){var o=n[r];if(D.isLocationMatchString(o.Content)){var a=o.ExtraData,u=a?a-1:1;return s.customerLog("The walk-thru has a skip step condition ("+o.Content+") which is true. Skipping to: "+u),u}}return 0}function se(e,t){var n=i.getWalkthruByIndex(e),r=ne(n,M.REDIRECT);if(0==r.length)return!1;return ue(r[0],t)}function ue(e,t){var n=e.Content;return t?g.redirect(n):g.canRedirect(n)}function le(e,t,n,r,a,l){try{o.get("WalkmeVisibleReporter").report(),v.stepAppearanceIndex=0;var c=i.getWalkthruByIndex(e);d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruLoaded,c),X(e),o.get("ContentsManager").removeContent(),r=p.defaultValue(r,y.generateNewPlayGuid(c.TutorialId)),n=p.defaultValue(n,!0),t=p.defaultValue(t,0);var g=void 0==l?t:l;0===t&&(t=ae(e)),ce(e,t,r,a,[],[],[]);try{a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.NONE},o.get("AuditWtsManager").auditWalkthruStart(c,a,g,t,r)}catch(f){s.error(f)}E.get()!=u.SOURCES.play&&o.get("WalkMeGoalsManager").startWatchingDeployable(c,r),je(e)}catch(h){s.error(h)}}function ce(e,t,n,r,i,a,s){de(),A.releaseBalloons(),o.get("FlowsPlayer").stop(),v.state=u.WALKTHRU_STATE.RUNNING,v.currentWalkthru=e,v.currentStep=t-1,v.stepPlayHistory=i,v.stepPlayStack=a,v.stepCompletedHistory=s,o.get("AuditStepsManager")._currentPlayGUID=n,o.get("AuditStepsManager")._currentPlayInitiator=r,S.storeStateInCookie()}function de(){f.stopTimeoutsArray("playTimeouts"),L.executeTutorialNextStepNotFinished=!1}function pe(){v.stepPlayStack=[],A.releaseBalloons(),de(),d.raiseEvent("WalkthruAborted")}function ge(e,t){d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruStopped,v.getCurrentStep()),de(),A.releaseBalloons(),v.state=u.WALKTHRU_STATE.NOT_RUNNING;var n=v.currentStep;if(v.currentStep=-1,e||S.storeStateInCookie(),o.get("CrossDomainManager")&&o.get("CrossDomainManager").get().enabled()&&o.get("CrossDomainManager").get().reset(),!t){var r=v.getCurrentWalkthru();if(r&&r.Settings.survey){var i=u.SURVEY_START_EVENTS.WalkThruExited,a=r.Settings.survey.surveyId,s=ve(r.Settings.survey,i),l={objectId:r.Id,type:u.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};o.get("WalkthruSurveyActivator").activateSurvey(r,i,l,a,s,void 0,n)}}}function fe(e,t,n,r){var a=i.getWalkthruByIndex(e);return o.get("WalkthruStepsLoader").afterStepsLoaded(a&&a.TutorialId,function(){return l()});function l(){try{s.customerLog("startNewTutorial : Index = "+e+". From Step = "+t+" testMode: "+n),T.fixFlash(),X(e);var i=!1;if(o.get("AuditStepsManager")._currentPlayInitiator=r,t=p.defaultValue(t,0),n=p.defaultValue(n,!1),!n){if(v.state!=u.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!o.get("WalkthruOwnershipManager").walkthruStarted(e,t))return!0;he(!0,!0),o.get("CrossDomainManager").get().enabled()||me(),o.get("OldBalloonNotifier").closePopup()}d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruStarted,a);var l=[],c=t;t=o.get("PlayManager").findFirstStep(e,t,l);var g=0==t;if(t>0&&!n){var f=E.get();f==u.SOURCES.play||f==u.SOURCES.preview?te(e,c,t,u.STEP_STATUS.SkippedStartedFromBiggerStep):(i=!0,ye(e,0,t,u.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==t&&(t=ae(e),t>0&&!n&&(i=!0,ye(e,0,t,u.STEP_STATUS.SkippedByTutorialCondition)));if(!se(e,!1)&&t<0){if(n)return!1;o.get("AuditStepsManager").createPlayGuidIfNeeded(a.TutorialId);var h={tutorialIndex:e,wt:a,checkStepExistsTrace:l};if(!o.get("DeployableSafeStartExecuter").handleSafeStart(N.Tutorial,a,h)){for(var m=0;m<l.length;m++){var S=l[m].stepStatus==u.STEP_STATUS.SupposedToShow;o.get("AuditStepsManager").auditStep(a,a.Steps[l[m].stepIndex],l[m].stepStatus,S),te(e,l[m].stepIndex,l[m].stepIndex+1,l[m].stepStatus)}var y=l[l.length-1].stepIndex,C=a;Ee(C,y),he()}}else{if(n)return!0;le(e,t,g,i?o.get("AuditStepsManager")._currentPlayGUID:void 0,r,c)}}catch(b){return s.error(b),!1}return d.deprecatedRaiseEvent("WtHasGuid",a,{playGuid:o.get("AuditStepsManager")._currentPlayGUID}),d.raiseEvent(u.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:o.get("AuditStepsManager")._currentPlayGUID}),!0}}function he(e,t){v.currentWalkthru=-1,v.state=u.WALKTHRU_STATE.NOT_RUNNING,v.currentStep=-1,v.splitPointStack=[],v.stepPlayHistory=[],v.stepPlayStack=[],v.stepCompletedHistory=[],v.lastBackButtonStepIndex=-1,o.get("AuditStepsManager")._currentPlayGUID="",L.executeTutorialNextStepNotFinished=!1,U={},L.dontContinueTutorial=!1,V=!1,e||(o.get("AuditStepsManager")._currentPlayInitiator=null),t||S.storeStateInCookie()}function me(){for(var e=o.get("UserGuidContainer").getAllUserGuids(),t=0;t<e.length;t++){var n=e[t];o.get("ClientStorageManager").removeData(u.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,n)}}function ve(e,t){var n=Se(e,t);return n.repeat||"visit"}function Se(e,t){if(e.startCondition==t||e.startCondition==u.SURVEY_START_EVENTS.Both)return e}function ye(e,t,n,r){for(var a=t;a<n;a++){var s=i.getWalkthruByIndex(e);o.get("AuditStepsManager").auditStep(s,s.Steps[a],r)}}function Ee(e,t){if(k.isInPlayMode()){var n=e.Steps[t],r={step:n,tutorial:e};d.raiseEvent("WalkthruFailedToStart",r)}else o.get("PopupNotificationsService").showWalkthruFailedToStartPopup(e)}function Te(e){A.releaseBalloons(),v.state=u.WALKTHRU_STATE.NOT_RUNNING,S.storeStateInCookie();var n=Ce(),r={hadSplit:!!n,finishAfterRefresh:!!e},a=v.getCurrentWalkthru();if(d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WalkthruCompleted,a,r),o.get("TodoListManager").updateDeployableCompleted(a.TutorialId,u.DEPLOYABLE_TYPE.Tutorial),a.Settings.survey){var s=u.SURVEY_START_EVENTS.WalkThruCompleted,l=a.Settings.survey.surveyId,c=ve(a.Settings.survey,s),p={objectId:a.Id,type:u.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},g=v.currentStep;o.get("WalkthruSurveyActivator").activateSurvey(a,s,p,l,c,void 0,g)}if(n){var f=i.getWalkthruByIndex(n.tutorialIndex);d.deprecatedRaiseEvent("switchToWalkthru",f.Id),d.deprecatedRaiseEvent("BackFromBranch",f),ce(n.tutorialIndex,n.stepIndex,n.playGuid,n.playInitiator,n.stepPlayHistory,n.stepPlayStack,n.stepCompletedHistory),t.executeTutorialNextStep()}else v.stepPlayStack=[],o.get("CrossDomainManager").get().loseOwnership()}function Ce(){return v.splitPointStack.length>0?v.splitPointStack.pop():null}function be(){s.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),C.waitForFramesToLoad().then(Ie)}function Ie(){if(L.executeTutorialNextStepNotFinished)return void s.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);if(V)return V=!1,s.customerLog("executeTutorialNextStep: waiting for other window",5),s.customerLog("Waiting for other window..."),void we();if(L.dontContinueTutorial)return void s.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);if(v.getCurrentWalkthru().Steps.length-1==v.currentStep)return void Te();L.executeTutorialNextStepNotFinished=!0;var e=_e();s.customerLog(Nf("Next step including split is: {0} seconds",e),5,c),f.playSetTimeout(function(){v.currentStep++;function e(){L.executeTutorialNextStepNotFinished=!1,Ke()}v.currentStep>0&&!ee(v.getPreviousStep().End,u.WALKTHRU_STEP_TRIGGER.NOTHING)?A.releaseBalloons(e):e()},1e3*e)}function we(){o.get("ClientStorageManager").refreshGetData(),f.playSetTimeout(function(){var e=o.get("ClientStorageManager").getData(H,void 0,v.getCurrentWalkthru().userGuid);1==e?(s.customerLog("Other window finished. Resuming walk-thru here."),o.get("ClientStorageManager").saveData(H,0,u.DEFAULT_COOKIE_SECONDS,v.getCurrentWalkthru().userGuid),o.get("WalkthruStateRestorer").restoreCrossUsersState()):we()},500)}function _e(){var e=Pe();return null==e?0:e.Delay}function Pe(){return Ae(v.currentWalkthru,v.currentStep,0)}function Ae(e,t,n){var r=i.getWalkthruByIndex(e);if(r.Steps.length>t+1){var o=r.Steps[t+1];return o.TutorialIndex=e,o}var a=v.splitPointStack;if(a.length>n){var s=a[a.length-1-n];return Ae(s.tutorialIndex,s.stepIndex-1,n+1)}return null}function ke(){var e=v.stepPlayHistory;if(e.length<2)return!0;for(var t=0;t<e.length-1;t++){var n=i.getWalkthruByIndex(v.currentWalkthru),r=b.getStepById(e[t],n);if(!p.isDefined(r.Settings.action))return!1}return!0}function Oe(n){function l(e){s.customerLog(e,5,c)}var g=p.getTimer(l),y={};G!=n.Id&&v.stepAppearanceIndex++,n.playNumber=v.stepAppearanceIndex,G=n.Id,d.raiseEvent(u.EVENTS.Walkthrus.StepExecuting,{playNum:v.stepAppearanceIndex});var E=i.getWalkthruByIndex(v.currentWalkthru),T=Nf("Processing step # {0} . Step title: {1}. Walkthru: {2}",n.StepIndex+1,n.StepTitle,E.Name);if(s.customerLog(T),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepStarted,n),I.isFeatureEnabled("highPerf")||o.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_CONDITION){var C=_.isActionStep(n)?u.STEP_STATUS.Shown:u.STEP_STATUS.SupposedToShow;o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,C)}var w=Ve(n),A=x.checkPlayStepCondition(n);if(!A&&(w==u.playConditionModes.PLAY_CONDITION||w==u.playConditionModes.BOTH&&v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return s.customerLog("Play step condition is false. Skipping step."),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedByCondition),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),void be();if(We(n)){var k=Ye(v.currentWalkthru,n.StepIndex,0,1,void 0,u.CHECK_STEP_MODE.Normal);if(k==-1)return s.customerLog("Keep looking for element after popup."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.LookingForStepElement,n,{playGUID:o.get("AuditStepsManager")._currentPlayGUID}),v.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT,f.playSetTimeout(function(){Ke()},500),void S.storeStateInCookie();if(k==-2||k==-5){var D="Play condition isn't met, skipping the popup.";return k==-5&&(D="Loop detecetd"),s.customerLog(D),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedNotFound),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),void be()}}var N=void 0;if(A||v.state!=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var L={},M=p.getTimer(l);N=t.findElement(n,null,L,"Step - Play Condition"),y.FETime=M("Done looking for sticky step named "+(n.StepTitle||n.StepText)+" with id "+G),n.Score=L.score}else s.customerLog("Sticky PlayCondition isn't met."),N=!1;if(N){if(N&&N!==!0){s.customerLog("Element found:"),s.customerLog(N);var F,R=P.getComplexHtmlElements(n,N);R&&(N=R.elements,F=R.parentElement)}d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepElementFound,n),d.raiseEvent("BeforeNewStepShown");var B=v.stepPlayStack.length>0?v.stepPlayStack[v.stepPlayStack.length-1]:null,U=B?b.getStepById(B).StepIndex:null;if(He(n.Id),a.getSettingsValue(n.Settings,"fake",!1))return s.customerLog("This is a fake step. Continue to next step."),S.storeStateInCookie(),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.FakeFound),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.FakeStep,n),void be();if(v.state=u.WALKTHRU_STATE.RUNNING,_.isActionStep(n))return void f.playSetTimeout(function(){z(n).doAction(),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepPerforming,n)},100);var W=o.get("TriggersManager").handle(N,n,v.currentStep,v.currentWalkthru,U),H=W.executeNextStep,j=W.clearElementEventsFuncs,Y=W.buttons;a.getSettingsValue(n.Settings,"waitOtherWindow",!1)&&(V=!0),y.logicTime=g("Finished pre-balloon logic");var Q=n.StepTitle,K=n.StepText,q=o.create("Balloon",{element:N,parentElement:F,forceEmbedBalloonInIframe:!1,positionHelper:h,dontShowIoBalloon:!I.isFeatureEnabled("multSpot")&&Fe(n),isFirstStep:ke(),stepSettings:n.Settings,text:{title:Q,content:K,subText:Le()},end:n.End,position:n.Position,buttons:{next:Y.nextButton,done:Y.doneButton,back:Y.backButtonStepIndex>=0},data:{balloonEntityId:n.Id,containerEntityId:n.TutorialId,type:n.Type},configuration:n.Configuration,logger:s,drawer:O.getBalloonDrawer(n.Configuration,n),siteConfig:r.get(),bindButtonsFunc:o.get("BalloonButtonsEventsBinder").addButtonEventsToBalloon});if(q.onDestroy(function(){xe(N,elementEvents)}),q.setReleaseEvents(j),m.add(q),S.storeStateInCookie(),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.Shown),I.isFeatureEnabled("jawsAccessibility")){var X=Q||K;Q&&K&&(X+=". "+K),X&&N.attr("alt",X)}q.Show(!0,function(t,r){e.extend(!0,y,t),De(r,n);var i={Element:N,Balloon:r};d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepShown,n,i),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepPerforming,n,i),q.SetTimeoutOn(),H&&(Re(),be())}),a.getSettingsValue(n.Settings,"isSelfExecuting",!1)&&Ne(n,N)}else s.customerLog("Element not found."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepElementNotFound,n,{playGUID:o.get("AuditStepsManager")._currentPlayGUID}),v.state==u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(s.customerLog("Step was sticky. Keep looking for the element."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.WaitingForStickyStep,n),v.state=u.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,f.playSetTimeout(function(){Ke()},500),S.storeStateInCookie()):n.IsSkippable||a.getSettingsValue(n.Settings,"skipNotExists",!1)?(_.isActionStep(n)?(s.customerLog("Action step isn't valid. Skipping to next step."),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.NonValidActionStep)):(s.customerLog("Skippable step. Skip to next step."),o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),n,u.STEP_STATUS.SkippedNotFound)),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepSkipped,n),be()):(s.customerLog("Keep looking for the element."),d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.LookingForStepElement,n,{playGUID:o.get("AuditStepsManager")._currentPlayGUID}),v.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT,f.playSetTimeout(function(){Ke()},500),S.storeStateInCookie())}function De(e,t){var n={balloonDiv:e,step:t};d.raiseEvent(u.EVENTS.Walkthrus.ShowStepBalloon,n)}function Ne(e,t){f.libSetTimeout(n,1e3*e.Settings.reactionTime||u.DEFAULT_REACTION_TIME);function n(){var n=r();switch(n){case u.WALKTHRU_STEP_TRIGGER.CLICK:s.customerLog("Self Executed Step - Trigger: Click",3),w.click(t);break;case u.WALKTHRU_STEP_TRIGGER.HOVER:s.customerLog("Self Executed Step - Trigger: Hover",3),w.hover(t);break;case u.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:s.customerLog("Self Executed Step - Trigger: Text Input",3),w.text(t,e.Settings.selfExecuteText,void 0,void 0,e);break;case u.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var i=e.Settings.complexHtml&&e.Settings.complexHtml.val;i?(w.select(t,i),s.customerLog("Self Executed Step - Trigger: Select Value",3)):s.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:s.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),L.dontContinueTutorial=!1,be()}}function r(){var t=e.End.split(/,/);return t[0]==u.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&t.length>1?p.getInt(t[1]):p.getInt(t[0])}}function xe(e,t){for(var n=0;n<t.length;n++)e.unbind(t[n]+".mt");return!1}function Le(){for(var e=r.get().StepsInfoText,t=i.getWalkthruByIndex(v.currentWalkthru).Steps,n=0,o=0,a=0;a<t.length;a++)Me(t[a])&&(n++,a<=v.currentStep&&o++);return I.isFeatureEnabled("floatingsubtext")?(e=e.replace("{0}",u.SUBTEXT_CURRENT_START+o+u.SUBTEXT_CURRENT_END),e=e.replace("{1}",u.SUBTEXT_TOTAL_START+n+u.SUBTEXT_TOTAL_END)):(e=e.replace("{0}",o),e=e.replace("{1}",n)),e}function Me(e){return!(e.Type==u.STEP_TYPE.Action||parseInt(a.getSettingsValue(e.Settings,"isInvisible",0))||parseInt(a.getSettingsValue(e.Settings,"fake",0)))}function Fe(e){var t=e,n=v.stepPlayHistory;if(n.length>1){var r=i.getWalkthruByIndex(v.currentWalkthru);t=b.getStepById(n[n.length-2],r)}return ee(e.End,u.WALKTHRU_STEP_TRIGGER.NOTHING)||ee(t.End,u.WALKTHRU_STEP_TRIGGER.NOTHING)}function Re(e){e=p.defaultValue(e,!0);var t=v.getCurrentStep();d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepCompleted,t),Be(t),e?(o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),t,u.STEP_STATUS.Performed),Ue(t)):o.get("AuditStepsManager").auditStep(v.getCurrentWalkthru(),t,u.STEP_STATUS.MovedBack)}function Be(e){v.stepCompletedHistory.push(e.Id)}function Ue(e){var t=a.getSettingsValue(e.Settings,"resumeOtherWindow",!1);t&&o.get("ClientStorageManager").saveData(H,1,u.DEFAULT_COOKIE_SECONDS,v.getCurrentWalkthru().userGuid)}function We(e){if(e.Type!=u.STEP_TYPE.Popup)return!1;return 1==a.getSettingsValue(e.Settings,"popup-play-condition",0)}function Ve(e){return a.getSettingsValue(e.Settings,F,u.playConditionModes.PLAY_CONDITION)}function Ge(e){var t=a.getSettingsValue(e.Settings,"skipStepCond","");if(t.length>0)try{return!o.get("ConditionEvaluator").evaluate(t)}catch(n){return!0}var r=a.getSettingsValue(e.Settings,"PSCTEnabled",0);if(1!=r)return!_.isActionStep(e)||"never"!=a.getSettingsValue(e.Settings,"whenToFire","");var i=a.getSettingsValue(e.Settings,"PSCT","");if(""==i)return!0;try{var s=o.get("ConditionTreeEvaluator").evaluate(i);return d.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepHasPlayCondition,e,{playGUID:o.get("AuditStepsManager")._currentPlayGUID}),s}catch(n){return!1}}function He(e){v.stepPlayHistory.push(e);var t=v.stepPlayStack.length>0?v.stepPlayStack[v.stepPlayStack.length-1]:null;t!=e&&v.stepPlayStack.push(e)}function je(e){if(v.currentStep==-1&&se(e,!0))return;be()}function Ye(e,n,r,l,c,d,g){return o.get("ElementFinder").wrapSession(function(){function o(t){if(!We(t)||1!=l)return t.StepIndex;var n=i.getWalkthruByIndex(e);if(n.Steps.length>t.StepIndex){var o=Ye(e,t.StepIndex+1,r,l,c,u.CHECK_STEP_MODE.Normal);return o<0?o:t.StepIndex}}function f(e){var t=z(e);if(t.getGoToData){var n=t.getGoToData(),i=Ye(n.tutorialIndex,n.stepIndex,r,l,c,u.CHECK_STEP_MODE.Normal);if(i<0)return i}else if("stopWt"==t.type)return-2;return e.StepIndex}function h(e,t){return Q(t),s.customerLog("returned checking "+n+" ("+y.Id+") result: "+e,5,B),e}function m(e,t){c&&c.push({stepIndex:e,stepStatus:t})}var S=i.getWalkthruByIndex(e),y=S.Steps[n];l=p.defaultValue(l,1),r=p.defaultValue(r,0);var E=K(y.Id);if(s.customerLog("Checking if step index "+n+" ("+y.Id+") can be played. looped: "+E+" on mode:"+d,5,B),q(y,d),E)return h(-5,y.Id);var T=Ve(y),C=!0;T!=u.playConditionModes.STICKY_CONDITION&&(C=x.checkPlayStepCondition(y));var b=a.getSettingsValue(y.Settings,"fake",!1),I=a.getSettingsValue(y.Settings,"skipNotExists",!1),w=I||y.IsSkippable||!C||b;if(m(n,ze(w,C)),C&&!b&&t.findElement(y,null,null,"Step - Find Element "+(g||"")))return _.isActionStep(y)?h(f(y),y.Id):_.isPopupStep(y)?h(o(y),y.Id):h(n,y.Id);var P=n+l;if(w){var A;if(P<0)return h(-2,y.Id);if(P==S.Steps.length){var k=v.splitPointStack;if(k.length>r){var O=k[k.length-1-r];return A=Ye(O.tutorialIndex,O.stepIndex,r+1,l,c,u.CHECK_STEP_MODE.Normal),s.customerLog("Checking if step "+n+" ("+y.Id+") can be played. reached last step",5,B),h(A,y.Id)}return h(-2,y.Id)}return s.customerLog("Checking if step "+n+" ("+y.Id+") can be played. Skipping to: "+P,5,B),A=Ye(e,P,r,l,c,u.CHECK_STEP_MODE.Normal),h(A,y.Id)}return h(-1,y.Id)})}function ze(e,t){return e?t?u.STEP_STATUS.SkippedNotFound:u.STEP_STATUS.SkippedByCondition:u.STEP_STATUS.SupposedToShow}function Qe(e,t){var n=Ye(e,t,void 0,void 0,void 0,u.CHECK_STEP_MODE.Normal);return n==t}function Ke(){var e=v.getCurrentStep();o.get("ElementFinder").wrapSession(function(){Oe(e)})}function qe(){v.state=u.WALKTHRU_STATE.RUNNING,A.releaseBalloons(function(){x.stepWasCompleted(!1),v.currentStep=v.lastBackButtonStepIndex-1,x.executeTutorialNextStep()})}function Xe(e){j.push(e)}function Je(){if(!j)return;for(var e=j.length-1;e>=0;e--)j[e].cleanResources();j=[]}}o.register("WalkthruOnBeforeUnloadHandler").asCtor(_g).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack");function _g(e,t,n,r,i,o){var a=this;a.onbeforeunload=u,a.setIgnoreNextBeforeUnload=l;var s=!1;function u(a){if(!o.isEmpty())return;e.customerLog("onbeforeunload called",1),s?s=!1:(t.setMember("dontContinueTutorial",!0),n.pauseAllTimeouts(),r.get().enabled()?r.get().loseOwnership(!1,!0):i.isFeatureEnabled("noUnload")&&c())}function l(e){s=e}function c(){n.setWalkmeTimeout(function(){t.setMember("dontContinueTutorial",!1),n.resumeAllTimeouts()},3e3)}}o.register("WalkthrusContainer").asCtor(Pg);function Pg(){var e=this;e.getWalkthrus=r,e.setWalkthrus=i,e.getWalkthruByIndex=o,e.getWalkthruById=s,e.getWalkthruIndexByWalkthruId=a,e.getStepByIndex=u;var t=[];function n(){}function r(){return t}function i(e){t=e}function o(e){return t[e]}function a(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].TutorialId==e){n=r;break}return n}function s(e){for(var n=0;n<t.length;n++)if(t[n].TutorialId==e)return t[n];return null}function u(e,t){var n=o(e);if(n&&n.Steps[t])return n.Steps[t]}n()}o.register("WalkthruBalloonContainer").asCtor(Ag).dependencies("CommonUtils");function Ag(e){var t=this;t.add=i,t.removeAll=o,t.getAll=a,t.stopAll=s;var n;function r(){o()}function i(e){n.push(e)}function o(){n=[]}function a(){return n}function s(){e.executeParallel({objectsArray:a(),functionsToExecute:[function(e,t){e.stop(),t&&t()}]})}r()}o.register("CurrentWalkthruData").asCtor(kg).dependencies("WalkthrusContainer, Consts");function kg(e,t){var n=this;n.currentWalkthru=-1,n.currentStep=-1,n.stepAppearanceIndex=0,n.splitPointStack=[],n.stepPlayHistory=[],n.stepPlayStack=[],n.stepCompletedHistory=[],n.lastBackButtonStepIndex=-1,n.getCurrentWalkthru=r,n.getCurrentStep=i,n.getPreviousStep=a,n.getNextStep=o,n.getStep=s,n.state=t.WALKTHRU_STATE.NOT_RUNNING;function r(){return e.getWalkthruByIndex(n.currentWalkthru)}function i(){return s(n.currentStep)}function o(){return s(n.currentStep+1)}function a(){return s(n.currentStep-1)}function s(e){var t=r();return t&&t.Steps&&t.Steps[e]}}o.register("WalkthruStatePersister").asCtor(Og).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents");function Og(e,t,n,r,i,a,s){var u=this;u.storeStateInCookie=d,u.getPersistenceData=g,u.getRunningWalkthruId=f;var l=e.WALKTHRU_PERSISTANCE_DATA_FIELDS;function c(){}function d(){var n=void 0,r=void 0,s=void 0,u=void 0,l=i.getCurrentWalkthru(),c=l?l.TutorialId:-1,d=l?l.userGuid:o.get("UserGuidContainer").getUserGuid(),g=t.getCurrentInteractionGuid();i.state==e.WALKTHRU_STATE.RUNNING||i.state==e.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(n=i.currentStep+1,l.Steps.length<=i.currentStep+1&&(r=1)):i.state==e.WALKTHRU_STATE.WAITING_FOR_SPLIT?(n=i.currentStep,s=a.splitTutorialIds,u=a.splitStartFromStepId):n=i.currentStep;var f=p(c,n,r,s,u,g);o.get("ClientStorageManager").saveData(e.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,f,e.DEFAULT_COOKIE_SECONDS,d)}function p(e,t,n,r,a,u){var c={};return c[l.CURRENT_TUTORIAL_COOKIE_NAME]=e,c[l.CURRENT_STATE_COOKIE_NAME]=i.state,c[l.CURRENT_STEP_COOKIE_NAME]=t,c[l.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=i.stepAppearanceIndex,c[l.CURRENT_PLAY_GUID_COOKIE_NAME]=o.get("AuditStepsManager")._currentPlayGUID,c[l.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=o.get("AuditStepsManager")._currentPlayInitiator,c[l.SPLIT_POINT_COOKIE_NAME]=i.splitPointStack,c[l.TUTORIAL_FINISHED_COOKIE_NAME]=n,c[l.STEP_PLAY_HISTORY_COOKIE_NAME]=i.stepPlayHistory,c[l.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=r,c[l.SPLIT_START_FROM_STEP_COOKIE_NAME]=a,c[l.INTERACTION_GUID_COOKIE_NAME]=u,window._testMe&&(c[l.STEP_COMPLETED_HISTORY_COOKIE_NAME]=i.stepCompletedHistory),s.raiseEvent("SavingPersistenceData",c),c}function g(t){var o=m(t),a=h(o,-1),u={state:r.getInt(o[l.CURRENT_STATE_COOKIE_NAME],e.WALKTHRU_STATE.NOT_RUNNING),step:r.getInt(o[l.CURRENT_STEP_COOKIE_NAME],-1),playNum:o[l.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||i.stepAppearanceIndex,tutotrialGUID:o[l.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:o[l.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:r.defaultValue(o[l.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:r.defaultValue(o[l.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:r.defaultValue(o[l.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:r.defaultValue(o[l.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:n.getWalkthruIndexByWalkthruId(a),splitTutorialIds:r.defaultValue(o[l.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:r.defaultValue(o[l.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:o[l.INTERACTION_GUID_COOKIE_NAME]};return s.raiseEvent("GettingPersistenceData",{persistenceData:o,current:u}),u}function f(e){return h(m(e))}function h(e,t){
return r.getInt(e[l.CURRENT_TUTORIAL_COOKIE_NAME],t)}function m(t){return o.get("ClientStorageManager").getData(e.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}c()}o.register("WalkthruStateRestorer").asCtor(Dg).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, Lib, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer");function Dg(e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m){var v=this;v.restoreCrossUsersState=y,v.restoreStateFromCookie=E;function S(){}function y(e){s.customerLog("Restoring cross user state",5);var t=m.getAllUserGuids();if(!t.length)return e&&e(),!1;for(var n=0;n<t.length;n++){var r=t[n],i=E(r,e);if(i)return r}return!1}function E(c,m){var v=d.getRunningWalkthruId(c);v?e.afterStepsLoaded(v,S):S();function S(){var e=T(c);n.stepAppearanceIndex=e.playNum,n.splitPointStack=e.splitPointStack,n.stepPlayHistory=e.stepPlayHistory,n.currentWalkthru=e.tutorial,n.currentStep=e.step,n.stepCompletedHistory=e.stepCompletedHistory,n.state=e.state,l.raiseEvent("RestoringStateFromCookie",e),r.setCurrentInteractionGuid(e.interactionGuid),e.tutotrialGUID&&(o.get("AuditStepsManager")._currentPlayGUID=e.tutotrialGUID),o.get("AuditStepsManager")._currentPlayInitiator=e.playInitiator;var d=t.getStepByIndex(n.currentWalkthru,n.currentStep);function v(){i.playSetTimeout(function(){a.executeCurrentStep()},1e3*d.Delay)}if(n.state==g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||n.state==g.WALKTHRU_STATE.PASSING_OWNERSHIP&&d){n.currentStep--;var S=t.getStepByIndex(n.currentWalkthru,n.currentStep);S&&(S.playNumber=n.stepAppearanceIndex),a.stepWasCompleted(!0),n.currentStep++}if(s.customerLog("isTutorialFinished: "+e.isTutorialFinished,5),1!=e.isTutorialFinished||n.state!=g.WALKTHRU_STATE.RUNNING&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&n.state!=g.WALKTHRU_STATE.PASSING_OWNERSHIP)if(s.customerLog("Continue from cookie: currentTutorial: "+n.currentWalkthru+" -- currentState: "+n.state+" -- currentStep: "+n.currentStep+" -- currentPlayGUID: "+o.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+c,5),!d||n.state!=g.WALKTHRU_STATE.RUNNING&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_CONDITION&&n.state!=g.WALKTHRU_STATE.PASSING_OWNERSHIP)if(d&&n.state==g.WALKTHRU_STATE.WAITING_FOR_REDIRECT)a.loadTutorial(n.currentWalkthru,0,!1,o.get("AuditStepsManager")._currentPlayGUID,o.get("AuditStepsManager")._currentPlayInitiator);else if(d&&n.state==g.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)a.startNewTutorial(n.currentWalkthru,n.currentStep,!1,o.get("AuditStepsManager")._currentPlayInitiator);else if(!d||n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(n.state==g.WALKTHRU_STATE.WAITING_FOR_SPLIT)f.splitTutorialIds=e.splitTutorialIds,f.splitStartFromStepId=e.splitStartFromStepId,p.resumeSplit();else{if(n.state!=g.WALKTHRU_STATE.PAUSED)return a.resetState(),s.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+c+")",5),m&&m(!1),!1;s.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),h.releaseBalloons(),a.releaseBalloonsTimeouts(),a.resetState(),l.raiseEvent("WalkthruAborted")}else u.getSettingsValue(d.Settings,"sticky",0)?(s.customerLog("Sticky - keep looking for element",5),n.state=g.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,v()):d.IsSkippable&&(n.getCurrentWalkthru().Steps.length==n.currentStep+1?a.tutorialFinished():(n.currentStep++,n.state=g.WALKTHRU_STATE.RUNNING,v()));else v();else a.tutorialFinished(!0);return m&&m(!0),!0}}function T(e){var n=d.getPersistenceData(e),r=t.getStepByIndex(n.tutorial,n.step);return r&&(n.isTutorialFinished||n.state!=g.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&n.state!=g.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||u.getSettingsValue(r.Settings,"sticky",0)||r.IsSkippable||(s.customerLog("page change happened while waiting for element - pausing walkthru",2),n.state=g.WALKTHRU_STATE.PAUSED)),n}S()}o.register("WalkthruBranchPlayer").asCtor(Ng).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData");function Ng(e,t,n,r,i,a,s,u,l,c,d,p){var g=this;g.makeSplit=h,g.resumeSplit=S;function f(){}function h(e,t,r,i,o){l.state=u.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=r&&m(t),p.splitTutorialIds=e,p.splitStartFromStepId=i,c.storeStateInCookie(),n.stepWasCompleted(),S(o)}function m(e){v()||l.splitPointStack.push({tutorialIndex:l.currentWalkthru,stepIndex:void 0!=e?e:l.currentStep+1,playGuid:o.get("AuditStepsManager")._currentPlayGUID,playInitiator:o.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:l.stepPlayHistory,stepCompletedHistory:l.stepCompletedHistory,stepPlayStack:l.stepPlayStack})}function v(){return l.getCurrentWalkthru().Steps.length<=l.currentStep+1}function S(i){o.get("ElementFinder").wrapSession(function(){try{var o=1e3;i=i||o;var d,g,f=0;if(1==p.splitTutorialIds.length){if(g=p.splitTutorialIds[0],void 0!=p.splitStartFromStepId){var h=t.getStepIndex(p.splitStartFromStepId,g);h!=-1&&(f=h),e.customerLog(Nf("Resuming split, walkthru id: {0}, step index: {1}",g,f))}}else g=E(p.splitTutorialIds);g?(s.deprecatedRaiseEvent("switchToWalkthru",g),d=r.getWalkthruIndexByWalkthruId(g),a.playSetTimeout(function(){var e={type:u.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:l.getCurrentStep().Id,appType:u.EVENT_SENDER_EVENT_APPS.Step};n.loadTutorial(d,f,!1,void 0,e)},i),c.storeStateInCookie()):(e.customerLog("Try again in "+o+"ms."),a.playSetTimeout(function(){S()},o))}catch(m){e.error(m)}})}function y(t){var n=d.map(t,function(t){var n=T(t.TutorialId);e.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")");var r=i.findElement(t,null,null,'Checking Walk-Thru "'+n+'"');return r?e.customerLog("First step found."):e.customerLog("First step not found."),{step:t,element:r}});return n=d.filter(n,function(e){return e.element}),d.map(n,function(e){return e.step})}function E(t){try{e.customerLog("Multiple branch: Going through all walk-thrus.");var n=C(t),r=y(n);if(1==r.length)return r[0].TutorialId;if(!(r.length>1))return null;e.customerLog("can't decide which tutorial to play",5),e.customerLog(r.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(i){e.error(i)}}function T(e){var t=r.getWalkthruById(e);return t?t.Name:""}function C(e){var t=d.map(e,function(e){return r.getWalkthruById(e).Steps[0]});return t}f()}o.register("ComplexHtmlElementsProvider").asCtor(xg).dependencies("PositionHelper");function xg(e){var t=this;t.getComplexHtmlElements=i;function n(){}var r={TABLE:1,DROPDOWN:2};function i(t,n){var i,o=n.data("iframe");if(t.Settings.complexHtml){if((t.Settings.complexHtml.type==r.TABLE||"table"==t.Settings.complexHtml.type)&&(i=e.findNearestSelfOrParentByType(n,["table"]),t.Settings.complexHtml.settings)){switch(t.Settings.complexHtml.settings.triggerType){case"cell":n=e.findFirstSelfOrChildByType(n,["td","th"])||e.findNearestSelfOrParentByType(n,["td","th"]);break;case"column":n=e.getColumn(n);break;case"row":n=e.findFirstSelfOrChildByType(n,["tr"])||e.findNearestSelfOrParentByType(n,["tr"]);break;case"table":n=e.findNearestSelfOrParentByType(n,["table"])}t.Settings.complexHtml.settings.onTable||(i=void 0)}if(n&&n.length>0)return o&&n.data("iframe",o),{parentElement:i,elements:n}}}n()}o.register("WalkthruBranchData").asCtor(Lg);function Lg(){var e=this;e.splitTutorialIds=[],e.splitStartFromStepId;function t(){}t()}o.register("WalkthruStepShower").asCtor(Mg).dependencies("Logger, Lib, StaticUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper, BalloonDrawerProvider,SiteConfigManager, WalkthruBalloonContainer, WalkthruStepShowerButtonsCalculator");function Mg(e,t,n,r,i,a,s,u,l,c){var d=this;d.showStep=p;function p(d,p){var g=n.secureEvalJSON(d);r.fixStep(g,0,u.get());var f=t.findElement(g,null,null,'Show Step for Editor "'+(g.StepTitle||g.StepText)+'"');if(e.customerLog("element:",5),e.customerLog(f,5),!f)return!1;var h,m=i.getComplexHtmlElements(g,f);m&&(f=m.elements,h=m.parentElement);var v=window._walkmeInternals.ctx.create("Balloon",{element:f,parentElement:h,forceEmbedBalloonInIframe:p,positionHelper:a,stepSettings:g.Settings,text:{title:g.StepTitle,content:g.StepText,subText:""},position:g.Position,data:{stepId:g.Id,type:g.Type},buttons:c.calculate(g),configuration:g.Configuration,logger:e,drawer:s.getBalloonDrawer(g.Configuration,g),isViewStep:!0,siteConfig:u.get(),bindButtonsFunc:o.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent});return l.add(v),v.Show(!0,function(){v.SetTimeoutOn()}),v}}o.register("WalkthruStepShowerButtonsCalculator").asCtor(Fg).dependencies("ArrayUtils, SharedConsts");function Fg(e,t){var n=this;n.calculate=i;var r={};function i(e){if(e.Type==t.stepType.Simple)return o(e);return a(e)}function o(e){var n=e.End+"";if(n.indexOf(t.stepTrigger.Button)>-1)return{next:!0};return{}}function a(t){var n=t.Settings&&t.Settings.popupStepButtons||[],i={};return e.foreach(n,function(e){var t=r[e.action];i[t]=!0}),i}function s(){var e=t.POPUP_BUTTON_ACTIONS;r[e.NextDone]="next",r[e.Start]="start",r[e.Back]="back",r[e.Cancel]="cancel"}s()}o.register("WalkthruSurveyActivator").asCtor(Rg).dependencies("DeployableSurveyActivator, AuditStepsManager");function Rg(e,t){var n=this;n.activateSurvey=r;function r(n,r,i,o,a,s,u){var l="wm-SrvWtRep-"+n.TutorialId,c={tutorialId:n.Id,eventSource:r,callback:s,stepIndex:u,lastStepIndex:n.Steps.length-1,surveyPlayGUID:t._currentPlayGUID};e.activateSurvey(o,l,a,i,c)}}o.register("WalkthruSafeStartHandler").asCtor(Bg).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager");function Bg(e,t,n,r,i,o){var a=this;a.auditSafeStartStatus=s,a.redirect=l,a.auditStayButtonClicked=u,a.auditSafeStartDisabled=d,a.auditSafeStartFirstStatus=p;function s(e,n){var r=n.wt;void 0!=r.Id&&t.safeStartAudit(e,r)}function u(t){s(e.SAFESTART_ACTION.StayClicked,t)}function l(t,o){r.currentStep=0,r.state=e.WALKTHRU_STATE.WAITING_FOR_REDIRECT,r.currentWalkthru=o.tutorialIndex,i.storeStateInCookie(),n.redirect(t)}function c(e){for(var n=0;n<e.checkStepExistsTrace.length;n++)t.auditStep(e.wt,e.wt.Steps[e.checkStepExistsTrace[n].stepIndex],e.checkStepExistsTrace[n].stepStatus,!1)}function d(n){var r={tutorialId:n.wt.TutorialId,tutorialName:n.wt.Name,playGuid:t._currentPlayGUID,playInitiator:t._currentPlayInitiator,status:e.SAFESTART_ACTION.ErrorShown};o.send(r)}function p(e,t){s(e,t),c(t)}}o.register("WalkthrusSiteConfigDataMigrator").asCtor(Ug).dependencies("WalkthrusContainer, WalkthrusModule, UserGuidContainer, DataFixer");function Ug(e,t,n,r){var i=this;i.migrateSiteConfigData=a;function a(i){var a=e.getWalkthrus();s(i,a);for(var u={},l=0;l<a.length;l++)r.fixSteps(a[l],i),u[a[l].TutorialId]={siteConfig:i,isPackageHidden:o.get("LibInitializer").isNextDataPackageIsHidden()},a[l].userGuid=n.getUserGuid();t.setMember("tutorialRunSettingsMap",u)}function s(e,t){void 0==e.BalloonSettings&&t.length>0&&(e.BalloonSettings=t[0].Steps[0].Configuration)}}o.register("WalkMePlayerLazyAPI").asCtor(Wg).dependencies("WmInternals, Consts, UIChangeTracker, WidgetVisibilityEvaluator, TimerManager");function Wg(t,n,r,i,a){var s,u=this;u.hidePlayer=p("hidePlayer"),u.showPlayer=p("showPlayer"),u.removePlayer=p("removePlayer"),u.hideMenu=p("hideMenu"),u.showMenu=p("showMenu"),u.removeMenu=p("removeMenu"),u.toggleMenu=p("toggleMenu"),u.removeAttenGrab=p("removeAttenGrab"),u.showWalkthruPlayer=p("showWalkthruPlayer"),u.hideWalkthruPlayer=p("hideWalkthruPlayer"),u.removeWalkthruPlayer=p("removeWalkthruPlayer"),u.showWalkthruMenu=p("showWalkthruMenu"),u.hideWalkthruMenu=p("hideWalkthruMenu"),u.removeWalkthruMenu=p("removeWalkthruMenu"),u.redrawPlayer=d,u.isMenuOpen=g,u.isWalkthruMenuOpen=g;function l(){e(t).on(n.EVENTS.Widget.WidgetAPICreated,c)}function c(e,t){for(var n in t.WalkMePlayerAPI)t.WalkMePlayerAPI.hasOwnProperty(n)&&(u[n]=t.WalkMePlayerAPI[n]);s=!0}function d(){o.get("WidgetLoader").loadWidget()}function p(n){return function(){var r=arguments;e(t).one("PlayerInitComplete",function(){a.setWalkmeTimeout(function(){var e=s?u:window.WalkMePlayerAPI;e[n].apply(null,r)},0)}),d()}}function g(){return!1}l()}o.register("LegacyWidgetApiModule").asCtor(Vg).dependencies("Lib, wmjQuery, DebuggerManager, LoggerManager, UiUtils, SiteConfigManager, ClickAuditManager, WmAjax, RecorderServerManager, AbPermutationManager, EndUsersManager, AuditSourceManager, Consts, WalkMeVisibilityChecker, WidgetApi, AttentionGrabberManager, Mustache, PerformanceTimestampAdder, WalkmeVisibleReporter, AutoStartManager, AuditingEnabledIndicator, BiggestFrameProvider, WidgetVisibilityEvaluator");function Vg(e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b){var I=this;I.searchTermChangedOnWidget=P,I.widgetLoaded=A,I.sendWidgetOpenLogToServer=k,I.sendSearchResultClickedToServer=O,I.getSearchResultsFromServer=D,I.saveSearchToServer=N,I.sendResultClickedBeforeSearchToServer=x,I.shouldShowWidgetAccordingToAbTesting=f.isWalkMeVisible,I.widgetApi=h,I.UiProperties=L,I.getAttentionGrabberManager=M,I.getMustache=F,I.getConsts=R,I.getEventsTrigger=B,I.auditClick=s.SendClickAudit,I.getClickAuditManager=U,I.userSawWalkMe=y.report,I.checkRepeatCookie=E.checkRepeatCookie,I.isAuditDisabled=W,I.getBiggestFrame=C.getBiggestFrame,I.checkShowOnlyInUrl=b.checkShowOnlyInUrl,I.playerCreationComplete=V,I.triangleLoaded=G,I.mt_log=H;var w=6e3;function _(){t.extend(e,I)}function P(t){"walkmetracker"!=t||n.isDebuggerOnWindow()?"walkmelogger"!=t||r.isLoggerActivated()||e.launchLogger():n.launchDebuggerIfEnabled()}function A(e){S.addTimeStamp("widgetEndLoad"),e&&e.bind("on-activate",i.fixFlash)}function k(){if(!T.isEnabled())return!0;s.SendWidgetOpen({})}function O(e,t,n,r,i,o){if(!T.isEnabled())return;var a=l.get(),s=u.execute({url:a+"/Search/SearchResultClicked",dataType:"jsonp",data:{userGuid:e,searchGuid:t,resultSearchProvider:n,selectedItem:r,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()}});s.success(i),s.error(o)}function D(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/Search",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get(),saveSearch:!i},timeout:w});return a.success(n),a.error(r),a}function N(e,t,n,r){if(!T.isEnabled())return;var i=l.get(),o=u.execute({url:i+"/Search/SaveSearch",dataType:"jsonp",data:{userGuid:e,query:t,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()},timeout:w});o.success(n),o.error(r)}function x(e,t,n,r,i){var o=l.get(),a=u.execute({url:o+"/Search/ResultClickedBeforeSearch",dataType:"jsonp",data:{userGuid:t,searchQuery:e,selectedItem:n,permutationId:c.getPermutation(),endUserGuid:d.getEndUserGuid(),source:p.get()}});a.success(r),a.error(i)}function L(){return g.UI_PROPERTIES}function M(){return m}function F(){return v}function R(){return g}function B(){return o.get("EventsTrigger")}function U(){return s}function W(){return!T.isEnabled()}function V(e){if(e)return;var n=t("#mt-menu-closed, #walkme-menu-closed"),r={config:a.get(),player:n},i=o.get("CommonUtils").attentionGrabberClass(r);i.setupAttenGrab()}function G(e){o.get("PostDataFileLoadedHandler").dataFinishedLoading(e)}function H(e){o.get("Logger").customerLog(e,5)}_()}o.register("WidgetVisibilityEvaluator").asCtor(Gg).dependencies("LocationMatcher, SettingsValuesRetriever, SiteConfigManager, Consts, Lib, CommonEvents, UIChangeTracker, FeaturesManager, TimerManager");function Gg(e,t,n,r,i,o,a,s,u){var l=this;l.init=f,l.checkShowOnlyInUrl=v;var c,d=!0,p="monitorWidget",g=5e3;function f(){a.bindPreListener(S),h(),m()}function h(){(n.get().Settings[p]||s.isFeatureEnabled(p))&&(d=!1)}function m(e){S(),d||c||u.libSetTimeout(m,g)}function v(){return void 0!==c&&d||S(),c}function S(){var e=!!y(),t=void 0===c?e:e!==c;t&&(c=e,o.raiseEvent("WidgetVisibilityChanged",{isVisible:e}))}function y(){var a=!0,s=n.get(),u=t.getSettingsValue(s.Settings,r.DISPLAY_WIDGET_CONDITION,null);return u?(a=i.evaluateConditionTree(u),o.deprecatedRaiseEvent("WidgetConditionEvaluated",s)):null!=s.ShowInUrl&&0!=s.ShowInUrl.length&&(a=e.isLocationMatchString(s.ShowInUrl)),a}}o.register("WidgetApi").asCtor(Hg).dependencies();function Hg(){var e=this;e.getEventSender=function(){return o.get("EventSender")},e.getCtx=function(){return o}}o.register("WidgetLoader").asCtor(jg).dependencies("CommonUtils, CommonEvents, PerformanceTimestampAdder, Consts, WidgetVisibilityEvaluator, WmInternals, WalkMePlayerLazyAPI, Logger");function jg(t,n,r,i,o,a,s,u){var l=this;l.init=p,l.loadWidget=g;var c,d;function p(t){if(!t)return;c=t,window.WalkMePlayerAPI=s,u.customerLog("Waiting for widget visibility evaluator"),e(a).one("WidgetVisibilityChanged",g),o.init(),o.checkShowOnlyInUrl()}function g(){if(d)return;d=!0,e(a).off("WidgetVisibilityChanged",g),r.addTimeStamp("widgetStartLoad");var o=[c];o.asyncCallback=function(){t.addScript(c)},n.raiseEvent(i.EVENTS.WidgetLoad,o)}}o.register("TestmeApi").asCtor(Yg).dependencies("WalkMeInfo, CommonUtils, ClientStorageManager, SettingsFile");function Yg(e,t,n,r){var i=this;i.loadTestMe=o,i.startTestMe=a,i.rememberTestMeIsOn=s,i.isTestMeLoaded=u;function o(n){var i,o;i||(i=r.getPlayerRelatedPath()+"testme/"),o||(o="walkme_testme_"+e.getLibVersion()+".js"),t.addScript(i+o,n)}function a(){u()?(window._testMe.exit(),window._testMe.start()):o()}function s(){n.saveData(b,1,I)}function u(){return!!window._testMe}}o.register("UiObjectsTreeConverter").asCtor(zg).dependencies("Logger, Consts");function zg(t,n){var r=this;r.convert=i;function i(n){if(!n||0==n.length)return;t.customerLog("converting objects tree started for root "+n[0]._name,4);var r=e.map(n,function(e){var t=i(e._children,e),n=o(e,t);return n});return t.customerLog("converting objects tree ended for root "+n[0]._name,4),r}function o(e,t){var r=a(e);return{getTitle:function(){return e._name},getDescription:function(){return e._description},getKeywords:function(){return e._keywords},getType:function(){return e._type},getChildren:function(){return t},getContentType:function(){return r.getContentType()},isVisible:function(){return r.isProperty(n.UI_PROPERTIES.Visible)},isCompleted:function(){return r.isProperty(n.UI_PROPERTIES.Completed)},isActive:function(){return r.isProperty(n.UI_PROPERTIES.Active)},isAccessible:function(){return r.isProperty(n.UI_PROPERTIES.Accessible)},isSearchSupported:function(){return r.isProperty(n.UI_PROPERTIES.Search)},activate:e.activate}}function a(e){var t=function(){var t;return function(){return t||(t=e.properties().getAll()),t}}();return{isProperty:function(e){return t().indexOf(e)>-1},getContentType:function(){if(t().indexOf(n.UI_PROPERTIES.Video)>-1)return n.UI_PROPERTIES.Video;if(t().indexOf(n.UI_PROPERTIES.Article)>-1)return n.UI_PROPERTIES.Article;return!1}}}}o.register("WidgetUiApi").asCtor(Qg).dependencies("UiDataProvider, UiObjectsTreeConverter, Logger");function Qg(e,t,n){var r=this;r.getObjectsTree=i;function i(){n.customerLog("getting objects tree",4);var r=e.uiObjectsTree();return t.convert(r)}}o.register("LegacyExternalApiModule").asCtor(Kg).dependencies("Lib, wmjQuery, EndUsersManager, FramesetsUtils, RecorderServerManager, LanguageManager, PerformanceTimestampAdder, ElementFinder, Logger, CustomCssSetter, SiteConfigManager, ElementCenterer, DeployablesManagerFactory, FeaturesManager, WalkMeVisibilityChecker, AuditSourceManager, BBCodeEventsBinder, UserGuidContainer,LaunchersModule, LibDestroyer, DataFileDataLoader, PostDataFileLoadedHandler, WalkthrusModule");function Kg(e,t,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b){var I=this;I.getTimerManager=_,I.getHostData=P,I.getClientStorageManager=A,I.getStorageManagerInstance=k,I.getServerStorageManager=O,I.getABPermutationId=o.get("AbPermutationManager").getPermutation,I.getEndUserGuid=n.getEndUserGuid,I.getUiTracker=D,I.getSalesForceManager=N,I.getUiUtils=x,I.getDataFileExtraData=L,I.getFramesetsUtils=M,I.getPlayerServer=i.get,I.getCurrentLanguage=a.getCurrentLanguage,I.addTimeStamp=s.addTimeStamp,I.getUiDataProvider=F,I.generateNewGuid=o.get("GuidGenerator").generateGuid,I.getBrowser=R,I.isQuirksMode=P().isQuirksMode,I.getBiggestFrame=o.get("BiggestFrameProvider").getBiggestFrame,I.injectCustomCSS=c.setCustomCssIfNeeded,I.shouldHandlePageAsFramesets=r.shouldHandlePageAsFramesets,I.getServerDataSenderManager=B,I.getCommonUtils=U,I.getPositionHelper=W,I.getCommonEvents=V,I.getSiteConfig=d.get,I.setSiteConfig=d.set,I.centerElementInPage=p.centerElementInPage,I.getDeployablesManager=g.get,I.isFeatureActive=f.isFeatureEnabled,I.isWalkMeVisible=h.isWalkMeVisible,I.getWmAjax=G,I.getEnvId=m.get,I.getPlayInitiatorEnum=H,I.elkState=j,I.getIsInEditor=Y,I.getCenteredElement=z,I.startNewInteraction=Q,I.registerFindElementPlugin=K,I.getFindElementPluginManager=q,I.overrideBalloonEmbedder=X,I.getTodoListManager=J,I.getBalloonDrawer=$,I.getExecuteParallel=Z,I.getSurveys=ee,I.bindBBCodeEvents=v.bind,I.getBodyInheritedMargin=te,I.setIsInEditor=ne,I.setRecorderServer=re,I.getElementStrength=ie,I.setTutorialsForEditor=ce(oe),I.getState=ae,I.getUserGuid=S.getUserGuid,I.setUserGuid=S.setUserGuid,I.ConditionFunctionsObj=o.get("ConditionFunctions"),I.ResourceManager=o.get("ResourceManager"),I.Logger=l,I.lib_error=se,I.getLaunchers=y.getLaunchers,I.setLaunchers=y.setLaunchers,I.showAllLaunchers=y.showAllLaunchers,I.getLauncherAction=y.getLauncherAction,I.releaseLaunchers=y.releaseLaunchers,I.releaseAllElements=E.releaseAllElements,I.releaseBalloons=E.releaseBalloons,I.releaseShoutOuts=E.releaseShoutOuts,I.releaseFlow=E.releaseFlow,I.removeWalkMe=E.removeWalkMe,I.destroyAll=E.destroyAll,I.appendDataPackage=T.appendDataPackage,I.appendWalkMeConfigData=T.appendWalkMeConfigData,I.dataFileLoaded=T.dataFileLoaded,I.dataFinishedLoading=C.dataFinishedLoading,I.setTutorials=b.setTutorials,I.isTutorialPackageHidden=b.isTutorialPackageHidden,I.canShowTutorial=b.canShowTutorial,I.stopTutorial=b.stopTutorial,I.startNewTutorial=b.startNewTutorial,I.tutorialFinished=b.tutorialFinished,I.executeTutorialNextStep=b.executeTutorialNextStep,I.postWelcomeStep=b.postWelcomeStep,I.executeCurrentStep=b.executeCurrentStep,I.getCurrentTutorial=o.get("CurrentWalkthruData").getCurrentWalkthru,I.getTutorials=o.get("WalkthrusContainer").getWalkthrus,I.runTutorialsActionConditions=ue,I.setSurveysForRecorder=ue,I.forceSplit=le,I.parseBBCode=o.get("BBCodeParser").parse,I.completeGoalById=o.get("GoalsManager").completeGoalById,I.getElementTextArray=o.get("ElementTextExtractor").getElementTextArray,I.wrapFESession=u.wrapSession,I.findElement=ce(u.findElement),I.setAuditSource=m.set,I.evaluateConditionTree=o.get("ConditionTreeEvaluator").evaluate,I.getWalkmeOOP=de,I.getEndUserId=pe,I.getStorageType=ge,I.launchLogger=fe,I.getAbtestingGoalsManager=he;function w(){t.extend(e,I)}function _(){return o.get("TimerManager")}function P(){return o.get("HostData")}function A(){return o.get("ClientStorageManager")}function k(e){if(e)return o.get("StorageManagerFactory").byType(e);return A()}function O(){return o.get("ClientOrServerStorageManager")}function D(){return o.get("UIChangeTracker")}function N(){return o.get("SalesForceManager")}function x(){return o.get("UiUtils")}function L(){return o.get("DataFileExtraData").data}function M(){return r}function F(){return o.get("UiDataProvider")}function R(){return P().browser.string}function B(){return o.get("ServerDataSenderManager")}function U(){return o.get("CommonUtils")}function W(){return o.get("PositionHelper")}function V(){return o.get("CommonEvents")}function G(){return o.get("WmAjax")}function H(){return o.get("Consts").STEP_PLAY_INITIATOR_ENUM}function j(e){U().elementLastKeeper.setState(e)}function Y(){return o.get("IsInEditor").get()}function z(e){return o.get("CenteredElementProvider").get(e)}function Q(){o.get("InteractionManager").beginNewInteraction()}function K(e){q().registerPlugin(e)}function q(){return o.get("FindElementPluginManager")}function X(e){o.register("BalloonEmbedder").asCtor(e).dependencies("getTopContainer")}function J(){return o.get("TodoListManager")}function $(e){return o.get("BalloonDrawerProvider").getBalloonDrawer(e)}function Z(){return U().executeParallel}function ee(){return o.get("SurveysManager").getAll()}function te(){return W().getBodyInheritedMargin()}function ne(e){o.get("IsInEditor").set(e)}function re(e){var t=o.get("RecorderServerManager");t.set(e);var n=o.get("LibInitializer").getPlayerServer();null!==n&&void 0!==n&&t.set(n)}function ie(t){var n={score:-1},r=o.get("StaticUtils").secureEvalJSON(t);o.get("DataFixer").fixStep(r,0,{BalloonSettings:{}});var i=e.findElement(r,null,n);if(i)return n.score;return null}function oe(e,t){for(var n=o.get("StaticUtils").secureEvalJSON(e),r=0;r<n.length;r++)n[r].userGuid=t;b.setTutorials(n)}function ae(){return o.get("CurrentWalkthruData").state}function se(e,t){l.error(e,t)}function ue(){}function le(){o.get("WalkthruBranchPlayer").makeSplit.apply(null,arguments)}function ce(e){return function(){try{return e.apply(null,arguments)}catch(t){l.error(t)}}}function de(){return Ef}function pe(){var e=!o.get("AbTestingManager").isAbTestingEnabled();return n.getEndUserGuid(e)}function ge(){var e=o.get("ClientOrServerStorageManager").getStorageType();return e.mode+" - "+e.type}function fe(){var e=o.get("LoggerManager");e.isLoggerActivated()||e.launchLogger()}function he(){return o.get("AbTestingGoalsManagerInstance").value}w()}o.register("CenteredElementProvider").asCtor(qg).dependencies("Logger, StringUtils, ArrayUtils");function qg(e,t,n){var r=this;r.get=a;var i=void 0,o=void 0;function a(t){for(var n=mtjQuery(t).parents(),r=null,i=n.length-1;i>=0;i--)try{var o=l(n[i]);if(o){var a=mtjQuery(n[i]),s=mtjQuery(window).width(),u=a.width(),c=a.offset().left,p=s-u;if(p>0&&p/2==c){r=a;break}if(p<0&&p==c){r=a;break}if(d(a)){r=mtjQuery(a);break}}}catch(g){e.customerLog("error-----------------------------------",5),e.error(g)}return r}function s(){return void 0==o&&(o=[],n.foreach(document.styleSheets,u)),o}var u=function S(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?S(r.styleSheet):g(r.style)&&o.push(r.selectorText)}}catch(i){}},l=function(e){var t=mtjQuery(e),n=t.data("mt_isElementFixedWidth");if(1==n)return!0;if(0==n)return!1;var r=c(e);return t.data("mt_isElementFixedWidth",r),r},c=function(e){if(f(e.style))return!0;var t=h(e,m());return t},d=function(e){var t=mtjQuery(e),n=t.data("mt_isElementMarginAuto");if(1==n)return!0;if(0==n)return!1;var r=p(e);return t.data("mt_isElementMarginAuto",r),r},p=function(e){if(g(e.style))return!0;var t=h(e,s());return t},g=function(e){if(e){var n=mtjQuery.trim(e.margin),r=mtjQuery.trim(e.marginLeft),i=mtjQuery.trim(e.marginRight),o=t.startsWith(n,"0")&&t.endsWith(n,"auto"),a="auto"==r&&"auto"==i;if(o||a)return!0}return!1},f=function(e){var t=e.width;if(t){for(var n="",r=0;r<t.length;r++)isNaN(t[r])||(n+=t[r]);if(n&&parseInt(n)>700&&(t.indexOf("p")!=-1||t.indexOf("e")!=-1||t.indexOf("m")!=-1||t.indexOf("i")!=-1))return!0}return!1},h=function(e,t){for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(n=mtjQuery(e).is(mtjQuery(i)))return n}return n},m=function(){return void 0==i&&(i=[],n.foreach(document.styleSheets,v)),i},v=function y(e){try{for(var t=e.cssRules||e.rules,n=0;n<t.length;n++){var r=t[n];r.type&&r.type==window.CSSRule.IMPORT_RULE?y(r.styleSheet):f(r.style)&&i.push(r.selectorText)}}catch(o){}}}o.register("CustomVariableAuditor").asCtor(Xg).dependencies("SiteConfigManager,CommonUtils,CommonEvents,Consts");function Xg(e,t,n,r){var i=this,o=[];function a(){var t=e.get().Settings.customAuditVars;if(t)for(var n=0;n<t.length;n++){var r=t[n];r.value&&""!=r.value&&(r.value.indexOf("walkme_sf_vars")>-1?o.push({index:n+1,value:r.value}):s(n+1,r.value))}}i.handleSfVars=function(){for(var e=0;e<o.length;e++){var t=o[e];s(t.index,t.value)}};function s(e,t){var n=u(t);"string"==typeof n?WalkMeAPI.setAnalyticsCustomField(e,n):"boolean"==typeof n||"number"==typeof n&&!isNaN(n)?WalkMeAPI.setAnalyticsCustomField(e,n.toString()):void 0==n&&WalkMeAPI.setAnalyticsCustomField(e,"")}function u(e){var i={};return i.name=e,i.value=t.getWindowVar(e),i.defaultValue=i.value,n.raiseEvent(r.EVENTS.CustomAuditVar,i),i.returnValue}a()}o.register("BalloonEmbedder").asCtor(Jg).dependencies("getTopContainer, ElementUtils, UiUtils");function Jg(e,t,n){var r=this;r.getContainer=i,r.handleEmbedding=o,r.fixPosition=a,r.isEmbeded=s;function i(t,r,i,o){if(s(t))return n.closestCanEmbed(r);var a=null;return i&&(a=e(r)),a&&a.length||(a=e(null,!0)),a}function o(e,t,n){if(!s(e))return;t.css("cursor","default")}function a(e,n,r){if(!s(n))return;if("BODY"==t.getElementTagName(r[0]))return;var i=r.offset();e.left-=i.left-r.scrollLeft(),e.top-=i.top-r.scrollTop()}function s(e){return e&&e.embed}}o.register("StartFailureHandler").asCtor($g).dependencies("Consts, WmInternals, PopupNotificationsService, FlowDataPersister");function $g(e,t,n,r){var i=this;i.init=o;function o(){t.bind(e.EVENTS.Flows.FailedToStart,function(e,t){t.isSafeStartHandling||r.getSafeStartFlowId()||n.showFlowFailedToStartPopup(t)})}}o.register("ElementInIframeIndicator").asCtor(Zg).dependencies("FeaturesManager, Consts");function Zg(e,t){var n=this;n.isInIframe=r;function r(n){if(e.isFeatureEnabled(t.FEATURES.OldIsInIframeIndication))return!!n.data("iframe");return n[0].ownerDocument!=window.document}}o.register("AuditSourceProvider").asCtor(ef).dependencies("AuditSourceManager, Consts");function ef(e,t){var n=this;n.isInPreviewMode=r,n.isInPlayMode=i,n.isProductionEnv=o;function r(){return e.get()===t.SOURCES.preview}function i(){return e.get()===t.SOURCES.play}function o(){return e.get()===t.SOURCES.production}}o.register("CorsSupportIndicator").asCtor(tf);function tf(){var e=this;e.hasCorsSupport=t;function t(){var e="withCredentials"in new XMLHttpRequest;return e}}o.register("BiggestFrameProvider").asCtor(nf).dependencies("FramesetsUtils, Logger, FeaturesManager");function nf(e,t,n){var r=this;r.getBiggestFrame=o;var i=null;function o(){var t=!1;try{t=!i||!e.isFrameActive(i)||mtjQuery("frameset",i.contentWindow.document).length>0}catch(r){t=!0}var o=i;return t&&(o=e.findBiggestFrame(),n.isFeatureEnabled("noBiggestFrameCache")||(i=o)),o}}o.register("CustomCssSetter").asCtor(rf).dependencies("WalkMeVisibilityChecker, SiteConfigManager, IconTemplates, DirectHeadProvider, IsInEditor, HtmlDecoder, ResourceManager, CommonEvents, Consts, DesignTemplatesCalculatedCssGetter");function rf(t,n,r,i,o,a,s,u,l,c){var d=this;d.setCustomCssIfNeeded=h,d.getAllCustomCssProp=C,d.setUiTemplates=f;var p,g;function f(e){g=e}function h(e,r){if(!t.isWalkMeVisible()&&!r)return;u.raiseEvent(l.EVENTS.BeforeSettingCustomCss,{element:e});var a=n.get().CustomCss||"",s=v()||"",d=m()||"",g=y()||"",f=c.get()||"",h=s+d+a+g+f;if(!E(h))return;var S=i.getDirectHead(e);if(!S)return;var C="wm_custom_css_set";o.get()&&S.data(C,!1);var b=S.data(C);if(!b)return p=h,T(h,S,C)}function m(){return S(r.customImages)}function v(){return S(r.htmlImages)}function S(e){for(var t="",n=0;n<e.length;n++){var r=e[n];r.Css&&(t+=r.Css)}return t}function y(){if(!g)return;var t="";return e.safeEach(g,function(e,n){for(var r in n)n[r].ExternalCss&&(t+=n[r].ExternalCss)}),t}function E(e){return void 0!=e&&e.length>0}function T(e,t,n){try{return e=a.decodeHtml(e,["&",'"',"'",">"]),s.injectCss(e,"walkme-custom-css",t,null,"walkme-player-css"),t.data(n,!0),!0;
}catch(r){return!1}}function C(){return p}}o.register("DirectHeadProvider").asCtor(of).dependencies("FramesetsUtils, FrameContentsProvider, IsInEditor, ElementInIframeIndicator, BiggestFrameProvider");function of(t,n,r,i,o){var a=this;a.getDirectHead=s;function s(a){if(!a){var s;return t.shouldHandlePageAsFramesets()&&(s=n.getFrameContents(e(o.getBiggestFrame()))),e("head",s)}if(r.get()||i.isInIframe(a))return a.parents("html").children("head")}}o.register("FrameContentsProvider").asCtor(af).dependencies("CommonUtils");function af(e){var t=this;t.getFrameContents=n;function n(t){var n=t[0];if(void 0==n)return[];var r;try{r=n.contentDocument?n.contentDocument:n.contentWindow?n.contentWindow.document:[],r=mtjQuery(r)}catch(i){e.handleCrossDomainError(i),r=[]}return r}}o.register("WhiteListChecker").asCtor(sf).dependencies("RecorderServerManager, ClientStorageManager, FeaturesManager, WmAjax");function sf(t,n,r,i){var o=this;o.isUserInWhiteList=u;var a=1e4,s="wm-wl";function u(t,i){var o=e.Deferred();if(r.isFeatureEnabled("whitelist")){var a=n.getData(s);1===a?o.resolve():0===a?o.reject():l(t,i,o)}else o.resolve();return o.promise()}function l(e,n,r){i.execute({dataType:"jsonp",url:t.get()+"/EndUser/IsEndUserInWhiteList",data:{endUserGuid:n,walkmeUserGuid:e},timeout:a,success:function(e){"true"==e.result?(c(e,1),r.resolve()):"false"==e.result?(c(e,0),r.reject()):r.reject()},error:function(){r.reject()}})}function c(e,t){n.saveData(s,t,e.cacheTimeInSeconds)}}o.register("AbTestingManager").asCtor(uf).dependencies("ClientStorageManager, SiteConfigManager, Lib, Logger, RecorderServerManager, WmAjax, AuditSourceProvider, AuditingEnabledIndicator, FeaturesManager, UserGuidContainer");function uf(e,t,n,r,i,o,a,s,u,l){var c,d,p,g,f=this,h="wm-absl-",m="wm-abss-";function v(){c=t.get(),p=n.getEndUserId,d=r.error}f.shouldLoadWalkme=function(){try{if(!f.isAbTestingEnabled())return!0;return y(h,c.Settings.abTesting.loadPercentage)}catch(e){return d(e,"Could not check if Walkme should be loaded according to AB Testing"),!0}},f.shouldShowWidget=function(){try{if(!f.isAbTestingEnabled())return!0;var e=m;return window.walkme_ab_imp_cookie&&(e+=p()+"-"),y(e,c.Settings.abTesting.showPercentage,S)}catch(t){return d(t,"Could not check if widget should be shown according to AB Testing"),!0}};function S(e){try{if(g||!s.isEnabled())return!0;var t=c.Settings.abTesting.testNumber,n=void 0!=window.wm_customData?wm_customData.abTestingData:null;o.execute({url:i.get()+"/Statistics/AddAbTestingWidgetVisible",data:{userGuid:l.getUserGuid(),endUserId:p(),testNumber:t,isVisible:e,customDataSerialized:wf(n)}})}catch(r){d(r,"Could not report ab testing result to server")}}f.isAbTestingEnabled=function(){var e=c.Settings&&c.Settings.abTesting&&parseInt(c.Settings.abTesting.enabled),t=u.isFeatureEnabled("abtesting")&&e&&!a.isInPreviewMode()&&!a.isInPlayMode();return t},f.disableReport=function(){g=!0};function y(t,n,r){var i=t+c.Settings.abTesting.testNumber,o=e.getData(i);if(o===!0||o===!1)return o;var a=E(1,100);return o=a<=n,e.saveData(i,o,O),r&&r(o),o}function E(e,t){return Math.floor(Math.random()*(t-e+1)+e)}v.apply(null,arguments)}o.register("AbTestingGoalsManagerInstance").asInstance({value:void 0}),o.register("DataFileKeyToDeployableType").asCtor(lf).dependencies("DeployableTypes");function lf(e){var t=this;t.Tutorials=e.Tutorial,t.Tasks=e.Task,t.Launchers=e.Launcher,t.Labels=e.LabelGroup,t.Surveys=e.Survey,t.Categories=e.Category,t.Contents=e.Content,t.Collections=e.Collection,t.Shuttles=e.Shuttle,t.Tags=e.Tag,t.ShoutOuts=e.ShoutOut,t.ConditionBlocks=e.ConditionBlock,t.BusinessSolutions=e.BusinessSolution,t.Lessons=e.Lesson,t.Courses=e.Course,t.TrackedPages=e.TrackedPage,t.Spotlights=e.Spotlight,t.Tooltips=e.Tooltip,t.TrackedElements=e.TrackedElement,t.SearchProviderUrls=e.SearchProviderUrl}o.register("DeployablesContainersFacade").asCtor(cf).dependencies("WalkthrusContainer, LaunchersModule, DataFileKeyToDeployableType, DeployableTypes");function cf(t,n,r,i){var a=this;a.emptyAllDeployablesContainers=s,a.addRangeToAllDeployablesContainers=u;function s(){t.setWalkthrus([]),n.setLaunchers([]),l(function(e,t){c(e,[])})}function u(e){var r=t.getWalkthrus();r=r.concat(e[i.Tutorial]),t.setWalkthrus(r);var o=n.getLaunchers();o=o.concat(e[i.Launcher]),n.setLaunchers(o),l(function(t,n){d(t,e[n])})}function l(t){e.each(r,function(e,n){n!=i.Tutorial&&n!=i.Launcher&&t(e,n)})}function c(e,t){p(e,function(e){e.set(t)})}function d(e,t){p(e,function(e){e.addRange(t)})}function p(e,t){var n=e+"Container",r=o.get(n);t(r)}}o.register("LibInitializer").asCtor(df).dependencies("Lib, AbPermutationManager, WalkMeInfo, ConditionTreeEvaluator, CommonUtils, SettingsFile, WmInternals,LanguageManager, WmAjax, WalkmeConfigManager, CommonEvents, Consts, TimerManager, LaunchersModule, LibDestroyer,IsInEditor, StaticUtils, PerformanceTimestampAdder, Logger, UserGuidContainer, SiteConfigManager, MessageSender");function df(e,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,E,T,C,b){var I,w,_,P,A="wm-customWidgetUrl",k=null,O=[],D=[],N=null,x=!1,M=!1,F=!1,R=!1,B=!1,U=!1,W=!0;this.isNextDataPackageIsHidden=function(){return x},this.getPlayerServer=function(){return _};function V(){I=a.addScript,G(),u&&!u.isSelfHosted||(W=!1)}function G(){window.wmPlaySnippet?(P=window.wmPlaySnippet,U=!0,R=!0):window.wmPreviewSnippet?(P=window.wmPreviewSnippet,B=!0,R=!0):window.wmSnippet&&(P=window.wmSnippet,R=!0)}this.changeLanguage=function(e,t){var n=function(n){n&&p.raiseEvent(L.EVENTS.LanguageChanged,{language:e}),t&&t(n)},r=l.changeLanguage(e,O);if(r){var i=this.releaseResources();i.then(this.reloadDataFileAfterRelease(n))}else n(r);return r},this.releaseResources=function(){return e.stopTutorial(void 0,!0),h.releaseLaunchers(void 0,void 0,!0),m.releaseShoutOuts(),m.releaseTeachMeElements(),m.releaseFlow()},this.reloadDataFileAfterRelease=function(e,t){t&&(O=t),N=e,k=0,M=!0,F=!0;var r=n.getPermutation();J(O,r)},this.isNewLanguage=function(){return F},this.startInitializer=function(e){re(function(){H(e)})};function H(t){var n=E.timer("init data files and widget");k=0;var r=!(B||U);if(p.raiseEvent(g.EVENTS.WalkmeLoaded),void 0!=window[g.EVENTS.WalkmeLoaded])_walkMe=_makeTutorial=e,window._walkmeInternals.continueLoad=function(){j(t)},window[g.EVENTS.WalkmeLoaded](e);else{if(!R)return;window.document.dontLoadTriangle&&r?(window._walkmeInternals.blocked=!0,window._walkmeInternals.continueLoad=function(){j(t)}):j(t)}n.stop()}function j(t){var n=s.getSettingsFile();n&&(o.get("PetaServerNameManager").set(n.PetaServer),n.IsInEditor&&v.set(!0),T.setUserGuid(n.UserGuids&&n.UserGuids[0]),_=n.PlayerServer,r.init(),U?n.data&&(n.data.tutorials?(C.set(n.data.siteConfig),e.setTutorialsForEditor(n.data.tutorials,n.UserGuids[0]),f.setWalkmeTimeout(function(){o.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1)):n.data.flows&&(C.set(n.data.siteConfig),o.get("BusinessSolutionsContainer").set(n.data.flows),f.setWalkmeTimeout(function(){o.get("PostDataFileLoadedHandler").dataFinishedLoading(!0,!0)},1))):Y(n,function(e){Q(n,e)}))}function Y(t,r){var i=d.Data;if(null==i||void 0==i.Permutations)r();else{var o=i.DefaultPermutation,a=i.Permutations;n.setPermutations(a,o);var s=z(i.ActivationRules);n.initGetPermutation(s,function(t){var o=n.getPermutationById(t);if(0===o.LoadWalkMe)return E.customerLog("WalkMe ABTesting - WalkMe Loading canceled. Stopping execution"),void m.removeWalkMe("AbTesting - LoadWalkMe is false");e.appendWalkMeConfigData(i),r(t)})}}function z(e){for(var t=0;t<e.length;t++){var n=e[t],r=i.evaluate(n.Settings.conditionTree);if(r===!0){var o=n.PermutationIds[0];return o}}return null}function Q(e,t){for(var n=e.DataFiles,r=0;r<n.length;r++)if(n[r].metaData)return void K(e,n[r]);q(e.DataFiles,e.WidgetFile,t)}function K(e,t){c.loadTextFile(t.url,"fixedCallback",n,void 0,!1);function n(t,n,r){var i=[];t=P.fixAutoDetectPaths(t);for(var o=0;o<e.DataFiles.length;o++)1==e.DataFiles[o].metaData?i=i.concat(t.DataFiles):i.push(e.DataFiles[o]);q(i,e.WidgetFile)}}function q(e,t,n){O=_f(wf(e)),X(t),J(e,n)}function X(e){if(u&&u.localWidgetUrl)return void(w=u.localWidgetUrl);if(a.isLocalStorageEnabled()){var t=localStorage.getItem(A);if(t)return void(w=t)}w=e}function J(e,t){l.setLanguages(e),D=l.fixLanguageUrlInDataFiles(_f(wf(e)),M),void 0!==t&&t>-1&&(D=$(D,t)),te()}function $(e,t){for(var n=0;n<e.length;n++)e[n].url=Z(e[n],t);return e}function Z(e,t){var n=e.url,r=".js";return n.substring(0,n.length-r.length)+"_"+t+r}function ee(e){y.addTimeStamp("dataFileStartLoad");var t=b.send(g.EVENTS.BeforeDataFileLoaded,{dataFileUrl:e});t||I(e)}function te(){try{var e=D[k].url;x=void 0!=D[k].isHidden&&D[k].isHidden,ee(e)}catch(t){E.error(t,"faild to load data file")}}this.dataFileLoadedWrapper=function(){if(y.addTimeStamp("dataFileEndLoad"),x=!1,k++,F=!1,k==D.length){var e=o.get("CustomVariableAuditor");t.bind("SfVarsExposed",e.handleSfVars),ne()}else te()};function ne(){var e={newLanguageFlag:M};e.asyncCallback=function(){if(!o.get("PostDataFileLoadedHandler").dataFinishedLoading())return;M?(M=!1,N&&N(!0)):o.get("WidgetLoader").init(w)},p.raiseEvent("DataLoadedEvent",e)}function re(e){var t=s.getSettingsFile();t.PostLibJsFile&&""!=t.PostLibJsFile?(window.walkme_post_lib_loaded=function(){e()},y.addTimeStamp("postLibStartLoad"),I(t.PostLibJsFile)):e()}V.apply(null,arguments)}o.register("DataFileExtraData").asInstance({data:{}}),o.register("DataFileDataLoader").asCtor(pf).dependencies("Lib, CommonUtils, Consts, UserGuidContainer, DataFileKeyToDeployableType, DeployableTypes, WalkthrusSiteConfigDataMigrator, DeployablesContainersFacade");function pf(t,n,r,i,a,s,u,l){var c=this;c.appendDataPackage=g,c.appendWalkMeConfigData=p,c.dataFileLoaded=d;function d(){o.get("LibInitializer").dataFileLoadedWrapper()}function p(e){o.get("AbExperimentsContainer").addRange(e.Experiments)}function g(t,r){var c=t;void 0===t.Tutorials&&(c={Tutorials:t,SiteConfig:r});var d={},p=c.SiteConfig,g=n.defaultValue(c.LauncherCustomImages,[]),m=n.defaultValue(c.LauncherHtmlImages,[]),v=n.defaultValue(c.DesignTemplates,[]);e.each(a,function(e,t){d[t]=n.defaultValue(c[e],[])});var S=o.get("PlatformsService");d[s.Spotlight]=S.filterByCurrentPlatform(d[s.Spotlight]),d[s.Tooltip]=S.filterByCurrentPlatform(d[s.Tooltip]),d[s.ShoutOut]=S.filterByCurrentPlatform(d[s.ShoutOut]);var y=n.defaultValue(c.ExtraData,{isOldDataFile:!0});o.get("DataFileExtraData").data=y,o.get("PublishDataManager").init(y),i.setUserGuid(c.UserGuid),o.get("LibInitializer").isNewLanguage()&&(o.get("SiteConfigManager").set([]),o.get("IconTemplates").customImages=[],o.get("IconTemplates").htmlImages=[],o.get("DesignTemplates").reset(),l.emptyAllDeployablesContainers()),o.get("IconTemplates").customImages=o.get("IconTemplates").customImages.concat(g),o.get("IconTemplates").htmlImages=o.get("IconTemplates").htmlImages.concat(m),o.get("DesignTemplates").set(v),o.get("PageIdentifiersAPI").setPageIdentifiers(c.PageIdentifiers),o.get("CustomCssSetter").setUiTemplates(c.UITemplates);var E=o.get("SiteConfigManager");p&&0==E.get().length&&E.set(p);for(var T=0;T<d[s.Task].length;T++)h(d[s.Task][T]);e.each(a,function(e,t){f(d[t],i.getUserGuid())}),l.addRangeToAllDeployablesContainers(d),u.migrateSiteConfigData(p),o.get("UITemplates").concat(c.UITemplates),o.get("UIVariations").concat(c.UIVariations),o.get("DisabledSmartTipsRemover").remove(o.get("BusinessSolutionsContainer").get()),o.get("DisabledCourseQuizzesRemover").remove(o.get("CoursesContainer").get())}function f(e,t){for(var n=0;n<e.length;n++)e[n].userGuid=t}function h(e){return m(e,"TaskProperties","Settings"),v(e),e}function m(e,t,n){void 0!==e[t]?e[n]=e[t]:e[t]=e[n]}function v(e){e.RelatedDeployableId?e.Settings.WalkThruId=e.RelatedDeployableId:(e.RelatedDeployableType=r.DEPLOYABLE_TYPE.Tutorial,e.RelatedDeployableId=Number(e.Settings.WalkThruId))}}o.register("PostDataFileLoadedHandler").asCtor(gf).dependencies("Lib, CommonUtils, Consts, CommonEvents, FeaturesManager, LibDestroyer, Logger, DebuggerManager, WalkMeGoalsManager, CrossDomainManager, WalkthruStateRestorer, ClientStorageManager, WalkMeVisibilityChecker, AnchorTagsFixer, PerformanceTimestampAdder, AuditSourceProvider, SiteConfigManager, WmInternals, TestmeApi, UserGuidContainer, AbTestingGoalsManagerInstance, BusinessSolutionsManager, EngagementRulesRepository");function gf(e,n,r,i,a,s,u,l,c,d,p,g,f,h,m,v,S,y,T,C,I,w,_){var A=this;A.dataFinishedLoading=O;var k="wm-lg-act";function O(t,r){var l=u.timer("lib init");if(o.get("SessionPersister").startPersisting(),o.get("SettingsCacheBusterActivator").activeIfPublishedRecently(o.get("SettingsFile").getPublishDate()),o.register("sfVarsRemovedFromLib").asInstance(function(){}),i.raiseEvent("dataFilesLoaded"),N())return;a.isFeatureEnabled("tagBody")&&n.setBodyUtils(o.get("TagBodyUtils"));try{window.walkme_data_finished_loading_callback&&walkme_data_finished_loading_callback()}catch(c){}var d=o.get("WalkmeClassesInitializer").initWalkMeClasses();if(!d.Succeeded)return s.removeWalkMe(d.ErrorMessage||"initWalkMeClassesFailed",{sendLog:!0,errorCode:d.ErrorCode}),e.initFailed=!0,!1;var p=o.get("EndUserDataConverter");p.convertData();var g=x(t,r);l.stop();var f=D(g);if(o.get("ClientOrServerStorageManager").init(f)===!1)return s.removeWalkMe("storageManagerInitFailed",{sendLog:!0}),!1;return!0}function D(e){return function(){var t={asyncCallback:e};i.raiseEvent(r.EVENTS.BeforeStorageLoadedCallback,t)}}function N(){var e=S.get();if(e.Settings&&e.Settings.rmWMCond&&o.get("ConditionTreeEvaluator").evaluate(e.Settings.rmWMCond)&&!window.editorAPI)return u.customerLog("Remove walkme condition is true. Removing WalkMe.",3),s.removeWalkMe("Removed by condition"),!0;return!1}function x(n,a){u.customerLog("after loading storage",4),i.raiseEvent(r.EVENTS.StorageLoaded);var s=n?L:F,c=R();!a&&n||(B()&&!W()&&(y.dbgr={debuggerWasLoaded:s},s=l.loadDebuggerFromStorage),U()&&e.launchLogger()),c&&(t.testme||(t.testme={}),t.testme.testmeLoadedCallback=s,s=T.startTestMe),u.customerLog("willLoadTestMe: "+c,1);var d=o.get("TodoListManager");if(d.hasTaskGoalCompletionCondition()){var p=s,g=function(){v.isInPlayMode()||d.didTasksFinishLoading()?p():d.setTasksFinishedLoadingCallback(p)};s=g}return s}function L(){u.customerLog("after loading storage for play",4),c.init(),V(),d.get().enabled()?d.get().start(M):p.restoreCrossUsersState(M)}function M(){u.customerLog("sending editor event: StorageManagerInitialized",4),i.raiseEvent("StorageManagerInitialized")}function F(){V(),o.get("StartFailureHandler").init(),o.get("WhiteListChecker").isUserInWhiteList(C.getUserGuid(),e.getEndUserGuid(),j,Q).then(j,Q)}function R(){var e=G()||H();return e||u.customerLog(E,"Not loading test me (checked window var, query string parameter and storage entry)",1),e}function B(){if(a.isFeatureEnabled("noDebugger"))return!1;var e=g.getData(r.DEBUGGER_STATE_NAME,P.Deactive,C.getUserGuid());return e==P.Active||e==P.ActiveAndReset}function U(){var e=g.getData(k,!1,C.getUserGuid());return e}function W(){return l.isDebuggerOnWindow()}function V(){o.get("AuditStepsManager").init(),o.get("ClickAuditManager").init(),o.get("ServerDataSenderManager").start(),o.get("PerformanceTracker").startSending(),!d.get().enabled()&&w.getAll().length>0&&w.restore()}function G(){if(window.walkMeTestMeLoad)return u.customerLog(E,"ShouldLoadTestMe - True by window var",1),T.rememberTestMeIsOn(),window.walkMeTestMeLoad=void 0,!0}function H(){var e=g.getData(b,0,C.getUserGuid());if(e)return u.customerLog(E,"ShouldLoadTestMe - True by storage entry",1),!0}function j(){var r=u.timer("after loading storage");h.fixAnchorTagsOnBeforeUnload();var i=[];if(d.get().enabled())try{i.push(d.get().start)}catch(a){u.customerLog(a,"failed to start pass ownership manager",1),p.restoreCrossUsersState()}else p.restoreCrossUsersState();if(v.isProductionEnv()){var l=e.getEndUserGuid(),g=t.walkme_userGuid_to_replace||C.getUserGuid();o.get("AnalyticsManager").auditUniqueEndUser(g,o.get("AbPermutationManager").getPermutation(),l)}i.push(I.value?I.value.startWatching:z),i.push(_.isReady),n.executeParallel({functionsToExecute:i,successCallback:function(){c.init(d.get().enabled()),m.addTimeStamp("walkmeReady"),Y(K),v.isInPreviewMode()||v.isInPlayMode()||o.get("EndUserLoggerManager").reportEndUser(function(){s.removeWalkMe("reportEndUserFailed")}),y.isSelfHosted?u.customerLog("Self Hosted - no need to check settings file",3):o.get("TimerManager").setWalkmeTimeout(function(){o.get("SettingsCacheManager").start()},5e3),r.stop()}})}function Y(e){var t={asyncCallback:e};i.raiseEvent(r.EVENTS.BeforeWalkmeReady,t)}function z(e){e()}function Q(){s.removeWalkMe("user is not in the white list"),e.initFailed=!0}function K(){try{walkme_ready()}catch(e){}try{mt_ready()}catch(e){}i.raiseEvent(r.EVENTS.WalkmeReady),f.isWalkMeVisible()&&!T.isTestMeLoaded()&&(o.get("PlatformInitializer").run(),o.get("PermalinkManager").run(),o.get("AutoStartManager").run(),o.get("AppletActivationListener").init(),q()),i.raiseEvent(r.EVENTS.ElementsTrackingReady),m.addTimeStamp("walkmeReadyEnd"),o.get("LoadingTimeInformer").run()}function q(){o.get("FramesetsUtils").waitForFramesToLoad().then(function(){o.get("ElementFinder").wrapSession(function(){X()})})}function X(){if(f.isWalkMeVisible()){var e=u.timer("show all launchers");o.get("LaunchersModule").showAllLaunchers(),e.stop(),o.get("SmartTipSetActivationInitiator").start()}o.get("TrackedPagesManager").start(),o.get("TrackedElementsManager").start()}}o.register("WalkmeClassesInitializer").asCtor(ff).dependencies("Lib, Logger, SiteConfigManager, FeaturesManager, TimerManager, WalkMeGoalsManager, TagsManager, CommonEvents, Consts, CommonUtils, HostData, TopContainerProvider, WalkMeInfo, EngagementRulesRepository, WindowBeforeUnloadHandler");function ff(e,n,r,i,a,s,u,l,c,d,p,g,f,h,m){var v=this;v.initWalkMeClasses=y;function S(){}function y(){var d={Succeeded:!0};if(f.init(),o.get("JawsAccessibilityUtil").init(),E())return d.Succeeded=!1,d.ErrorMessage="WalkMe is not supported on that browser",n.customerLog(d.ErrorMessage),d;o.get("InteractionInitiationEventListener").init(),o.get("AnalyticsPropertiesManager").init(),o.get("BalloonDrawerProvider").getBalloonDrawer(r.get().BalloonSettings).loadResources(g.getTopContainer().siblings("head")),T(),o.get("WmAjax").setFeatures(i.isFeatureEnabled("blockJsonp"),i.isFeatureEnabled("corsJsonpFallback"));var p=o.get("AbTestingManager");if(!p.shouldLoadWalkme())return d.Succeeded=!1,d;a.overrideTimeouts(),o.get("TutorialsManager").setDeployables(o.get("WalkthrusContainer").getWalkthrus());var v=r.get();if(v.EndUserSettings){var S=o.get("EndUsersManager");S.setEndUserSettings(v.EndUserSettings),S.createEndUserGuid()}h.init();var y=o.get("endUserGuidValidator").validate();if(y)return{Succeeded:!1,ErrorMessage:y.message,ErrorCode:y.code};var C=o.get("AbExperimentsContainer").get(),b=C.length>0;if(b){s.enableMultiUserStorage();var I=o.get("ExperimentsManager");I.setDeployables(C),o.get("AbTestingGoalsManagerInstance").value=new fs({deployablesGoalManager:s,experiments:I.getAll(),lib:e,getEndUserGuid:e.getEndUserGuid,getPermutationId:o.get("AbPermutationManager").getPermutation,getAuditSource:o.get("AuditSourceManager").get,serverAddress:o.get("RecorderServerManager").get(),storageManager:o.get("ClientStorageManager"),commonEvents:o.get("CommonEvents"),userGuidContainer:o.get("UserGuidContainer")})}o.get("ContentsManager").setDeployables(o.get("ContentsContainer").get()),o.get("CategoriesManager").setDeployables(o.get("CategoriesContainer").get()),o.get("CollectionsManager").setDeployables(o.get("CollectionsContainer").get()),o.get("LaunchersManager").setDeployables(o.get("LaunchersModule").getLaunchers()),o.get("ConditionBlocksManager").setDeployables(o.get("ConditionBlocksContainer").get()),o.get("SurveysManager").setDeployables(o.get("SurveysContainer").get()),o.get("ShuttlesManager").setDeployables(o.get("ShuttlesContainer").get()),o.get("ShoutOutsManager").setDeployables(o.get("ShoutOutsContainer").get()),o.get("BusinessSolutionsManager").setDeployables(o.get("BusinessSolutionsContainer").get()),o.get("TrackedPagesManager").setDeployables(o.get("TrackedPagesContainer").get()),o.get("CoursesManager").setDeployables(o.get("CoursesContainer").get()),o.get("LessonsManager").setDeployables(o.get("LessonsContainer").get()),u.setDeployables(o.get("TagsContainer").get()),o.get("SpotlightsManager").setDeployables(o.get("SpotlightsContainer").get()),o.get("TooltipsManager").setDeployables(o.get("TooltipsContainer").get()),o.get("TrackedElementsManager").setDeployables(o.get("TrackedElementsContainer").get()),o.get("SearchProviderUrlsManager").setDeployables(o.get("SearchProviderUrlsContainer").get());var w=o.get("TodoListManager");w.setDeployables(o.get("TasksContainer").get()),u.injectTagsToDeployables();var _=o.get("AbTasksValidator");if(_.shouldTrackAbTasks()){var P=new Ia({todoListManager:w,goalsManager:o.get("GoalsManager")});w.init(),w.loadTasks(P.startWatchingTasks)}else t.abTasksBlocked=!0,l.raiseEvent(c.EVENTS.AbTasksBlocked),n.customerLog("Not tracking ab testing and tasks - blocked in this browser."),p.disableReport();return p.isAbTestingEnabled()&&f.setAnalyticsCustomFields(0,e.getEndUserId()),m.register(o.get("WalkthruOnBeforeUnloadHandler").onbeforeunload),o.get("BizFlowOnBeforeUnloadChecker").init(),o.get("UIChangeTracker").init(),o.get("PageChangeTracker").init(),o.get("jQueryCacheCleaner").init(),o.get("FlowLinkedTaskCompletionHandler").init(),o.get("BalloonLogEventHandler").init(),d}function E(){return!i.isFeatureEnabled("walkmeIE7Support")&&p.isIEBrowser(8,"lt")&&!window.postMessage}function T(){d.setDefault(r.get(),"TodoListSettings",{})}S()}var hf=function(){function e(e){this._externalWalkMeConfig=e}return e.prototype.getCurrentPlatform=function(){return this._externalWalkMeConfig.get("platform")},e}(),mf=function(e){r(t,e);function t(t){e.call(this,t)}return t.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=0;n<e.length;n++)e[n].Settings&&e[n].Settings.platform||t.push(e[n]);return t},t}(hf);R.register([L.PLATFORM.Web,L.PLATFORM.MobileWeb],function(){o.register("PlatformsService").asCtor(mf).dependencies("ExternalWalkMeConfig")});var vf=function(e){r(t,e);function t(t){e.call(this,t)}return t.prototype.filterByCurrentPlatform=function(e){for(var t=[],n=this.getCurrentPlatform(),r=0;r<e.length;r++)e[r].Settings&&e[r].Settings.platform==n&&t.push(e[r]);return t},t}(hf);R.register([L.PLATFORM.iOS,L.PLATFORM.Android],function(){o.register("PlatformsService").asCtor(vf).dependencies("ExternalWalkMeConfig")});var Sf={};!function(e,t){e.Template=function(e,n,r,i){this.r=e||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=t?[]:""},e.Template.prototype={r:function(e,t,n){return""},v:l,t:u,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},rp:function(e,t,n,r){var i=n[e];if(!i)return"";return this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,n,r)},rs:function(e,t,n){var r=e[e.length-1];if(!c(r))return void n(e,t,this);for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop()},s:function(e,t,n,r,i,o,a){var s;if(c(e)&&0===e.length)return!1;return"function"==typeof e&&(e=this.ls(e,t,n,r,i,o,a)),s=""===e||!!e,!r&&s&&t&&t.push("object"==typeof e?e:t[t.length-1]),s},d:function(e,t,n,r){var i=e.split("."),o=this.f(i[0],t,n,r),a=null;if("."===e&&c(t[t.length-2]))return t[t.length-1];for(var s=1;s<i.length;s++)o&&"object"==typeof o&&i[s]in o?(a=o,o=o[i[s]]):o="";if(r&&!o)return!1;return r||"function"!=typeof o||(t.push(a),o=this.lv(o,t,n),t.pop()),o},f:function(e,t,n,r){for(var i=!1,o=null,a=!1,s=t.length-1;s>=0;s--)if(o=t[s],o&&"object"==typeof o&&e in o){i=o[e],a=!0;break}if(!a)return!r&&"";return r||"function"!=typeof i||(i=this.lv(i,t,n)),i},ho:function(e,t,n,r,i){var o=this.c,a=this.options;a.delimiters=i;var r=e.call(t,r);return r=null==r?String(r):r.toString(),this.b(o.compile(r,a).render(t,n)),!1},b:t?function(e){this.buf.push(e)}:function(e){this.buf+=e},fl:t?function(){var e=this.buf.join("");return this.buf=[],e}:function(){var e=this.buf;return this.buf="",e},ls:function(e,t,n,r,i,o,a){var s=t[t.length-1],u=null;if(!r&&this.c&&e.length>0)return this.ho(e,s,n,this.text.substring(i,o),a);if(u=e.call(s),"function"==typeof u){if(r)return!0;if(this.c)return this.ho(u,s,n,this.text.substring(i,o),a)}return u},lv:function(e,t,n){var r=t[t.length-1],i=e.call(r);if("function"==typeof i&&(i=u(i.call(r)),this.c&&~i.indexOf("{{")))return this.c.compile(i,this.options).render(r,n);return u(i)}};var n=/&/g,r=/</g,i=/>/g,o=/\'/g,a=/\"/g,s=/[&<>\"\']/;function u(e){return String(null===e||void 0===e?"":e)}function l(e){return e=u(e),s.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&#39;").replace(a,"&quot;"):e}var c=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(Sf),function(e){var t=/\S/,n=/\"/g,r=/\n/g,i=/\r/g,o=/\\/g,a={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};e.scan=function(e,n){var r=e.length,i=0,o=1,c=2,d=i,p=null,g=null,f="",h=[],m=!1,v=0,S=0,y="{{",E="}}";function T(){f.length>0&&(h.push(new String(f)),f="")}function C(){for(var e=!0,n=S;n<h.length;n++)if(e=h[n].tag&&a[h[n].tag]<a._v||!h[n].tag&&null===h[n].match(t),!e)return!1;return e}function b(e,t){if(T(),e&&C())for(var n,r=S;r<h.length;r++)h[r].tag||((n=h[r+1])&&">"==n.tag&&(n.indent=h[r].toString()),h.splice(r,1));else t||h.push({tag:"\n"});m=!1,S=h.length}function I(e,t){var n="="+E,r=e.indexOf(n,t),i=u(e.substring(e.indexOf("=",t)+1,r)).split(" ");return y=i[0],E=i[1],r+n.length-1}for(n&&(n=n.split(" "),y=n[0],E=n[1]),v=0;v<r;v++)d==i?l(y,e,v)?(--v,T(),d=o):"\n"==e.charAt(v)?b(m):f+=e.charAt(v):d==o?(v+=y.length-1,g=a[e.charAt(v+1)],p=g?e.charAt(v+1):"_v","="==p?(v=I(e,v),d=i):(g&&v++,d=c),m=v):l(E,e,v)?(h.push({tag:p,n:u(f),otag:y,ctag:E,i:"/"==p?m-E.length:v+y.length}),f="",v+=E.length-1,d=i,"{"==p&&("}}"==E?v++:s(h[h.length-1]))):f+=e.charAt(v);return b(m,!0),h};function s(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function u(e){if(e.trim)return e.trim();return e.replace(/^\s*|\s*$/g,"")}function l(e,t,n){if(t.charAt(n)!=e.charAt(0))return!1;for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return!1;return!0}function c(e,t,n,r){for(var i=[],o=null,a=null;e.length>0;)if(a=e.shift(),"#"==a.tag||"^"==a.tag||d(a,r))n.push(a),a.nodes=c(e,a.tag,n,r),i.push(a);else{if("/"==a.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+a.n);if(o=n.pop(),a.n!=o.n&&!p(a.n,o.n,r))throw new Error("Nesting error: "+o.n+" vs. "+a.n);return o.end=a.i,i}i.push(a)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return i}function d(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#",!0}function p(e,t,n){for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return!0}e.generate=function(t,n,r){var i='var _=this;_.b(i=i||"");'+h(t)+"return _.fl();";if(r.asString)return"function(c,p,i){"+i+";}";return new e.Template(new Function("c","p","i",i),n,e,r)};function g(e){return e.replace(o,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(i,"\\r")}function f(e){return~e.indexOf(".")?"d":"f"}function h(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n].tag;"#"==i?t+=m(e[n].nodes,e[n].n,f(e[n].n),e[n].i,e[n].end,e[n].otag+" "+e[n].ctag):"^"==i?t+=v(e[n].nodes,e[n].n,f(e[n].n)):"<"==i||">"==i?t+=S(e[n]):"{"==i||"&"==i?t+=y(e[n].n,f(e[n].n)):"\n"==i?t+=T('"\\n"'+(e.length-1==n?"":" + i")):"_v"==i?t+=E(e[n].n,f(e[n].n)):void 0!==i&&e[n].hasOwnProperty("tag")||(t+=T('"'+g(e[n])+'"'))}return t}function m(e,t,n,r,i,o){return"if(_.s(_."+n+'("'+g(t)+'",c,p,1),c,p,0,'+r+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+h(e)+"});c.pop();}"}function v(e,t,n){return"if(!_.s(_."+n+'("'+g(t)+'",c,p,1),c,p,1,0,0,"")){'+h(e)+"};"}function S(e){return'_.b(_.rp("'+g(e.n)+'",c,p,"'+(e.indent||"")+'"));'}function y(e,t){return"_.b(_.t(_."+t+'("'+g(e)+'",c,p,0)));'}function E(e,t){return"_.b(_.v(_."+t+'("'+g(e)+'",c,p,0)));'}function T(e){return"_.b("+e+");"}e.parse=function(e,t,n){return n=n||{},c(e,"",[],n.sectionTags||[])},e.cache={},e.compile=function(e,t){t=t||{};var n=e+"||"+!!t.asString,r=this.cache[n];if(r)return r;return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}(Sf),function(e){e.to_html=function(t,n,r){var i=t;return"string"==typeof i?i=this.compile(t):"function"==typeof i&&(i=new e.Template(i)),i.render(n,r)}}(Sf);var yf=Sf;o.register("WalkmeOOP").asCtor(Ef).asProto();function Ef(){var e,t=this,n=null,r=null,i={},o={},a={},s={},u={},l={};function c(n){e=n,e.__wmoop__=t,t.Virtual=new Cf(t),t.Prop=new Tf(t)}t.Extends=function(e,r,i,o,a,s,u){n=new e(r,i,o,a,s,u),t.ExtendsInstance(n)},t.ExtendsInstance=function(e){r=e.__wmoop__,g(),d();var n=p();t._base=n},t.Override=function(e,t){return u[e]=t,t};function d(){for(var e in u){if(!r.IsVirtual(e))throw"Cannot override non-virtual method ["+e+"]. of class : "+r;r.DoOverride(e,u[e])}}t.DoOverride=function(e,t){s[e]=t},t.IsVirtual=function(e){return void 0!==s[e]};t.GetOriginalFunctions=function(){return a};function p(){var e={},t={},t=r.GetOriginalFunctions();for(var n in t){var i=t[n];e[n]=i}return e}function g(){var e=r.GetPublics();for(var n in e){var i=e[n];t.Public(n,i)}}t.Public=function(t,n,r){var o=f(t,n,r);return a[t]=n,e[t]=o,i[t]=o,o},t.Protected=function(e,t,n){var r=f(e,t,n);return a[e]=t,o[e]=r,r},t.GetProperties=function(){return l};function f(e,t,n){if(!n)return t;s[e]=t;function r(){return s[e](arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15],arguments[16],arguments[17],arguments[18],arguments[19])}return r}t.GetPublics=function(){return i},t.GetProtecteds=function(){return o},c.apply(null,arguments)}function Tf(){var e,t=this;function n(t){e=t}t.Public=function(t,n){var i=r(t,n);return e.Public(t,i),i},t.Protected=function(t,n){var i=r(t,n);return e.Protected(t,i),i},t.Private=function(e,t){var n=r(e,t);return n};function r(t,n){e.GetProperties()[t]=n;function r(n){if(void 0===n)return e.GetProperties()[t];e.GetProperties()[t]=n}return r}n.apply(null,arguments)}function Cf(){var e;function t(t){e=t}function n(e){function t(){throw"["+e+"] is pure virtual and must be overriden"}return t}this.Public=function(t,r){return r=r?r:n(t),e.Public(t,r,!0)},this.Protected=function(t,r){return r=r?r:n(t),e.Protected(t,r,!0)},t.apply(null,arguments)}o.register("inArrayFunc").dependencies("ArrayUtils").asFunction(function(e){return e.inArray}),o.register("ArrayUtils").asCtor(bf);function bf(){var e=this;e.max=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o>r&&(r=o,n=e[i])}}return n},e.min=function(e,t){var n=null;if(e.length>0){var r=t(e[0]);n=e[0];for(var i=1;i<e.length;i++){var o=t(e[i]);o<r&&(r=o,n=e[i])}}return n},e.foreach=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},e.reduce=function(e,t,n){var r=t;return foreach(e,function(e){r=n(r,e)}),r},e.filter=function(e,t){for(var n=new Array,r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n},e.inArray=function(e,t,n){var r;if(t)for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n;return-1},e.map=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r]));return n},e.shuffle=function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var r=e[n];e[n]=e[t],e[t]=r}return e}}o.register("StaticUtils").asCtor(If);function If(){var e=this;e.secureEvalJSON=_f}function wf(e){if(null!==e&&kf(e,function(e){try{e.toJSON&&(e.toJSON=null)}catch(t){}}),Af())return JSON.stringify(e);if(null===e)return"null";var t=typeof e;if("undefined"===t)return;if("number"===t||"boolean"===t)return""+e;if("string"===t)return Wf(e);if("object"===t){if("function"==typeof e.toJSON)return wf(e.toJSON());if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds(),u=e.getUTCMilliseconds();
return n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),u<100&&(u="0"+u),u<10&&(u="0"+u),'"'+i+"-"+n+"-"+r+"T"+o+":"+a+":"+s+"."+u+'Z"'}if(e.constructor===Array){for(var l=[],c=0;c<e.length;c++)l.push(wf(e[c])||"null");return"["+l.join(",")+"]"}var d,p,g=[];for(var f in e){if(t=typeof f,"number"===t)d='"'+f+'"';else{if("string"!==t)continue;d=Wf(f)}if(t=typeof e[f],"function"===t||"undefined"===t)continue;p=wf(e[f]),g.push(d+":"+p)}return"{"+g.join(",")+"}"}}function _f(e){if(Pf())return JSON.parse(e);var t=e.toString().replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(t))return _makeTutorialEv.Ev("("+e+")");throw new SyntaxError("Error parsing JSON, source is not valid.")}function Pf(){if("object"!=typeof JSON)return!1;if(!JSON.parse)return!1;if(!Of(JSON.parse))return!1;return!0}function Af(){if("object"!=typeof JSON)return!1;if(!JSON.stringify)return!1;if(!Of(JSON.stringify))return!1;return!0}function kf(e,t){if(void 0!=e&&"object"==typeof e)for(var n in e)if(Object.hasOwnProperty.call(e,n)){var r=e[n];null!==r&&void 0!==r&&kf(r,t)}null!==e&&void 0!==e&&t(e)}function Of(e){return e.toString().indexOf("[native code]")>-1}function Df(e){return _f(wf(e))}function Nf(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=new RegExp("\\{"+(t-1)+"\\}","gm");e=e.replace(n,arguments[t]||"")}return e}function xf(e,t,n){var r,i,o,a,s,u=e,l=u.length,c=l>>>0;if("function"!=typeof t)throw new TypeError;if(0===c&&void 0===n)throw new TypeError;if(r=0,void 0!==n)i=n;else{for(o=!1;!o&&r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(i=u[a]),r+=1;if(!o)throw new TypeError}for(;r<c;)a=r.toString(),o=u.hasOwnProperty(a),o&&(s=u[a],i=t.call(void 0,i,s,r,u)),r+=1;return i}function Lf(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return e.getTime()-t}function Mf(e){return Ff(e)}function Ff(e){return o.get("DictionaryUtils").getDictionaryValues(e)}function Rf(e,t){for(var n=e.length-1;n>=0;n--){for(var r=!1,i=t.length-1;i>=0&&!r;i--)t[i]==e[n]&&(r=!0);r||t.push(e[n])}return t}var Bf=/["\\\x00-\x1f\x7f-\x9f]/g,Uf={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function Wf(e){if(e.match(Bf))return'"'+e.replace(Bf,function(e){var t=Uf[e];if("string"==typeof t)return t;return t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"';return'"'+e+'"'}var Vf=o.get("ArrayUtils").map;o.register("GeneralUtils").dependencies("DictionaryUtils").asFunction(function(e){return{getDictionaryKeys:e.getDictionaryKeys,reduce:xf,map:Vf}});var Gf=function(){function e(e,t){this.parent=e,this.key=t,this.children=[],this.templateIndex=null,this.links=[]}e.prototype.follow=function(t){return t in this.children?this.children[t]:(this.children[t]=new e(this,t),this.children[t])};function t(e,n){var r,i,o,s;if(null!==n&&"object"==typeof n)if(a(n))for(r=[],i=0;i<n.length;i++)r.push(t(e,n[i]));else{s=e,r={"":[]};for(o in n)Object.hasOwnProperty.call(n,o)&&(s=s.follow(o),r[""].push(t(e,n[o])));s.links.push(r)}else r=n;return r}function n(e){var t,n,r,i,o,a,s=[],u=[];e.templateIndex=0;for(o in e.children)Object.hasOwnProperty.call(e.children,o)&&u.push(e.children[o]);for(;u.length>0;){t=u.shift(),a=0;for(o in t.children)Object.hasOwnProperty.call(t.children,o)&&(u.push(t.children[o]),a+=1);if(a>1||t.links.length>0){for(n=[],r=t;null===r.templateIndex;)n.unshift(r.key),r=r.parent;for(n.unshift(r.templateIndex),s.push(n),t.templateIndex=s.length,i=0;i<t.links.length;i++)t.links[i][""].unshift(t.templateIndex)}}return s}function r(r){var i,o,a;return i=new e(null,""),a=t(i,r),o=n(i),o.length>0?wf({f:"cjson",t:o,v:a},null,null):wf(r)}function i(e,t){for(var n=[];t>0;)n=e[t-1].slice(1).concat(n),t=e[t-1][0];return n}function o(e,t){var n,r,s;if(null!==t&&"object"==typeof t)if(a(t))for(n=[],r=0;r<t.length;r++)n.push(o(e,t[r]));else for(n={},s=i(e,t[""][0]),r=0;r<s.length;r++){var u=o(e,t[""][r+1]);null!==u&&void 0!==u&&(n[s[r]]=u)}else n=t;return n}function a(e){return"undefined"!=typeof Array&&Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){var t=_f(e);if(null===t||"object"!=typeof t||!("f"in t)||"cjson"!==t.f)return t;return o(t.t,t.v)}return{stringify:r,parse:s}}();o.register("WalkmeLoadTimeManager").asCtor(Hf).dependencies("WmInternals");function Hf(e){var t=this;t.init=r,t.getWalkmeLoadTime=o;var n;function r(){i(),e.bind("NewWalkMeLoadTime",i)}function i(){n=(new Date).getTime()}function o(){return n}}o.register("WalkmeInternalsPersistWhitelist").asInstance(["removeWalkMeReason","localLib","localJQuery","dbgr"]),o.register("wmjQuery").asInstance(e),o.get("SimpleNLP").setJQuery(e),o.register("WmInternals").asInstance(t),o.register("Mustache").asInstance(Sf),o.register("CJson").asInstance(Gf),o.register("Lib").asInstance(n),o.register("win").asInstance(window),o.register("requestAnimationFrame").asInstance(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||!1),o.register("cancelAnimationFrame").asInstance(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||!1);function jf(){o.get("LibCtorService").init()}t.addTimeStamp&&t.addTimeStamp("libStartInit"),jf.apply(null,arguments)}window._makeTutorialEv={Ev:function(src){return eval(src)}},void 0==window._makeTutorial&&(window._walkMe=window._makeTutorial=new ClassMakeTutorial(window.wmjQuery,window._walkmeInternals),_makeTutorial.initFailed&&(window._walkMe=window._makeTutorial=void 0)),window._makeTutorial&&void 0==window.WalkMeAPI&&(window.WalkMeAPI=window._walkmeInternals.ctx.get("ClassWalkMeAPI")),_walkmeInternals.addTimeStamp&&_walkmeInternals.addTimeStamp("libCodeEnd");