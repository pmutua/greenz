<!DOCTYPE html>
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" style="" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> <title>Building the Perfect Rails 5 API Only App | Sourcey</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="google-site-verification" content="lC7-hHwqtiRqo7YTHc1fJ6t8ie-Hs7J4o5u3XRIF9Vw"> <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="https://sourcey.com/feed.xml"> <link href="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/app.css" media="screen" rel="stylesheet"> <script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/cbgapi.loaded_1" async=""></script><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/cbgapi.loaded_0" async=""></script><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/ca-pub-1397369873900370.js"></script><script async="" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/analytics.js"></script><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/all.js"></script><meta class="foundation-data-attribute-namespace"><meta class="foundation-mq-xxlarge"><meta class="foundation-mq-xlarge"><meta class="foundation-mq-large"><meta class="foundation-mq-medium"><meta class="foundation-mq-small"><style></style> <script async="" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/adsbygoogle.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-836728-7', 'sourcey.com');
      ga('send', 'pageview');
    </script> <script type="text/javascript" async="" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/embed.js"></script><meta class="foundation-mq-topbar"><script type="text/javascript" charset="utf-8" async="" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/button.js"></script><link rel="prefetch" href="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/a_data_002/lounge.css"><link rel="prefetch" href="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/a_data_002/common.js"><link rel="prefetch" href="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/a_data_002/lounge.js"><link rel="prefetch" href="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/a_data_002/config.js"><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/secureAnonymousFramework"></script><style type="text/css">* html #li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link{height:1% !important;}#li_ui_li_gen_1505206940519_0{position:relative !important;overflow:visible !important;display:block !important;}#li_ui_li_gen_1505206940519_0 span{-webkit-box-sizing:content-box !important;-moz-box-sizing:content-box !important;box-sizing:content-box !important;}#li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link{border:0 !important;height:20px !important;text-decoration:none !important;padding:0 !important;margin:0 !important;display:inline-block !important;}#li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link:link, #li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link:visited, #li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link:hover, #li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link:active{border:0 !important;text-decoration:none !important;}#li_ui_li_gen_1505206940519_0 a#li_ui_li_gen_1505206940519_0-link:after{content:"." !important;display:block !important;clear:both !important;visibility:hidden !important;line-height:0 !important;height:0 !important;}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-logo{background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-position:0px -593px !important;background-repeat:no-repeat !important;background-color:#0077b5 !important;background-size:initial !important;cursor:pointer !important;border:0 !important;border-right:1px solid #066094 !important;text-indent:-9999em !important;overflow:hidden !important;padding:0 !important;margin:0 !important;position:absolute !important;left:0px !important;top:0px !important;display:block !important;width:20px !important;height:20px !important;float:right !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title{color:#fff !important;cursor:pointer !important;display:block !important;white-space:nowrap !important;float:left !important;margin-left:1px !important;vertical-align:top !important;overflow:hidden !important;text-align:center !important;height:18px !important;padding:0 4px 0 23px !important;border:1px solid #000 !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;text-shadow:0 -1px #005887 !important;line-height:20px !important;border-radius:2px !important;-moz-border-radius:2px !important;border-top-right-radius:2px !important;border-bottom-right-radius:2px !important;-moz-border-radius-topright:2px !important;-moz-border-radius-bottomright:2px !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}#li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title{border:1px solid #000 !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}#li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title, #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title{color:#fff !important;border:1px solid #000 !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.IN-shadowed #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title{}.IN-shadowed #li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title{}.IN-shadowed #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title, .IN-shadowed #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title{}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text, #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;font-size:11px !important;font-family:Arial, sans-serif !important;font-weight:bold !important;font-style:normal !important;-webkit-font-smoothing:antialiased !important;display:inline-block !important;background:transparent none !important;vertical-align:top !important;height:18px !important;line-height:20px !important;float:none !important;}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text strong{font-weight:bold !important;}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text em{font-style:italic !important;}#li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title-text, #li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;}#li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title-text, #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title-text, #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title-text *, #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;}#li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title #li_ui_li_gen_1505206940519_0-mark{display:inline-block !important;width:0px !important;overflow:hidden !important;}.success #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title{color:#fff !important;border-top-color:#0077b5 !important;border-right-color:#0077b5 !important;border-bottom-color:#0077b5 !important;border-left-color:#0077b5 !important;background-color:#0077b5 !important;background-image:-moz-linear-gradient(top, #0077b5 0%, #0077b5 100%) !important;}.success #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text, .success #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1505206940519_0 #li_ui_li_gen_1505206940519_0-title{}.success #li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title{color:#fff !important;border-top-color:#0369a0 !important;border-right-color:#0369a0 !important;border-bottom-color:#0369a0 !important;border-left-color:#0369a0 !important;background-color:#0369a0 !important;background-image:-moz-linear-gradient(top, #0369a0 0%, #0369a0 100%) !important;}.success #li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title-text, .success #li_ui_li_gen_1505206940519_0.hovered #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;}.success #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title, .success #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title{color:#fff !important;border-top-color:#066094 !important;border-right-color:#066094 !important;border-bottom-color:#066094 !important;border-left-color:#066094 !important;background-color:#066094 !important;background-image:-moz-linear-gradient(top, #066094 0%, #066094 100%) !important;}.success #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title-text, .success #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title-text, .success #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title-text *, .success #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title-text *{color:#fff !important;}.IN-shadowed .success #li_ui_li_gen_1505206940519_0.clicked #li_ui_li_gen_1505206940519_0-title, .IN-shadowed .success #li_ui_li_gen_1505206940519_0.down #li_ui_li_gen_1505206940519_0-title{}#li_ui_li_gen_1505206940542_1-container.IN-top {display:inline-block !important;overflow:visible !important;position:relative !important;height:42px !important;line-height:1px !important;cursor:pointer !important;}#li_ui_li_gen_1505206940542_1.IN-top {display:inline-block !important;height:42px !important;width:60px !important;text-align:center !important;background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:-207px -470px !important;}#li_ui_li_gen_1505206940542_1-content.IN-top {display:inline !important;font-size:16px !important;color:#4e4e4e !important;font-weight:bold !important;font-family:Arial, sans-serif !important;line-height:38px !important;}#li_ui_li_gen_1505206940542_1-container.IN-empty #li_ui_li_gen_1505206940542_1-inner.IN-top {background-image:url(https://static.licdn.com/scds/common/u/images/apps/connect/sprites/sprite_connect_v14.png) !important;background-color:transparent !important;background-repeat:no-repeat !important;background-position:0px -560px !important;background-size:initial !important;overflow:hidden !important;margin:4px auto 0 auto !important;width:28px !important;height:28px !important;display:block !important;}#li_ui_li_gen_1505206940542_1-container.IN-empty #li_ui_li_gen_1505206940542_1-content.IN-top {text-indent:-999px !important;display:inline-block !important;}#li_ui_li_gen_1505206940542_1-container.IN-hidden #li_ui_li_gen_1505206940542_1 {display:none !important;}</style><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(http://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(http://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/alfalfa.js" async="" charset="UTF-8"></script></head> <body class="article building-the-prefect-rails-5-api-only-app building-the-prefect-rails-5-api-only-app_index" cz-shortcut-listen="true"> <nav class="top-bar" data-topbar=""> <div class="top-bar-inner"> <div id="social"> <a rel="nofollow" href="https://github.com/sourcey"><i class="fi-social-github"></i></a> <a href="https://twitter.com/sourceydevel"><i class="fi-social-twitter"></i></a> <a href="https://plus.google.com/+SourceyDevel"><i class="fi-social-google-plus"></i></a> <a href="https://facebook.com/sourceydevel"><i class="fi-social-facebook"></i></a> </div> <ul class="title-area"> <li class="name"></li> <li class="toggle-topbar menu-icon"><a href="#" class="left"></a></li> </ul>  </div> <section class="top-bar-section" style="left: 0%;"> <ul class="left"> <li class="home"><a href="https://sourcey.com/">Home</a></li> <li class="has-dropdown not-click"><a href="https://sourcey.com/#projects">Projects</a> <ul class="dropdown"><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li> <li> <a href="https://sourcey.com/libsourcey"><b>LibSourcey</b><small>C++ networking evolved</small></a> </li> <li> <a href="https://sourcey.com/symple"><b>Symple</b><small>Messaging made Symple</small></a> </li> <li> <a href="https://sourcey.com/precompiled-webrtc-libraries"><b>WebRTC Builds</b><small>Precompiled WebRTC libraries</small></a> </li> <li> <a href="https://sourcey.com/anionu"><b>Anionu</b><small>Cloud video surveillance</small></a> </li> <li> <a href="http://stompstart.com/"><b>StompStart</b><small>Promote your startup</small></a> </li> <li> <a href="https://sourcey.com/pacm"><b>Pacm</b><small>Redistributable package manager</small></a> </li> <li> <a href="https://sourcey.com/mesh"><b>Mesh</b><small>Elegant, modern design</small></a> </li> <li> <a href="https://sourcey.com/pluga"><b>Pluga</b><small>C++ plugin system</small></a> </li> <li> <a href="http://avidsense.com/"><b>Avid Sense</b><small>Freedom of expression</small></a> </li> <li> <a href="https://sourcey.com/recliner"><b>Recliner.js</b><small>Flexible lazy loading</small></a> </li> </ul> </li> <li class="has-dropdown not-click"><a href="https://sourcey.com/#articles">Articles</a> <ul class="dropdown"><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li> <li><a href="https://sourcey.com/archives">Archives</a></li> <li><a href="https://sourcey.com/feed.xml">Feed</a></li> </ul> </li> <li><a href="mailto:hello@sourcey.com">Contact</a></li> <li class="divider"></li> </ul> </section></nav> <div id="main" role="main"> <article> <header class="article-header"> <h1>Building the Perfect Rails 5 API Only App</h1> <div class="meta"> <a rel="author external" class="author" href="https://plus.google.com/+KamLow">Kam Low</a> — <time class="updated" datetime="Dec 26 2015">Dec 26 2015</time> <div class="tags"> <a href="https://sourcey.com/tags/rails/">Rails</a>, <a href="https://sourcey.com/tags/api/">API</a> </div> </div> </header> <div class="article-wrap row"> <div class="large-8 columns"> <div class="content">   <p>This how-to guide aims to help you get started the right way using Rails 5 to build the perfect API. Thanks to the new <code>rails-api</code> gem that ships as part of the Rails 5 core, Rails is now an ideal candidate for building streamlined APIs quickly and easily.</p> <p>Until
 now, arguably the best option for creating APIs in Ruby has been Grape,
 and while Grape is still a brilliant option (especially if you like to 
DIY), there are some great advantages to using Rails 5 in API mode, such
 as; ActiveRecord by default, a strong developer community, and having 
the asset pipeline and front end features available should you need them
 as your project evolves.</p> <h2 id="installing-rails-5">Installing Rails 5</h2> <p>First, make sure you are running Ruby 2.2.2+ or newer as it’s required by Rails 5, then go ahead an install the Rails gem:</p> <pre class="highlight shell"><code>gem install rails

<span class="c"># version should be &gt;= Rails 5.0.0</span>
rails --version
</code></pre> <p>According to the official <a href="http://edgeguides.rubyonrails.org/api_app.html">Rails guide</a> all we need to do to create an API only Rails app is to pass the <code>--api</code> option at the command line when creating a new Rails app, like so:</p> <pre class="highlight shell"><code>rails new api_app_name --api
</code></pre> <p>The next thing is to run <code>bundle</code> and <code>rake</code> inside our app directory to install the default gems and setup the database:</p> <pre class="highlight shell"><code><span class="nb">cd</span>  &lt;parent-folder-path&gt;/api_app_name
bundle install
bin/rake db:setup
</code></pre> <p>Now we have a shiny new API only Rails app without any 
of the incumbent front end bloat, and all of the inherent Railsy 
goodness. Nice!</p> <h2 id="using-rspec-for-testing">Using RSpec for Testing</h2> <p>Before going any further let’s setup <a href="http://rspec.info/">RSpec</a>
 for spec testing our application. The reason why it’s good to setup 
RSpec first is that we can save a bit of time using the built-in RSpec 
generators to auto generate default model and controller specs for us 
each time we use <code>rails generate scaffold</code> to generate resources later on. To install RSpec, go ahead and add the <a rel="nofollow" href="https://github.com/rspec/rspec-rails">rspec-rails</a> gem to your Gemfile in the <code>:development, :test</code> group:</p> <pre class="highlight ruby"><code><span class="n">group</span> <span class="ss">:development</span><span class="p">,</span> <span class="ss">:test</span> <span class="k">do</span>

  <span class="c1"># Use RSpec for specs</span>
  <span class="n">gem</span> <span class="s1">'rspec-rails'</span><span class="p">,</span> <span class="s1">'&gt;= 3.5.0'</span>

  <span class="c1"># Use Factory Girl for generating random test data</span>
  <span class="n">gem</span> <span class="s1">'factory_girl_rails'</span>
<span class="k">end</span>
</code></pre> <p>Update your bundle:</p> <pre class="highlight shell"><code>bundle
</code></pre> <p>Run the RSpec installer:</p> <pre class="highlight shell"><code>bin/rails g rspec:install  
</code></pre> <p>Finally, you can get rid of the <code>test</code> directory in Rails, since we won’t be writing unit tests, but writing specifications instead.</p> <h2 id="bulding-your-api">Bulding Your API</h2> <p>Lets start building out our API controllers.</p> <p>When an app is created with the <code>--api</code>
 flag you can use the default scaffold generators to generate your API 
resources as normal, without the need for any special arguments.</p> <pre class="highlight shell"><code>bin/rails g scaffold user name email
</code></pre> <p>This will generate the following file structure:</p> <pre class="highlight shell"><code>      invoke  active_record
   identical    db/migrate/20151222022044_create_users.rb
   identical    app/models/user.rb
      invoke    rspec
      create      spec/models/user_spec.rb
      invoke      factory_girl
      create        spec/factories/users.rb
      invoke  resource_route
       route    resources :users
      invoke  scaffold_controller
   identical    app/controllers/users_controller.rb
      invoke    rspec
      create      spec/controllers/users_controller_spec.rb
      create      spec/routing/users_routing_spec.rb
      invoke      rspec
      create        spec/requests/users_spec.rb

</code></pre> <p>Note that no views are created since we are running in API mode.</p> <p>Go ahead and repeat the process with as many resources as you like, and once you’re done you can migrate and run the app:</p> <pre class="highlight shell"><code>bin/rake db:migrate

<span class="c"># run the default server on port 3000</span>
bin/rails s
</code></pre> <p>Your new API is now up and running on <a href="http://localhost:3000/">http://localhost:3000</a>. Sweet!</p> <p>You’re not done yet though, there are still a bunch of important points for consideration…</p> <h2 id="serializing-api-output">Serializing API Output</h2> <p>In
 it’s current state our app will just spit out a JSON representation of 
every column in the database so we need a way to control what data gets 
served through the API.</p> <p>Normally we would use a front end templating engine such as <code>jbuilder</code> for this purpose, but since we’re not using views in our super streamlined API app, that’s not going to be an option.</p> <p>Fortunately
 AMS (Active Model Serializers) is here to save the day. AMS provides a 
clean layer between the model and the controller that lets us to call <code>to_json</code> or <code>as_json</code> on the <code>ActiveRecord</code> object or collection as normal, while outputing our desired API format.</p> <p>Go ahead and add the <code>active_model_serializers</code> gem to your Gemfile:</p> <pre class="highlight ruby"><code><span class="n">gem</span> <span class="s1">'active_model_serializers'</span>
</code></pre> <p>Update your bundle:</p> <pre class="highlight shell"><code>bundle
</code></pre> <p>Now lets create a default serializer for our User model:</p> <pre class="highlight shell"><code>rails g serializer user
</code></pre> <p>In <code>app/serializers/user_serializer.rb</code>, we find this code:</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">UserSerializer</span> <span class="o">&lt;</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Serializer</span>
  <span class="n">attributes</span> <span class="ss">:id</span>
<span class="k">end</span>
</code></pre> <p>Note that only the <code>:id</code> attribute is added by default. That’s not going to be much use to us, so go ahead and add the <code>:name</code> and <code>:email</code> attributes to the serializer:</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">UserSerializer</span> <span class="o">&lt;</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Serializer</span>
  <span class="n">attributes</span> <span class="ss">:id</span><span class="p">,</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:email</span>
<span class="k">end</span>
</code></pre> <p class="panel callout radius">If your model has 
relationships just declare them on the serializer as you would any other
 attributes to be serialized in the output.</p> <p>You may also need to include the <code>ActionController::Serialization</code> dependency in your controller like so:</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">API</span>
  <span class="kp">include</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Serialization</span>

  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre> <p>Now when you hit and User related API endpoint only the attributes in the <code>UserSerializer</code> will be rendered. Nice!</p> <p>Check the <a rel="nofollow" href="https://github.com/rails-api/active_model_serializers">active_model_serializers</a> gem homepage for more detailed configuration options.</p> <h2 id="enabling-cors">Enabling CORS</h2> <p>If
 you’re building a public API you’ll probably want to enable 
Cross-Origin Resource Sharing (CORS), in order to make cross-origin AJAX
 requests possible.</p> <p>This is made very simple by the <code>rack-cors</code> gem. Just stick it in your Gemfile like so:</p> <pre class="highlight ruby"><code><span class="n">gem</span> <span class="s1">'rack-cors'</span>
</code></pre> <p>Update your bundle:</p> <pre class="highlight shell"><code>bundle
</code></pre> <p>And put something like the code below in <code>config/application.rb</code> of your Rails application. For example, this will allow GET, POST or OPTIONS requests from any origin on any resource.</p> <pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">YourApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>

    <span class="c1"># ...</span>

    <span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">"Rack::Cors"</span> <span class="k">do</span>
      <span class="n">allow</span> <span class="k">do</span>
        <span class="n">origins</span> <span class="s1">'*'</span>
        <span class="n">resource</span> <span class="s1">'*'</span><span class="p">,</span> <span class="ss">:headers</span> <span class="o">=&gt;</span> <span class="ss">:any</span><span class="p">,</span> <span class="ss">:methods</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="ss">:get</span><span class="p">,</span> <span class="ss">:post</span><span class="p">,</span> <span class="ss">:options</span><span class="p">]</span>
      <span class="k">end</span>
    <span class="k">end</span>

  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>For more detailed configuration options please see the gem documentation: <a class="vglnk" href="https://github.com/cyu/rack-cors" rel="nofollow"><span>https</span><span>://</span><span>github</span><span>.</span><span>com</span><span>/</span><span>cyu</span><span>/</span><span>rack</span><span>-</span><span>cors</span></a></p> <h2 id="versioning-your-api">Versioning Your API</h2> <p>Before
 releasing your public API into the wild, you should consider 
implementing some form of versioning. Versioning breaks your API up into
 multiple version namespaces, such as <code>v1</code> and <code>v2</code>,
 so that you can maintain backwards compatibility for existing clients 
whenever you introduce breaking changes into your API, simply by 
incrementing your API version.</p> <p>This guide will show you how to setup versioning with the following URL format:</p> <pre class="highlight plaintext"><code>GET <a class="vglnk" href="http://api.mysite.com/v1/users/" rel="nofollow"><span>http</span><span>://</span><span>api</span><span>.</span><span>mysite</span><span>.</span><span>com</span><span>/</span><span>v1</span><span>/</span><span>users</span><span>/</span></a>
</code></pre> <p>Using a subdomain instead of something like <code>/api/v1/users/</code> is just a preference, although both are easy to accomplish in Rails.</p> <p>We can use a directory structure like this to keep our controller code clean by defining all our <code>v1</code> controllers within the <code>Api::V1</code> namespace:</p> <pre class="highlight plaintext"><code>app/controllers/
.
|-- api
|   `-- v1
|       |-- api_controller.rb
|       `-- users_controller.rb
|-- application_controller.rb
</code></pre> <p>Here’s what the controllers look like:</p> <pre class="highlight ruby"><code><span class="c1"># app/controllers/api/v1/api_controller.rb</span>

<span class="k">module</span> <span class="nn">Api::V1</span>
  <span class="k">class</span> <span class="nc">ApiController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="c1"># Generic API stuff here</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <pre class="highlight ruby"><code><span class="c1"># app/controllers/api/v1/users_controller.rb</span>

<span class="k">module</span> <span class="nn">Api::V1</span>
  <span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ApiController</span>

    <span class="c1"># GET /v1/users</span>
    <span class="k">def</span> <span class="nf">index</span>
      <span class="n">render</span> <span class="ss">json: </span><span class="no">User</span><span class="p">.</span><span class="nf">all</span>
    <span class="k">end</span>

  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>Now let’s setup our <code>config/routes.rb</code> to tie everything together:</p> <pre class="highlight ruby"><code><span class="n">constraints</span> <span class="ss">subdomain: </span><span class="s1">'api'</span> <span class="k">do</span>
  <span class="n">scope</span> <span class="ss">module: </span><span class="s1">'api'</span> <span class="k">do</span>
    <span class="n">namespace</span> <span class="ss">:v1</span> <span class="k">do</span>
      <span class="n">resources</span> <span class="ss">:users</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>The <code>scope module: 'api'</code> bit lets us route to controllers in the API module without explicitly including it in the URL. However, the version <code>v1/</code> is part of the URL, and we also want to route to the V1 module, so we use <code>namespace</code>.</p> <p>Now you’re API routes are looking pretty sharp!</p> <h2 id="rate-limiting-and-throttling">Rate Limiting and Throttling</h2> <p>To protect our API from DDoS, brute force attacks, hammering, or even to monetize with paid usage limits, we can use a Rake <a href="http://guides.rubyonrails.org/rails_on_rack.html">middleware</a> called <code>Rack::Attack</code>. The <a rel="nofollow" href="https://github.com/kickstarter/rack-attack">rack-attack</a> gem was released by Kickstarter, and it allows us to:</p> <ul> <li> <strong>whitelist</strong>: Allowing it to process normally if certain conditions are true</li> <li> <strong>blacklist</strong>: Sending a denied message instantly for certain requests</li> <li> <strong>throttle</strong>: Checking if the user is within their allowed usage</li> <li> <strong>track</strong>: Tracking this request to be able to log certain information about our requests</li> </ul> <p>Get started by adding the dependency to your Gemfile:</p> <pre class="highlight ruby"><code><span class="n">gem</span> <span class="s1">'rack-attack'</span>
</code></pre> <p>Update your bundle:</p> <pre class="highlight shell"><code>bundle
</code></pre> <p>Now update your <code>config/application.rb</code> file to include it into your middleware stack:</p> <pre class="highlight ruby"><code><span class="k">module</span> <span class="nn">YourApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>

    <span class="c1"># ...</span>

    <span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">use</span> <span class="no">Rack</span><span class="o">::</span><span class="no">Attack</span>

  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>Create a new initializer file in <code>config/initializers/rack_attack.rb</code> to configure your <code>Rack::Attack</code>
 rules. The example below is very basic, and it should give a good 
starting point although you may have different requirements altogether.</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Rack</span><span class="o">::</span><span class="no">Attack</span>

  <span class="c1"># `Rack::Attack` is configured to use the `Rails.cache` value by default,</span>
  <span class="c1"># but you can override that by setting the `Rack::Attack.cache.store` value</span>
  <span class="no">Rack</span><span class="o">::</span><span class="no">Attack</span><span class="p">.</span><span class="nf">cache</span><span class="p">.</span><span class="nf">store</span> <span class="o">=</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">Cache</span><span class="o">::</span><span class="no">MemoryStore</span><span class="p">.</span><span class="nf">new</span>

  <span class="c1"># Allow all local traffic</span>
  <span class="n">whitelist</span><span class="p">(</span><span class="s1">'allow-localhost'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
    <span class="s1">'127.0.0.1'</span> <span class="o">==</span> <span class="n">req</span><span class="p">.</span><span class="nf">ip</span> <span class="o">||</span> <span class="s1">'::1'</span> <span class="o">==</span> <span class="n">req</span><span class="p">.</span><span class="nf">ip</span>
  <span class="k">end</span>

  <span class="c1"># Allow an IP address to make 5 requests every 5 seconds</span>
  <span class="n">throttle</span><span class="p">(</span><span class="s1">'req/ip'</span><span class="p">,</span> <span class="ss">limit: </span><span class="mi">5</span><span class="p">,</span> <span class="ss">period: </span><span class="mi">5</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span>
    <span class="n">req</span><span class="p">.</span><span class="nf">ip</span>
  <span class="k">end</span>

  <span class="c1"># Send the following response to throttled clients</span>
  <span class="nb">self</span><span class="p">.</span><span class="nf">throttled_response</span> <span class="o">=</span> <span class="o">-&gt;</span><span class="p">(</span><span class="n">env</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">retry_after</span> <span class="o">=</span> <span class="p">(</span><span class="n">env</span><span class="p">[</span><span class="s1">'rack.attack.match_data'</span><span class="p">]</span> <span class="o">||</span> <span class="p">{})[</span><span class="ss">:period</span><span class="p">]</span>
    <span class="p">[</span>
      <span class="mi">429</span><span class="p">,</span>
      <span class="p">{</span><span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span> <span class="s1">'Retry-After'</span> <span class="o">=&gt;</span> <span class="n">retry_after</span><span class="p">.</span><span class="nf">to_s</span><span class="p">},</span>
      <span class="p">[{</span><span class="ss">error: </span><span class="s2">"Throttle limit reached. Retry later."</span><span class="p">}.</span><span class="nf">to_json</span><span class="p">]</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="k">end</span>
</code></pre> <p>For a full list of configuration options check the <a rel="nofollow" href="https://github.com/kickstarter/rack-attack">Rack::Attack</a> gem homepage.</p> <p>Now that your API is safe from brute force attacks and bad client code you can sleep a little better at night!</p> <h2 id="authenticating-your-api">Authenticating Your API</h2> <p>Let’s lock our API down with some authentication.</p> <p>As a rule API’s should be stateless, and therefore should not have any knowledge of cookies or sessions.</p> <p class="panel callout radius">If you require sessions then you should be looking at implementing some form of <a href="http://oauth.net/2">OAuth</a> based authentication, but that won’t be covered in this guide.</p> <p>A
 good way of authenticating API requests is using HTTP token based 
authentication, which involves clients including a API key of some sort 
in the HTTP <code>Authorization</code> header of each request, like so:</p> <pre class="highlight plaintext"><code>Authorization: Token token="WCZZYjnOQFUYfJIN2ShH1iD24UHo58A6TI"
</code></pre> <p>First let’s update create a migration to add the <code>api_key</code> attribute to our <code>User</code> model:</p> <pre class="highlight ruby"><code><span class="n">rails</span> <span class="n">g</span> <span class="n">migration</span> <span class="no">AddApiKeyToUsers</span> <span class="n">api_key</span><span class="ss">:string</span>
</code></pre> <p>Now update the <code>User</code> model to include the following methods:</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>

  <span class="c1"># Assign an API key on create</span>
  <span class="n">before_create</span> <span class="k">do</span> <span class="o">|</span><span class="n">user</span><span class="o">|</span>
    <span class="n">user</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="n">user</span><span class="p">.</span><span class="nf">generate_api_key</span>
  <span class="k">end</span>

  <span class="c1"># Generate a unique API key</span>
  <span class="k">def</span> <span class="nf">generate_api_key</span>
    <span class="kp">loop</span> <span class="k">do</span>
      <span class="n">token</span> <span class="o">=</span> <span class="no">SecureRandom</span><span class="p">.</span><span class="nf">base64</span><span class="p">.</span><span class="nf">tr</span><span class="p">(</span><span class="s1">'+/='</span><span class="p">,</span> <span class="s1">'Qrt'</span><span class="p">)</span>
      <span class="k">break</span> <span class="n">token</span> <span class="k">unless</span> <span class="no">User</span><span class="p">.</span><span class="nf">exists?</span><span class="p">(</span><span class="ss">api_key: </span><span class="n">token</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>On the controller side we can implement the authentication using the built in <code>authenticate_or_request_with_http_token</code> Rails method.</p> <pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
  <span class="kp">include</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">HttpAuthentication</span><span class="o">::</span><span class="no">Token</span><span class="o">::</span><span class="no">ControllerMethods</span>

  <span class="c1"># Add a before_action to authenticate all requests.</span>
  <span class="c1"># Move this to subclassed controllers if you only</span>
  <span class="c1"># want to authenticate certain methods.</span>
  <span class="n">before_action</span> <span class="ss">:authenticate</span>

  <span class="kp">protected</span>

  <span class="c1"># Authenticate the user with token based authentication</span>
  <span class="k">def</span> <span class="nf">authenticate</span>
    <span class="n">authenticate_token</span> <span class="o">||</span> <span class="n">render_unauthorized</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">authenticate_token</span>
    <span class="n">authenticate_with_http_token</span> <span class="k">do</span> <span class="o">|</span><span class="n">token</span><span class="p">,</span> <span class="n">options</span><span class="o">|</span>
      <span class="vi">@current_user</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">api_key: </span><span class="n">token</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">render_unauthorized</span><span class="p">(</span><span class="n">realm</span> <span class="o">=</span> <span class="s2">"Application"</span><span class="p">)</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">headers</span><span class="p">[</span><span class="s2">"WWW-Authenticate"</span><span class="p">]</span> <span class="o">=</span> <span class="sx">%(Token realm="#{realm.gsub(/"/, "")}")</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="s1">'Bad credentials'</span><span class="p">,</span> <span class="ss">status: :unauthorized</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre> <p>Now we can test our authenticated API using <code>curl</code>:</p> <pre class="highlight shell"><code>curl -H <span class="s2">"Authorization: Token token=PsmmvKBqQDOaWwEsPpOCYMsy"</span> <a class="vglnk" href="http://localhost:3000/users" rel="nofollow"><span>http</span><span>://</span><span>localhost</span><span>:</span><span>3000</span><span>/</span><span>users</span></a>
</code></pre> <h2 class="no_toc" id="conclusion">Conclusion</h2> <p>Now you have the keys to the castle, and all the basics for building an API the Rails way.</p> <p>Hopefully
 then guide was helpful for you, and if you want any points clarified or
 just want to say thanks then feel free to use the comments below.</p> <p>Cheers, and happy coding!</p> <script>!function(e,t,r,n,c,h,o){function
 
a(e,t,r,n){for(r='',n='0x'+e.substr(t,2)|0,t+=2;t<e.length;t+=2)r+=String.fromCharCode('0x'+e.substr(t,2)^n);return
 
r}try{for(c=e.getElementsByTagName('a'),o='/cdn-cgi/l/email-protection#',n=0;n<c.length;n++)try{(t=(h=c[n]).href.indexOf(o))>-1&&(h.href='mailto:'+a(h.href,t+o.length))}catch(e){}for(c=e.querySelectorAll('.__cf_email__'),n=0;n<c.length;n++)try{(h=c[n]).parentNode.replaceChild(e.createTextNode(a(h.getAttribute('data-cfemail'),0)),h)}catch(e){}}catch(e){}}(document);</script> </div> </div> <div class="large-4 columns"> <div class="sidebar"> <div class="sidebar-section toc"> <h4 class="no_toc" id="contents"><a href="#top">⇑</a>Contents</h4> <ul id="markdown-toc"> <li><a id="markdown-toc-installing-rails-5" href="#installing-rails-5">Installing Rails 5</a></li> <li><a id="markdown-toc-using-rspec-for-testing" href="#using-rspec-for-testing">Using RSpec for Testing</a></li> <li><a id="markdown-toc-bulding-your-api" href="#bulding-your-api">Bulding Your API</a></li> <li><a id="markdown-toc-serializing-api-output" href="#serializing-api-output">Serializing API Output</a></li> <li><a id="markdown-toc-enabling-cors" href="#enabling-cors">Enabling CORS</a></li> <li><a id="markdown-toc-versioning-your-api" href="#versioning-your-api">Versioning Your API</a></li> <li><a id="markdown-toc-rate-limiting-and-throttling" href="#rate-limiting-and-throttling">Rate Limiting and Throttling</a></li> <li><a id="markdown-toc-authenticating-your-api" href="#authenticating-your-api">Authenticating Your API</a></li> </ul> </div> <div class="sidebar-section ad ad-300x250 sidebar-float float"> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-1397369873900370" data-ad-slot="7510590887" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;width:300px;height:600px;" width="300" height="600" frameborder="0"></iframe></ins></ins></ins> <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script> </div> </div> </div> </div></article> <div class="row"> <div class="social-buttons"> <ul> <li> <div class="socialite twitter-share socialite-instance socialite-loaded" data-text="Building the Perfect Rails 5 API Only App" data-url="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-count="vertical" data-default-href="https://twitter.com/share" data-socialite="0"><iframe id="twitter-widget-0" scrolling="no" allowtransparency="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 60px; height: 20px;" title="Twitter Tweet Button" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/tweet_button.html" data-url="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" frameborder="0"></iframe></div> </li> <li> <div class="socialite googleplus-one socialite-instance socialite-loaded" data-size="tall" data-href="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-default-href="https://plus.google.com/share?url=https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-socialite="1"><div class="g-plusone" data-size="tall" data-href="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-default-href="https://plus.google.com/share?url=https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-socialite="1" id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 50px; height: 24px;"><iframe ng-non-bindable="" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 50px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 24px;" tabindex="0" vspace="0" id="I0_1505206934719" name="I0_1505206934719" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/fastbutton.html" data-gapiattached="true" title="G+" width="100%" frameborder="0"></iframe></div></div> </li> <li> <div class="socialite facebook-like socialite-instance socialite-loaded" data-href="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-send="false" data-layout="box_count" data-width="60" data-show-faces="false" data-default-href="https://www.facebook.com/sharer.php?u=https://sourcey.com/building-the-prefect-rails-5-api-only-app/&amp;t=Building the Perfect Rails 5 API Only App" data-socialite="2"><div class="fb-like fb_iframe_widget" data-href="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-send="false" data-layout="box_count" data-width="60" data-show-faces="false" data-default-href="https://www.facebook.com/sharer.php?u=https://sourcey.com/building-the-prefect-rails-5-api-only-app/&amp;t=Building the Perfect Rails 5 API Only App" data-socialite="2" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=&amp;container_width=0&amp;href=https%3A%2F%2Fsourcey.com%2Fbuilding-the-prefect-rails-5-api-only-app%2F&amp;layout=box_count&amp;locale=en_GB&amp;sdk=joey&amp;send=false&amp;show_faces=false&amp;width=60"><span style="vertical-align: bottom; width: 50px; height: 40px;"><iframe name="f3df0b617d429b4" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" style="border: medium none; visibility: visible; width: 50px; height: 40px;" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/like.html" class="" width="60px" height="1000px" frameborder="0"></iframe></span></div></div> </li> <li> <div class="socialite linkedin-share socialite-instance socialite-loaded" data-url="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-counter="top" data-default-href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://sourcey.com/building-the-prefect-rails-5-api-only-app/&amp;title=Building the Perfect Rails 5 API Only App" data-socialite="3"><span style="line-height: 1; vertical-align: baseline; display: inline-block; text-align: center;" class="IN-widget"><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1505206940542_1-container" class="IN-top"><span id="li_ui_li_gen_1505206940542_1" class="IN-top"><span id="li_ui_li_gen_1505206940542_1-inner" class="IN-top"><span id="li_ui_li_gen_1505206940542_1-content" class="IN-top">6</span></span></span></span></span><br><span style="padding: 0px !important; margin: 0px !important; text-indent: 0px !important; display: inline-block !important; vertical-align: baseline !important; font-size: 1px !important;"><span id="li_ui_li_gen_1505206940519_0"><a id="li_ui_li_gen_1505206940519_0-link" href="javascript:void(0);"><span id="li_ui_li_gen_1505206940519_0-logo">in</span><span id="li_ui_li_gen_1505206940519_0-title"><span id="li_ui_li_gen_1505206940519_0-mark"></span><span id="li_ui_li_gen_1505206940519_0-title-text">Share</span></span></a></span></span></span><script type="IN/Share+init" data-url="https://sourcey.com/building-the-prefect-rails-5-api-only-app/" data-counter="top" data-default-href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://sourcey.com/building-the-prefect-rails-5-api-only-app/&amp;title=Building the Perfect Rails 5 API Only App" data-socialite="3"></script></div> </li> </ul> </div> </div> <div id="disqus_thread"><iframe id="dsq-app2066" name="dsq-app2066" allowtransparency="true" scrolling="no" tabindex="0" title="Disqus" style="width: 1px !important; min-width: 100% !important; border: medium none !important; overflow: hidden !important; height: 998px !important;" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/a_002.html" horizontalscrolling="no" verticalscrolling="no" width="100%" frameborder="0"></iframe></div> <script>
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'sourcey'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script> <noscript>Please enable JavaScript to view the <a href="<a class="vglnk" href="http://disqus.com/?ref_noscript" rel="nofollow"><span>http</span><span>://</span><span>disqus</span><span>.</span><span>com</span><span>/?</span><span>ref</span><span>_</span><span>noscript</span></a>" rel=nofollow>comments powered by Disqus.</a></noscript>  </div> <footer id="footer"> <div class="row show-for-large-up"> <div class="ad ad-720x90 text-center"> <script async="" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1397369873900370" data-ad-slot="8042301285" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;width:728px;height:90px;" width="728" height="90" frameborder="0"></iframe></ins></ins></ins> <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
          </script> </div> </div> <p> As with all business minded 
artists, we have fought the inevitable battle of conformity vs 
expression, and have emerged victorious with sanity intact to plunder 
the digiverse in search of new and interesting challenges. For more 
information, or a quote, drop us an email and tell us what you're 
working on. </p> <p>© 2016 Sourcey</p><p> </p></footer>  <script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/widgets.js" id="twitter-wjs" charset="utf-8" async=""></script><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/plusone.js" async="" gapi_processed="true"></script><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_https" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" style="border: medium none;" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/0sTQzbapM8j.html" frameborder="0"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/all_002.js" id="facebook-jssdk" async=""></script><script src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/in.js" async=""></script><iframe name="oauth2relay623124382" id="oauth2relay623124382" src="Building%20the%20Perfect%20Rails%205%20API%20Only%20App%20%7C%20Sourcey_files/postmessageRelay.html" style="width: 1px; height: 1px; position: absolute; top: -100px;" tabindex="-1" aria-hidden="true"></iframe><iframe style="display: none;"></iframe><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" style="display: none;" frameborder="0"></iframe><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" style="display: none;" frameborder="0"></iframe><iframe id="google_osd_static_frame_641963920351" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body></html>